<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Lecture 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Lecture 2</h1>
<blockquote>原文：<a href="https://cs50.harvard.edu/r/notes/2/">https://cs50.harvard.edu/r/notes/2/</a></blockquote>

                    

<ul id="markdown-toc">
  <li><a href="#welcome" id="markdown-toc-welcome">Welcome!</a></li>
  <li><a href="#outliers" id="markdown-toc-outliers">Outliers</a></li>
  <li><a href="#logical-expressions" id="markdown-toc-logical-expressions">Logical Expressions</a></li>
  <li><a href="#subsets-with-logical-vectors" id="markdown-toc-subsets-with-logical-vectors">Subsets with Logical Vectors</a></li>
  <li><a href="#subsets-of-data-frames" id="markdown-toc-subsets-of-data-frames">Subsets of Data Frames</a></li>
  <li><a href="#menus" id="markdown-toc-menus">Menus</a></li>
  <li><a href="#escape-characters" id="markdown-toc-escape-characters">Escape Characters</a></li>
  <li><a href="#conditionals" id="markdown-toc-conditionals">Conditionals</a></li>
  <li><a href="#combining-data-sources" id="markdown-toc-combining-data-sources">Combining Data Sources</a></li>
  <li><a href="#summing-up" id="markdown-toc-summing-up">Summing Up</a></li>
</ul>

<h2 id="welcome">Welcome!</h2>

<ul>
  <li data-marker="*">Welcome back to CS50’s Introduction to Programming with R!</li>
  <li data-marker="*">We will learn how to remove portions of data, find specific pieces of data, and how to take different data from different sources and combine them.</li>
</ul>

<h2 id="outliers">Outliers</h2>

<ul>
  <li data-marker="*">In statistics, <em>outliers</em> are data that are outside an expected range.</li>
  <li data-marker="*">Typically, statisticians and data scientists want to identify outliers for special consideration. Sometimes, outliers will want to be removed from a calculation. Other times, you might want to analyze with outliers included.</li>
  <li data-marker="*">To illustrate how we can work with outliers in R, you can create a new file in RStudio by typing <code class="language-plaintext highlighter-rouge">file.create("temps.R")</code> in the R console. Further, you will need to download a file called <code class="language-plaintext highlighter-rouge">temps.RData</code> into your working directory.</li>
  <li data-marker="*">
    <p>To load data, we can write code as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates loading data from an .RData file</span><span class="w">

</span><span class="n">load</span><span class="p">(</span><span class="s2">"temps.RData"</span><span class="p">)</span><span class="w">
</span><span class="n">mean</span><span class="p">(</span><span class="n">temps</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how the <code class="language-plaintext highlighter-rouge">load</code> function loads our data file called <code class="language-plaintext highlighter-rouge">temps.RData</code>. Next, <code class="language-plaintext highlighter-rouge">mean</code> will average this data.</p>
  </li>
  <li data-marker="*">Running this script, you can see the results of this calculation.</li>
  <li data-marker="*">However, as stated before, there are outliers in this underlying data. Let’s discover those.</li>
  <li data-marker="*">Looking at temps overall, as illustrated in the lecture video, we want to be able to directly access these outlier temperatures.</li>
  <li data-marker="*">
    <p>Recall during Week 1 how we <em>indexed into</em> data in a vector. Modify your code as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates identifying outliers by index</span><span class="w">

</span><span class="n">load</span><span class="p">(</span><span class="s2">"temps.RData"</span><span class="p">)</span><span class="w">

</span><span class="n">temps</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="n">temps</span><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w">
</span><span class="n">temps</span><span class="p">[</span><span class="m">7</span><span class="p">]</span><span class="w">

</span><span class="n">temps</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">7</span><span class="p">)]</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how <code class="language-plaintext highlighter-rouge">temps[2]</code> will directly access one of the outlier temperatures. The final line of code takes a <em>subset</em> of the <code class="language-plaintext highlighter-rouge">temps</code> vector, which includes only the elements at the 2nd, 4th, and 7th indexes.</p>
  </li>
  <li data-marker="*">
    <p>As a next step, we can remove the outlier data:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates removing outliers by index</span><span class="w">

</span><span class="n">load</span><span class="p">(</span><span class="s2">"temps.RData"</span><span class="p">)</span><span class="w">
</span><span class="n">no_outliers</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">temps</span><span class="p">[</span><span class="o">-</span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">7</span><span class="p">)]</span><span class="w">

</span><span class="n">mean</span><span class="p">(</span><span class="n">no_outliers</span><span class="p">)</span><span class="w">
</span><span class="n">mean</span><span class="p">(</span><span class="n">temps</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice that the data is loaded. Then, <code class="language-plaintext highlighter-rouge">no_outliers</code> is a new vector which includes only the temperatures that are <em>not</em> outliers. The vector called <code class="language-plaintext highlighter-rouge">temps</code> <em>does</em> still include the outlier data.</p>
  </li>
</ul>

<h2 id="logical-expressions">Logical Expressions</h2>

<ul>
  <li data-marker="*"><em>Logical expressions</em> are means by which to programmatically answer yes and no questions. Logical expressions make use of <em>logical operators</em>, which are used for comparing values.</li>
  <li data-marker="*">
    <p>There are many logical operators you can use in R, including:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">==</span><span class="w">
</span><span class="o">!=</span><span class="w">
</span><span class="o">&gt;</span><span class="w">
</span><span class="o">&gt;=</span><span class="w">
</span><span class="o">&lt;</span><span class="w">
</span><span class="o">&lt;=</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li data-marker="*">For example, you could ask whether 1 is equal to 2 by typing <code class="language-plaintext highlighter-rouge">1 == 2</code> in the R console. The result should be <code class="language-plaintext highlighter-rouge">FALSE</code> (or “no!”). However, <code class="language-plaintext highlighter-rouge">1 &lt; 2</code> should be <code class="language-plaintext highlighter-rouge">TRUE</code> (or “yes!”).</li>
  <li data-marker="*"><em>Logicals</em> are the response provided by a logical expression. Logicals can be <code class="language-plaintext highlighter-rouge">TRUE</code> or <code class="language-plaintext highlighter-rouge">FALSE</code>. These values can alternatively be expressed in a more abbreviated form as <code class="language-plaintext highlighter-rouge">T</code> or <code class="language-plaintext highlighter-rouge">F</code>.</li>
  <li data-marker="*">
    <p>Using logical operators within your code, you can modify your code as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates identifying outliers with logical expressions</span><span class="w">

</span><span class="n">load</span><span class="p">(</span><span class="s2">"temps.RData"</span><span class="p">)</span><span class="w">

</span><span class="n">temps</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w">
</span><span class="n">temps</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w">
</span><span class="n">temps</span><span class="p">[</span><span class="m">3</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how running this code will result in answers in terms of <code class="language-plaintext highlighter-rouge">TRUE</code> and <code class="language-plaintext highlighter-rouge">FALSE</code> in the R console.</p>
  </li>
  <li data-marker="*">
    <p>This code can be further improved as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates comparison operators are vectorized</span><span class="w">

</span><span class="n">load</span><span class="p">(</span><span class="s2">"temps.RData"</span><span class="p">)</span><span class="w">

</span><span class="n">temps</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how running this code will create a <em>logical vector</em> (i.e., a vector of logicals). Each value in the logical vector answers whether its corresponding value is less than 0.</p>
  </li>
  <li data-marker="*">
    <p>To identify the indexes for which some logical expression is true, you can modify your code as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates `which` to return indices for which a logical expression is TRUE</span><span class="w">

</span><span class="n">load</span><span class="p">(</span><span class="s2">"temps.RData"</span><span class="p">)</span><span class="w">

</span><span class="n">which</span><span class="p">(</span><span class="n">temps</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice that now the <em>indexes</em> of the temperatures in the vector that are less than 0 are output to the R console. The function <code class="language-plaintext highlighter-rouge">which</code> takes a logical vector as input and returns the indexes of the values that are <code class="language-plaintext highlighter-rouge">TRUE</code>.</p>
  </li>
  <li data-marker="*">
    <p>When working with outliers, a common desire is to show data that is below or above a threshold. You can accomplish this in your code as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates identifying outliers with compound logical expressions</span><span class="w">

</span><span class="n">load</span><span class="p">(</span><span class="s2">"temps.RData"</span><span class="p">)</span><span class="w">
</span><span class="n">temps</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">temps</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">60</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice that the character <code class="language-plaintext highlighter-rouge">|</code> symbolizes <em>or</em> in the expression. This logical expression will be <code class="language-plaintext highlighter-rouge">TRUE</code> for any value in <code class="language-plaintext highlighter-rouge">temps</code> that is less than <code class="language-plaintext highlighter-rouge">0</code> <em>or</em> greater than <code class="language-plaintext highlighter-rouge">60</code>.</p>
  </li>
  <li data-marker="*">
    <p>In addition to the logical operators we discussed earlier, we now add two new ones to our vocabulary:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">|</span><span class="w">
</span><span class="o">&amp;</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how the capability of expressing <em>or</em> and <em>and</em> are provided.</p>
  </li>
  <li data-marker="*">
    <p>You can further improve your code as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates `any` and `all` to test for outliers</span><span class="w">

</span><span class="n">load</span><span class="p">(</span><span class="s2">"temps.RData"</span><span class="p">)</span><span class="w">

</span><span class="nf">any</span><span class="p">(</span><span class="n">temps</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">temps</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w">
</span><span class="nf">all</span><span class="p">(</span><span class="n">temps</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">temps</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how <code class="language-plaintext highlighter-rouge">any</code> and <code class="language-plaintext highlighter-rouge">all</code> take logical vectors as input. <code class="language-plaintext highlighter-rouge">any</code> answers the question, “are <em>any</em> of these logical values true?”. <code class="language-plaintext highlighter-rouge">all</code> answers the question “are <em>all</em> of these temperatures true?”.</p>
  </li>
</ul>

<h2 id="subsets-with-logical-vectors">Subsets with Logical Vectors</h2>

<ul>
  <li data-marker="*">
    <p>As illustrated before, we can create a new vector that removes the outliers as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates subsetting a vector with a logical vector</span><span class="w">

</span><span class="n">load</span><span class="p">(</span><span class="s2">"temps.RData"</span><span class="p">)</span><span class="w">
</span><span class="n">filter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">temps</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">temps</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">60</span><span class="w">
</span><span class="n">temps</span><span class="p">[</span><span class="n">filter</span><span class="p">]</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how a new subsetting vector called <code class="language-plaintext highlighter-rouge">filter</code> is created based on a logical expression. Thus, <code class="language-plaintext highlighter-rouge">filter</code> can now be provided to <code class="language-plaintext highlighter-rouge">temps</code> to request only those items in <code class="language-plaintext highlighter-rouge">temps</code> that evaluated as <code class="language-plaintext highlighter-rouge">TRUE</code> in the logical expression.</p>
  </li>
  <li data-marker="*">
    <p>Similarly, the code can be modified to only filter those that are <em>not</em> outliers:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates negating a logical expression with !</span><span class="w">

</span><span class="n">load</span><span class="p">(</span><span class="s2">"temps.RData"</span><span class="p">)</span><span class="w">
</span><span class="n">filter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="o">!</span><span class="p">(</span><span class="n">temps</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">temps</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">60</span><span class="p">)</span><span class="w">
</span><span class="n">temps</span><span class="p">[</span><span class="n">filter</span><span class="p">]</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice the addition of the <code class="language-plaintext highlighter-rouge">!</code> means <em>does not equal</em> or simply <em>not</em>.</p>
  </li>
  <li data-marker="*">
    <p>This negation can be leveraged to remove outliers entirely from the data:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates removing outliers</span><span class="w">
</span><span class="n">load</span><span class="p">(</span><span class="s2">"temps.RData"</span><span class="p">)</span><span class="w">

</span><span class="n">no_outliers</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">temps</span><span class="p">[</span><span class="o">!</span><span class="p">(</span><span class="n">temps</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">temps</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">60</span><span class="p">)]</span><span class="w">
</span><span class="n">save</span><span class="p">(</span><span class="n">no_outliers</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"no_outliers.RData"</span><span class="p">)</span><span class="w">

</span><span class="n">outliers</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">temps</span><span class="p">[</span><span class="n">temps</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">temps</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">60</span><span class="p">]</span><span class="w">
</span><span class="n">save</span><span class="p">(</span><span class="n">outliers</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"outliers.RData"</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how two files are now saved. One excludes the outliers. The other includes the outliers. These files are saved in the working directory.</p>
  </li>
</ul>

<h2 id="subsets-of-data-frames">Subsets of Data Frames</h2>

<ul>
  <li data-marker="*">How can we find a subset of data we are interested in from a dataset?</li>
  <li data-marker="*">Imagine a table of data that logs each chick (a baby chicken!), the feed each chick is fed, and the weight of each chick. You can download <code class="language-plaintext highlighter-rouge">chicks.csv</code> from the lecture source code to see this data.</li>
  <li data-marker="*">
    <p>Closing our previous file in RStudio, let’s create a new file in the R console by typing <code class="language-plaintext highlighter-rouge">file.create("chicks.R")</code>. Ensure you have <code class="language-plaintext highlighter-rouge">chicks.csv</code> in your working directory, then select <code class="language-plaintext highlighter-rouge">chicks.R</code> and write your code as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Reads a CSV of data</span><span class="w">

</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">View</span><span class="p">(</span><span class="n">chicks</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice that <code class="language-plaintext highlighter-rouge">read.csv</code> reads the CSV file into a data frame called <code class="language-plaintext highlighter-rouge">chicks</code>. Then, <code class="language-plaintext highlighter-rouge">chicks</code> is viewed.</p>
  </li>
  <li data-marker="*">
    <p>Looking at the output of the above, notice that there are many <code class="language-plaintext highlighter-rouge">NA</code> values, representing data that is not available. Consider how this may impact a calculation of the average chick weight. Modify your code as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates `mean` calculation with NA values</span><span class="w">

</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">average_weight</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">chicks</span><span class="o">$</span><span class="n">weight</span><span class="p">)</span><span class="w">
</span><span class="n">average_weight</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how running this code will result in an error, as some values are not available to be mathematically evaluated.</p>
  </li>
  <li data-marker="*">
    <p>Missing data is an expected problem within statistics. You, as the programmer, need to make a decision about how to treat missing data. You can calculate the average chick weight while removing <code class="language-plaintext highlighter-rouge">NA</code> values as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates na.rm to remove NA values from mean calculation</span><span class="w">

</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">average_weight</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">chicks</span><span class="o">$</span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">average_weight</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how <code class="language-plaintext highlighter-rouge">na.rm = TRUE</code> will remove all <code class="language-plaintext highlighter-rouge">NA</code> values for the purpose of computing an average with <code class="language-plaintext highlighter-rouge">mean</code>. Per the documentation, <code class="language-plaintext highlighter-rouge">na.rm</code> can be set as <code class="language-plaintext highlighter-rouge">TRUE</code> or <code class="language-plaintext highlighter-rouge">FALSE</code>.</p>
  </li>
  <li data-marker="*">
    <p>Now, let’s figure out how the food each chick eats impacts their weight:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates computing casein average with explicit indexes</span><span class="w">

</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">casein_chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">chicks</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="n">mean</span><span class="p">(</span><span class="n">casein_chicks</span><span class="o">$</span><span class="n">weight</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice that a subset of the <code class="language-plaintext highlighter-rouge">chicks</code> data frame is created by explicitly specifying the appropriate indexes.</p>
  </li>
  <li data-marker="*">
    <p>This is not an efficient way of programming, since we shouldn’t expect our data to never change. How can we modify our code so that it is more flexible? We can use logical expressions to dynamically subset a data frame.</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates logical expression to identify rows with casein feed</span><span class="w">

</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">

</span><span class="n">chicks</span><span class="o">$</span><span class="n">feed</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"casein"</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how the logical expression identifies whether each value in the feed column is equal to “casein.”</p>
  </li>
  <li data-marker="*">
    <p>We can leverage this logical expression within our code as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates subsetting data frame with logical vector</span><span class="w">

</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">

</span><span class="n">filter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">chicks</span><span class="o">$</span><span class="n">feed</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"casein"</span><span class="w">
</span><span class="n">casein_chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">chicks</span><span class="p">[</span><span class="n">filter</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="n">mean</span><span class="p">(</span><span class="n">casein_chicks</span><span class="o">$</span><span class="n">weight</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>As demonstrated earlier in the lecture, notice how a logical vector called <code class="language-plaintext highlighter-rouge">filter</code> is created. Then, only those rows that are <code class="language-plaintext highlighter-rouge">TRUE</code> in <code class="language-plaintext highlighter-rouge">filter</code> are brought into the data frame <code class="language-plaintext highlighter-rouge">casein_chicks</code>.</p>
  </li>
  <li data-marker="*">We now have a subset of our data frame.</li>
  <li data-marker="*">
    <p>You can accomplish the same result by using the function <code class="language-plaintext highlighter-rouge">subset</code>:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates subsetting with `subset`</span><span class="w">

</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">

</span><span class="n">casein_chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">chicks</span><span class="p">,</span><span class="w"> </span><span class="n">feed</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"casein"</span><span class="p">)</span><span class="w">
</span><span class="n">mean</span><span class="p">(</span><span class="n">casein_chicks</span><span class="o">$</span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>This data frame, called <code class="language-plaintext highlighter-rouge">casein_chicks</code>, is created with the <code class="language-plaintext highlighter-rouge">subset</code> function.</p>
  </li>
  <li data-marker="*">
    <p>Now, one may wish to filter out all <code class="language-plaintext highlighter-rouge">NA</code> values at the start. Consider the following code:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates identifying NA values with `is.na`</span><span class="w">

</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">

</span><span class="nf">is.na</span><span class="p">(</span><span class="n">chicks</span><span class="o">$</span><span class="n">weight</span><span class="p">)</span><span class="w">
</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">chicks</span><span class="o">$</span><span class="n">weight</span><span class="p">)</span><span class="w">

</span><span class="n">chicks</span><span class="o">$</span><span class="n">chick</span><span class="p">[</span><span class="nf">is.na</span><span class="p">(</span><span class="n">chicks</span><span class="o">$</span><span class="n">weight</span><span class="p">)]</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how this code will use <code class="language-plaintext highlighter-rouge">is.na</code> to find <code class="language-plaintext highlighter-rouge">NA</code> values.</p>
  </li>
  <li data-marker="*">
    <p>Records can be entirely removed, leveraging <code class="language-plaintext highlighter-rouge">is.na</code> as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates removing NA values and resetting row names</span><span class="w">

</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">

</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">chicks</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">weight</span><span class="p">))</span><span class="w">
</span><span class="n">rownames</span><span class="p">(</span><span class="n">chicks</span><span class="p">)</span><span class="w">

</span><span class="n">rownames</span><span class="p">(</span><span class="n">chicks</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NULL</span><span class="w">
</span><span class="n">rownames</span><span class="p">(</span><span class="n">chicks</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how this code creates a subset of <code class="language-plaintext highlighter-rouge">chicks</code> where <code class="language-plaintext highlighter-rouge">is.na(weight)</code> is equal to <code class="language-plaintext highlighter-rouge">FALSE</code>. That is, <code class="language-plaintext highlighter-rouge">chicks</code> only includes rows where <code class="language-plaintext highlighter-rouge">NA</code> is not present in the <code class="language-plaintext highlighter-rouge">weight</code> column. If you care about your data frame’s row names, though, be aware that—when you removed certain rows—you also removed those rows’ corresponding <code class="language-plaintext highlighter-rouge">rownames</code>. You can ensure the names of your rows still ascend sequentially by running <code class="language-plaintext highlighter-rouge">rownames(chicks) &lt;- NULL</code>, which resets the names of all of your rows.</p>
  </li>
</ul>

<h2 id="menus">Menus</h2>

<ul>
  <li data-marker="*">In R, you can present users with options. For example, you can offer the user the type of feed they wish to filter for the chicks.</li>
  <li data-marker="*">
    <p>Consider this code:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates interactive program to view data by feed type</span><span class="w">

</span><span class="c1"># Read and clean data</span><span class="w">
</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">chicks</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">weight</span><span class="p">))</span><span class="w">

</span><span class="c1"># Determine feed options</span><span class="w">
</span><span class="n">feed_options</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unique</span><span class="p">(</span><span class="n">chicks</span><span class="o">$</span><span class="n">feed</span><span class="p">)</span><span class="w">

</span><span class="c1"># Prompt user with options</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"1."</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="m">1</span><span class="p">])</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"2."</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="m">2</span><span class="p">])</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"3."</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="m">3</span><span class="p">])</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"4."</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="m">4</span><span class="p">])</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"5."</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="m">5</span><span class="p">])</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"6."</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="m">6</span><span class="p">])</span><span class="w">
</span><span class="n">feed_choice</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.integer</span><span class="p">(</span><span class="n">readline</span><span class="p">(</span><span class="s2">"Feed type: "</span><span class="p">))</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how this code uses <code class="language-plaintext highlighter-rouge">unique</code> to discover the individual unique feed options. Each of these feed options is then outputted with <code class="language-plaintext highlighter-rouge">cat</code>.</p>
  </li>
  <li data-marker="*">This code works in the sense that it shows the various options of feed, but it’s not very well formatted. How can we output the different options on their own line in the R console?</li>
</ul>

<h2 id="escape-characters">Escape Characters</h2>

<ul>
  <li data-marker="*"><em>Escape characters</em> are characters whose output differs from the way you type them.</li>
  <li data-marker="*">For instance, some commonly used escape characters are <code class="language-plaintext highlighter-rouge">\n</code>, which prints a new line, or <code class="language-plaintext highlighter-rouge">\t</code>, which prints a tab.</li>
  <li data-marker="*">
    <p>Leveraging escape characters, we can modify our code as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates \n</span><span class="w">

</span><span class="c1"># Read and clean data</span><span class="w">
</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">chicks</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">weight</span><span class="p">))</span><span class="w">

</span><span class="c1"># Determine feed options</span><span class="w">
</span><span class="n">feed_options</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unique</span><span class="p">(</span><span class="n">chicks</span><span class="o">$</span><span class="n">feed</span><span class="p">)</span><span class="w">

</span><span class="c1"># Prompt user with options</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"1."</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="s2">"\n"</span><span class="p">)</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"2."</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w"> </span><span class="s2">"\n"</span><span class="p">)</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"3."</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="m">3</span><span class="p">],</span><span class="w"> </span><span class="s2">"\n"</span><span class="p">)</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"4."</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="m">4</span><span class="p">],</span><span class="w"> </span><span class="s2">"\n"</span><span class="p">)</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"5."</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="m">5</span><span class="p">],</span><span class="w"> </span><span class="s2">"\n"</span><span class="p">)</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="s2">"6."</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="m">6</span><span class="p">],</span><span class="w"> </span><span class="s2">"\n"</span><span class="p">)</span><span class="w">
</span><span class="n">feed_choice</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.integer</span><span class="p">(</span><span class="n">readline</span><span class="p">(</span><span class="s2">"Feed type: "</span><span class="p">))</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how this outputs all the options of feed on individual lines.</p>
  </li>
  <li data-marker="*">
    <p>While we have the right sort of menu being displayed, we can still improve our code from a design perspective. For example, why should we repeat all of these <code class="language-plaintext highlighter-rouge">cat</code> lines? Simplify your code as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates interactive program to view data by feed type</span><span class="w">

</span><span class="c1"># Read and clean data</span><span class="w">
</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">chicks</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">weight</span><span class="p">))</span><span class="w">

</span><span class="c1"># Determine feed options</span><span class="w">
</span><span class="n">feed_options</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unique</span><span class="p">(</span><span class="n">chicks</span><span class="o">$</span><span class="n">feed</span><span class="p">)</span><span class="w">

</span><span class="c1"># Format feed options</span><span class="w">
</span><span class="n">formatted_options</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">feed_options</span><span class="p">),</span><span class="w"> </span><span class="s2">". "</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">)</span><span class="w">

</span><span class="c1"># Prompt user with options</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="n">formatted_options</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"\n"</span><span class="p">)</span><span class="w">
</span><span class="n">feed_choice</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.integer</span><span class="p">(</span><span class="n">readline</span><span class="p">(</span><span class="s2">"Feed type: "</span><span class="p">))</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how <code class="language-plaintext highlighter-rouge">formatted_options</code> includes all the individual feed options. Each element of this vector of <code class="language-plaintext highlighter-rouge">formatted_options</code> is printed and separated by a new line using <code class="language-plaintext highlighter-rouge">cat(formatted_options, sep = "\n")</code>.</p>
  </li>
  <li data-marker="*">
    <p>Now, as we indicated earlier, our intention is to create an interactive program. Thus, we can now prompt the user with options:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates interactive program to view data by feed type</span><span class="w">

</span><span class="c1"># Read and clean data</span><span class="w">
</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">chicks</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">weight</span><span class="p">))</span><span class="w">

</span><span class="c1"># Determine feed options</span><span class="w">
</span><span class="n">feed_options</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unique</span><span class="p">(</span><span class="n">chicks</span><span class="o">$</span><span class="n">feed</span><span class="p">)</span><span class="w">

</span><span class="c1"># Format feed options</span><span class="w">
</span><span class="n">formatted_options</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">feed_options</span><span class="p">),</span><span class="w"> </span><span class="s2">". "</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">)</span><span class="w">

</span><span class="c1"># Prompt user with options</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="n">formatted_options</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"\n"</span><span class="p">)</span><span class="w">
</span><span class="n">feed_choice</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.integer</span><span class="p">(</span><span class="n">readline</span><span class="p">(</span><span class="s2">"Feed type: "</span><span class="p">))</span><span class="w">

</span><span class="c1"># Print selected option</span><span class="w">
</span><span class="n">selected_feed</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="n">feed_choice</span><span class="p">]</span><span class="w">
</span><span class="n">print</span><span class="p">(</span><span class="n">subset</span><span class="p">(</span><span class="n">chicks</span><span class="p">,</span><span class="w"> </span><span class="n">feed</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">selected_feed</span><span class="p">))</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how the user is prompted with <code class="language-plaintext highlighter-rouge">Feed type: </code>, where a number can be converted to the text-based representation of the feed option. Then, the <code class="language-plaintext highlighter-rouge">feed_choice</code> they selected is assigned to <code class="language-plaintext highlighter-rouge">selected_feed</code>. Finally, the subset corresponding to the <code class="language-plaintext highlighter-rouge">selected_feed</code> is outputted to the user.</p>
  </li>
  <li data-marker="*">However, you can imagine how your user may not behave as expected. For example, if the user inputted <code class="language-plaintext highlighter-rouge">0</code>, which is not a potential choice, the output of our program will be strange. How can we ensure our user inputs the right text?</li>
</ul>

<h2 id="conditionals">Conditionals</h2>

<ul>
  <li data-marker="*"><em>Conditionals</em> are ways to determine <code class="language-plaintext highlighter-rouge">if</code> a condition has been met.</li>
  <li data-marker="*">
    <p>Consider the following code:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates interactive program to view data by feed type</span><span class="w">

</span><span class="c1"># Read and clean data</span><span class="w">
</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">chicks</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">weight</span><span class="p">))</span><span class="w">

</span><span class="c1"># Determine feed options</span><span class="w">
</span><span class="n">feed_options</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unique</span><span class="p">(</span><span class="n">chicks</span><span class="o">$</span><span class="n">feed</span><span class="p">)</span><span class="w">

</span><span class="c1"># Format feed options</span><span class="w">
</span><span class="n">formatted_options</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">feed_options</span><span class="p">),</span><span class="w"> </span><span class="s2">". "</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">)</span><span class="w">

</span><span class="c1"># Prompt user with options</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="n">formatted_options</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"\n"</span><span class="p">)</span><span class="w">
</span><span class="n">feed_choice</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.integer</span><span class="p">(</span><span class="n">readline</span><span class="p">(</span><span class="s2">"Feed type: "</span><span class="p">))</span><span class="w">

</span><span class="c1"># Invalid choice?</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">feed_choice</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">feed_choice</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">feed_options</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">cat</span><span class="p">(</span><span class="s2">"Invalid choice."</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">selected_feed</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="n">feed_choice</span><span class="p">]</span><span class="w">
</span><span class="n">print</span><span class="p">(</span><span class="n">subset</span><span class="p">(</span><span class="n">chicks</span><span class="p">,</span><span class="w"> </span><span class="n">feed</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">selected_feed</span><span class="p">))</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how <code class="language-plaintext highlighter-rouge">if (feed_choice &lt; 1 || feed_choice &gt; length(feed_options))</code> determines if the user’s input falls outside a range of values. If so, the program displays “Invalid choice.” However, there’s still a problem: the program will continue to run, even with that invalid choice.</p>
  </li>
  <li data-marker="*">
    <p><code class="language-plaintext highlighter-rouge">if</code> and <code class="language-plaintext highlighter-rouge">else</code> can be leveraged as follows to only run the final calculation if the user inputs a valid choice:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates interactive program to view data by feed type</span><span class="w">

</span><span class="c1"># Read and clean data</span><span class="w">
</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"chicks.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">chicks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">chicks</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">weight</span><span class="p">))</span><span class="w">

</span><span class="c1"># Determine feed options</span><span class="w">
</span><span class="n">feed_options</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unique</span><span class="p">(</span><span class="n">chicks</span><span class="o">$</span><span class="n">feed</span><span class="p">)</span><span class="w">

</span><span class="c1"># Format feed options</span><span class="w">
</span><span class="n">formatted_options</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">feed_options</span><span class="p">),</span><span class="w"> </span><span class="s2">". "</span><span class="p">,</span><span class="w"> </span><span class="n">feed_options</span><span class="p">)</span><span class="w">

</span><span class="c1"># Prompt user with options</span><span class="w">
</span><span class="n">cat</span><span class="p">(</span><span class="n">formatted_options</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"\n"</span><span class="p">)</span><span class="w">
</span><span class="n">feed_choice</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.integer</span><span class="p">(</span><span class="n">readline</span><span class="p">(</span><span class="s2">"Feed type: "</span><span class="p">))</span><span class="w">

</span><span class="c1"># Invalid choice?</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">feed_choice</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">feed_choice</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">feed_options</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">cat</span><span class="p">(</span><span class="s2">"Invalid choice."</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">selected_feed</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">feed_options</span><span class="p">[</span><span class="n">feed_choice</span><span class="p">]</span><span class="w">
  </span><span class="n">print</span><span class="p">(</span><span class="n">subset</span><span class="p">(</span><span class="n">chicks</span><span class="p">,</span><span class="w"> </span><span class="n">feed</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">selected_feed</span><span class="p">))</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice, that code which is wrapped in <code class="language-plaintext highlighter-rouge">if</code> runs only if there is an invalid choice. That code which is wrapped in <code class="language-plaintext highlighter-rouge">else</code> will run only if the previous condition in <code class="language-plaintext highlighter-rouge">if</code> was not met.</p>
  </li>
</ul>

<h2 id="combining-data-sources">Combining Data Sources</h2>

<ul>
  <li data-marker="*">As a final matter of this lecture, let’s examine how to combine sources of data.</li>
  <li data-marker="*">Imagine a table that represents sales to customers, like Amazon might have.</li>
  <li data-marker="*">You can imagine scenarios where that data is spread across many tables. How can these data be combined from many sources?</li>
  <li data-marker="*">
    <p>Consider the following code called <code class="language-plaintext highlighter-rouge">sales.R</code>:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Reads 4 separate CSVs</span><span class="w">

</span><span class="n">Q1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q1.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q2.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q3.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q4</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q4.csv"</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how each quarter of financial data, such as <code class="language-plaintext highlighter-rouge">Q1</code> and <code class="language-plaintext highlighter-rouge">Q2</code>, is read into their own data frames.</p>
  </li>
  <li data-marker="*">
    <p>Now, let’s combine this data from these four data frames:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Combines data frames with `rbind`</span><span class="w">

</span><span class="n">Q1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q1.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q2.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q3.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q4</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q4.csv"</span><span class="p">)</span><span class="w">

</span><span class="n">sales</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rbind</span><span class="p">(</span><span class="n">Q1</span><span class="p">,</span><span class="w"> </span><span class="n">Q2</span><span class="p">,</span><span class="w"> </span><span class="n">Q3</span><span class="p">,</span><span class="w"> </span><span class="n">Q4</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice that <code class="language-plaintext highlighter-rouge">rbind</code> is used to gather together the data from each of these data frames.</p>
  </li>
  <li data-marker="*">It’s worth mentioning that <code class="language-plaintext highlighter-rouge">rbind</code> is usable in this case because all four data frames are structured the same way.</li>
  <li data-marker="*">The result of the previously run program is that <code class="language-plaintext highlighter-rouge">sales</code> includes each row from each data frame. Instead of showing <code class="language-plaintext highlighter-rouge">Q1</code>, <code class="language-plaintext highlighter-rouge">Q2</code>, etc. for each customer, it simply creates new rows for each line of data at the bottom of the file. Hence, the file becomes longer and longer as more and more data is combined into it. It’s entirely unclear in what quarter each sales value occurred.</li>
  <li data-marker="*">
    <p>Our code can be improved such that a column for the financial quarter is created for each record as follows:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Adds quarter column to data frames</span><span class="w">

</span><span class="n">Q1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q1.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q1</span><span class="o">$</span><span class="n">quarter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Q1"</span><span class="w">

</span><span class="n">Q2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q2.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q2</span><span class="o">$</span><span class="n">quarter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Q2"</span><span class="w">

</span><span class="n">Q3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q3.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q3</span><span class="o">$</span><span class="n">quarter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Q3"</span><span class="w">

</span><span class="n">Q4</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q4.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q4</span><span class="o">$</span><span class="n">quarter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Q4"</span><span class="w">

</span><span class="n">sales</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rbind</span><span class="p">(</span><span class="n">Q1</span><span class="p">,</span><span class="w"> </span><span class="n">Q2</span><span class="p">,</span><span class="w"> </span><span class="n">Q3</span><span class="p">,</span><span class="w"> </span><span class="n">Q4</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how each quarter is added to a specific <code class="language-plaintext highlighter-rouge">quarter</code> column. Thus, when <code class="language-plaintext highlighter-rouge">rbind</code> combines the data frames into <code class="language-plaintext highlighter-rouge">sales</code> with the sales organized by <code class="language-plaintext highlighter-rouge">quarter</code> columns.</p>
  </li>
  <li data-marker="*">
    <p>As a final flourish, let’s add a <code class="language-plaintext highlighter-rouge">value</code> column where high returns and regular returns are noted:</p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Demonstrates flagging sales as high value</span><span class="w">

</span><span class="n">Q1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q1.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q1</span><span class="o">$</span><span class="n">quarter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Q1"</span><span class="w">

</span><span class="n">Q2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q2.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q2</span><span class="o">$</span><span class="n">quarter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Q2"</span><span class="w">

</span><span class="n">Q3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q3.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q3</span><span class="o">$</span><span class="n">quarter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Q3"</span><span class="w">

</span><span class="n">Q4</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"Q4.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">Q4</span><span class="o">$</span><span class="n">quarter</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Q4"</span><span class="w">

</span><span class="n">sales</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rbind</span><span class="p">(</span><span class="n">Q1</span><span class="p">,</span><span class="w"> </span><span class="n">Q2</span><span class="p">,</span><span class="w"> </span><span class="n">Q3</span><span class="p">,</span><span class="w"> </span><span class="n">Q4</span><span class="p">)</span><span class="w">

</span><span class="n">sales</span><span class="o">$</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">sales</span><span class="o">$</span><span class="n">sale_amount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="s2">"High Value"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Regular"</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
    <p>Notice how the final line of code assigns “High Value” when the <code class="language-plaintext highlighter-rouge">sale_amount</code> is greater than <code class="language-plaintext highlighter-rouge">100</code>. Otherwise, the transaction is assigned “Regular.”</p>
  </li>
</ul>

<h2 id="summing-up">Summing Up</h2>

<p>In this lesson, you learned how to transform data in R. Specifically, you learned…</p>

<ul>
  <li data-marker="*">Outliers</li>
  <li data-marker="*">Logical Expressions</li>
  <li data-marker="*">Subsets</li>
  <li data-marker="*">Menus</li>
  <li data-marker="*">Escape Characters</li>
  <li data-marker="*">Conditionals</li>
  <li data-marker="*">Combining Data Sources</li>
</ul>

<p>See you next time when we discuss how to write functions of our own.</p>


                    
</body>
</html>