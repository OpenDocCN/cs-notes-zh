- en: Lecture 9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://cs50.harvard.edu/x/notes/9/](https://cs50.harvard.edu/x/notes/9/)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[Welcome!](#welcome)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[http-server](#http-server)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Flask](#flask)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Forms](#forms)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Templates](#templates)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Request Methods](#request-methods)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Frosh IMs](#frosh-ims)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Flask and SQL](#flask-and-sql)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Cookies and Session](#cookies-and-session)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Shopping Cart](#shopping-cart)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Shows](#shows)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[APIs](#apis)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[JSON](#json)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Summing Up](#summing-up)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Welcome!
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In previous weeks, you have learned numerous programming languages, techniques,
    and strategies.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Indeed, this class has been far less of a *C class* or *Python class* and far
    more of a *programming class*, such that you can go on to follow future trends.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In these past several weeks, you have learned *how to learn* about programming.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Today, we will be moving from HTML and CSS into combining HTML, CSS, SQL, Python,
    and JavaScript so you can create your own web applications.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You might consider using the skills you learn this week to create your final
    project.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: http-server
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Up until this point, all HTML you saw was pre-written and static.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In the past, when you visited a page, the browser downloaded an HTML page, and
    you were able to view it. These are considered *static* pages, in that what is
    programmed in the HTML is exactly what the user sees and downloads *client-side*
    to their internet browser.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Dynamic pages refer to the ability of Python and similar languages to create
    HTML on-the-fly. Accordingly, you can have web pages that are generated *server-side*
    by code based upon the input or behavior of users.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You have used `http-server` in the past to serve your web pages. Today, we are
    going to utilize a new server that can parse out a web address and perform actions
    based on the URL provided.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Further, last week, you saw URLs as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that `file.html` is an HTML file inside a folder called `folder` at `example.com`.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Flask
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: This week, we introduce the ability to engage with *routes* such as `https://www.example.com/route?key=value`,
    where specific functionality can be generated on the server via the keys and values
    provided in the URL.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Flask* is a third-party library that allows you to host web applications using
    the Flask framework, or a micro-framework, within Python.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You can run Flask by executing `flask run` in your terminal window in [cs50.dev](https://cs50.dev).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: To do so, you will need a file called `app.py` and another called `requirements.txt`.
    `app.py` contains code the tells Flask how to run your web application. `requirements.txt`
    includes a list of the libraries that are required for your Flask application
    to run.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Here is a sample of `requirements.txt`:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice only `Flask` appears in this file. This is because Flask is required
    to run the Flask application.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Here is a very simple Flask application in `app.py`:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that the `/` route simply returns the text `hello, world`.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'We can also create code that implements HTML:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that rather than returning simple text, this provides HTML.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Improving our application, we can also serve HTML based upon templates by creating
    a folder called `templates` and creating a file called `index.html` with the following
    code within that folder:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice the double `{{ name }}` that is a placeholder for something that will
    be later provided by our Flask server.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Then, in the same folder that the `templates` folder appears, create a file
    called `app.py` and add the following code:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that this code defines `app` as the Flask application. Then, it defines
    the `/` route of `app` as returning the contents of `index.html` with the argument
    of `name`. By default, the `request.args.get` function will look for the `name`
    being provided by the user. If no name is provided, it will default to `world`.
    `@app.route` is otherwise known as a decorator.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'You can run this web application by typing `flask run` in the terminal window.
    If Flask does not run, ensure that your syntax is correct in each of the files
    above. Further, if Flask will not run, make sure your files are organized as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Once you get it running, you will be prompted to click a link. Once you navigate
    to that webpage, try adding `?name=[Your Name]` to the base URL in your browser’s
    URL bar.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Forms
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Improving upon our program, we know that most users will not type arguments
    into the address bar. Instead, programmers rely upon users to fill out forms on
    web pages. Accordingly, we can modify `index.html` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that a form is now created that takes the user’s name and then passes
    it off to a route called `/greet`. `autocomplete` is turned off. Further, a `placeholder`
    with the text `name` is included. Further, notice how the `meta` tag is used to
    make the web page mobile-responsive.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Further, we can change `app.py` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that the default path will display a form for the user to input their
    name. The `/greet` route will pass the `name` to that web page.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'To finalize this implementation, you will need another template for `greet.html`
    in the `templates` folder as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that this route will now render the greeting to the user, followed by
    their name.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Templates
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Both of our web pages, `index.html` and `greet.html`, have much of the same
    data. Wouldn’t it be nice to allow the body to be unique but copy the same layout
    from page to page?
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'First, create a new template called `layout.html` and write code as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that the `{% block body %}{% endblock %}` allows for the insertion of
    other code from other HTML files.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Then, modify your `index.html` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that the line `{% extends "layout.html" %}` tells the server where to
    get the layout of this page. Then, the `{% block body %}{% endblock %}` tells
    what code to be inserted into `layout.html`.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Finally, change `greet.html` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice how this code is shorter and more compact.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Request Methods
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can imagine scenarios where it is not safe to utilize `get`, as usernames
    and passwords would show up in the URL.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can utilize the method `post` to help with this problem by modifying `app.py`
    as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that `POST` is added to the `/greet` route, and that we use `request.form.get`
    rather than `request.args.get`.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: This tells the server to look *deeper* into the virtual envelope and not reveal
    the items in `post` in the URL.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Still, this code can be advanced further by utilizing a single route for both
    `get` and `post`. To do this, modify `app.py` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that both `get` and `post` are done in a single routing. However, `request.method`
    is utilized to properly route based on the type of routing requested by the user.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Accordingly, you can modify your `index.html` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that the form `action` is changed.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Still, there is a bug still in this code. With our new implementation, when
    someone types in no name into the form, `Hello,` is displayed without a name.
    We can improve our code by editing `app.py` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that `name=request.form.get("name"))` is changed.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Finally, change `greet.html` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice how `hello, {{ name }}` is changed to allow for a default output when
    no name is identified.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: As we’ve been changing many files, you may wish to compare your final code with
    [our final code](https://cdn.cs50.net/2024/fall/lectures/9/src9/hello10/).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Frosh IMs
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Frosh IMs or *froshims* is a web application that allows students to register
    for intramural sports.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Close all your `hello` related windows and create a folder by typing `mkdir
    froshims` in the terminal window. Then, type `cd froshims` to browse to this folder.
    Within, create a directory called templates by typing `mkdir templates`.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Next, in the `froshims` folder, type `code requirements.txt` and code as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: As before, Flask is required to run a Flask application.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Finally, type `code app.py` and write code as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that a `failure` option is provided, such that a failure message will
    be displayed to the user if the `name` or `sport` field is not properly filled
    out.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Next, create a file in the `templates` folder called `index.html` by typing
    `code templates/index.html` and write code as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Next, create a file called `layout.html` by typing `code templates/layout.html`
    and write code as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Fourth, create a file in templates called `success.html` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Finally, create a file in templates called `failure.html` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Execute `flask run` and check out the application at this stage.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'You can imagine how we might want to see the various registration options using
    radio buttons. We can improve `index.html` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice how `type` has been changed to `radio`.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Again, executing `flask run` you can see how the interface has now changed.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'You can imagine how we might want to accept the registration of many different
    registrants. We can improve `app.py` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that a dictionary called `REGISTRANTS` is used to log the `sport` selected
    by `REGISTRANTS[name]`. Also, notice that `registrants=REGISTRANTS` passes the
    dictionary on to this template.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Additionally, we can implement `error.html`:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Further, create a new template called `registrants.html` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that `{% for name in registrants %}...{% endfor %}` will iterate through
    each of the registrants. Very powerful to be able to iterate on a dynamic web
    page!
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Finally, create a folder called `static` in the same folder as `app.py`. There,
    upload the following file of a [cat](https://cdn.cs50.net/2024/fall/lectures/9/src9/froshims4/static/cat.jpg).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Execute `flask run` and play with the application.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You now have a web application! However, there are some security flaws! Because
    everything is client-side, an adversary could change the HTML and *hack* a website.
    Further, this data will not persist if the server is shut down. Could there be
    some way we could have our data persist even when the server restarts?
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Flask and SQL
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Just as we have seen how Python can interface with a SQL database, we can combine
    the power of Flask, Python, and SQL to create a web application where data will
    persist!
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: To implement this, you will need to take a number of steps.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: First, download the following [SQL database](https://cdn.cs50.net/2024/fall/lectures/9/src9/froshims4/froshims.db)
    into your `froshims` folder.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Execute in the terminal `sqlite3 froshims.db` and type `.schema` to see the
    contents of the database file. Further type `SELECT * FROM registrants;` to learn
    about the contents. You’ll notice that there are currently no registrations in
    the file.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Next, modify `requirements.txt` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Modify `index.html` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Modify `layout.html` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Ensure `error.html` appears as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Modify `registrants.html` to appear as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that a hidden value `registrant.id` is included such that it’s possible
    to use this `id` later in `app.py`
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Finally, modify `app.py` as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE33]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that the `cs50` library is utilized. A route is included for `register`
    for the `post` method. This route will take the name and sport taken from the
    registration form and execute a SQL query to add the `name` and the `sport` to
    the `registrants` table. The `deregister` routes to a SQL query that will grab
    the user’s `id` and utilize that information to deregister this individual.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: You can execute `flask run` and examine the result.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If you want to download our implementation of `froshims` you can do so [here](https://cdn.cs50.net/2024/fall/lectures/9/src9/froshims5/).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You can read more about Flask in the [Flask documentation](https://flask.palletsprojects.com).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Cookies and Session
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '`app.py` is considered a *controller*. A *view* is considered what the users
    see. A *model* is how data is stored and manipulated. Together, this is referred
    to as *MVC* (model, view, controller).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: While the prior implementation of `froshims` is useful from an administrative
    standpoint, where a back-office administrator could add and remove individuals
    from the database, one can imagine how this code is not safe to implement on a
    public server.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: For one, bad actors could make decisions on behalf of other users by hitting
    the deregister button – effectively deleting their recorded answer from the server.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Web services like Google use login credentials to ensure users only have access
    to the right data.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We can actually implement this itself using *cookies*. Cookies are small files
    that are stored on your computer such that your computer can communicate with
    the server and effectively say, “I’m an authorized user that has already logged
    in.” This authorization through this cookie is called a *session*.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Cookies may be stored as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Here, a `session` id is stored with a particular `value` representing that session.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: In the simplest form, we can implement this by creating a folder called `login`
    and then adding the following files.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'First, create a file called `requirements.txt` that reads as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE35]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that in addition to `Flask`, we also include `Flask-Session`, which is
    required to support login sessions.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Second, in a `templates` folder, create a file called `layout.html` that appears
    as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE36]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice this provides a very simple layout with a title and a body.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Third, create a file in the `templates` folder called `index.html` that appears
    as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE37]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that this file looks to see if `session["name"]` exists (elaborated further
    in `app.py` below). If it does, it will display a welcome message. If not, it
    will recommend you browse to a page to log in.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Fourth, create a file called `login.html` and add the following code:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE38]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice this is the layout of a basic login page.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Finally, create a file called `app.py` and write code as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE39]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice the modified *imports* at the top of the file, including `session`, which
    will allow you to support sessions. Most importantly, notice how `session["name"]`
    is used in the `login` and `logout` routes. The `login` route will assign the
    login name provided and assign it to `session["name"]`. However, in the `logout`
    route, the logging out is implemented by clearing the value of `session`.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: The `session` abstraction allows you to ensure only a specific user has access
    to specific data and features in our application. It allows you to ensure that
    no one acts on behalf of another user, for good or bad!
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If you wish, you can download [our implementation](https://cdn.cs50.net/2024/fall/lectures/9/src9/login/)
    of `login`.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You can read more about sessions in the [Flask documentation](https://flask.palletsprojects.com/en/stable/api/#flask.session).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Shopping Cart
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Moving on to a final example of utilizing Flask’s ability to enable a session.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We examined the following code for `store` in `app.py`. The following code
    was shown:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE40]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that `cart` is implemented using a list. Items can be added to this list
    using the `Add to Cart` buttons in `books.html`. When clicking such a button,
    the `post` method is invoked, where the `id` of the item is appended to the `cart`.
    When viewing the cart, invoking the `get` method, SQL is executed to display a
    list of the books in the cart.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'We also saw the contents of `books.html`:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE41]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice how this creates the ability to `Add to Cart` for each book using `for
    book in books`.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: You can see the rest of the files that power this `flask` implementation in
    the [source code](https://cdn.cs50.net/2024/fall/lectures/9/src9/store/).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Shows
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We looked at a pre-designed program called `shows`, in `app.py`:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE42]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice how the `search` route allows for a way by which to search for a `show`.
    This search looks for titles `LIKE` the one provided by the user.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'We also examined `index.html`:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE43]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that the JavaScript `script` creates an implementation of autocomplete,
    where titles that match the `input` are displayed.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: You can see the rest of the files of this implementation in the [source code](https://cdn.cs50.net/2024/fall/lectures/9/src9/shows3/).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: APIs
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: An *application program interface* or *API* is a series of specifications that
    allow you to interface with another service. For example, we could utilize IMDB’s
    API to interface with their database. We might even integrate APIs for handling
    specific types of data downloadable from a server.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Improving upon `shows`, looking at an improvement of `app.py`, we saw the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE44]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that the `search` route executes a SQL query.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Looking at `search.html`, you’ll notice that it is very simple:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE45]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that it provides a bulleted list.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Finally, looking at `index.html`, notice that *AJAX* code is utilized to power
    the search:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE46]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice an event listener is utilized to dynamically query the server to provide
    a list that matches the title provided. This will locate the `ul` tag in the HTML
    and modify the web page accordingly to include the list of the matches.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: You can read more in the [AJAX documentation](https://api.jquery.com/category/ajax/).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: JSON
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '*JavaScript Object Notation* or *JSON* is a text file of dictionaries with
    keys and values. This is a raw, computer-friendly way to get lots of data.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: JSON is a very useful way of getting back data from the server.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'You can see this in action in the `index.html` we examined together:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE47]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: While the above may be somewhat cryptic, it provides a starting point for you
    to research JSON on your own to see how it can be implemented in your own web
    applications.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Further, we examined `app.py` to see how the JSON response is obtained:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE48]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice how `jsonify` is used to convert the result into a readable format acceptable
    by contemporary web applications.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: You can read more in the [JSON documentation](https://www.json.org/json-en.html).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In summary, you now have the ability to complete your own web applications using
    Python, Flask, HTML, and SQL.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Summing Up
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this lesson, you learned how to utilize Python, SQL, and Flask to create
    web applications. Specifically, we discussed…
  prefs: []
  type: TYPE_NORMAL
- en: Flask
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Forms
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Templates
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Request Methods
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Flask and SQL
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Cookies and Session
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: APIs
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: JSON
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: See you next time for our final lecture for this term at [Sanders Theatre](https://websites.harvard.edu/memhall/home-2/buildings/sanders-theatre/)!
  prefs: []
  type: TYPE_NORMAL
