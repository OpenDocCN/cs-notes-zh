- en: Lecture 4
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第四讲
- en: 原文：[https://cs50.harvard.edu/python/notes/4/](https://cs50.harvard.edu/python/notes/4/)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://cs50.harvard.edu/python/notes/4/](https://cs50.harvard.edu/python/notes/4/)
- en: '[Libraries](#libraries)'
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[库](#libraries)'
- en: '[Random](#random)'
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[随机](#random)'
- en: '[Statistics](#statistics)'
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[统计学](#statistics)'
- en: '[Command-Line Arguments](#command-line-arguments)'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[命令行参数](#command-line-arguments)'
- en: '[`slice`](#slice)'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`slice` 函数'
- en: '[Packages](#packages)'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[包](#packages)'
- en: '[APIs](#apis)'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[API](#apis)'
- en: '[Making Your Own Libraries](#making-your-own-libraries)'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[创建自己的库](#making-your-own-libraries)'
- en: '[Summing Up](#summing-up)'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[总结](#summing-up)'
- en: Libraries
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 库
- en: Generally, libraries are bits of code written by you or others that you can
    use in your program.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通常，库是你或其他人编写的代码片段，你可以在程序中使用它。
- en: Python allows you to share functions or features with others as “modules”.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 允许你将函数或功能作为“模块”与他人共享。
- en: If you copy and paste code from an old project, chances are you can create such
    a module or library that you could bring into your new project.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你从旧项目中复制粘贴代码，那么你很可能可以创建一个模块或库，并将其带入新项目。
- en: Random
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 随机
- en: '`random` is a library that comes with Python that you could import into your
    own project.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`random` 是 Python 内置的一个库，你可以将其导入到自己的项目中。'
- en: It’s easier as a coder to stand on the shoulders of prior coders.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 作为程序员，站在前人的肩膀上更容易。
- en: So, how do you load a module into your own program? You can use the word `import`
    in your program.
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 那么，如何将模块加载到自己的程序中呢？你可以在程序中使用 `import` 关键字。
- en: Inside the `random` module, there is a built-in function called `random.choice(seq)`.
    `random` is the module you are importing. Inside that module, there is the `choice`
    function. That function takes into it a `seq` or sequence that is a list.
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `random` 模块内部，有一个名为 `random.choice(seq)` 的内置函数。`random` 是你导入的模块。在该模块内部，有一个名为
    `choice` 的函数。该函数接受一个 `seq` 或序列，它是一个列表。
- en: 'In your terminal window type `code generate.py`. In your text editor, code
    as follows:'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在你的终端窗口中输入 `code generate.py`。在你的文本编辑器中，按照以下方式编写代码：
- en: '[PRE0]'
  id: totrans-21
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Notice that the list within `choice` has square braces, quotes, and a comma.
    Since you have passed in two items, Python does the math and gives a 50% chance
    for heads and tails. Running your code, you will notice that this code, indeed,
    does function well!
  id: totrans-22
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，`choice` 函数内的列表有方括号、引号和逗号。由于你传入了两个项目，Python 会进行数学计算，并给出正面和反面的 50% 概率。运行你的代码，你会注意到这段代码确实运行得很好！
- en: 'We can improve our code. `from` allows us to be very specific about what we’d
    like to import. Prior, our `import` line of code is bringing the entire contents
    of the functions of `random`. However, what if we want to only load a small part
    of a module? Modify your code as follows:'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以改进我们的代码。`from` 允许我们非常具体地指定我们想要导入的内容。之前，我们的 `import` 代码行是导入 `random` 中所有函数的内容。然而，如果我们只想加载模块的一部分，应该如何修改代码呢？
- en: '[PRE1]'
  id: totrans-24
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Notice that we now can import just the `choice` function of `random`. From that
    point forward, we no longer need to code `random.choice`. We can now only code
    `choice` alone. `choice` is loaded explicitly into our program. This saves system
    resources and potentially can make our code run faster!
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，我们现在可以只导入 `random` 的 `choice` 函数。从那时起，我们不再需要编写 `random.choice`。现在我们只需编写 `choice`
    即可。`choice` 已经明确加载到我们的程序中。这节省了系统资源，并且可能使我们的代码运行得更快！
- en: 'Moving on, consider the function `random.randint(a, b)`. This function will
    generate a random number between `a` and `b`. Modify your code as follows:'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 接下来，考虑 `random.randint(a, b)` 函数。此函数将在 `a` 和 `b` 之间生成一个随机数。按照以下方式修改你的代码：
- en: '[PRE2]'
  id: totrans-27
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Notice that our code will randomly generate a number between `1` and `10`.
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，我们的代码将随机生成一个介于 `1` 和 `10` 之间的数字。
- en: We can introduce the function `random.shuffle(x)`, which shuffles a list into
    a random order.
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以介绍 `random.shuffle(x)` 函数，该函数可以将列表打乱成随机顺序。
- en: '[PRE3]'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Notice that `random.shuffle` will shuffle the cards in place. Unlike other functions,
    it will not return a value. Instead, it will take the `cards` list and shuffle
    them inside that list. Run your code a few times to see the code functioning.
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，`random.shuffle` 将就地打乱牌的顺序。与其他函数不同，它不会返回一个值。相反，它将 `cards` 列表作为参数，并在该列表内部打乱牌的顺序。运行你的代码几次，以查看代码的功能。
- en: We now have these three ways above to generate random information.
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们现在有上述三种生成随机信息的方法。
- en: You can learn more in Python’s documentation of [`random`](https://docs.python.org/3/library/random.html).
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在 Python 的 `random` 库文档中了解更多信息。[随机](https://docs.python.org/3/library/random.html)。
- en: Statistics
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 统计学
- en: Python comes with a built-in `statistics` library. How might we use this module?
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 内置了一个 `statistics` 库。我们如何使用这个模块呢？
- en: '`mean` is a function of this library that is quite useful. In your terminal
    window, type `code average.py`. In the text editor window, modify your code as
    follows:'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mean` 是这个库中的一个非常有用的函数。在你的终端窗口中，输入 `code average.py`。在文本编辑器窗口中，按照以下方式修改你的代码：'
- en: '[PRE4]'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Notice that we imported a different library called `statistics`. The `mean`
    function takes a list of values. This will print the average of these values.
    In your terminal window, type `python average.py`.
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，我们导入了一个名为 `statistics` 的不同库。`mean` 函数接受一个值列表。这将打印这些值的平均值。在你的终端窗口中，输入 `python
    average.py`。
- en: Consider the possibilities of using the `statistics` module in your own programs.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 考虑在你的程序中使用 `statistics` 模块的可能性。
- en: You can learn more in Python’s documentation of [`statistics`](https://docs.python.org/3/library/statistics.html).
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在 Python 的 `statistics`（[统计](https://docs.python.org/3/library/statistics.html)）文档中了解更多信息。
- en: Command-Line Arguments
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 命令行参数
- en: So far, we have been providing all values within the program that we have created.
    What if we wanted to be able to take input from the command-line? For example,
    rather than typing `python average.py` in the terminal, what if we wanted to be
    able to type `python average.py 100 90` and be able to get the average between
    `100` and `90`?
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 到目前为止，我们一直在程序中提供所有值。如果我们想能够从命令行获取输入怎么办？例如，而不是在终端中输入 `python average.py`，我们能否输入
    `python average.py 100 90` 并得到 `100` 和 `90` 之间的平均值？
- en: '`sys` is a module that allows us to take arguments at the command line.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sys` 是一个模块，它允许我们在命令行中获取参数。'
- en: '`argv` is a list within the `sys` module that records what the user typed on
    the command line.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`argv` 是 `sys` 模块中的一个列表，它记录了用户在命令行中输入的内容。'
- en: 'Notice how you will see `sys.argv` utilized in the code below. In the terminal
    window, type `code name.py`. In the text editor, code as follows:'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 注意，你将在下面的代码中看到 `sys.argv` 的使用。在终端窗口中，输入 `code name.py`。在文本编辑器中，按照以下方式编写代码：
- en: '[PRE5]'
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Notice that the program is going to look at what the user typed in the command
    line. Currently, if you type `python name.py David` into the terminal window,
    you will see `hello, my name is David`. Notice that `sys.argv[1]` is where `David`
    is being stored. Why is that? Well, in prior lessons, you might remember that
    lists start at the `0`th element. What do you think is held currently in `sys.argv[0]`?
    If you guessed `name.py`, you would be correct!
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，程序将查看用户在命令行中输入的内容。目前，如果你在终端窗口中输入 `python name.py David`，你会看到 `hello, my name
    is David`。注意，`sys.argv[1]` 是存储 `David` 的位置。为什么是这样呢？好吧，在之前的课程中，你可能记得列表是从 `0` 个元素开始的。你认为当前
    `sys.argv[0]` 中存储了什么？如果你猜到是 `name.py`，你就对了！
- en: 'There is a small problem with our program as it stands. What if the user does
    not type in the name at the command line? Try it yourself. Type `python name.py`
    into the terminal window. An error `list index out of range` will be presented
    by the interpreter. The reason for this is that there is nothing at `sys.argv[1]`
    because nothing was typed! Here’s how we can protect our program from this type
    of error:'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们现有的程序有一个小问题。如果用户没有在命令行中输入名字会怎样？自己试一试。在终端窗口中输入 `python name.py`。解释器会显示一个错误
    `list index out of range`。原因是在 `sys.argv[1]` 中没有内容，因为没有输入任何东西！以下是我们可以保护我们的程序免受此类错误的方法：
- en: '[PRE6]'
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Notice that the user will now be prompted with a useful hint about how to make
    the program work if they forget to type in a name. However, could we be more defensive
    to ensure the user inputs the right values?
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，如果用户忘记输入名字，程序会提示一个有用的提示，告诉他们如何使程序工作。然而，我们能否更加谨慎以确保用户输入正确的值？
- en: 'Our program can be improved as follows:'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以按照以下方式改进我们的程序：
- en: '[PRE7]'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Notice how if you test your code, you will see how these exceptions are handled,
    providing the user with more refined advice. Even if the user types in too many
    or too few arguments, the user is provided clear instructions about how to fix
    the issue.
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，如果你测试你的代码，你会看到这些异常是如何被处理的，为用户提供更详细的建议。即使用户输入了过多的或过少的参数，用户也会得到关于如何修复问题的明确指示。
- en: 'Right now, our code is logically correct. However, there is something very
    nice about keeping our error checking separate from the remainder of our code.
    How could we separate out our error handling? Modify your code as follows:'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 目前，我们的代码在逻辑上是正确的。然而，将错误检查与代码的其余部分分开是非常好的。我们如何分离出错误处理？按照以下方式修改你的代码：
- en: '[PRE8]'
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Notice how we are using a built-in function of `sys` called `exit` that allows
    us to exit the program if an error was introduced by the user. We can rest assured
    now that the program will never execute the final line of code and trigger an
    error. Therefore, `sys.argv` provides a way by which users can introduce information
    from the command line. `sys.exit` provides a means by which the program can exit
    if an error arises.
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意我们如何使用 `sys` 的内置函数 `exit`，它允许我们在用户引入错误时退出程序。现在我们可以确信程序将永远不会执行最后一行代码并触发错误。因此，`sys.argv`
    提供了一种方式，用户可以通过命令行引入信息。`sys.exit` 提供了一种方式，程序可以在出现错误时退出。
- en: You can learn more in Python’s documentation of [`sys`](https://docs.python.org/3/library/sys.html).
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在 Python 的 `sys` 库文档中了解更多信息[sys](https://docs.python.org/3/library/sys.html)。
- en: '`slice`'
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '`slice`'
- en: '`slice` is a command that allows us to take a `list` and tell the interpreter
    where we want the interpreter to consider the start of the `list` and the end
    of the `list`. For example, modify your code as follows:'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`slice` 是一个命令，它允许我们取一个 `list` 并告诉解释器我们希望解释器将 `list` 的哪个位置视为开始和结束。例如，按照以下方式修改你的代码：'
- en: '[PRE9]'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Notice that if you type `python name.py David Carter Rongxin` into the terminal
    window, the interpreter will output not just the intended output of the names,
    but also `hello, my name is name.py`. How then could we ensure that the interpreter
    ignores the first element of the list where `name.py` is currently being stored?
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，如果你在终端窗口中输入 `python name.py David Carter Rongxin`，解释器将输出不仅仅是预期的名字输出，还会输出
    `hello, my name is name.py`。那么我们如何确保解释器忽略列表中当前存储的 `name.py` 的第一个元素呢？
- en: '`slice` can be employed in our code to start the list somewhere different!
    Modify your code as follows:'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`slice` 可以在我们的代码中用来从不同的位置开始列表！按照以下方式修改你的代码：'
- en: '[PRE10]'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Notice that rather than starting the list at `0`, we use square brackets to
    tell the interpreter to start at `1` and go to the end using the `1:` argument.
    Running this code, you’ll notice that we can improve our code using relatively
    simple syntax.
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，我们不是从 `0` 开始列表，而是使用方括号告诉解释器从 `1` 开始，使用 `1:` 参数到末尾。运行这段代码，你会注意到我们可以使用相对简单的语法来改进我们的代码。
- en: Packages
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 包
- en: One of the reasons Python is so popular is that there are numerous powerful
    third-party libraries that add functionality. We call these third-party libraries,
    implemented as a folder, “packages”.
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 如此受欢迎的一个原因是，有大量的强大第三方库增加了功能。我们将这些作为文件夹实现的第三方库称为“包”。
- en: PyPI is a repository or directory of all available third-party packages currently
    available.
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PyPI 是一个包含所有当前可用的第三方包的仓库或目录。
- en: '`cowsay` is a well-known package that allows a cow to talk to the user.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cowsay` 是一个允许牛与用户交谈的知名包。'
- en: Python has a package manager called `pip` that allows you to install packages
    quickly onto your system.
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 有一个名为 `pip` 的包管理器，它允许你快速将包安装到你的系统中。
- en: In the terminal window, you can install the `cowsay` package by typing `pip
    install cowsay`. After a bit of output, you can now go about using this package
    in your code.
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在终端窗口中，你可以通过输入 `pip install cowsay` 来安装 `cowsay` 包。在输出一些信息后，你现在可以在代码中使用这个包了。
- en: 'In your terminal window type `code say.py`. In the text editor, code as follows:'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在你的终端窗口中输入 `code say.py`。在文本编辑器中，按照以下方式编写代码：
- en: '[PRE11]'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Notice that the program first checks that the user inputted at least two arguments
    at the command line. Then, the cow should speak to the user. Type `python say.py
    David` and you’ll see a cow saying “hello” to David.
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，程序首先检查用户是否在命令行中至少输入了两个参数。然后，牛应该对用户说话。输入 `python say.py David`，你会看到一头牛对 David
    说“hello”。
- en: 'Further modify your code:'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进一步修改你的代码：
- en: '[PRE12]'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Notice that a t-rex is now saying “hello”.
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，现在一个 t-rex 正在说“hello”。
- en: You now can see how you could install third-party packages.
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你现在可以看到如何安装第三方包。
- en: You can learn more on PyPI’s entry for [`cowsay`](https://pypi.org/project/cowsay/)
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在 PyPI 的 [cowsay](https://pypi.org/project/cowsay/) 条目中了解更多信息。
- en: You can find other third-party packages at [PyPI](https://pypi.org/)
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在 [PyPI](https://pypi.org/) 找到其他第三方包。
- en: APIs
  id: totrans-80
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: API
- en: APIs or “application program interfaces” allow you to connect to the code of
    others.
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: API 或“应用程序程序接口”允许你连接到他人的代码。
- en: '`requests` is a package that allows your program to behave as a web browser
    would.'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`requests` 是一个允许你的程序表现得像网络浏览器的包。'
- en: In your terminal, type `pip install requests`. Then, type `code itunes.py`.
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在你的终端中输入 `pip install requests`。然后，输入 `code itunes.py`。
- en: It turns out that Apple iTunes has its own API that you can access in your programs.
    In your internet browser, you can visit [https://itunes.apple.com/search?entity=song&limit=1&term=weezer](https://itunes.apple.com/search?entity=song&limit=1&term=weezer)
    and a text file will be downloaded. David constructed this URL by reading Apple’s
    API documentation. Notice how this query is looking for a `song`, with a `limit`
    of one result, that relates to the `term` called `weezer`. Looking at this text
    file that is downloaded, you might find the format to be similar to that we’ve
    programmed previously in Python.
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 结果表明，Apple iTunes 有自己的 API，你可以在程序中访问它。在你的网络浏览器中，你可以访问 [https://itunes.apple.com/search?entity=song&limit=1&term=weezer](https://itunes.apple.com/search?entity=song&limit=1&term=weezer)
    并下载一个文本文件。大卫通过阅读 Apple 的 API 文档构建了这个 URL。注意这个查询正在寻找一个与 `term` 称为 `weezer` 相关的
    `song`，结果数量限制为 `1`。查看下载的文本文件，你可能会发现其格式与我们之前在 Python 中编写的类似。
- en: The format in the downloaded text file is called JSON, a text-based format that
    is used to exchange text-based data between applications. Literally, Apple is
    providing a JSON file that we could interpret in our own Python program.
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下载的文本文件格式称为 JSON，这是一种基于文本的格式，用于在应用程序之间交换基于文本的数据。实际上，Apple 正在提供我们可以用我们自己的 Python
    程序解释的 JSON 文件。
- en: 'In the terminal window, type `code itunes.py`. Code as follows:'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在终端窗口中，输入 `code itunes.py`。编写如下代码：
- en: '[PRE13]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Notice how the returned value of `requests.get` will be stored in `response`.
    David, having read the Apple documentation about this API, knows that what is
    returned is a JSON file. Running `python itunes.py weezer`, you will see the JSON
    file returned by Apple. However, the JSON response is converted by Python into
    a dictionary. Looking at the output, it can be quite dizzying!
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意 `requests.get` 返回的值将被存储在 `response` 中。大卫阅读了关于此 API 的 Apple 文档后知道返回的是 JSON
    文件。运行 `python itunes.py weezer`，你会看到 Apple 返回的 JSON 文件。然而，JSON 响应被 Python 转换成了字典。查看输出，可能会让人头晕。
- en: 'It turns out that Python has a built-in JSON library that can help us interpret
    the data received. Modify your code as follows:'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 结果表明，Python 有一个内置的 JSON 库可以帮助我们解释接收到的数据。修改你的代码如下：
- en: '[PRE14]'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Notice that `json.dumps` is implemented such that it utilizes `indent` to make
    the output more readable. Running `python itunes.py weezer`, you will see the
    same JSON file. However, this time, it is much more readable. Notice now that
    you will see a dictionary called `results` inside the output. Inside that dictionary
    called `results` there are numerous keys present. Look at the `trackName` value
    in the output. What track name do you see in your results?
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意 `json.dumps` 是如何实现的，它利用 `indent` 使输出更易读。运行 `python itunes.py weezer`，你会看到相同的
    JSON 文件。然而，这次它要容易阅读得多。现在注意，你会在输出中看到一个名为 `results` 的字典。在这个名为 `results` 的字典中，有多个键存在。查看输出中的
    `trackName` 值。你在结果中看到了什么曲目名称？
- en: 'How could we simply output the name of just that track name? Modify your code
    as follows:'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们如何简单地输出那个特定曲目的名称？修改你的代码如下：
- en: '[PRE15]'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Notice how we are taking the result of `response.json()` and storing it in `o`
    (as in the lowercase letter). Then, we are iterating through the `results` in
    `o` and printing each `trackName`. Also notice how we have increased the limit
    number of results to `50`. Run your program. See the results.
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意我们是如何将 `response.json()` 的结果存储在 `o` 中（就像小写字母 o）。然后，我们遍历 `o` 中的 `results` 并打印每个
    `trackName`。同时注意我们如何将结果数量限制增加到 `50`。运行你的程序。查看结果。
- en: You can learn more about `requests` through the [library’s documentation](https://docs.python-requests.org/).
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以通过 [库的文档](https://docs.python-requests.org/) 了解更多关于 `requests` 的信息。
- en: You can learn more about JSON in Python’s documentation of [JSON](https://docs.python.org/3/library/json.html).
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在 Python 的 [JSON](https://docs.python.org/3/library/json.html) 文档中了解更多关于
    JSON 的信息。
- en: Making Your Own Libraries
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建自己的库
- en: You have the ability as a Python programmer to create your own library!
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你作为一个 Python 程序员，有能力创建自己的库！
- en: Imagine situations where you may want to re-use bits of code time and time again
    or even share them with others!
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 想象一下你可能想要反复使用代码片段，甚至与他人分享的情况！
- en: 'We have been writing lots of code to say “hello” so far in this course. Let’s
    create a package to allow us to say “hello” and “goodbye”. In your terminal window,
    type `code sayings.py`. In the text editor, code as follows:'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在本课程中，我们编写了很多代码来表示“hello”。让我们创建一个包，以便我们可以表示“hello”和“goodbye”。在你的终端窗口中，输入 `code
    sayings.py`。在文本编辑器中，编写如下代码：
- en: '[PRE16]'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Notice that this code in and of itself does not do anything for the user. However,
    if a programmer were to import this package into their own program, the abilities
    created by the functions above could be implemented in their code.
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，这段代码本身对用户没有任何作用。然而，如果程序员将这个包导入到他们自己的程序中，上述函数创建的能力就可以在他们的代码中实现。
- en: 'Let’s see how we could implement code utilizing this package that we created.
    In the terminal window, type `code say.py`. In this new file in your text editor,
    type the following:'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 让我们看看我们如何实现利用我们创建的这个包的代码。在终端窗口中，输入`code say.py`。在你文本编辑器中的这个新文件中，输入以下内容：
- en: '[PRE17]'
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Notice that this code imports the abilities of `goodbye` from the `sayings`
    package. If the user inputted at least two arguments at the command line, it will
    say “goodbye” along with the string inputted at the command line.
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，这段代码导入了`sayings`包中`goodbye`的能力。如果用户在命令行中至少输入了两个参数，它将输出“goodbye”以及命令行中输入的字符串。
- en: Summing Up
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总结
- en: Libraries extend the abilities of Python. Some libraries are included by default
    with Python and simply need to be imported. Others are third-party packages that
    need to be installed using `pip`. You can make your own packages for use by yourself
    or others! In this lecture, you learned about…
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 库扩展了Python的能力。一些库默认包含在Python中，只需导入即可。其他的是需要使用`pip`安装的第三方包。你可以为自己或他人创建自己的包！在本讲座中，你学习了关于……
- en: Libraries
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 库
- en: Random
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 随机
- en: Statistics
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 统计学
- en: Command-Line Arguments
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 命令行参数
- en: Slice
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 切片
- en: Packages
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包
- en: APIs
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: API
- en: Making Your Own Libraries
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建你自己的库
