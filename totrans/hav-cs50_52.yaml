- en: Loops
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://cs50.harvard.edu/scratch/notes/6/](https://cs50.harvard.edu/scratch/notes/6/)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Last time
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Last time, we combined blocks that were functions, values, and conditions to
    make our Scratch programs ask questions and then make decisions based on the answers
    to those questions.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: But every time we ran our code, whether we pressed the green flag or pressed
    a key or clicked, each script could only run one time, from top to bottom.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Walking Cat
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Now, we’ll tell our programs to **loop**, or repeat some blocks multiple times.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We’ll start with a [Walking Cat](https://scratch.mit.edu/projects/507456678/)
    example with our cat moving 10 steps when the green flag is clicked:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'We’ll use the “forever” block in the Control section of blocks, to make our
    cat move over and over:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Now, our cat will move until it reaches the edge, where it can’t move any further.
    It will still be trying to move.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: We can click the stop sign at the top of the stage, next to the green flag,
    and drag the cat back to the left side of the stage.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We’ll add another block that will tell our cat to bounce, or turn around, if
    it reaches the edge:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Now, our cat is upside-down when it turns around at the edge, but we can change
    the rotation style by clicking on the Direction dial in the Sprite panel, and
    selecting the second option:'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '![Direction dial for sprite with left and right rotation style selected](../Images/e58d67a8df2b65a68bf53a4205ff0124.png)'
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
- en: The legs of our cat aren’t moving, though, and it turns out we can make an animation,
    with images moving quickly enough that it gives the illusion of movement.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'It turns out that our cat has two costumes, with its legs in slightly different
    positions. So we can use a “next costume” block to alternate between the two:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Our cat seems to be moving a bit too fast, so we’ll slow down its movement:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Now, our cat will move, bouncing if it’s at the edge, changing to the next costume,
    and then wait just a fraction of a second. And it will repeat all of these blocks
    over and over again, until we press the stop sign.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Swimming Fish
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We’ll use the “Underwater 1” backdrop with our fish in [Swimming Fish](https://scratch.mit.edu/projects/507457166/),
    and have it point towards the mouse cursor:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: By using the “forever” block, after we click the green flag, the fish will always
    point itself towards the mouse, over and over again.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can make the fish move 5 steps each time as well:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'We can use this for our backdrop, too. We can click on the backdrop in the
    Stage panel, and drag in these blocks:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: At first, the “play sound” block only has a “pop” sound, so we’ll use the Sounds
    tab to add the “Ocean Wave” sound to our backdrop. Then, we can use the dropdown
    in the “play sound” block to select “Ocean Wave”.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Now, our backdrop will play the wave sound over and over again.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Now, when we click the green flag to run our program, we’ll have multiple “forever”
    loops running. Our fish will follow the mouse pointer, and the backdrop will continuously
    play the wave sound.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: With these blocks, we can add music to our programs that play over and over,
    giving us a sense that something is always happening.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pet the Cat
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We’ll remove our backdrop and fish, and add back the cat for [Pet the Cat](https://scratch.mit.edu/projects/507457677/).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Now, let’s tell our cat to play a “meow” sound when our mouse gets too close:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: We can add a condition that checks for the distance to the mouse pointer. If
    it’s less than a value of 100, our cat will play a sound.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Note that we can find the “distance to” block in the Sensing category of blocks.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: But when we run our program, nothing happens, even as we move our mouse pointer
    towards the cat. It turns out that our stack of blocks is running just once, and
    as soon as we click the green flag, it asks the question and does nothing since
    our mouse pointer is far away from the cat.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'By adding a “forever” block and placing our condition inside it, we can ask
    that question over and over again, and play a sound whenever our mouse pointer
    is too close:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: A “forever” loop, one that runs over and over again until the end of the program,
    is also called an infinite loop.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Meow
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We can also use the “repeat” block to run some blocks of code a specific number
    of times:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Notice that there’s a little arrow at the bottom right of this block, indicating
    that the code inside will be repeated.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'If we wanted our cat to meow three times, for example, we could use:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'But we could improve the design of our program, [Meow](https://scratch.mit.edu/projects/507457982/),
    by using a “repeat” block, instead of using the same “play sound” block over and
    over again:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: This is better since we are using only two blocks, instead of three as before.
    And if we wanted to repeat, say, 30 times, we would only need to change the number
    in the oval, instead of dragging out 27 additional “play sound” blocks.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can use other values inside the oval for the “repeat” block as well. For
    example, we can ask a question, and use the answer as the input:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Now, the user of our program can control how many times our cat meows.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'We can try to get our cat to move in a circle in another example, [Circle](https://scratch.mit.edu/projects/507458172/):'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Our cat will move 30 steps, turn slightly, and repeat that 24 times, moving
    itself in a circle.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Before, we needed to click our blocks over and over again ourselves. Now, our
    cat is able to repeat all of that very quickly.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Balloon
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'We’ll use a loop to make a balloon inflate itself in [Balloon 1](https://scratch.mit.edu/projects/507458351/):'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Now, when we click the green flag, our balloon will increase its size by 10,
    pause a fraction of a second. It will do that 10 times, until it gets bigger and
    bigger, and then disappear and play a pop sound.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'But when we click the green flag again, nothing happens. The balloon is still
    hidden, so we need to add some blocks to show it again:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: We’ll also use a “set size” block to set the balloon back to its original size.
    Now, everytime we click the green flag, it will reappear.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Since we start our size at 100, and increase it by 10 for 10 times, the balloon
    will pop at size 200\. We can change the number of times our loop repeats to 15,
    and now our ballon will grow until size 250 before it pops.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'It turns out we can use another block in the Control section, “repeat until”,
    so we can avoid that calculation ourselves, in [Balloon 2](https://scratch.mit.edu/projects/507458714/):'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: The “repeat until” block is a combination of a loop and a condition. It will
    run over and over until some question is answered as “yes”, or becomes true.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: We’ll use the hexagon-shaped “=” operator in the Operators section to compare
    the size of our balloon, and once it’s equal to 250, our “repeat until” block
    will stop repeating.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: After the condition is true, the rest of our blocks will run, hiding our balloon
    and playing the pop sound.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: With the “forever” block, “repeat” block, and “repeat until” block, we have
    the ability to create loops in our program that run our code multiple times, without
    requiring us to click over and over again.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
