<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Lecture 0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Lecture 0</h1>
<blockquote>ÂéüÊñáÔºö<a href="https://cs50.harvard.edu/sql/notes/0/">https://cs50.harvard.edu/sql/notes/0/</a></blockquote>

                    

<ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#what-is-a-database" id="markdown-toc-what-is-a-database">What is a Database?</a></li>
  <li><a href="#sql" id="markdown-toc-sql">SQL</a>    <ul>
      <li><a href="#questions" id="markdown-toc-questions">Questions</a></li>
    </ul>
  </li>
  <li><a href="#getting-started-with-sqlite" id="markdown-toc-getting-started-with-sqlite">Getting Started with SQLite</a></li>
  <li><a href="#terminal-tips" id="markdown-toc-terminal-tips">Terminal Tips</a></li>
  <li><a href="#select" id="markdown-toc-select"><code class="language-plaintext highlighter-rouge">SELECT</code></a>    <ul>
      <li><a href="#questions-1" id="markdown-toc-questions-1">Questions</a></li>
    </ul>
  </li>
  <li><a href="#limit" id="markdown-toc-limit"><code class="language-plaintext highlighter-rouge">LIMIT</code></a></li>
  <li><a href="#where" id="markdown-toc-where"><code class="language-plaintext highlighter-rouge">WHERE</code></a></li>
  <li><a href="#null" id="markdown-toc-null"><code class="language-plaintext highlighter-rouge">NULL</code></a></li>
  <li><a href="#like" id="markdown-toc-like"><code class="language-plaintext highlighter-rouge">LIKE</code></a>    <ul>
      <li><a href="#questions-2" id="markdown-toc-questions-2">Questions</a></li>
    </ul>
  </li>
  <li><a href="#ranges" id="markdown-toc-ranges">Ranges</a>    <ul>
      <li><a href="#questions-3" id="markdown-toc-questions-3">Questions</a></li>
    </ul>
  </li>
  <li><a href="#order-by" id="markdown-toc-order-by"><code class="language-plaintext highlighter-rouge">ORDER BY</code></a>    <ul>
      <li><a href="#questions-4" id="markdown-toc-questions-4">Questions</a></li>
    </ul>
  </li>
  <li><a href="#aggregate-functions" id="markdown-toc-aggregate-functions">Aggregate Functions</a>    <ul>
      <li><a href="#questions-5" id="markdown-toc-questions-5">Questions</a></li>
    </ul>
  </li>
  <li><a href="#fin" id="markdown-toc-fin">Fin</a></li>
</ul>

<h2 id="introduction">Introduction</h2>

<ul>
  <li data-marker="*">Databases (and SQL) are tools that can be used to interact with, store, and manage information. Although the tools we‚Äôre using in this course are new, a database is an age-old idea.</li>
  <li data-marker="*">Look at this diagram from a few thousand years ago. It has rows and columns, and seems to contain stipends for workers at a temple. One could call this diagram a table, or even a spreadsheet.</li>
</ul>

<p><img src="../Images/791bb4dd298a0f9c0323ac50323e6f24.png" alt="Table with Temple Workers' Stipends" data-original-src="https://cs50.harvard.edu/sql/notes/0/images/templeworkerstipends.jpg"/></p>

<ul>
  <li data-marker="*">Based on what we see in the diagram above, we can conclude that:
    <ul>
      <li data-marker="*">A table stores some set of information (here, worker stipends).</li>
      <li data-marker="*">Every row in a table stores one item in that set (here, one worker).</li>
      <li data-marker="*">Every column has some attribute of that item (here, the stipend for a particular month).</li>
    </ul>
  </li>
  <li data-marker="*">
    <p>Let us now consider a modern context. Say you are a librarian tasked with organizing information about the book titles and authors in this diagram.</p>

    <p class="w-50"><img src="../Images/668f1f2a20ce98a517b2484c0b0b7b9b.png" alt="&quot;Book Titles and Authors - Unorganized&quot;" data-original-src="https://cs50.harvard.edu/sql/notes/0/images/books.jpg"/></p>
  </li>
  <li data-marker="*">
    <p>One way of organizing the information would be to have each book title followed by its author, as below.</p>

    <p class="w-50"><img src="../Images/0901febd63c4e4f95578517dc2a1b253.png" alt="&quot;Table with Book Titles followed by Author&quot;" data-original-src="https://cs50.harvard.edu/sql/notes/0/images/bookstable.jpg"/></p>

    <ul>
      <li data-marker="*">Notice that each book is now a row in this table.</li>
      <li data-marker="*">Every row has two columns ‚Äî each a different attribute of the book (book title and author).</li>
    </ul>
  </li>
  <li data-marker="*">
    <p>In today‚Äôs information age, we can store our tables using software like Google Sheets instead of paperüìù or stone tabletsü™®. However, in this course we will talk about databases and not spreadsheets.</p>
  </li>
  <li data-marker="*">Three reasons to move beyond spreadsheets to databases are
    <ul>
      <li data-marker="*"><strong>Scale</strong>: Databases can store not just items numbering to tens of thousands but even millions and billions.</li>
      <li data-marker="*"><strong>Update Capacity</strong>: Databases are able to handle multiple updates of data in a second.</li>
      <li data-marker="*"><strong>Speed</strong>: Databases allow faster look-up of information. This is because databases provide us with access to different algorithms to retrieve information. In contrast, spreadsheets that merely allow the use of Ctrl+F or Cmd+F to go through hits one at a time.</li>
    </ul>
  </li>
</ul>

<h2 id="what-is-a-database">What is a Database?</h2>
<ul>
  <li data-marker="*">A database is a way of organizing data such that you can perform four operations on it
    <ul>
      <li data-marker="*">create</li>
      <li data-marker="*">read</li>
      <li data-marker="*">update</li>
      <li data-marker="*">delete</li>
    </ul>
  </li>
  <li data-marker="*">A database management system (DBMS) is a way to interact with a database using a graphical interface or textual language.</li>
  <li data-marker="*">Examples of DBMS: MySQL, Oracle, PostgreSQL, SQLite, Microsoft Access, MongoDB etc.</li>
  <li data-marker="*">The choice of a DBMS would rest on factors like
    <ul>
      <li data-marker="*"><strong>Cost</strong>: proprietary vs. free software,</li>
      <li data-marker="*"><strong>Amount of support</strong>: free and open source software like MySQL, PostgreSQL and SQLite come with the downside of having to set up the database yourself,</li>
      <li data-marker="*"><strong>Weight</strong>: more fully-featured systems like MySQL or PostgreSQL are heavier and require more computation to run than systems like SQLite.</li>
    </ul>
  </li>
  <li data-marker="*">In this course, we will start with SQLite and then move on to MySQL and PostgreSQL.</li>
</ul>

<h2 id="sql">SQL</h2>
<ul>
  <li data-marker="*">SQL stands for Structured Query Language. It is a language used to interact with databases, via which you can create, read, update, and delete data in a database. Some important notes about SQL
    <ul>
      <li data-marker="*">it is structured, as we‚Äôll see in this course,</li>
      <li data-marker="*">it has some keywords that can be used to interact with the database, and</li>
      <li data-marker="*">it is a query language ‚Äî it can be used to ask questions of data inside a database.</li>
    </ul>
  </li>
  <li data-marker="*">In this lesson, we will learn how to write some simple SQL queries.</li>
</ul>

<h3 id="questions">Questions</h3>
<blockquote>
  <p>Are there subsets of SQL?</p>
</blockquote>

<ul>
  <li data-marker="*">SQL is a standard both of the American National Standards Institute (ANSI) and the International Organization for Standardization (ISO). Most DBMS support some subset of the SQL language. So for SQLite, for example, we‚Äôre using a subset of SQL that is supported by SQLite. If we wanted to port our code to a different system like MySQL, it is likely we would have to change some of the syntax.</li>
</ul>

<h2 id="getting-started-with-sqlite">Getting Started with SQLite</h2>

<ul>
  <li data-marker="*">
    <p>It is worth noting that SQLite is not merely something we use for this class, but a database used in plenty of other applications including phones, desktop applications and websites.</p>
  </li>
  <li data-marker="*">Now, consider a database of books that have been longlisted for the <a href="https://en.wikipedia.org/wiki/International_Booker_Prize#:~:text=Its%20aim%20is%20to%20encourage,the%20winner%20announced%20in%20May.">International Booker Prize</a>. Each year, there are 13 books on the longlist and our database contains 5 years‚Äô worth of such longlists.</li>
  <li data-marker="*">Before we begin interacting with this database:
    <ul>
      <li data-marker="*">Log in to <a href="https://cs50.dev/">Visual Studio Code for CS50</a>. This is where we will write code and edit files.</li>
      <li data-marker="*">The SQLite environment is already set up in your Codespace! Open it up on the terminal.</li>
    </ul>
  </li>
</ul>

<h2 id="terminal-tips">Terminal Tips</h2>
<p>Here are some useful tips for writing SQL code on the terminal.</p>
<ul>
  <li data-marker="*">To clear the terminal screen, hit Ctrl + L.</li>
  <li data-marker="*">To get the previously executed instruction(s) on the terminal, press the Up Arrow key.</li>
  <li data-marker="*">If your SQL query is too long and wrapping around the terminal, you can hit enter and continue writing the query on the next line.</li>
  <li data-marker="*">To exit a database or the SQLite environment, use <code class="language-plaintext highlighter-rouge">.quit</code>.</li>
</ul>

<!-- ### Set-up
1. Open VSCode.
2. In the VSCode terminal, type `ls`.
3. You should see the database `longlist.db`, containing the books that have been longlisted for the International Booker Prize.
4. Type `sqlite3 longlist.db` to open the database in SQLite 3 (the third version of the software).
5. To confirm that you are now in the SQLite environment, check that the `$` sign no more appears on the terminal, instead of which you should see `sqlite`.
6. If you want to clear your terminal now, you may use Ctrl+L to do so. -->

<h2 id="select"><code class="language-plaintext highlighter-rouge">SELECT</code></h2>
<ul>
  <li data-marker="*">What data is actually in our database? To answer this, we will use our first SQL keyword, <code class="language-plaintext highlighter-rouge">SELECT</code>, which allows us to select some (or all) rows from a table inside the database.</li>
  <li data-marker="*">In the SQLite environment, run
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>This selects all the rows from the table called <code class="language-plaintext highlighter-rouge">longlist</code>.</p>
  </li>
  <li data-marker="*">The output we get contains all the columns of all the rows in this table, which is a lot of data. We can simplify it by selecting a particular column, say the title, from the table. Let‚Äôs try
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">Now, we see a list of the titles in this table. But what if we want to see titles and authors in our search results? For this, we run
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"author"</span> 
<span class="k">FROM</span> <span class="n">longlist</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="questions-1">Questions</h3>

<blockquote>
  <p>Is it necessary to use the double quotes (‚Äú) around table and column names?</p>
</blockquote>

<ul>
  <li data-marker="*">It is good practice to use double quotes around table and column names, which are called SQL identifiers. SQL also has strings and we use single quotes around strings to differentiate them from identifiers.</li>
</ul>

<blockquote>
  <p>Where is the data in this database coming from?</p>
</blockquote>

<ul>
  <li data-marker="*">This database contains data from various sources.</li>
  <li data-marker="*">Longlists of books (years 2018‚Äî2023) come from the <a href="https://thebookerprizes.com/the-booker-library/features/full-list-of-international-booker-prize-winners-shortlisted-authors-and-their-books">Booker Prize</a> website.</li>
  <li data-marker="*">Ratings and other information about these books come from <a href="https://www.goodreads.com/">Goodreads</a>.</li>
</ul>

<blockquote>
  <p>How do we know what tables and columns are in a database?</p>
</blockquote>

<ul>
  <li data-marker="*">The database schema contains the structure of the database, including table and column names. Later in this course, we will learn how to get the database schema and understand it.</li>
</ul>

<blockquote>
  <p>Is SQLite 3 case-sensitive? Why are some parts of the query in capital letters and some in small letters?</p>
</blockquote>

<ul>
  <li data-marker="*">SQLite is case-insensitive. However, we do follow some style conventions. Observe this query:
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>SQL keywords are written in capital letters. This is especially useful in improving the readability of longer queries. Table and column names are in lowercase.</p>
  </li>
</ul>

<h2 id="limit"><code class="language-plaintext highlighter-rouge">LIMIT</code></h2>
<ul>
  <li data-marker="*">
    <p>If a database had millions of rows, it might not make sense to select all of its rows. Instead, we might want to merely take a peek at the data it contains. We use the SQL keyword <code class="language-plaintext highlighter-rouge">LIMIT</code> to specify the number of rows in the query output.</p>
  </li>
  <li data-marker="*">
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">LIMIT</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>This query gives us the first 10 titles in the database. The titles are ordered the same way in the output of this query as they are in the database.</p>
  </li>
</ul>

<h2 id="where"><code class="language-plaintext highlighter-rouge">WHERE</code></h2>
<ul>
  <li data-marker="*">The keyword <code class="language-plaintext highlighter-rouge">WHERE</code> is used to select rows based on a condition; it will output the rows for which the specified condition is true.</li>
  <li data-marker="*">
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"author"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"year"</span> <span class="o">=</span> <span class="mi">2023</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>This gives us the titles and authors for the books longlisted in 2023. Note that <code class="language-plaintext highlighter-rouge">2023</code> is not in quotes because it is an integer, not a string or identifier.</p>
  </li>
  <li data-marker="*">
    <p>The operators that can be used to specify conditions in SQL are <code class="language-plaintext highlighter-rouge">=</code> (‚Äúequal to‚Äù), <code class="language-plaintext highlighter-rouge">!=</code> (‚Äúnot equal to‚Äù) and <code class="language-plaintext highlighter-rouge">&lt;&gt;</code> (also ‚Äúnot equal to‚Äù).</p>
  </li>
  <li data-marker="*">To select the books that are not hardcovers, we can run the query
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"format"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"format"</span> <span class="o">!=</span> <span class="s1">'hardcover'</span><span class="p">;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Note that <code class="language-plaintext highlighter-rouge">hardcover</code> is in single quotes because it is an SQL string and not an identifier.</li>
    </ul>
  </li>
  <li data-marker="*"><code class="language-plaintext highlighter-rouge">!=</code> can be replaced with the operator <code class="language-plaintext highlighter-rouge">&lt;&gt;</code> to get the same results. The modified query would be
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"format"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"format"</span> <span class="o">&lt;&gt;</span> <span class="s1">'hardcover'</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">Yet another way to get the same results is to use the SQL keyword <code class="language-plaintext highlighter-rouge">NOT</code>. The modified query would be
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"format"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="k">NOT</span> <span class="nv">"format"</span> <span class="o">=</span> <span class="s1">'hardcover'</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">To combine conditions, we can use the SQL keywords <code class="language-plaintext highlighter-rouge">AND</code> and <code class="language-plaintext highlighter-rouge">OR</code>. We can also use parentheses to indicate how to combine the conditions in a compound conditional statement.</li>
  <li data-marker="*">To select the titles and authors of the books longlisted in 2022 or 2023
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"author"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"year"</span> <span class="o">=</span> <span class="mi">2022</span> <span class="k">OR</span> <span class="nv">"year"</span> <span class="o">=</span> <span class="mi">2023</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">To select the books longlisted in 2022 or 2023 that were <strong>not</strong> hardcovers
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"format"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="p">(</span><span class="nv">"year"</span> <span class="o">=</span> <span class="mi">2022</span> <span class="k">OR</span> <span class="nv">"year"</span> <span class="o">=</span> <span class="mi">2023</span><span class="p">)</span> <span class="k">AND</span> <span class="nv">"format"</span> <span class="o">!=</span> <span class="s1">'hardcover'</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>Here, the parantheses indicate that the <code class="language-plaintext highlighter-rouge">OR</code> clause should be evaluated before the <code class="language-plaintext highlighter-rouge">AND</code> clause.</p>
  </li>
</ul>

<h2 id="null"><code class="language-plaintext highlighter-rouge">NULL</code></h2>

<ul>
  <li data-marker="*">It is possible that tables may have missing data. <code class="language-plaintext highlighter-rouge">NULL</code> is a type used to indicate that certain data does not have a value, or does not exist in the table.</li>
  <li data-marker="*">For example, the books in our database have a translator along with an author. However, only some of the books have been translated to English. For other books, the translator value will be <code class="language-plaintext highlighter-rouge">NULL</code>.</li>
  <li data-marker="*">Conditions used with <code class="language-plaintext highlighter-rouge">NULL</code> are <code class="language-plaintext highlighter-rouge">IS NULL</code> and <code class="language-plaintext highlighter-rouge">IS NOT NULL</code>.</li>
  <li data-marker="*">To select the books for which translators don‚Äôt exist, we can run
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"translator"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span>
 <span class="k">WHERE</span> <span class="nv">"translator"</span> <span class="k">IS</span> <span class="k">NULL</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">Let‚Äôs try the reverse: selecting the books for which translators do exist.
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"translator"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span>
<span class="k">WHERE</span> <span class="nv">"translator"</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="like"><code class="language-plaintext highlighter-rouge">LIKE</code></h2>
<ul>
  <li data-marker="*">This keyword is used to select data that roughly matches the specified string. For example, <code class="language-plaintext highlighter-rouge">LIKE</code> could be used to select books that have a certain word or phrase in their title.</li>
  <li data-marker="*"><code class="language-plaintext highlighter-rouge">LIKE</code> is combined with the operators <code class="language-plaintext highlighter-rouge">%</code> (matches any characters around a given string) and <code class="language-plaintext highlighter-rouge">_</code> (matches a single character).</li>
  <li data-marker="*">To select the books with the word ‚Äúlove‚Äù in their titles, we can run
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span>
<span class="k">FROM</span> <span class="nv">"longlist"</span>
<span class="k">WHERE</span> <span class="nv">"title"</span> <span class="k">LIKE</span> <span class="s1">'%love%'</span><span class="p">;</span>
</code></pre></div>    </div>
    <p><code class="language-plaintext highlighter-rouge">%</code> matches 0 or more characters, so this query would match book titles that have 0 or more characters before and after ‚Äúlove‚Äù ‚Äî¬†that is, titles that contain ‚Äúlove‚Äù.</p>
  </li>
  <li data-marker="*">To select the books whose title begin with ‚ÄúThe‚Äù, we can run
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"title"</span> <span class="k">LIKE</span> <span class="s1">'The%'</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">The above query may also return books whose titles begin with ‚ÄúTheir‚Äù or ‚ÄúThey‚Äù. To select only the books whose titles begin with the <strong>word</strong> ‚ÄúThe‚Äù, we can add a space.
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"title"</span> <span class="k">LIKE</span> <span class="s1">'The %'</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">Given that there is a book in the table whose name is either ‚ÄúPyre‚Äù or ‚ÄúPire‚Äù, we can select it by running
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"title"</span> <span class="k">LIKE</span> <span class="s1">'P_re'</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>This query could also return book titles like ‚ÄúPore‚Äù or ‚ÄúPure‚Äù if they existed in our database, because <code class="language-plaintext highlighter-rouge">_</code> matches any single character.</p>
  </li>
</ul>

<h3 id="questions-2">Questions</h3>
<blockquote>
  <p>Can we use multiple <code class="language-plaintext highlighter-rouge">%</code> or <code class="language-plaintext highlighter-rouge">_</code> symbols in a query?</p>
</blockquote>

<ul>
  <li data-marker="*">Yes, we can! Example 1: If we wanted to select books whose titles begin with ‚ÄúThe‚Äù and have ‚Äúlove‚Äù somewhere in the middle, we could run
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"title"</span> <span class="k">LIKE</span> <span class="s1">'The%love%'</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">Note: No book from our current database matches this pattern, so this query returns nothing.</li>
  <li data-marker="*">Example 2: If we knew there was a book in the table whose title begins with ‚ÄúT‚Äù and has four letters in it, we can try to find it by running
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"title"</span> <span class="k">LIKE</span> <span class="s1">'T____'</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
</ul>

<blockquote>
  <p>Is the comparison of strings case-sensitive in SQL?</p>
</blockquote>

<ul>
  <li data-marker="*">In SQLite, comparison of strings with <code class="language-plaintext highlighter-rouge">LIKE</code> is by default case-<em>in</em>sensitive, whereas comparison of strings with <code class="language-plaintext highlighter-rouge">=</code> is case-sensitive. (Note that, in other DBMS‚Äôs, the configuration of your database can change this!)</li>
</ul>

<h2 id="ranges">Ranges</h2>

<ul>
  <li data-marker="*">We can also use the operators <code class="language-plaintext highlighter-rouge">&lt;</code>, <code class="language-plaintext highlighter-rouge">&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;=</code> and <code class="language-plaintext highlighter-rouge">&gt;=</code> in our conditions to match a range of values. For example, to select all the books longlisted between the years 2019 and 2022 (inclusive), we can run
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"author"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"year"</span> <span class="o">&gt;=</span> <span class="mi">2019</span> <span class="k">AND</span> <span class="nv">"year"</span> <span class="o">&lt;=</span> <span class="mi">2022</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">Another way to get the same results is using the keywords <code class="language-plaintext highlighter-rouge">BETWEEN</code> and <code class="language-plaintext highlighter-rouge">AND</code> to specify inclusive ranges. We can run
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"author"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"year"</span> <span class="k">BETWEEN</span> <span class="mi">2019</span> <span class="k">AND</span> <span class="mi">2022</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">To select the books that have a rating of 4.0 or higher, we can run
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"rating"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"rating"</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">To further limit the selected books by number of votes, and have only those books with at least 10,000 votes, we can run
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"rating"</span><span class="p">,</span> <span class="nv">"votes"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"rating"</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">.</span><span class="mi">0</span> <span class="k">AND</span> <span class="nv">"votes"</span> <span class="o">&gt;</span> <span class="mi">10000</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">To select the books that have less than 300 pages, we can run
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"pages"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">WHERE</span> <span class="nv">"pages"</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="questions-3">Questions</h3>
<blockquote>
  <p>For range operators like <code class="language-plaintext highlighter-rouge">&lt;</code> and <code class="language-plaintext highlighter-rouge">&gt;</code>, do the values in the database have to be integers?</p>
</blockquote>

<ul>
  <li data-marker="*">No, the values can be integers or floating-point (i.e., ‚Äúdecimal‚Äù or ‚Äúreal‚Äù) numbers. While creating a database, there are ways to set these data types for columns.</li>
</ul>

<h2 id="order-by"><code class="language-plaintext highlighter-rouge">ORDER BY</code></h2>
<ul>
  <li data-marker="*">The <code class="language-plaintext highlighter-rouge">ORDER BY</code> keyword allows us to organize the returned rows in some specified order.</li>
  <li data-marker="*">The following query selects the bottom 10 books in our database by rating.
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"rating"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">ORDER</span> <span class="k">BY</span> <span class="nv">"rating"</span> <span class="k">LIMIT</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">Note that we get the bottom 10 books because <code class="language-plaintext highlighter-rouge">ORDER BY</code> chooses ascending order by default.</li>
  <li data-marker="*">Instead, to select the top 10 books
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"rating"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">ORDER</span> <span class="k">BY</span> <span class="nv">"rating"</span> <span class="k">DESC</span> <span class="k">LIMIT</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>Note the use of the SQL keyword <code class="language-plaintext highlighter-rouge">DESC</code> to specify the descending order. <code class="language-plaintext highlighter-rouge">ASC</code> can be used to explicitly specify ascending order.</p>
  </li>
  <li data-marker="*">To select the top 10 books by rating and also include number of votes as a tie-break, we can run
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span><span class="p">,</span> <span class="nv">"rating"</span><span class="p">,</span> <span class="nv">"votes"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="nv">"rating"</span> <span class="k">DESC</span><span class="p">,</span> <span class="nv">"votes"</span> <span class="k">DESC</span> 
<span class="k">LIMIT</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>Note that for each column in the <code class="language-plaintext highlighter-rouge">ORDER BY</code> clause, we specify ascending or descending order.</p>
  </li>
</ul>

<h3 id="questions-4">Questions</h3>
<blockquote>
  <p>To sort books by title alphabetically, can we use <code class="language-plaintext highlighter-rouge">ORDER BY</code>?</p>
</blockquote>

<ul>
  <li data-marker="*">Yes, we can. The query would be
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="nv">"title"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span> 
<span class="k">ORDER</span> <span class="k">BY</span> <span class="nv">"title"</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="aggregate-functions">Aggregate Functions</h2>
<ul>
  <li data-marker="*"><code class="language-plaintext highlighter-rouge">COUNT</code>, <code class="language-plaintext highlighter-rouge">AVG</code>, <code class="language-plaintext highlighter-rouge">MIN</code>, <code class="language-plaintext highlighter-rouge">MAX</code>, and <code class="language-plaintext highlighter-rouge">SUM</code> are called aggregate functions and allow us to perform the corresponding operations over multiple rows of data. By their very nature, each of the following aggregate functions will return only a single output‚Äîthe aggregated value.</li>
  <li data-marker="*">To find the average rating of all books in the database
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">AVG</span><span class="p">(</span><span class="nv">"rating"</span><span class="p">)</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">To round the average rating to 2 decimal points
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">ROUND</span><span class="p">(</span><span class="k">AVG</span><span class="p">(</span><span class="nv">"rating"</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">To rename the column in which the results are displayed
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">ROUND</span><span class="p">(</span><span class="k">AVG</span><span class="p">(</span><span class="nv">"rating"</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="k">AS</span> <span class="nv">"average rating"</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>Note the use of the SQL keyword <code class="language-plaintext highlighter-rouge">AS</code> to rename columns.</p>
  </li>
  <li data-marker="*">To select the maximum rating in the database
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="nv">"rating"</span><span class="p">)</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">To select the minimum rating in the database
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="nv">"rating"</span><span class="p">)</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">To count the total number of votes in the database
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="nv">"votes"</span><span class="p">)</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">To count the number of books in our database
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> 
 <span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">Remember that we used <code class="language-plaintext highlighter-rouge">*</code> to select every row and column from the database. In this case, we are trying to count every row in the database and hence we use the <code class="language-plaintext highlighter-rouge">*</code>.</li>
    </ul>
  </li>
  <li data-marker="*">To count the number of translators
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="nv">"translator"</span><span class="p">)</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
    <ul>
      <li data-marker="*">We observe that the number of translators is fewer than the number of rows in the database. This is because the <code class="language-plaintext highlighter-rouge">COUNT</code> function does not count <code class="language-plaintext highlighter-rouge">NULL</code> values.</li>
    </ul>
  </li>
  <li data-marker="*">To count the number of publishers in the database
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="nv">"publisher"</span><span class="p">)</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li data-marker="*">As with translators, this query will count the number of publisher values that are not <code class="language-plaintext highlighter-rouge">NULL</code>. However, this may include duplicates. Another SQL keyword, <code class="language-plaintext highlighter-rouge">DISTINCT</code>, can be used to ensure that only distinct values are counted.
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="nv">"publisher"</span><span class="p">)</span> 
<span class="k">FROM</span> <span class="nv">"longlist"</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="questions-5">Questions</h3>
<blockquote>
  <p>Would using <code class="language-plaintext highlighter-rouge">MAX</code> with the title column give you the longest book title?</p>
</blockquote>

<ul>
  <li data-marker="*">No, using <code class="language-plaintext highlighter-rouge">MAX</code> with the title column would give you the ‚Äúlargest‚Äù (or in this case, last) title alphabetically. Similarly, <code class="language-plaintext highlighter-rouge">MIN</code> will give the first title alphabetically.</li>
</ul>

<h2 id="fin">Fin</h2>
<ul>
  <li data-marker="*">
    <p>This brings us to the conclusion of Lecture 0 about Querying in SQL! To exit the SQLite prompt, you can type in the SQLite keyword <code class="language-plaintext highlighter-rouge">.quit</code> and this should take you back to the regular terminal.</p>
  </li>
  <li data-marker="*">
    <p>Until next time!</p>
  </li>
</ul>


                    
</body>
</html>