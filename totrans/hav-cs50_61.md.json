["```\n    SELECT \"title\" FROM \"books\"\n    WHERE \"id\" IN (\n        SELECT \"book_id\" FROM \"authored\"\n        WHERE \"author_id\" = (\n            SELECT \"id\" FROM \"authors\"\n            WHERE \"name\" = 'Fernanda Melchor'\n        )\n    ); \n    ```", "```\n    SELECT \"name\", \"title\" FROM \"authors\"\n    JOIN \"authored\" ON \"authors\".\"id\" = \"authored\".\"author_id\"\n    JOIN \"books\" ON \"books\".\"id\" = \"authored\".\"book_id\"; \n    ```", "```\n    CREATE VIEW \"longlist\" AS\n    SELECT \"name\", \"title\" FROM \"authors\"\n    JOIN \"authored\" ON \"authors\".\"id\" = \"authored\".\"author_id\"\n    JOIN \"books\" ON \"books\".\"id\" = \"authored\".\"book_id\"; \n    ```", "```\n    SELECT * FROM \"longlist\"; \n    ```", "```\n    SELECT \"title\" FROM \"longlist\" WHERE \"name\" = 'Fernanda Melchor'; \n    ```", "```\n        SELECT \"name\", \"title\"\n        FROM  \"longlist\"\n        ORDER BY \"title\"; \n        ```", "```\n    SELECT \"book_id\", ROUND(AVG(\"rating\"), 2) AS \"rating\" \n    FROM \"ratings\"\n    GROUP BY \"book_id\"; \n    ```", "```\n    SELECT \"book_id\", \"title\", \"year\", ROUND(AVG(\"rating\"), 2) AS \"rating\" \n    FROM \"ratings\"\n    JOIN \"books\" ON \"ratings\".\"book_id\" = \"books\".\"id\"\n    GROUP BY \"book_id\"; \n    ```", "```\n    CREATE VIEW \"average_book_ratings\" AS\n    SELECT \"book_id\" AS \"id\", \"title\", \"year\", ROUND(AVG(\"rating\"), 2) AS \"rating\" \n    FROM \"ratings\"\n    JOIN \"books\" ON \"ratings\".\"book_id\" = \"books\".\"id\"\n    GROUP BY \"book_id\"; \n    ```", "```\n        SELECT * FROM \"average_book_ratings\"; \n        ```", "```\n    SELECT \"year\", ROUND(AVG(\"rating\"), 2) AS \"rating\" \n    FROM \"average_book_ratings\" \n    GROUP BY \"year\"; \n    ```", "```\n    CREATE TEMPORARY VIEW \"average_ratings_by_year\" AS\n    SELECT \"year\", ROUND(AVG(\"rating\"), 2) AS \"rating\" FROM \"average_book_ratings\" \n    GROUP BY \"year\"; \n    ```", "```\n    DROP VIEW \"average_book_ratings\"; \n    ```", "```\n    WITH \"average_book_ratings\" AS (\n        SELECT \"book_id\", \"title\", \"year\", ROUND(AVG(\"rating\"), 2) AS \"rating\" FROM \"ratings\"\n        JOIN \"books\" ON \"ratings\".\"book_id\" = \"books\".\"id\"\n        GROUP BY \"book_id\"\n    )\n    SELECT \"year\" ROUND(AVG(\"rating\"), 2) AS \"rating\" FROM \"average_book_ratings\"\n    GROUP BY \"year\"; \n    ```", "```\n    CREATE VIEW \"2022\" AS\n    SELECT \"id\", \"title\" FROM \"books\"\n    WHERE \"year\" = 2022; \n    ```", "```\n        SELECT * FROM \"2022\"; \n        ```", "```\n    CREATE VIEW \"analysis\" AS\n    SELECT \"id\", \"origin\", \"destination\", 'Anonymous' AS \"rider\" \n    FROM \"rides\"; \n    ```", "```\n        SELECT * FROM \"analysis\"; \n        ```", "```\n    ALTER TABLE \"collections\" \n    ADD COLUMN \"deleted\" INTEGER DEFAULT 0; \n    ```", "```\n    UPDATE \"collections\" \n    SET \"deleted\" = 1 \n    WHERE \"title\" = 'Farmers working at dawn'; \n    ```", "```\n    CREATE VIEW \"current_collections\" AS\n    SELECT \"id\", \"title\", \"accession_number\", \"acquired\" \n    FROM \"collections\" \n    WHERE \"deleted\" = 0; \n    ```", "```\n        SELECT * FROM \"current_collections\"; \n        ```", "```\n    CREATE TRIGGER \"delete\"\n    INSTEAD OF DELETE ON \"current_collections\"\n    FOR EACH ROW\n    BEGIN\n        UPDATE \"collections\" SET \"deleted\" = 1 \n        WHERE \"id\" = OLD.\"id\";\n    END; \n    ```", "```\n    DELETE FROM \"current_collections\" \n    WHERE \"title\" = 'Imaginative landscape'; \n    ```", "```\n    SELECT * FROM \"current_collections\"; \n    ```", "```\n    CREATE TRIGGER \"insert_when_exists\"\n    INSTEAD OF INSERT ON \"current_collections\"\n    FOR EACH ROW \n    WHEN NEW.\"accession_number\" IN (\n        SELECT \"accession_number\" FROM \"collections\"\n    )\n    BEGIN\n        UPDATE \"collections\" \n        SET \"deleted\" = 0 \n        WHERE \"accession_number\" = NEW.\"accession_number\";\n    END; \n    ```", "```\n    CREATE TRIGGER \"insert_when_new\"\n    INSTEAD OF INSERT ON \"current_collections\"\n    FOR EACH ROW\n    WHEN NEW.\"accession_number\" NOT IN (\n        SELECT \"accession_number\" FROM \"collections\"\n    )\n    BEGIN\n        INSERT INTO \"collections\" (\"title\", \"accession_number\", \"acquired\")\n        VALUES (NEW.\"title\", NEW.\"accession_number\", NEW.\"acquired\");\n    END; \n    ```"]