# 阅读 6：规范

#### 6.005 中的软件

| 免受错误的影响 | 易于理解 | 为变化做好准备 |
| --- | --- | --- |
| 今天正确，未知的未来也正确。 | 与未来的程序员清晰沟通，包括未来的你。 | 设计以适应变化而无需重写。 |

#### 目标

+   了解方法规范中的先决条件和后置条件，并能够编写正确的规范

+   能够根据规范编写测试

+   了解 Java 中已检查和未检查异常的区别

+   了解如何使用异常获取特殊结果

## 介绍

规范是团队合作的关键。没有规范，无法委派实现方法的责任。规范充当合同：实施者负责遵守合同，而使用该方法的客户可以依赖合同。事实上，我们会发现，就像真实的法律合同一样，规范对双方都提出了要求：当规范有先决条件时，客户也有责任。

在本次阅读中，我们将研究方法规范的作用。我们将讨论先决条件和后置条件是什么，以及它们对方法的实施者和客户的意义。我们还将讨论如何使用异常，这是 Java、Python 和许多其他现代语言中的一个重要语言特性，它使我们能够使方法的接口更安全，更易于理解。

## 第 1 部分：规范

## 第 2 部分：异常

## 总结

在我们结束之前，用一个最后的例子检查一下你的理解：

#### 阅读练习

Scrabble 1

假设我们正在处理下面的方法…

```
// Requires: tiles has length 7 & contains only uppercase letters.
//           crossings contains only uppercase letters, without duplicates.
// Effects: Returns a list of words where each word can be made by taking
//          letters from tiles and at most 1 letter from crossings.
public static List<String> scrabble(String tiles, String crossings) {
    if (tiles.length() != 7) { throw new RuntimeException(); }
    return new ArrayList<>();
}
```

（缺少答案）（缺少答案）（缺少答案）（缺少答案）

（缺少解释）

（缺少答案）（缺少答案）（缺少答案）（缺少答案）

（缺少解释）

Scrabble 2（缺少答案）（缺少答案）（缺少答案）（缺少答案）

（缺少解释）

（缺少答案）（缺少答案）（缺少答案）

（缺少解释）

规范充当程序实现者和其客户之间的重要防火墙。它使分离开发成为可能：客户可以自由编写使用该过程的代码，而无需看到其源代码，并且实施者可以自由编写实施该过程的代码，而不知道它将如何使用。

让我们回顾一下规范如何帮助实现这门课程的主要目标：

+   **免受错误的影响**。一个好的规范清楚地记录了客户和实施者依赖的共同假设。错误通常来自接口的分歧，而规范的存在可以减少这种情况。在规范中使用机器检查的语言特性，如静态类型和异常，而不仅仅是人类可读的注释，可以进一步减少错误。

+   **易于理解**。简短、简单的规范比实现本身更容易理解，并且节省了其他人阅读代码的时间。

+   **准备好改变**。规范建立了代码中不同部分之间的契约，使得这些部分可以独立变化，只要它们继续满足契约的要求。
