# GAMES106-现代图形绘制流水线原理与实践 - P8：8. 几何处理与模型减面之保纹理的模型减面 - GAMES-Webinar - BV1Uo4y1J7ie

![](img/957475990229daab406cfb3f87b0c878_0.png)

呃大家好呃，那个上课的时间已经开始了哈，大家应该能听到我的声音吧，嗯我不知道这个直播的这个是这个，大家如果评论的话，我是不是能实时的看到哈，如果大家有什么问题的话，在我讲的时候啊，就直接留言对吧。

嗯然后我们上节课呢是讲了呃，关于呃三维模型的各种不同的表达方式，以及专专门针对这个网格这种表达方式呃，来介绍它是如何表示一个三维模型的，包括这个模型的这个啊拓扑属性啊，几何属性啊。

还有一些常用的一些术语，一些解释啊，然后呢我们也介绍了这个，对于三维模型进行简化，或者说通俗一点是进行数据的压缩，有几种不同的方式啊，以及他们的优缺点吧，大概是这样子，那我们这节课呢。

我们会更多的集中于其中一种啊，就是保纹理的这种模型进行减面，也就是呃减少模型的那个啊，三角形的个数的这种呃这么一个嗯方法吧，呃然后呃在我讲的时候。



![](img/957475990229daab406cfb3f87b0c878_2.png)

如果大家有什么不明白的哈，就呃及时发问。

![](img/957475990229daab406cfb3f87b0c878_4.png)

呃这个保温里的简便方法呢，哦我们可以再稍微回顾一下，它到底是一个怎么回事啊，比如说这，这个左边这三张就是左上角这三个图啊，啊就是我我们对输入的一个三维模型，进行的一个呃可视化啊。

那这是那个三维模型的样子啊，然后中间这个图呢是他的啊，这个网格它所对应的那个uv的网格嗯，然后最左边这个呢是它的纹理贴图对吧，然后这个纹理，它这个三维模型上面的这个颜色呀，大家能看出来是一个企鹅对吧。

站在一个呃呃台阶上啊，那这个它呈呈现出来是通过什么方式啊，我们在渲染的时候对吧，我们呃大家到现在应该了解啊，那个基于光栅化或者retracing这种渲染方式，他去啊在屏幕空间中去啊，做这种啊。

比如说啊三个化了的话，他是做这种啊，光栅化的时候，那去啊查询每个三角形，它对应的啊应该怎么对它进行上色对吧，那我们就会查询到他的uv空间对吧，然后相对应的查询到对应的那个纹理坐标。

上面的纹理像素值啊等等，然后对它进行染色，ok这是原始的模型，原始的模型，所以它存储的设计师是什么啊，这个网格数据对吧，当然我们这里没有单独把网格数据画出来哈，然后存储的还有当然还有uv的这块数据。

uv这块数据呢其实跟网格数据大小是啊，一样的哈，当然它坐标是两位的那个网格，3d网格它是三维的，但它是一致一个two d的网格，三角形的面数是一样的呃，然后再就是这个贴图的啊，这个信息对吧啊。

这是我们输入，然后我们对它进行什么叫保纹理的简便算法呢，就是我们在减少这个模型的面数的时候，我们希望我们输出的简化后的结果呀，它能依然使用输入模型的纹理贴图对吧，这样的话我们就省掉什么了，省掉这个啊。

比如说对这个简化的这个模型，在创建一份这个贴图的这么一个数据量啊，这是目前啊这个比如说游戏行业哈，那大家都比较非常喜欢的啊，如果实在是没，除非没有什么别的办法，大家一般都更喜欢这种方式，因为它更省数据。

对在游戏里面，这个数据量的大小非常对那个游戏的性能啊，以及质量啊等等，就是会产生这个啊很多的影响啊，这也是啊大家就是花时间精力以及啊，嗯基本上是非常非常多，不能说最多的这个地方吧。

啊你是非常非常大量时间精力啊，人力物力等等计算资源都是都是来去优化啊，这个数据量的，ok然后这里是展示了另外两组这个简化的结果，就是这个这个数字就是面面的数目对吧啊，所以这种这种方法呀。

它的特点当优点是一个省省数据对吧，不需要啊在啊生成线的贴图，另一方面呢它的啊在加上过程中，他需要啊有些特别需要注意的地方，比如说你看他的uv啊，这个uv的这个mesh。

它的pattern实际上是一样一样的，嗯所以虽然这一类的简化方法呀在很早之前，二三十年前就有了哈，嗯那他一直就是一直到现在，都是这个业界都很比较细，比较偏好的这个呃一种方法来去做数据压缩。

然后在这些有很多方法里面嗯，可能可以说是最经典的一个方法，就是啊基于这个呃叫quadratic啊，就quadrc这个error metric，这种方式，就是基于这种这个merriment。

来去进行简化的这么一个方法，那这方法呢也是我们今天要详细介绍的，就我们今天就只介绍它啊，然后详细介绍它是怎么运作的，然后呢我们那个呃这个跟几何处理相关的，或者模型减面相关的这个作业呀。

也就是实现啊这个论文啊，ok所以大家在听的时候，如果有什么不理解的，或者是我讲解的不清楚的，或者是我讲错的地方，大家及时指出来，ok我们先说一下啊，先定一下我的问题是什么啊。

我们输入比如说有一个网格模型对吧，这网格模型它可以是两维的，也可以是三维的，不过一般来说都是三维的对吧，再就是这个网格模型啊，他带着uv对吧，他可能带着uv，也可能不带着，但我们加设啊，他他带着。

然后当然还有相对应的这个纹理贴图，然后还有另外一呃一个输入，就是用户希望的这个简便的，就是最终输出模型的面数，或者说这个面的这个输入模型的面数，以输入模型的面数的一个比值对吧，这是比较常用的啊。

用户啊喜欢的参数设置，然后输出呢我们这个问题的输出就是，进行了假面后的三维网格和它对应的uv网格，好注意啊，这里我们这个纹理材质不会输出，因为他们就是用同一套管理材质对吧，那我们要求啊是这样子。

因为如果没有任何要求的话，那我们可以随便的去删减那个输入模型的呃，面呀点呀对吧，都无所谓对吧，没有任何要求的话，但是不可能的对吧，我们在实践中，我们希望就是我们的目的一方面对啊。

我们这个游戏或者是这个啊这个渲染哈，它的应用一般是我们一方面追求极致的，这个渲染效果对吧，希望能越真实越好的来展现出这个三维场景的，它的呃呃那个呃画质对吧，另一方面呢。

我们又希望它的计算速度要尽可能的快进，提升计算速度的这个方法呀有多方面，比如说你可以通过改进的渲染技术，另一方面呢我们可以通过嗯，在相同的渲染技术情况下，我们可以通过压缩我们要渲染的数据量对吧。

比如说你渲染100万个面子，这个三维场景跟渲染100个面的三维场景，它的速度那肯定是不一样的对吧，所以我们这里啊，我们这里的问题就是呃我们尽可能的去啊，来对啊，我要是对数据进行压缩这个角度来去提升效率。

但是你压缩的同时，我们又希望能尽可能的保证它的画质对吧，所以就无形中就给我问，我那个呃一些提出一些要求对吧，你在简便的同时也在压缩你的数据量的时候，你如何能保持你渲染出来。

最终的效果跟没有压缩之前一样子的对吧，但有的时候你数据量压缩的太狠了，以至于你海南宝石一样，但是我们尽可能的让它一样对吧，呃当然这是从渲染这个角度来去看，也有一些呃，比如说有些其他的应用啊。

他可能会考虑其他的角度，因为这个三维模型啊，它有的时候它不仅仅是啊只是做渲染，那我们还会比如说对它做动画对吧，做这个模拟，物理模拟等等，那那些他可能又对这个模型啊，又有一些额外的要求对吧。

比如说我们希望我们的在假面过程中啊，最终输出的模型跟输入的模型，它的拓扑是一致的，那我们叫做保拓扑对吧，我们前面上一节课的时候，我们也介绍了什么叫拓扑对吧，一个三模型它的拓扑都有什么样子啊。

那另外一方面比如说五字相交，如果输入模型它没有自相交的话，那我们也希望输出的模型它没有自相交啊，这有的时候是这样子哈，这并不并不全是对吧，我们只是目前我们先把我们能想到的一些呃，一些要求啊。

我们举个例子啊来给大家就是呃大概体验一下，都是嗯具体问题啊，它都可能会是什么样子的啊，一些场景，还有的是说ok我不急，我我我简化完了这个呃这个模型呢，我要求它跟数据模型那个啊渲染的效果相似。

但是另一方面，我希望他们这个呃模型车所表达的啊，模型的表面啊对吧，能表面不是有那个你，你说是从视觉这个角度来看的话，它会有一个表面，一个它是嗯一个表面，它嵌入在三维空间中嘛，那他呃你输入这个模型的表面。

以及输出模型的表面，它们之间我们是可以定义一些各种各样的，一些距离的对吧，比如说欧式距离呀，或者是其他什么距离啊，来我希望他们的距离尽量小啊，这不叫保距离，应该是距离小k尽量没有差别对吧，你距离小了。

距离等于零的时候，那是不是就没有差别了，对吧啊等等，还有各种各样的要求，ok这是我们的问题，大概是这样子的，然后我们就说一下哈，我们直直直接说啊，我们这个算法呢，嗯就是简化模型的这个算法的框架呀。

我又把它给呃就是列出来了哈，这个框架非常通用，基本上是哦，咱不能说百分之百就是绝大部分的啊，可以保纹理的简便方法，他们基本上都遵循这么一套简化的框架，ok那我们过一下哈，这个框架是什么样子的。

首先我对这个拿到这个数据模型之后，我会对它定义定义一些简化的操作单元，也就是说操作机缘，那实际上我整个的这个简化算法呀，就是围绕着我这个简化操作单元来的，比如说我确定了简化操作单元之后啊。

我现在对他们第一步啊，把输入模型里面的所有的简化操作单元呃，这个提取出来，然后计算他们的呃误差，因为你错，你这个操作按压，它是朝着简化模型的复杂度来的嘛，他肯定会对模型产呃产生变化，产生了变化之后。

比如说降减少了面数，减少了面数啊，它就必然而然的就会引起模型的改变，引起模型改变，那我们就可以计算它的误差啊，在后面呢我们会详细介绍啊，什么是简化操作单元，然后呢误差是怎么回事，嗯好诶。

简化了就是都计算完了这个误差之后，那我们再根据这些误差呀，来构建所有操作单元的一个优先队列，计算完了这个优先队列之后呢，然后我们就可以开始了对吧，进入一个嗯一个挖挖循环，比如说只要这个队列不为空。

并且啊他我们还没有达到那个停止条件，当然这停止条件也是用户自己设置的，根据不同的问题啊，啊这个具体情况就是具体的去设置，比如说停止条件有啊，已经达到这个想要简化的这个面数的多少对吧，比如说想要啊。

想要这个简化完了之后，他的那个啊渲染的效果啊，就是差到已经多少了，不能再差了，对吧啊等等啊，这种嗯各种各样的这种停止条件，如果没没满足停止条件的时候，我们就执行一下顺序的执行以下操作，什么操作呢。

先取出这个队列里面的优先，队列里面的第一个操作单元，ok然后我们针对这个操作单元呢，我们就检查它是否有效啊，那就是说涉及到它的有效性是什么，什么怎么一回事，ok如果他没有通过这个有效性的这个检查呢。

那我们就重复以上面对吧啊，继续再去啊，pop那个第一个操作单元，然后呢再去检查，如果如果他通过了它有效，那好那我们就会执行这个操作单元，然后并且更新他连续的呃，相邻的一些操作单元，然后更新他们的误差。

然后并加入优先队列，这样不断的往循环往复啊，值得达到停止条件，然后呢我们这里呢我们就先说一下嗯，都有什么样的简化操作单元啊，啊其实啊我我估计我们有些同学啊，应该已经嗯大概有所了解，有的甚至可能挺熟悉的。

就是我们给定假设，这是我们的一个一个网格模型对吧，加这一个网络模型，我们其实如果要减少它的面数的话啊，基本上有这么几种操作啊，一种是我就删点，比如说我我选中其中某个点，我把它删掉啊，删掉这个点。

那周围的它就它就叫一阶领域对吧，我们前面讲过这个什么是连续的概念，删掉这个一键领域里面的这个所有的三角形，ok删掉完了之后呢，他就是成了一个多边形对吧，那多边形那就是我们最终我们想要的是。

还是要保持这整个模型，它是一个三角网格对吧，那我们为了保持它这个三角网格这个属性，我们呢就需要对它做一个重新三角化对吧，重新连连连成一个三角网格，你看这个三角网格，因为啊其实还少了一个。

这个应该也有这个阴影哈，12345对吧，这是五个，那原来是多少啊，1234567对吧，原来是七个，然后变成了五个，就变成了就减少了，就是删除一个点，就减少了两个三角形对吧。

所以这个操作单元它可以是就是的衣橱啊，就是这个vertex removal对吧，然后其他也有一些操作单元，比如说我不仅仅是删除点，我也可以比如说删除边对吧，这这是可以说是最常见最常用的一种简化操作。

我mesh里面所有的这些边啊，我每一条边如果啊这一个边它有两个点吗组成，那我把这两个点把它合成一个点对吧，那我这个边不就没了吗，那是这个与此同时呢，这两这一条边它一开始相邻的两个三角形啊。

啊当然这个图里面是展示的是两个三角形，但实际实际中呢，它有可能是呃一个或者多个对吧，当然也取决于这个模型的拓扑是什么样子，但这个算法呢他又对呃，其实对拓扑呢啊他就是很通用的一个算法，呃。

这个操作他其实不敏感，ok那这个错误就是我就把这条边给去掉啊，就叫一树边或者edge入魔对吧，如墨一条边，那我就会删掉两个三角形，ok然后还有另外一种呢，就是，这个输入模型里面。

它可能没有的那种连接的边啊，但是如果如果有两个点，它可能很相近对吧，有什么非常相近，我根据这个距离我看不到啊，我这个点对，我其实可以把它给啊给给合起来对吧，这样的话也可以啊，只是他这个操作呢它并没有。

虽然这个操作它并没有简化嗯，三角形的个数，但是呢它往往呀在还在有些情况下，呵呵好问题，这种情况不会出问题吗，对吧嗯，这取决于具体的问题是什么样子的对吧，学学具体文案是什么样子。

或者具体你的需求是什么样子，有些情况下啊，你这样把它合起来啊，它是会对进一步的应用啊，编的这个叫啊移除啊啊有帮助，会帮助他更好的来进行移除，编移除移除边，然后也就是进一步的简化这个三角形。

所以这种操作呃由是在原文里面他提到的哈，它往往需要跟这种操作，或者跟其他的那种真正的能去简化面的数目的，那些操作啊，有一起联合使用，如果只是拥有他自己，那其实啊呃没没没什么用处。

因为它不会减少那个三角形的数目嗯，那这种操作一般在什么情况下，比如说输入模型，它嗯它有些有些点它就是重复的对吧，它坐标都是一样子的，但是呢他就是id不一样，所以在那种情况下。

他有的时候我们就希望把它给mage起来，这样的话啊就嗯方便以后的操作，嗯当然还有一些其他的简化操作单元了，比如说我可以啊，111次性就一除以整个三角形对吧，或者一次性移除多少三角形等等啊。

那些我们就在这里不具体阐述了哈，那接下来呢我们可能会更多地集中在，就是讲这个编的基础嗯，因为这个是比较常用的，嗯讲完了这个简化操作单元的那个，其实这个简化框架它的核心，它的核心中的核心嗯，其实就是两点。

哪两点呢，一个是你这个简化操作导演，你是对怎么对它进行排序的对吧，我这个输入模型里面它有很多条边，我怎么对这些边进行排序，哪个先剪哪条边，再去剪哪条边，它这个顺序会大大的影响。

我们最终简化出来的模型的质量，另外一个点是呃，你就是就collapse合并这两个点的时候，他不是会形成一个新的顶点吗，这个新的顶点的位置也对啊，简化模型的结果有非常大的影响，因为你像这个模型。

它是它实际上它的外形基本上就有这个点的位，置，就大致就勾勒出来了对吧，再加上这个点的连接关系，然后你这样渲染，它就是构成一个完整的三维模型的样子啊，这个点的位置是非常关键的，所以总体来说啊。

我们这个简化算法呀，它的核心就是两点，一个是如何对它进行排序，另外一点是如何决定顶点的位置，然后这两点呢其实都跟那个简化操作，以及它的就是误差的计算就息息相关啊，你怎么去去衡量这一个边折叠它的啊，误差。

对也就是接下来我们要，阐述的对吧啊，讲到这里呢，如果大家有什么问题呢，可以就是啊也是打在屏幕上哈，那几何这个误差呀，呃误差计算，其实就取决你是怎么定义这个误差的对吧，那其实有很多种啊，非常多种啊。

我在过去的这个这个二二十多年里面，这针对这个课题的研究里面有非常多，很多人提出各种各样的这个误差，大部分都是几何五常，什么意思呢，就是，啊这还需要遍历注意点坐标吗，我你指的具体什么意思呀，编辑注意点。

坐标是指嗯，我前面在讲的那个，在讲这个边折叠的时候啊，如如何计算现在顶点的位置是吗，嗯那肯定是要就是他周围的信息啊，肯定是需要的啊，是需要用到的，这个是关于这个，如你如果是讲如何便利注意点的坐标。

这个之前前面我们讲过那个一个数据结构对吧，那其实这个便利啊，你就算不用那个半边结构，也可以用那种，就是你把无非就是把所有的信息都存储嘛，那其实也是容易便利的，它就是一个graph对吧，ok。

我们接接接着说哈，这个误差呢嗯这个定义呢其实有很多种，各式各样的，那我们就就就说几种我觉得值得说到的啊，比如说这个啊一种是几何误差，就衡量这个啊只是mesh啊，他的变化变折叠之前和变折叠之后。

它的区别对吧，这两个mesh的区别，当然还有一种呢就是比如说视觉无常呃，视觉误差就是诶你简化完了之后，他的啊在视觉上它造成的影响对吧，然后几何误差呢里面嗯我们先说一下。

这个就一种叫host of距离对吧，嗯我们上节课也讲到什么是host of距离对吧，这个这个图啊，比如说一个蓝色的这个物体和绿色的物体对吧，这从蓝色物体到绿色物体啊，每个点啊，它的呃。

最近点里面的那个那个距离的最大最大距离，以及从绿色物体到蓝色物体啊，同样啊啊所有点的最近点，然后从里面选个最大的，然后从这个从a到b再从b到a，它这里面那两个最大的值里面选一个最大的。

这就是啊衡量两个物体的叫host of距离的啊，这个连续的定义，那一般计算呢计算这个呃hole纪律的时候，其实也有，真的是啊，在同学里面基本上每个问题都有啊，都有好几个方法对吧，或者是多个方法来去解决。

那也有连续的问题，也有相对连续的这种解决方法也比较常用的，还是那种基于采样的方法来去实现啊，这里我贴出了一个大家比较常用的啊，一个一个库啊，那个算法呢呃就是那个论文就是这样，就在这里嗯。

那我们呢其实在真正去衡量这个的时候，因为它的计算实际上是很慢的啊，就算这个距离，那我们希望能快速的呃，举个例子哈，比如说这是一个，一个一维的一个例子，一个一个折线啊，一个一个折线。

那我们假设我们要去把这个红色的边，把它给折叠了对吧，直接红色的边它会形成这种绿色的边啊对吧，假设我们已经决定好了，这个啊，你collapse这两个点，红色点这个之后那个生成了新的点。

这个绿色的它的位置哈，那我们想衡量这个折叠之前和折叠之后，这两个形状的距离的时候，对吧，那我们怎么衡量呢，比如说我们啊用采样的方式，采样方式，一种就是唉这还有点这这画的有点off哈。

但但这黑点这不应该是在这黑点，我觉得应该是在这，你们就是比如说对原来的那个曲线呢，你可以采用一些点，然后最这个新生成的这个曲线呢就是形状的，你也可以采用一点。

然后就算这两组点对的这种离散的这种host距离，或者是嗯呃就是champer distance对吧，就是在视觉里面就经常用cheer distance，来去衡量他们的这个呃一种距离方式。

来见识这个host of距离，ok当然这近似合作，具体的方法有有有有很多种啊，我们这里只是简单的提了一种好，因为我们这个这节课，我们主要的重点就是介绍这个课，这个quadrc。

其实就是cratic这个error的这个metric计算这个呃，就是这种二次误差，他是怎么回事呢，啊简单来说就是我衡量的是点到平面的距离的，平方和什么意思，比如说这是那个绿色的点。

那它到在两在这个曲线上的话，那我们就是点到直线的距离了哈，在三维平面，在三维空间中，那就是点到平面的距离，ok我这个点到它连接的几个直线的，比如说在collapse之前对吧。

collapse之前就是这这一条直线，然后这红色一条直线，然后这里有一条直线，就是跟它相邻的那几条直线，到这几个直线的距离的平方和就diss，我们加上用diss表示v到pp表示那个直线。

ok他们这个距离的一个平方和这个平方和越小，说明它的误差越小啊，然后这是那个啊crocodc那个error metric，那个定义，ok这是在呃呃曲线上的，接下来我们会重点详细的展开介绍哈。

如何是如何计算的，还有一点呢，就是除了只是衡量这个几何上的它的距离啊，各种不同的距离啊，啊或者几何的那种啊啊就是二次二次距，就是距离的平方呀，或者是就是什么法相啊，这个曲剧院等等各种不同的啊。

这种几何方面的这个误差来说，还有的就有几个工作哈，啊我们这里讲一个呃，就是，那个我们可以根据啊这个输入模型的，它的它在视觉上就是给人这个视觉观看起来，这个影响，把这个因素啊加入进去考虑什么意思呢。

比如说这个茶壶吧啊，你从不同的视角，因为不舍得说是要去看他这个表面上，他呃有的视角他是表面上他是看不到的，比如说这种这种比较凹陷的，这种这种这个茶壶的这个饼对吧，以及这种就是被遮挡比较多的地方。

他其实被看到的视角的树木或是当然视角，你要是把它离散化的话啊，这视角的这个多少呀，这量的多少，它实际上是相对，比如说这种区域它是比较少的，相对少一点的，他就利用了这种信息来做。

对整个模型做了一个啊做了一个计算，做了一个视觉的一个呃，呃对视觉的影响了这么一个估计，然后呢他把这个啊估计啊作为某种某种度量呀，哎结合到这个前面提到的，cos的那个error metric上面去。

然后呢呃来去指导啊，我们的简化，这样的话你可以你可以认为它，实际上你在啊简化这个模型的时候，实际上是融入了最终简化模型，对这个视觉造成的啊区别，来，对所有的编啊做了啊又一层次的啊，这么一个叫叫叫什么啊。

又一个层次上的一个区分对吧，一个区分度，当然具体细节大家可以看这个这个purple了哈，啊，我看有个同学说看着像贝加尔曲线的计算方式，不是这这个这不是布瑞泽曲线啊，这这个跟布瑞泽曲线这个差别很远啊。

这完全不同的定义啊，ok好啊，前面我们讲了这几种啊，大体啊非常非常粗浅的介绍了几个不同的误差，计算方式，那我们接下来重点阐述一下这个quadrc，这个errometric它是怎么算的。

ok在三维中它是怎么算的，我们先从最简单的开始对吧，比如说一个平面公式对吧，这是一个三维的平面公式，对于一个点来说啊，比如说他是xyz对吧，那他这个我们定义这个平面的话就是系数对吧。

呃ax加b y加c c加d等于零，ok啊，满足这个公式的所有的点，他都是在呃这个嗯，这这这组系数所定义的这个平面上，当然我们也要求这个a方加b方加c方等于一，加起来，ok啊那点在平面上呢。

那就是实际上v这个dot dot，这个dot product这个petransports啊，等于零对吧啊，就是说这点到平面的距离啊为零，ok这就是点在平面上对吧，这个大家都就之前都学过哈。

啊那我们现在只是稍微回顾一下，那我们这个project这个这q e m嘛，我们后面就简称这个q e q e m啊，这q m实在是啊在假面这个这个小问题上，他实在是太有名了啊，非常经典。

是25 6年前的一个算法了，直到这20多年以后，依然是这个工业节里面最常用的方法，也是最经典的方法，所以他如此经典，以至于我们必须啊我们作业，还有我们这个这节课重点就是只讲他。

ok也是可以说是最实用的方法啊，好那我们这个qm针对这个是什么意思呢，我们这个qq嘛它是针对每个点来算的对吧，我们就针对这个v这个顶点啊，啊我们算他的这个这个error啊。

就是这个q e m这种error对吧，就v顶点，那比如说我们这里有一组平面对吧，我们假设有一组平面，我们先不管这个平面是哪来的啊，假设有一组平面，那我这个呃，这个当前这个点v相对于这组平面来说对啊。

他的q em啊，就是这个这个error就是这么定义的对吧，就是它到每个平面的距离的平方啊对啊，就这个加合起来，ok这就是我们记得德尔塔哈，这就是我们的这个qe m o嗯，那我们把它可以把它给展开。

展开了之后啊啊我们可以先不先不说，先不说展开啊，我们就说这东西，它怎么着跟我们前面的那个操作单元，给结合起来的对吧，大家可以看到哈，不是说这个吧，你看这每个点啊，它实际上是相邻一组三角形嘛对吧。

那每个三角形什么意思啊，三点定义一个唯一确定一个平面对吧，所以说每个点它有相邻一组平面，它相邻这一组平面，那当然这个点到这一组平面的距离，那肯定是零了，就是q1 m的值就是等于零，对不对嗯。

但是这两个点它会合并成一个新的点，那这个新的点它它就不一定在原来的这一组，这一组平面上了对吧，所以呢我们就可以通过定义这个新的点，到原来的这一组平面上的q em，来什么，来来来来来来。

计算一个一个error，哪个error就是我来class这条边所产生的error，对吧，就这样子，ok好，那我们返回，好那我们解释了哈，我们这个这个q m怎么应用到我们前面的简化，这个操作上面去啊。

当然刚才讲的是这个折叠编了，其实你你这个啊其实你去啊去扔掉，去remove一个三角形，或者是嗯重现三角化那个乳木一个点，其实也可以比较灵活的，稍微稍微改一下。

也可以灵活的运用这个q e m的error啊，这个我们后面可以讲这个q m，它可以用在不仅仅是三角形网格，也可以是其他网格上面哈，ok那我们现在先看看哈，这个先分析一下这个q m这个式子对吧。

我们现在平面有了这个顶点有了，那我们分析一下这个q e m它是怎么一回事，比如我们把它展开对吧，展开这就叫平方向嘛，我们就把它给摊开，拆开之后它就是vp的transpose乘以啊。

这个p乘以v的transports对吧，然后这个p p translp，然后它这里面他因为这个v，它是他们只有一个定点嘛对吧，我们可以把它给拿出来，把这个sam把它弄下去啊，弄下去他就这样子这样子。

然后里面它是一个矩阵对吧，他一个矩阵，那如果我们这个v啊，我们定义是一个呃一个四维的话，比如我们讲把把整成起诉坐标的话，那里面这个加快起来，它实际上它可以形成一个矩阵的形式，我们把它记作大q对吧。

所以这q m呢我们就把它转换成这种形式啊，这个转换其实比较容易理解对吧，ok啊我们前面可能这个说的过于细致，以至于我们现在时间嗯有点紧张，所以呢我就加快一下速度啊，当然这也是核心了。

所以呢我们把这块理解了之后，后面的就比较容易跟得上对吧，大家之后再读细节上的一些论文的时候啊，然后就哎可能更更容易理解一些，ok然后把这个大q啊把它展开，它基本上就是这样子，这个a b c d呢。

就是前面我们那个平面的呃系数，ok那那我们就重新记住这个q11 ，q12 什么的啊，这就重新重新命名了一下，然后为了什么方便，我们下面我们再重新把那个式子写一下，dela等于v q大q和v t对吧。

那呃因为这个v啊它就是有有那个x y z，还有一嘛来来表示的，所以你就可以把它直接把它给展开啊，直接把它展开，它就是一个一个skelegy，就是一个单值对吧，但是这这这一坨东西加起来。

ok这就是我们的qe m o好，那问题来了，ok我们对进行边折叠的时候，我们是这样子，每首先你在编这期之前，我对输入的这个模型啊，我每个点我都相邻一组平面对吧，我其实都可以构造一个q是我只要有个点。

然后只要有个只要有一组平面，我就可以计算q，对不对，是这样子，那我我边折叠完了之后，我就可以把这两个q加起来啊，我就直接大家可以后面可以验证一下哈，他加起来他当然并不完全嗯，完全exactly相等。

它可能就是重复了，因为他们这个这个顶点它会算这一组平面，这个顶点会算这组平面，它们中间相邻了，对这个地方说相邻的两个两个三角形，所以这两个三角形它被重复计算了一次，但是这个不影响。

就是不是说ok他影响后面的啊，就是对精子会有点影响，但其实我们当前来看，我们可以先忽略这个事情啊，就是因为这样的话，你直接加和它会啊，一楼直接架火这个啊，这个q一加q2 ，把这个q拔啊。

作为这个v8 的这个顶点的啊，那个那个叫q e m那个error，那个那个matrix他就是速度快嘛对吧，你不需要再重新再算一把，那个samsquare是什么东西的，ok然后那我们这样的话。

这个delta这个q e m就关于啊，这个点的那个q m的，这个值，就是v8 乘以这个q8 乘以这个v8 的t对吧，那不要忘了啊，其实你如果定义了这么一个简化操作之后啊。

你是把整个东西你都可以把它作为一个，把它把它整成一个啊优化优化式子什么意思呢，我因为我一方面我还要，我还想计算这个顶点的位置呢对吧，这个顶点的位置，它对我这个error它是会有很大的影响的。

所以啊我其实根据这个这是我的ometric嘛，他就一个二次的形式，那么其实可以比较容易的来去求得啊，使得这个error最小的那个v8 的值，也就是我对v8 它的三个分量。

就x y z这三个分量分别求偏导，求偏导时的这个它的偏导偏导为零，等于零的时候就是极值嘛对吧，因为二次次函数的时候，那极值点它不就只有一个吗，只有一个，那你对吧，我就让他这个这个偏导都等于零。

那相对应的，比如说我们知道这个delta它展开，记住这个式子吗，这个式子这三个偏导就每一个每一个，比如就是对x求偏导，它实际上你对这里面你就求个偏导，你就它就等于零，它就是这个式子。

这个式子就是关于x y z的一个线性放松，对不对，就这就是一个线性方程，然后你再对y求偏导，再对z求偏导，分别就是构你就构建了三个线性方程嘛，对吧啊，这样的话我们就可以构建一个线性，方程组对吧。

然后再加一个也构成一个啊这个旗子狮子，所以那其实你我们要求x y z的值啊，那就是什么啊，就是你最最简单的就可以对它求，把这个把这个矩阵，因为这矩阵这每个系数都是已知的呀，你求逆对吧，就出来了。

ok这基本上就讲完了啊，我们如何对这个q v m啊，利用这个q v m来去来去求解，我们最优，使得它的误差最小的那个顶点的位置对吧，然后你求出来这个顶点位置之后，你完全可以带回到这个式子里面去。

计算出它的误差来，然后你然后我们再返回对吧，这个每个简化操作呢就是每个边折叠，你就可以算出一个顶点的位置，以及它的误差对吧，所以你对输入的模型，你提取它所有的边，然后计算每个边折叠之后它的误差是什么。

然后你就可以根据这个误差，对所有的边进行排序对吧，培训完了之后，你就开始进入这个网循环，ok对吧，这就是我们的嗯如何用，但是他这个虽然很简单，虽然嗯听上去非常漂亮。

但是他有他说有的时候会呃会有一些问题的，哪些问题呢，我们接下来就是稍微说一下，比如说啊这个呃如果我们这这这取有可能啊，这个这个解啊，不唯一不唯一取决于这个这个矩阵它的啊，它的形式什么意思呢。

它其它基本上可我们可以归为有三种解，一种是我就有一个唯一解最小值哎，就是一个点就一个值，ok啊，那这种情况下能够举证它是可逆的啊，我们能求出一个最小值点，但另外一种情况下。

他有可能它整个一条线上它都可以啊，都都都满足，比如说这呃，这比如说这这这条线上这个举个例子啊，对于这个模型来说啊，他这两边的直接平面对吧，你就想想吧啊我到加上我这里有一条边对吧，这里有一条边。

它两梁ok就中间一点吧，啊这这条边它两个顶点它相连的那个平面啊，都是互相就是乘乘夹角形式对吧，乘以就是这他们这两个顶点，他们的所有的平面都可以归为两类啊，每两类每一类它都是共面的对吧，呃都在一个面上。

所以你最终实际上就是两个面，两个面，你求到两个面，两个平面的这个最近点的话，它就是一条线，对不对，你你这样求出来就是一条线啊，还有另一种情况就是啊如果所有的那一组平面。

就是你在那个q e那个所有的那一组平面，他们都是共面的对吧，甚至都是都是都是平面嗯，所以甚至都是都是都是这个平行的，那它的解空间就是就是在一个面上对吧，在这种情况下，我们就可能就需要做一些选择啊。

比如说啊如果在共线的话，我也可以选择那条边的两个端点里面，包括它的重点，我从里面选一个那个误差最小的啊，或者是那个呃就是供电的时候啊，我就选一个点对吧，嗯这是这是一个解的情况。

ok然后呢嗯然后就开始进入这个算法了对吧，当不满足停止条件的时候，当然这个停止条件呢就刚才讲的对吧，有可能是用户指定的被剪的，这个就是目标面数是多少，目标的这个面数的这个比值是多少等等。

还有啊这是最简单的，也是最常用的，那接下来呢，我们就是k取出队列的第一个操作单元，然后我们就开始针对这个操作单元，我们看它是不是有效，什么意思呢，就是我简化了这个这条边之后，他是不会我就可以定义啊。

我自己用户自己定义的最简单的情况下，你没有任何的有效性检查对吧，你那但是最最复杂的时候，你有一串儿吧，12345是吧，他满足一好，那我继续check满足二，满足三，满足是满足五，那我就通过了。

ok那这些不同的有效性检查呢，我这里举几个例子，也是我认为嗯在实践在实践表明，我认为比较有嗯有价值的啊，有比较常用的几个，一个是距离，什么意思呢，我在简化之前和简化那叫边简化之间，简化之后呢。

我希望它造成的局部的那个表面的形变呀，那个那个surface啊，局部的那个表面它跟原简化之前的那个表面，它距离不能太大对吧，他host dog，我不希望他超过很大很大。

但明显我就就会造成很大的形变嘛对吧，我可能就希望限制这种这种距离啊，那有一种做法就是说因为前面讲的计算，直接计算hostile距离，实际上是很很耗时耗力的一件事情，有的时候甚至都无法精确计算出来。

那大家就呃设计了各种各样的一种建设的方法，但有一种我认为还呃还就比较实用的，就是我是就这这一类方法，我可以对输入模型啊加一个离散，这个起诉提速化，然后我可以对这个起诉跟设置不同的，起诉的这个格子的大小。

然后做一个叫啊横四竖嗯，然后随着我简化的深入，我这个层次数，我可以呃是让他这个提速越来越大一点，这样我可以宽容更大的这个这个距离啊，这个这个具体细节大家可以看这个论文，另外一个呢就是那个拓扑。

我希望他简化之前和简化之后，它的拓扑是一样的，比如说我们前面提到那个拓扑公式对吧，呃欧拉那个pory那个公式嗯，就这这个式子啊，我们讲过了哈，那我怎么满足这个呢，就是有一个很比较常用的一个。

一个检检检验方法，当然你也可以直接粗暴的去计算，去验证啊，我计算出的联通数计算规格，我计算动手，然后啊我我我我来验证一下，他数你你简化完了就不卖，是他这个式子和简化之前它那个式子。

比如说联通数是不是一样，亏格数是不一样，动数是不一样，对不对，但是那太慢了，就是对我们我们一切都是希望尽快的计算，在不损失这个精度的情况下，那么有一个啊论文啊啊一个还是不错的哈，嗯方便了我们后来者。

他叫联合collection，那什么意思呢，就是我们对每个顶点它周围的叫一个star啊，这link啊，他注意的这个element，比如相邻的这些顶点啊。

边啊这个三角形啊啊这叫它的link是唯一的link，交上vr的link v d link，就是这这一圈的那些element，他们俩相交的呃那个元素，比如说它俩相交元素应该是什么，应该是这个三角形。

这俩三角形对吧，这两三角形还有这两个顶点，这是他们就是教的那个link就共有的啊，是不是跟他们合并之后啊，就是这里写的vv啊，那实际上应该v8 了嗯他的啊，这link是不是一样，我看一下啊。

v1 link啊，他的他这个这是是不是是不是一样，如果是一样子的话，我看一下，v1 v2 ，他应该是不是不是这个不是，应该不是简化之后的，应该还是还是在v1 v2 ，他有一个呃。

应该是把vv 2有一个就是这条边，ok sorry啊，刚才解释有无啊啊啊，就是vv这条边它的link，它的link就是这一圈这一圈的东西对吧，ok我我我我我这里有点有点，这有点不对啊，有点不对。

我看一下啊，这首先他们是一样的啊，这具体的定义可能还要再查一下那个论文，然后上上面这个是满足的啊，他俩是相等的，下面这个的话，link a link a他应该是，左边左边这个是满足的。

右边这个右边这个是不满足的，他这个不满足是因为，link a和link，anyway，我我们这里不先不细究了哈，我们我们这个如果大家感兴趣这一点的话啊，我们可以这个课下就是啊。

同学们就是啊可以去查一下啊，这个link condition，或者说啊联系我，然后我给你说一下，具体详细说一下哈，我我可能需要再看一下那个论文，它的具体定义啊，这个例子它是不满足的。

因为他他collapse这条ab这条edge之后呀，它会产生一个非流行的呃，非流形的三角形，全是飞行形，三角形的话，他就嗯就是那个拓扑就满足了，但是在弹在在折叠之前，他是满足的。

折叠之后他就这个拓扑就变了，变了之后就不满足他，通过这个这个条件，就是可以比较快速的来去检验，这个拓扑的改变与否，大家感兴趣这一点的话嗯可以啊，就是如果不理还嗯没听说过，或者是想了解细节的话。

可以联系我哈，当然我后面应该我在放ppt的时候，我可以把那个那个具体的论文啊，这放上来，可能之前准备的时候忘了，ok下一个就是比如说我希望我在折叠，就是边简化完了之后啊，我不希望那个面就是发生了翻转。

什么是翻转的，就是呃比如说这个这几个三角形对吧，它反向都朝向都朝向都一致对吧，咱们的dot product都是正的，那比如这个呢它朝向就反了啊，这样的话你在渲染的时候啊，尤其单面渲染的时候。

它就是就会产生标比较差的那种渲染效果嘛，所以经常就是我们希望避免这种情况，对变压掉这种情况的话，那我们一般就是比较简单的一个trick，就是我又测试新表面，这个那个三角形的那些法向跟旧面法向的那个。

比如说它的简称啊什么的，它有没有发生这个回复呀啊等等啊，以这种策略来去做一个快速的删除，当然它并不能并不能完全的保证对吧嗯，但这是一个比较简单，比较快速的一种检查方法啊，还有另外一种就是若输入的模型。

它本身他没有穿模，也就是说它没有自相交，他没有交叉，当然如果输入模型它已经有穿模了，那这个确实不好不好弄对吧，如果他没有的话，那我希望它最终输出的他没有穿模呃，因为穿模的话它也会给渲染啊。

就是尤其是单面渲染时候也会渲染出来，就就就质量很差，看上去看上黑乎乎的就不好啊，那这种呢，那我们也可以做一个自相交的这种检查，检查呢这个当然检查自相交呢，就是现在也有一些公开的库啊，哈去做做这个事情。

那其实如果真的把它做好的话，还是不是那么的不是那么的容易的啊，嗯其实因为这个这剪这个香蕉呢，它有它有不同的情况，比如说那种距离比较远的这种这种香蕉对吧，这两块区域啊，他们本身这个在这个流行空间上。

它是它是远距离的，它有的它相较它是在近距离的，就是他在临近他的lighborhood产生了自相交，那这种情况，这种情况一般检查起来会稍微麻烦一点啊，然后这个呢可以通过就是对输入模型嗯，对每个三角形。

你是可以组织成一个啊b v h这种加速结构啊，b v h train，然后来去做这种啊，建这个a b b啊，这个bbox啊，然后来进行加速计算，对吧啊，使得它嗯就是做检查的那个三角形pair呃。

那个数目大大减少减少，那这个呢当然最粗暴的就是，每个三角形排水机都会去检查一下，check一下咱们有没有真的香蕉呀，我是olap啊啊等等嗯，也有也有一定的加速的方法嗯。

ok然后我另外一种呢就是所谓的数值的鲁棒性，因为我们在做检验的时候，一般都是通都是那个把数据啊，就是坐标呀表示成比如说浮点数对吧，他浮点数它在运算的时候，他就有一种精度的问题，有精度问题的话。

他但有的时候我们前面在解那个那个式子的时，候，解解就前面解这个解那个顶点的时候，他哎他就他有可能这个点就会飞出去对吧，那一个比较粗暴的一种防止方法。

就是ok我可以预先定义一个叫就bounding sphere，对吧，他一个包围球，我限制我优化出来那个点的位置，他就需要在这个球里面，他说超时，这球就说明啊这个点他直接就飞出去了，因为数值误差的问题。

飞出去之后，那就是肯定是呃就是ugly对吧，肯定是不对的了啊，那我就可以直接拒绝拒绝这个这个操作，ok啊，这是这是我列举了几个我认为比较有用的啊，或者是经常使用的那种啊。

所以这个操作它是否有效的一种相对chip，这种减压减压方式，ok如果这些都通过了，ok那我们接下来就是什么，就执行这个简化操作，执行完了之后啊，我跟你说啊，比如说你你这个执行了对吧，执行了之后。

他周围的周围的这些三角形，都发生了变化了对吧，这所有三角形的这个面呀，它所谓的平面它也发生变化吗，因为一个三角形定义一个平面对吧，你的三角形这个三个点，就是其中一个点的位置发生了变化。

它的平面有变化了吗对吧，变化了之后，那当然根据原来的论文啊，这最原始的论文他就是直接用用什么，用这个直接用q e加q2 来表示那个q版，那个就是新的顶点的那个无偿对吧，其他作为顶点啊，你也可以。

你也可以用那个什么，用这个新的顶点的这个误差来去update对吧，他甚至没有update啊，你没有update，它可能更快速度，但是他它会随着你进行简化的，边的数目越来越多，越来越多。

它会偏离原来的surface这个那个面平面呀越来越远，他那个error他就是呃离我们真正想要的那个error，他就越来越远，所以我们希望啊也很多时候就是更新一下，就重新计算连接那些相连的那些边啊。

啊就受影响的那些模型的边，它的简化那个误差啊，你这重新更新一遍，它会速度它会更准一点啊，使得最终简化出来的效果更好一点，ok然后你更新完了之后，你可以对吧，再加入那个优先队列嘛，加入进去你就什么啊。

当然这里面你可能就说哎一条边，我加入了好几次，那你你可以放一个放一个什么叫时间戳对吧，每周边有个时间戳，那最新的呃，你维持每条边的这个时间，戳那个最新的时间嘛对吧，你这拿出来一看。

这边已经被class过了，他已经没有了，其实那你一一对时间对吧，它不是最新的，那你就直接丢掉，ok这就是我们整个算法的这个框架，可以说几乎所有的我就是我我觉得比较实用的，所有的那个包纹理的简化简便方法。

它都是遵循这个框架，所以这个框架啊虽然简单还有效，很实用，ok还有另外一种情况跟他说，我们对于这种模型啊，如果他在边界，比如说几个最简单的这个正方形的边界哈，这三角网格我我我希望我简化完了之后啊。

它还是一个正方形的样子对吧，他明明可以做到对吧，比如说我我我collapse这条edge，但是如果我没有我没有做任何处理的话，我我最终优化出来点的位置可能就在这，知道吧啊他可能在某种某种什么地方。

反正就是举个例子，就在这，那那我的形状就发生了变化，在很多情况下，我是希望保持这个模型的边界的啊，但这是这是另外一个例子，就是论文里面他原始的例子啊，做了这么示意图，比如上面是一个圆柱对吧。

圆柱它有边界吗，这两边开口，那我就做一些边，折叠之后，他就成了这种样子，没有constrain，没有约束，那他后面他就加了个边的边上的约束啊，它使得它简化完了之后也依然很完美，他这个约束怎么做的呢。

就是其实挺简单的，就是先把那个模型的边界检测出来啊，哪些边界我需要去尽量去保持，假如这些边界了之后啊，我对每一条边啊，边界边我加一个虚拟的平面，加一个虚拟的平面，这个虚拟的平面它还呃。

就是我让他跟因为一个一个三一个一个边界边，它必然会相邻一个三角形对吧，就是说必然会相邻一个平面，那我就那个虚拟的平面，就是跟他真实的那个相邻的三个平面垂直，然后我就虚拟的这个这个平面。

它对应的那个那个q对吧，我每个每个平面我都可以算个算个q嘛对吧，每个平面都可以算个q啊，我这里面就是一个平方，我可以算个q嘛，那我把这个q它的他的那个我可以给他，给他给负权重的，我付个很大的权重对吧。

比如说他其他那些平面那个呃，那个权重都为一的话，那我这个权重我给他输个1000对吧，那它这个平面就保住了，它这个边他变对吧，我就就这种编辑编，我就是加一个虚拟的平面，就是虚拟平面。

我还给他整一个很大的系数，使得他collapse之后，他就会把这个这两个点又拉到这个，强制拉到这边上去，ok好这是如何保播编就编啊，这基本上就讲完了，这个关于三角网格的这个简化哈，这个如果只是针对网格。

后面我还没说这个其他属性怎么办对吧，其他属性其实呃也非常简单啊，那我们先说一下哈，这种简化方法我们是不是也可以用，用了其他的网格的简化方法，那不只是三角网格，那我要是四边形网格要怎么做对啊，虽然用我哥。

他其实的重点更不在于你呃，它重点呢是在于你这个四边形网格呀，它它是有一定规律的对吧，你比如说你想保持简化完了这个四边形之后，它仍然是一个四边形网格，那我怎么办，对就像这这这这个图是离子对吧。

这是一个很dance的四边形网格，我简化简化一堆之后，哎它仍然是一个四边形网格，再继续简化，它仍然是一个四边形网格，它就一直保持四边形，因为四边形网格它有个好处，就是它比较规则，那这种方式啊。

他一般什么就是有一个比较，也是比较经典的一个论文，他怎么做呢，哈就我就我就提取出一个一个strip，就是但是他其实我个人觉得他这个strip有点，他是用了一个dual dual mesh。

就对我的网格啊其实有点多余啊，直接开局你就直接从一条边开始，你找他的平行边，平行边平行边就是一边四边形的那个对边嘛，边边边边你找找找找找就能找出这个loop来，找出这个路坡之后，你量量你编的啊。

你这一条边这两个两个两个顶点就是两两，就是去去做这个edge class对吧，那所以你相当于同时做一组edge clubs，我们前面做三角形网格简化的时候，一次只做一个一个编的这里。

那你这里只是一次做一堆编的这里，那每一条边它会看成一个点对吧，当然有的时候他可能会看成多个点，但没关系，先生成的点，它的位置你就还是照样根据那个那个公式，q e m的公式对吧，它有前面的哪些平面对吧。

来来呃，来来去，measure，那你同样可以算一个最优点的位置，这是对四边形网格的一个应用啊，这个还是还是挺不错的，当然还有还可以对对什么啊，比如说体网格什么体网格，就是我不仅表面上有有网格单元。

我这我这个模型的内部，我还有些单元，这里我是列了一个六面体网格啊，其实这里面也可以是四面体网格呀等等，多多种不同的呃离散化方式，那我也同样可以可以提取这种这种strip对吧，这种rap。

然后我这222这个这个线的两个端点，我都可以拉成一个点，我照样可以用这个q m来去优化，当然这个论文里面他没有用q m来去优化哈，但我是我的意思是，其实q m它的应用可以很广，它可以用来做这个事情啊。

这是他的，当然你看这个简化的效果对吧，我们在这里就简单提一下它的呃这方面的应用，那接下来呢我们说诶那我输入模型，它还有其他属性了呀，比如说美妙经典，它除了位置之外，对位置是三个量x y z。

那么还有颜色呢，有可能比如r g b对吧，我们现在就是讲用那个那个a i g c上面，通用生成的那些模型，大部分都是把颜色定义在顶点上呀，那我如果对那种mesh我做简化怎么办对吧。

还有我每个顶点有的时候我会定义法向的，而且我有的时候，一个顶点都可能定义好几个方向，那这种东西该怎么办，还有对吧，我如果输入模型，它它有uv，然后因为我要把那个纹理映射到这个uv上呀，那我该怎么办等等。

还有一些其他的，我可以，比如说我对模型表面我定义一个一个高度长啊，或者是一个呃这个热度长啊等等什么什么东西，我有我有whatever，各种其他的属性，我在做边折叠的时候，我这些属性该怎么办啊。

这个论文啊，他其实对它做一个很简单的扩充啊，我说再看一下这个q m这个error metric，他这是一个一个平面公式嘛对吧，那这样你每个顶点它有很多的很多属性的，没关系，我就是把这个顶点做做备案。

我就他有多少属性，我都把他给给堆着来对吧，把它给弄成一个很长的，一个一个一个一个vector对吧，因为我们知道三点定义一个一个平面嘛，它也是可以定义一个一个平面，所以所以那个论文呢他就是说啊。

你你就直接往后往后怼，那些不同的属性堆在一起，然后你最终最终他仍然推导出来这么一个q a，q u e m这种表达方式啊，所有的你的整个的简化的流程啊，这整个操作流程一模一样一模一样，你计算出来的自由点。

它的属性也是也是一模一样，但是啊我们值得说一点哈，就是比如说对颜色，我们知道颜色它是有个范围的，rgb，它是比如说0~255或者是0~1之间对吧，你可以都整到0~1之间，那你怎么办，我计算出来的。

我的位置是从负无穷到正无穷对吧，那我算出来颜色也有可能是从负无穷到正无，你那这怎么整的啊，这个我们是可以把它嗯，是可以把它做一个一个一个一个一个skill skill，一个做一个transpose啊。

论文里面有详细解释啊，其实很简单，一个trick一个零一个线性变换，就把它给变换到一个有效值的范围内，然后比如说法向，那反向怎么办，因为法相的话m m方加n方加加乌方对吧。

他这个三个三个相它的长度要为一嘛，那我就就可以对它做一个normalize对吧，然后uv怎么办，因为uv它也是一个范围啊，你这个纹理的纹理空间，它是比如说我举个例子啊，0~1对吧。

你算算出来的uv值然飞出去了，那我怎么把它给拉回来，那我突然依然可以就像这个这个这个颜色一样，我可以把它real translate，ok这里呢展示一个例子啊，就是带带这个应该是定义在顶点上的颜色吧。

嗯然后他可以去去啊，在做简化的时候，同时很好的保持这个颜色的这么一个，保颜色吧可以说是保其他属性，把其他的所有属性整个纳入到同，一个这个框架中，非常优美，啊这就是我们这节课讲的内容啊。

就详细的介绍了我们宝文理的这种模型界面，这个经典的最实用的这个方法，它具体是怎么wor，包括它里面的一些细节，很多论文里面或是很多实际应用讲解，网上讲解的里面他没有介绍到的对吧，有效性检查什么样子的。

就是不同的，它的就不同的误差，它可能会有各种各样子的，以及你你遇到一些特殊情况对吧，我想保持模型边界啊等等，还有那解空间啊，这些都是虽然看上去简单，但实际上在使用中，它其实往往会让人觉得你如果处理不好。

就会出一些出一些这样那样的，很奇葩的这种样子，啊这是这节课内容啊，我们基本上就完事了，那下节课呢我们重点会讲解，就是不保纹理的模型，减面它是怎么工作的啊，下面这节课呢它是呃怎么说呢，会比较复杂一些。

因为它比较它比较比较野，就是他的有很多各种不同的方法，我也是只介绍最实用的，ok我们下节课再见，这节课就先这样了哈，大家如果有什么问题的话，嗯也可以课后，因为我觉得这个直播我这边也有的时候。

他他会出现问题，我比如说现在他就是直播时空次元异常对吧，正在努力恢复中，我不知道大家能不能看到哈，我我就无法看到大家的一些一些点评啊，或者是是问题啊等等，呃，所以之后。

比如说我们把这个p p t传到网上的时候，大家看到了，或者有相关的问题可以直接联系我本人，然后我们可以具体具体情况具体讨论，ok那我们今天就这样哈。



![](img/957475990229daab406cfb3f87b0c878_6.png)