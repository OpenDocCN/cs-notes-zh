![](img/67c59d3a9154dfaefe30bbafed3093fa_0.png)

# GAMES101-现代计算机图形学入门-第21讲：动画入门 🎬

在本节课中，我们将学习计算机动画的基本概念、历史发展以及几种核心的制作方法。我们将从动画的定义出发，了解其从手绘到计算机生成的发展历程，并重点介绍关键帧动画、物理模拟、质点弹簧系统、粒子系统、运动学以及动作捕捉等关键技术。

---

## 概述

动画的本质是让物体“活”起来，即通过连续播放一系列静态图像来产生运动错觉。在计算机图形学中，动画可以视为对几何建模在时间维度上的扩展。本节课将系统性地介绍动画的基本原理、历史里程碑以及多种实现技术。

---

![](img/67c59d3a9154dfaefe30bbafed3093fa_2.png)

## 动画的定义与历史

动画最初的定义是“赋予生命”，即让静态物体动起来。它作为一种交流和艺术表达工具，更侧重于美学效果而非物理准确性。在计算机图形学中，动画可理解为在不同时间点具有不同几何形状的模型序列。

![](img/67c59d3a9154dfaefe30bbafed3093fa_4.png)

动画的形成依赖于人眼的视觉暂留效应。常见的帧率标准包括电影的24 FPS、视频的30 FPS、游戏的60 FPS以及虚拟现实要求的90 FPS。

![](img/67c59d3a9154dfaefe30bbafed3093fa_6.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_8.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_10.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_12.png)

### 动画发展里程碑

![](img/67c59d3a9154dfaefe30bbafed3093fa_13.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_15.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_17.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_19.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_21.png)

以下是动画发展过程中的几个关键里程碑：

![](img/67c59d3a9154dfaefe30bbafed3093fa_23.png)

*   **早期探索**：古代壁画已包含动态狩猎场景的序列图像，体现了动画的基本思想。
*   **机械动画**：使用旋转圆盘等机械装置，通过窗口观察序列图像，形成早期动画。
*   **电影诞生**：最初用于科学研究（如分析马的奔跑），后逐渐发展为娱乐产业。
*   **第一部手绘剧场版动画**：1937年的《白雪公主和七个小矮人》。
*   **早期计算机动画**：1963年已出现使用交互式笔进行三维模型操作的演示。
*   **CGI里程碑**：
    *   《侏罗纪公园》（1993年）：首次在电影中大规模使用电脑生成的恐龙。
    *   《玩具总动员》（1995年）：第一部完全由计算机生成的剧场版动画电影。
*   **现代动画**：如《冰雪奇缘2》（2019年），集成了复杂的物理模拟、细节渲染和特效。

![](img/67c59d3a9154dfaefe30bbafed3093fa_25.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_27.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_29.png)

---

![](img/67c59d3a9154dfaefe30bbafed3093fa_31.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_33.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_35.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_37.png)

## 关键帧动画 🖼️

![](img/67c59d3a9154dfaefe30bbafed3093fa_39.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_41.png)

上一节我们回顾了动画的历史，本节我们来看看最基础的动画制作方法之一——关键帧动画。

关键帧动画的核心思想是：艺术家只需绘制出动作序列中最重要的帧（即关键帧），中间过渡的帧可以通过计算自动生成。

**关键帧**定义了动画的起止和转折等关键姿态。**中间帧**则通过插值算法生成。例如，一个角色从举起钩子到最高点的过程，只需定义起始和结束两个关键帧，中间手臂的位置可以通过插值计算得出。

插值技术是关键帧动画的核心。最简单的插值是线性插值，但为了得到更自然平滑的运动，通常会使用样条曲线等更高级的插值方法，以保证运动速度的连续性（如C1连续）。

---

## 物理模拟 ⚙️

![](img/67c59d3a9154dfaefe30bbafed3093fa_43.png)

上一节我们介绍了基于艺术创作的关键帧动画，本节中我们来看看另一种基于物理规律的方法——物理模拟。

![](img/67c59d3a9154dfaefe30bbafed3093fa_45.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_47.png)

物理模拟（或物理仿真）通过求解物理方程来计算物体的运动。其最基础的理论是牛顿第二定律：**F = ma**（力等于质量乘以加速度）。只要知道物体所受的合力及其初始状态（位置、速度），就可以通过积分计算出它在后续时刻的运动状态。

![](img/67c59d3a9154dfaefe30bbafed3093fa_49.png)

### 质点弹簧系统

![](img/67c59d3a9154dfaefe30bbafed3093fa_51.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_53.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_55.png)

质点弹簧系统是物理模拟中一个简单而强大的模型，由一系列通过弹簧连接的质点构成。它可以用来模拟绳子、布料、头发等多种物体。

![](img/67c59d3a9154dfaefe30bbafed3093fa_57.png)

一个基础的弹簧单元连接两个质点 **a** 和 **b**。根据胡克定律，弹簧产生的力与它的形变成正比，方向试图使其恢复原长。

**弹簧力公式（应用于质点a）**：
```
f_a→b = -k_s * (|b - a| - l) * ( (b - a) / |b - a| )
```
其中：
*   `k_s` 是弹簧的劲度系数。
*   `l` 是弹簧的原长。
*   `(b - a) / |b - a|` 是从 a 指向 b 的单位方向向量。

为了模拟能量损耗（如空气阻力、内部摩擦），使运动最终停止，需要引入**阻尼力**。一种常用的阻尼力模型与质点的相对速度在弹簧方向上的投影有关：

**阻尼力公式（应用于质点b）**：
```
f_damping = -k_d * ( (ḃ - ȧ) · ((b - a) / |b - a|) ) * ((b - a) / |b - a|)
```
其中：
*   `k_d` 是阻尼系数。
*   `ḃ` 和 `ȧ` 分别是质点 b 和 a 的速度。
*   `·` 表示点积，用于计算相对速度在弹簧方向上的分量。

### 布料模拟的弹簧结构

使用质点弹簧系统模拟一块布料时，简单的网格连接（仅连接水平和垂直相邻点）无法真实表现布料的物理特性。需要增加连接以抵抗不应有的形变：

以下是构建布料模型时常见的弹簧连接类型：

*   **结构弹簧**：连接水平和垂直相邻质点，提供基础支撑。
*   **剪切弹簧**：连接对角线上的相邻质点，用于抵抗剪切变形（防止布料被拉成菱形）。
*   **弯曲弹簧**：连接间隔一个质点的相邻质点（如上-下-上，左-右-左），用于抵抗平面外的弯曲，使布料具有适当的刚度。

通过组合这些不同类型的弹簧，可以构建出能够逼真模拟布料下垂、飘动等行为的质点弹簧系统。

---

## 粒子系统 ✨

上一节我们学习了用于模拟连续体（如布料）的质点弹簧系统，本节我们来看看用于模拟群体现象的粒子系统。

粒子系统用于模拟大量微小、独立的粒子集合，如烟雾、火焰、水流、鸟群等。每个粒子都具有位置、速度、生命周期等属性。

粒子系统模拟的基本流程是一个循环：

以下是粒子系统模拟每一帧的核心步骤：

1.  **生成新粒子**：根据规则产生新的粒子（如烟花发射点）。
2.  **计算受力**：为每个粒子计算所受的力，包括外力（重力、风力）和粒子间的内力（引力、斥力、碰撞）。
3.  **更新状态**：根据受力更新每个粒子的位置和速度。
4.  **移除旧粒子**：删除生命周期结束的粒子。
5.  **渲染**：根据粒子的最终位置进行渲染（可能渲染为点、小球或精灵图）。

粒子系统的挑战在于高效地处理粒子间的作用力（需要空间加速结构）以及碰撞检测。

### 群体模拟

粒子系统的思想可以扩展到群体模拟（如鸟群、鱼群），通过为每个个体（粒子）定义简单的行为规则来涌现出复杂的群体智能。常见的规则包括：

以下是描述群体中个体行为的三个基本规则：

*   **分离**：避免与邻近的个体相撞。
*   **对齐**：调整运动方向，与邻近个体的平均方向保持一致。
*   **聚合**：向邻近个体的平均位置靠拢，避免离群。

![](img/67c59d3a9154dfaefe30bbafed3093fa_59.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_61.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_63.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_65.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_67.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_69.png)

通过为每个粒子（个体）编程实现这些基于局部邻居的规则，整个系统就能呈现出逼真的群体运动。

![](img/67c59d3a9154dfaefe30bbafed3093fa_71.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_73.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_75.png)

---

## 运动学 🤖

![](img/67c59d3a9154dfaefe30bbafed3093fa_77.png)

运动学描述物体的运动而不考虑其原因（力）。在计算机动画中，运动学分为正向运动学和逆向运动学。

![](img/67c59d3a9154dfaefe30bbafed3093fa_79.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_81.png)

### 正向运动学

正向运动学用于描述具有关节链的模型（如机器人手臂、人体骨骼）。给定每个关节的旋转角度或位移，计算末端执行器（如手）的位置。

对于一个简单的两段关节链，末端位置 **p** 可以通过以下公式计算：
```
p = L1 * [cos(θ1), sin(θ1)] + L2 * [cos(θ1+θ2), sin(θ1+θ2)]
```
其中 `L1`, `L2` 是段长，`θ1`, `θ2` 是关节角。

![](img/67c59d3a9154dfaefe30bbafed3093fa_83.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_85.png)

正向运动学计算简单直接，但艺术家通过调整角度来控制末端位置非常不直观。

### 逆向运动学

逆向运动学解决相反的问题：给定末端执行器期望的位置，反推各个关节应有的参数（如角度）。

逆向运动学比正向运动学复杂得多，通常没有解析解，或者解不唯一、甚至无解。因此，通常将其转化为一个优化问题，使用数值方法（如梯度下降法）进行求解，目标是让末端位置尽可能接近目标位置。

![](img/67c59d3a9154dfaefe30bbafed3093fa_87.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_89.png)

---

![](img/67c59d3a9154dfaefe30bbafed3093fa_91.png)

## 绑定与动作捕捉 🎭

![](img/67c59d3a9154dfaefe30bbafed3093fa_93.png)

### 绑定

![](img/67c59d3a9154dfaefe30bbafed3093fa_95.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_97.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_99.png)

绑定是为虚拟角色创建控制系统（控制点）的过程，使动画师能够像操纵木偶一样方便地操控角色做出各种姿态和表情。这通常涉及设置骨骼层次结构、蒙皮权重以及设计直观的控制曲线/控制器。

![](img/67c59d3a9154dfaefe30bbafed3093fa_101.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_103.png)

### 动作捕捉

![](img/67c59d3a9154dfaefe30bbafed3093fa_105.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_107.png)

动作捕捉是一种技术，通过记录真实演员的运动数据，并将其映射到虚拟角色上，以快速生成逼真的动画。

![](img/67c59d3a9154dfaefe30bbafed3093fa_109.png)

以下是几种主要的动作捕捉技术：

![](img/67c59d3a9154dfaefe30bbafed3093fa_111.png)

*   **光学式**：在演员身上粘贴反光标记点，使用多台高速摄像机追踪标记点的三维运动。这是最主流的方法，但存在遮挡问题。
*   **惯性式**：在演员身上佩戴陀螺仪、加速度计等传感器，直接测量肢体运动。不受遮挡影响，但可能存在累积误差。
*   **机械式**：使用外骨骼机械装置直接测量关节角度。精度高，但会限制演员活动。
*   **视觉式**：仅使用普通摄像机，通过计算机视觉算法从视频中估计人体姿态。成本低，但精度和鲁棒性通常是挑战。

![](img/67c59d3a9154dfaefe30bbafed3093fa_113.png)

动作捕捉能极大提高动画制作效率，并获取高度真实的运动数据，但获取的数据通常需要动画师进行清理、调整和艺术化加工。

![](img/67c59d3a9154dfaefe30bbafed3093fa_115.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_117.png)

---

## 动画制作全流程 🏭

![](img/67c59d3a9154dfaefe30bbafed3093fa_119.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_121.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_123.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_125.png)

一个完整的现代三维动画电影制作流程包含多个环节：

![](img/67c59d3a9154dfaefe30bbafed3093fa_127.png)

以下是动画电影从构思到成品的典型生产管线：

1.  **故事与概念设计**：编写剧本，绘制故事板和概念图。
2.  **建模**：创建角色、场景、道具的三维模型。
3.  **绑定**：为角色模型搭建骨骼和控制系统。
4.  **动画**：通过关键帧、运动捕捉或模拟技术让角色和物体动起来。
5.  **特效模拟**：使用粒子系统、流体模拟等技术制作火、水、烟、魔法等效果。
6.  **布光**：在虚拟场景中设置灯光，营造氛围。
7.  **渲染**：计算最终图像，这是一个计算密集型过程，通常在大型渲染农场完成。
8.  **合成与后期**：将渲染的各层图像（角色、背景、特效）合并，并进行调色、添加二维特效等处理。
9.  **最终输出**：剪辑、配乐、音效，生成最终影片。

---

## 总结

本节课中我们一起学习了计算机动画的基础知识。我们从动画的定义和历史出发，探讨了关键帧动画这一传统方法，并深入了解了基于物理规律的模拟技术，包括质点弹簧系统和粒子系统。接着，我们学习了描述关节链运动的运动学（正向与逆向），以及业界广泛使用的绑定和动作捕捉技术。最后，我们概述了一个完整的动画电影制作流程。

![](img/67c59d3a9154dfaefe30bbafed3093fa_129.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_131.png)

![](img/67c59d3a9154dfaefe30bbafed3093fa_133.png)

下节课，我们将聚焦于这些模拟背后的数学求解方法，例如欧拉方法等，探讨如何将物理公式转化为计算机可以计算的离散步骤，从而真正让虚拟世界动起来。