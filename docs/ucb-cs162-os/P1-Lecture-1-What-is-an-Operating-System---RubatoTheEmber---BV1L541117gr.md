# P1：第 1 讲 操作系统是什么 - RubatoTheEmber - BV1L541117gr

好的，欢迎大家来到 162。

![](img/ae0f44ab6904d80ba96175b3495ad498_1.png)

我是这学期的讲师之一，稍后 Anthony Joseph 也会发言。我们很遗憾必须以虚拟的方式开始学期，但这就是现状。我们会尽快转为面对面授课。那么，话不多说。对于那些在讲座中有问题的人，可以随时提问。

请把问题放在聊天框里，我会留意聊天。这么一来，我们就能确保一切正常进行。无论如何，欢迎来到 CS162。今天我们会聊一聊我们要做的事情。我们将讨论什么是操作系统，什么不是操作系统。

我们希望能说服你们，为什么操作系统是如此令人兴奋的学习内容。当然，我们也会说一下这门课的运作方式。互动很重要，这是我们鼓励的。虽然在 Zoom 上有点难，特别是在第一天，大家都还在适应。

我们大致回顾一下我们将要涵盖的材料。但特别是当我们回到面对面授课时，我会鼓励大家，Anthony 也会鼓励大家。你们都可以提出问题。好了，我们从这张已经有 20 年历史的图片开始。一个更新版的图片可能会更加疯狂。但有谁知道这是什么吗？是的。

如果你仔细看，会看到它写着“互联网”，对吧？

有趣的是，人们可以很容易地认为，互联网是人类文明中最伟大的成果之一。其原因在于，它基本上将全球的计算机组件连接成了一个庞大的系统。因此，复杂度开始带来各种有趣的现象。

这种新兴的行为，我们稍后会谈到，但显然，安全问题也是其中的一部分。所以，当你思考互联网时，它真的令人惊讶。它基本上将这些汽车、手机、云计算等所有东西联系在一个庞大的系统中，而所有的人当然也包括其中。

如果你真的绘制出随着时间推移的人数和 IP 地址的数量，会发现它基本上一直是以这种指数形式增长的，从一开始就是这样，对吧？

1995 年左右，或者说是网络的起点。看起来，互联网地址将只有在每个人至少拥有一个地址时才会饱和，可能还会有很多个地址。当然，你们可能已经很熟悉 IPv4，这个 32 位地址空间，实际上早已达到饱和状态，而 IPv6 可能终于会普及。这个话题可能是另一节课的内容。另一个值得注意的是，全球范围内有这个庞大的系统。

它包含了许多组件，但我们也拥有各种不同的元素，对吧？

我们涵盖了从大型机到工作站，再到个人电脑等所有设备。这个普遍的趋势非常有趣。我们从每人一台计算机的情况开始，到现在每个人可能拥有数百或数千台计算机。所以，这有时被称为物联网，指的是你车上的传感器等。

还有你家中的墙壁等等。这在过去几十年里发生了令人难以置信的变化，现在我们甚至没有意识到互联网上的所有东西，它们在监控我们，这引发了各种隐私问题。但是，这个令人震惊的曲线，在对数线性尺度上向下移动的趋势，。

当人们谈论事物增长的速度时，这一点常常没有被指出。而且，时间尺度的范围也是令人吃惊的，对吧？

从半纳秒或皮秒级别的CAF引用，到跨越全球传输所需的毫秒，甚至在某些情况下是秒级时间。这么广泛的时间范围，最终操作系统，作为这门课程的核心，将不得不处理这些问题。所以这也非常有趣。好的。

所以我们现在正处于一个非常激动人心的时代，显然你们选了正确的课程来学习这个。操作系统本身正是这一切的核心。因此，它们基本上把所有这些令人难以置信的进步，我刚才展示给你们的那些小东西，许多东西，甚至一些非常大的东西，都整合成一个完整的系统。

正是操作系统让我们能够管理这一切。因为如果没有它，你实际上是无法使用这些东西的。好的，而操作系统，正如我们在本学期将要学习的，它几乎为应用程序和程序员提供了统一的抽象，尽管硬件各不相同。

它被广泛应用。它使你能够管理在多个应用程序之间共享的资源，同时还能够处理安全问题。而一些关键的构建模块，我们将在本学期深入讨论的内容，诸如进程、线程、并发、调度、协调、所有这些内容、地址空间、保护和安全等。

这些你可能听过的词汇，你可能并没有深入理解它们真正的含义以及它们是如何实现的。对我来说，这门课程的一个令人兴奋的地方是，由于我们将与一个真实的操作系统一起工作，稍后我们会修改一个真正的操作系统。

你会近距离观察到这些构建模块如何实际被实现，然后，当然，如何将它们整合在一起。好了，举个例子，你每天都做的事情。你拿出手机，搜索一些内容。好的，这很常见。然而，背后发生了什么呢？其实，发生的是：

例如，手机会连接到DNS服务，DNS是层级化的，因此可能有多个服务器连接以获取响应。它的作用是将你可读的人类服务名称转化为IP地址，之后可以用来通过互联网不断跳转到某个地方。

可能是一个数据中心，你将在入口点遇到负载均衡器。你完全没有意识到，负载均衡器会选择下一个跳点来转发这个信息。然后，也许有一些定制的服务器在忙于执行你的搜索或寻找信息。

找到你感兴趣的信息。可能会生成一些广告，并且其他的合成也会发生在最终网页上，生成一个包含你结果的页面，也许还有一些广告，然后这些结果会通过同样的路径回传，通常是通过互联网返回到手机。这件你每天都会利用的简单事情，实际上有很多非常有趣的环节。

有时候，当我过于深入地思考发生了什么时，我会感到震惊，所有的东西竟然能正常运作。我认为，随着我们深入探讨这些内容，了解所有这些必须协调工作的事情以便你的查询能正常工作，或是其他更有趣的内容时，我希望你能感受到一些惊奇。

我也从中感到惊奇。我喜欢系统，并且我认为像这样的一个大系统能够正常运作，实在是太神奇了。我希望安东尼和我能给你一些关于它如何运作的感觉。那么，操作系统是什么呢？嗯，这并不是每个人都能清楚理解的。那么我是什么意思呢？我指的是：

不同的人有不同的看法。如果你查看关于操作系统是什么的所有想法或民意调查的所有回应，你可能会听到其中的一些内容。它进行内存管理，管理输入输出，调度CPU，也许它还进行通信，也许它处理多任务或多程序。所以，它有很多组成部分。

但这并不是操作系统的定义。它的作用是什么呢？像文件系统或多媒体支持，视频处理等功能，如何解释这些部分呢？

那么用户界面呢？互联网浏览器呢？

这是操作系统的一部分吗？我这里有一个小小的笑脸，因为曾经微软宣称浏览器是他们操作系统的一个基本部分，引发了各种关于这一点是否成立的讨论。这种争论经常会出现，挺有意思的。你可能会问，这对于学术界的人才有趣吗？

这对于学术界的人来说肯定有趣，但有时反垄断问题也会介入。如果微软宣称互联网浏览器是他们操作系统的一部分，而结果每个人都只使用他们的浏览器，这可能会涉及一些反垄断问题。因此，不管怎样，我希望在接下来的讨论中至少能给你提供正确的指引。

如果有人给你一个操作系统的定义，经过一段时间你至少会有一个评估他们说法的方法。所以，实际上并没有一个被普遍接受的操作系统定义。有时人们会说，操作系统就是厂商在你订购操作系统时提供的所有东西。

也许人们会同意的一点是，操作系统有一个叫做内核的部分，通常是计算机上始终运行的唯一程序，它像是操作系统的核心，可能其他的东西要么是随操作系统一起发布的系统程序，要么就是应用程序。这种定义还不错，但我们会在后续进一步探讨。

所以操作系统的定义也可以包括像是层次结构。举个例子，他们可能会说操作系统中有一层特殊的软件，提供通过便捷的抽象访问硬件资源，这样复杂的硬件就变得容易使用了。也许它还保护对资源的访问。

也许它提供了这些资源的安全性和认证，确保只有授权的人可以使用它们。也许它提供了通信功能，例如TCP/IP协议，你肯定听说过，我们会在课程进行时进一步讨论，但也许这些抽象层次也是操作系统的一部分。

所以你可以这样看待，底层实际上是硬件，操作系统是介于应用程序（这些是你想要完成的任务）和复杂杂乱的底层硬件之间的一个层。

![](img/ae0f44ab6904d80ba96175b3495ad498_3.png)

那么“操作”这个词是什么意思呢？在很久以前，人们打电话的方式是这样的。你会与一个总机接线员通话，他或她实际上会将电话插到接线板上。

![](img/ae0f44ab6904d80ba96175b3495ad498_5.png)

曾经有计算机操作员，也许那就是“操作员”一词的来源，但今天，当人们谈论操作系统时，他们实际上是在谈论那种协调所有事物的软体，就像我们所说的那样。

![](img/ae0f44ab6904d80ba96175b3495ad498_7.png)

这基本上就是我们接下来要讨论的内容。那么，系统部分是什么呢？

![](img/ae0f44ab6904d80ba96175b3495ad498_9.png)

所以在这里操作的是操作硬件的那个东西。

![](img/ae0f44ab6904d80ba96175b3495ad498_11.png)

系统部分也是一个有趣的问题，那么什么是一个系统呢？

许多相互关联的部分通常构成一个系统。每个部分都可能与其他部分互动，当系统足够庞大时，有时你最终得到的实际交互结果并不是你预期的。这也是拥有一个系统时的一个有趣方面，就是当它开始变得……

新兴行为是我们在这门课程中将要讨论的内容之一，实际上这与驯服这种新兴行为有关，真正的鲁棒性需要一种工程思维方式。我希望安东尼和我能够给你们提供一种工程思维的良好体验。所以你必须非常仔细地处理错误。你需要小心恶意或不小心的用户，而且你必须非常小心。

当你开始进入锁定机制时，我们将设计以确保正确性，而不是设计某个东西并多次测试，期望它是正确的。所以我们将设计一个正确的系统。所以系统编程将是这门课程中非常重要的一部分，我们将会……

为了让你们从一开始就能有所了解，我们首先从用户的角度来看如何与像Linux或Unix风格的操作系统进行交互，给你们一种从上方看系统的感觉，然后我们将深入并迅速地探索系统底层的内容。

比如说，我们可以讨论硬件与软件的接口，这实际上可以被看作是虚拟化的问题。所以我们有一个在上面运行的程序，而下面有复杂的硬件，我们希望能让软件访问这个硬件，以便执行受控的操作。你们应该都已经学过61C了，假设你们都知道硬件里都包含了什么。

系统中有一个处理器，有一些内存可以存储许多不同类型的数据。也许有一部分内存是专门为操作系统保留的，每个不同的颜色这里可能代表着一个不同的进程，而那个处理器有一组寄存器。这些寄存器可以用来访问内存，因此可能会存储地址。

这些寄存器也可以存储到内存中，以便我们可以暂停一个进程，运行另一个任务，这将是我们即将讨论的多路复用多任务的一部分。当然，这里有一个缓存，能加速处理，我们也会稍微谈一下这个。页面表让我们能够进行地址转换，从而获取虚拟内存，然后，你知道，一旦你……

低于处理器内存级别的所有硬件都变得非常有趣。你知道存储设备、网络、显示器等各种设备，所有这些设备通过总线连接，控制器让你能够控制这一切。所以，如果你真正去看计算机内部，你会看到很多东西，然后当你将其扩展到互联网时……

这里还有更多的东西，问题的关键是如何编程。复杂性太高了，你知道，这就是架构指令在这里发挥作用的地方。好吧，它基本上是在处理器内部进行操作，并提供足够的标准化，以便程序可以希望在其上运行，但它也……

这将是操作系统的作用，它将为我们提供干净的边界和虚拟化视图，以帮助应用程序更容易地编写。因此，你在61c课程中学到的是机器结构、C语言，而操作系统将会把你在61c中学到的所有内容抽象化，以帮助应用程序的编写更加简便。

![](img/ae0f44ab6904d80ba96175b3495ad498_13.png)

如果我们进一步讨论操作系统中包含的内容，我们可能会从它的幻觉性质开始谈起，因为操作系统提供了清晰且易于使用的抽象。

![](img/ae0f44ab6904d80ba96175b3495ad498_15.png)

物理资源的管理。如果我们回看之前的幻灯片，所有这些内容——好吧，许多不同的设备，不同的处理器，不同的能力，有些处理器有GPU，有些没有——所有这些复杂性都需要以一种干净的方式进行虚拟化，使得编写程序变得可能。

![](img/ae0f44ab6904d80ba96175b3495ad498_17.png)

程序，这实际上就是解决方案。操作系统提供了一种干净且易于使用的资源抽象，而这些抽象是你在使用时可能不太会考虑的。比如你们中那些写过并编译过程序的人，可能会想到像**无限内存**这样的东西，因为你们不太担心马上就会用完内存，你可能会觉得……

文件、用户和消息，这些都是在底层硬件中并不存在的东西，它们是由操作系统作为易于使用的抽象体组成的。那么，如何实现机器的虚拟化呢？我将这台机器给压缩成了一个模型，操作系统将在硬件之上运行，成为那一关键的软件部分。

并使得应用程序易于工作。例如，我们从操作系统中得到什么？好吧，取代单个处理器（即 CPU），我们得到线程；取代那些没有很好地绑定在一起的字节的内存，我们得到地址空间，并且它们有保护域；取代存储中的随机块，我们得到。

文件和一些有趣的讲座将会介绍存储设备，以及我们如何从中构建出一个良好的文件系统。这样，取而代之的是通过以太网发送的随机消息，这些消息可能随时丢失，我们可以获得干净的插座抽象，它们是消息队列，你可以将消息放入一侧，它们会保证在另一侧出现，等等。

硬件的虚拟化视图是我们可以拥有一个进程，这是一个由操作系统提供的具有受限权限的执行环境，而这个进程是一个干净的容器。它有一个地址空间，这是一个干净的存储块；它有多个线程，即使在单个 CPU 上也能很好地多路复用；它有这些文件，它有这些插座。

当你编写程序时，你是在写进程抽象，而不是这些复杂的硬件组件。所以你将编译后的程序放在进程上。好吧，它链接了一些系统库，一旦你编译、链接并开始运行，它实际上就变成了进程。所以，嗯，稍微阐述一下这个概念。

随着学习的深入，你将能够更清楚地区分程序和进程。例如，程序是一个潜在的东西，一旦实例化并开始运行，它就变成了进程。所以，应用程序机器就是操作系统提供的进程抽象。

![](img/ae0f44ab6904d80ba96175b3495ad498_19.png)

每个正在运行的程序都有自己的进程，而进程提供了这个良好的接口。它比原始硬件要好，所以这就是我们从这些幻灯片中得到的结论。而这门课的一个有趣之处在于，我们不仅会讨论这些抽象概念，还会展示它们是如何实现的，你将亲眼看到。

我们将展示如何从硬件的底层位、块和复杂性，过渡到一个实际上可以在不同机器上使用的编程环境。程序员的视角是，程序将在进程中运行，因此他们编写一些程序，编译它们，链接一些库，结果就是你得到了。

进程是可以在各种硬件实例上，甚至在不同操作系统之间运行的程序的抽象。我们稍后会讨论如何实现这一点，然后，编译器将帮助我们把C语言程序转换为二进制，这实际上是底层机器所需要的。

我希望你们中的很多人还记得61C课程中的C语言以及编译和链接的概念。你们需要迅速掌握这些内容，因为我们将在这门课中以较快的节奏开始，稍后我会提到，我们将会有一个C语言复习环节，时间还未确定，但可能会在本周末或下周进行。

我们将尽快让你开始运行基本程序、编译代码并构建操作系统，以便你在学习其他内容时，能够顺利进行。现在在聊天中有个问题问到：如果没有上过61C，我能做得好吗？可以的，在某些情况下可能会有些挑战。

你知道，如果你没有上过61C课程并且打算直接学习这门课，我建议你尽量找到一套幻灯片并快速复习，因为你需要了解一些关于CPU如何工作、C语言的基础知识等等。这不是不可能完成的，过去几年的教学经验表明是可以做到的。

61C课程并不足以让你真正掌握C语言的工作知识，因此我们在前几周为你们提供了大量资源，希望能够帮助你们迅速跟上C语言的进度。希望我已经回答了这个问题。那么，什么是进程呢？请记住，进程是我们的虚拟化环境，进程……

![](img/ae0f44ab6904d80ba96175b3495ad498_21.png)

进程由地址空间、一个或多个控制线程在地址空间内执行，以及各种附加的系统状态（如打开的文件、套接字等）组成。安东尼也提到过，你可以在课程资源页面找到很棒的电子书，这是正确的。感谢安东尼提到这一点，大家应该去查看资源页面。

伯克利图书馆数字图书馆拥有所有O'Reilly书籍的授权，这些书籍很酷，封面上有动物图案。我们在C语言入门书籍上发布了几本不错的书，你可以从资源页面上找到它们，只要你是从伯克利的IP地址访问，或者你通过虚拟VPN连接到伯克利以进入图书馆，就应该能够访问这些资源。

举个例子，进程是由一个或多个控制线程和附加的系统状态组成的。例如，如果你使用的是Mac，查看所有进程的集合时可能会看到这样的情况，或者你可以在Windows上使用任务管理器，或者在Linux上运行`ps -aux`，这将列出所有进程。有趣的是要注意。

即使在空闲时，你的机器上也有很多进程在运行，这是很有趣的。你应该看看你的机器上到底有多少进程在运行。好的，很多，而且大部分进程并不是一直在运行，它们大部分时间处于休眠状态，但它们会在某些事件发生时被唤醒，运行一段时间后再回到休眠状态，这样你会更清楚了解它是如何工作的。

这一切都会在我们接下来的课程中讲解清楚，所以操作系统对世界的看法实际上是这样的。

![](img/ae0f44ab6904d80ba96175b3495ad498_23.png)

操作系统控制着下面的硬件，并提供了一系列进程，每个进程都有自己的地址空间、线程、文件、套接字等，彼此之间是**独立**的，因此这是一个虚拟化环境，我们将在接下来的讲解中告诉你它是如何工作的。好的，到目前为止有任何问题吗？

好的，所以操作系统……好问题，线程是否唯一属于进程？每个进程都有一组线程在其中运行。地址空间指的是在进程内部可以访问的所有地址的集合。我们接下来会更加正式地说明这一点，它是与其他进程的地址空间相互**隔离**的。

默认情况下，除非你特别打开通道，否则进程一可以访问的地址和底层内存实际上与进程二能够访问的内存是不同的，因此地址空间将成为我们保护进程之间相互隔离的关键概念之一。好的，每个进程都有一组线程。

每个进程都有一个独特的地址空间。还有一个问题，单核机器能同时运行多个进程吗？完全可以。好的，我们会教你如何实现的。所以，即使你只有一个单核处理器，你仍然可以运行多个进程，它们看起来像是同时运行的，这就是并发，我们将展示如何通过添加多个核心来实现这一点。

这只是允许更多的进程真正同时运行，而不是看似同时运行。好的，所以我们看到这里有一个问题，进程中的文件是否与硬盘上的文件不同？答案是，你在进程中看到的是一组**打开**的文件，这些文件最终存储在磁盘上。

磁盘上的任何进程文件都由磁盘支持，我们将在深入讨论文件系统时进一步探讨。嗯，操作系统将硬件接口转化为应用程序接口，为每个进程提供独立运行的程序。所以，接下来...

![](img/ae0f44ab6904d80ba96175b3495ad498_25.png)

这就是所谓的虚拟化底层硬件的幻觉。

![](img/ae0f44ab6904d80ba96175b3495ad498_27.png)

这样，当程序运行时，它将有一个更加干净的容器来执行。

![](img/ae0f44ab6904d80ba96175b3495ad498_29.png)

另外，操作系统做的另一件事是，在提供干净、无限内存等虚拟化的同时，它充当了裁判的角色，管理资源的保护、隔离和共享，处理诸如资源分配和进程间通信等问题。嗯，所以这种裁判角色实际上是操作系统最重要的功能之一。

![](img/ae0f44ab6904d80ba96175b3495ad498_31.png)

正如我所说，操作系统会保护进程，防止它们互相覆盖内存或干扰对方。好的，如果某些文件只有特定用户可以访问，那么...

![](img/ae0f44ab6904d80ba96175b3495ad498_33.png)

操作系统将保护那些文件不被其他用户访问等。所以，我展示的...

![](img/ae0f44ab6904d80ba96175b3495ad498_35.png)

为了更清楚地说明，我现在有一个棕色进程和一个绿色进程。高亮显示和颜色实际上在展示这些是不同的保护域。举个例子，现在回到那个问题，单核机器是否可以运行多个进程？我的回答是可以，我们来看看这个想法。所以我们有一个...

例如，单核处理器目前正在运行在棕色领域中。或者进程，所以现在有一个特定的线程正在执行，而当前的线程拥有一些寄存器和内存，这就是这个保护域。由于现在是棕色进程处于活动状态，如果它尝试访问...

所以，如果某部分内存是进程二独占的，那就不允许访问。这是保护的一部分。因此，如果我们想切换，假设我们现在正在运行棕色线程在棕色进程中，我们想给绿色进程一些时间运行，我们该怎么办？我们基本上需要打包所有棕色进程的状态，...

加载绿色进程的状态。这里我展示的是内存，记住，内存是硬件部分，除了由棕色进程独占的内存块之外，还有一些绿色内存块是由进程二独占的。所以，如果这个棕色线程试图访问这些内存，它将会遇到所谓的分段错误（segmentation fault）或页面错误（page fault）。

我们将展示它们之间的区别，然后它们会失败，好吧。因此，操作系统的一部分工作就是跟踪谁拥有什么资源，如果我们即将切换并让绿色进程运行一段时间，我们需要做什么呢？我们需要将当前的寄存器版本存储到操作系统内存中。

内存可能处于一种线程结构中，然后我们需要加载绿色状态，并且我们必须更改地址空间，使其对绿色进程可访问，然后在操作系统中执行所有这些操作，之后让进程重新运行。现在，绿色进程已经运行了，好吧。关于一个处理器上的单核是否能做到这一点的问题，答案是：是的，切换操作就是指从。

将处理器从运行棕色进程切换到运行绿色进程是操作系统的一部分。好吧，我们会更详细地讨论这一点，现在我们来谈谈保护机制。为了更清楚地说明这一点，举个例子，绿色进程正在运行，因为它被加载到处理器中，现在它试图访问许多资源，包括棕色资源。

内存、部分操作系统内存，也许还有一些存储。注意，所有这些内容可能会被禁止访问，因此绿色进程不应该访问棕色进程的内存，绿色进程不应该能够修改操作系统内存，除非有一些后续会谈到的例外情况。绿色进程也不应该访问磁盘，除非它确实应该拥有那些数据。

![](img/ae0f44ab6904d80ba96175b3495ad498_37.png)

在某些情况下，操作系统会介入并终止进程，以防它进行不允许的访问。你将得到一个叫做分段错误（segmentation fault）的错误，那个进程将会被停止，并且通常会输出一些调试状态。好吧，有人对此有问题吗？

我看到Anthony也在聊天中回答一些问题，这很好。好吧，那么我猜问题是关于VirtualBox的，我们让Anthony继续处理这些问题。

![](img/ae0f44ab6904d80ba96175b3495ad498_39.png)

回到我们关于保护的讨论，现在我展示了一些进程，嗯，一个处理器或核心，我们称之为一个核心，现在会有一个保护边界，嗯，所有这些东西——磁盘、显示器、网络、总线，所有这些内容——都会有一个保护边界，由操作系统组成，以确保这些进程只访问它们应该访问的内容。

也就是说，操作系统将进程彼此隔离，操作系统自己也会与其他进程隔离。嗯，这意味着一个进程不能破坏操作系统的内存，尽管在我展示的这个例子中，所有的内容都运行在同一个处理器上，我们仍然可以做到所有的保护。

所以，嗯，现在继续前进。

![](img/ae0f44ab6904d80ba96175b3495ad498_41.png)

这就是裁判的概念，嗯，最终来说，操作系统，嗯，没错，这是一个好问题。

![](img/ae0f44ab6904d80ba96175b3495ad498_43.png)

操作系统本身是否是一个进程呢？嗯，是也不是，这是一个不同的人可能会有不同看法的问题。所谓“进程”是什么意思呢？我可以告诉你，操作系统确实有多个线程在运行，并且它们的权限比所有进程线程都要高。因此，操作系统内部有很多不同的事情在并行发生。

它们对更多的内容有控制权，嗯，通常我们不称之为操作系统的一部分，但肯定有操作系统线程在运行，嗯，你可以在一两周后再问我这个问题，也许我们可以就此展开更多的讨论，但总的来说，为了结束这个话题，我不认为操作系统是一个进程，嗯，就我讨论的方式而言，操作系统是一个特殊的存在。

拥有一大堆线程，这些线程都在非常高的权限下工作，帮助生成对所有上层进程的虚拟视图，所以最终操作系统的概念就像是“胶水”一样，操作系统将这些东西连接在一起。

![](img/ae0f44ab6904d80ba96175b3495ad498_45.png)

操作系统，嗯，像是一个魔术师和裁判，嗯，这些功能通常没有人会反对将其视为操作系统的一部分。真正有趣的是，一旦我们开始谈论“胶水”这个概念，嗯，这时候才会有一些分歧。胶水实际上是指那些帮助程序员更容易使用底层硬件的东西。嗯，胶水的真正意义是关于通用性的。

提供诸如存储和文件处理、提供窗口系统、提供网络等服务，嗯，你实际上可以从伯克利传输数据到北京然后再返回，并且它们实际上能成功传输。这些是程序员认为有用的服务，不同的操作系统，甚至相同操作系统的不同版本可能在这些服务上有所不同。

提供的服务，好的，通常，操作系统提供库和运行中的服务，帮助程序员更容易地使用系统，好的，嗯，关于“核心是否有专用硬件来运行操作系统线程”的问题，答案通常是否定的，好的，通常发生的情况是，运行用户级进程的核心会在需要时开始运行操作系统的线程。

定时器响起，程序开始运行，或者当操作系统中的进程（例如运行用户代码或应用程序代码的进程）进行系统调用时，事情就会开始运行，操作系统的线程会在核心上运行，等等。所以，我们会深入探讨更多细节，好的，一旦我们开始深入研究，你会对这一过程有更清晰的了解，嗯，所以……

这是个好问题，我现在想回答一下，就是操作系统如何信任一个进程，确保它会将控制权返回给操作系统？答案是，它并不信任，好的，事实上，操作系统通过控制定时器来实现这一点，定时器会自动触发并将控制权转交给操作系统，无论用户在做什么。因此，用户程序可能正在忙于计算最后的……

圆周率数字，这是我最喜欢做的事情之一，呃，操作系统仍然会在定时器响起时继续工作，好的，呃，我们稍后会详细讨论系统调用（syscalls）等内容，嗯，但在这里简单回答一下，系统调用不是定时器，系统调用是用户程序实际访问服务时发生的情况，所以当它进行文件系统的读写操作时，那就是系统调用。

系统调用，我们会展示它是如何工作的，所以，I/O，正如我们一直提到的，是一个重要的部分。

![](img/ae0f44ab6904d80ba96175b3495ad498_47.png)

这就是操作系统所处理的内容，实际上，它将底层硬件的复杂性转化为一个清晰的抽象层。好，比如，当我们启动一个程序时，呃，我们可能会从存储中提取程序的部分内容并将其加载到内存中，以便它可以开始执行，或者当我们与远程的北京进行通信时……

伯克利，呃，操作系统将帮助协调 I/O，这样我们认为我们在做的事情，发送的字节流，实际上会作为一组数据包通过无线或有线网络传输。中间经过许多网络跳跃，最终到达目的地，比如北京。这些都由操作系统处理，好吗？这就是操作系统提供的另一项常见服务。

典型的，好的，呃，还有很多 I/O 服务，呃，最后我们有了外观和感觉。

![](img/ae0f44ab6904d80ba96175b3495ad498_49.png)

一台典型的机器，你们都知道，你们有手机，有笔记本电脑，它提供了一组窗口、剪切和粘贴等功能，这通常是窗口的外观和感觉。在许多情况下，至少会有一些库提供这种窗口功能，有时这种窗口功能是在操作系统中实现的，我们将在课程中进一步讨论这一点。

另外，顺便说一下，Windows NT在2000年代初是一个微内核操作系统，实际上将窗口管理和所有其他内容放在了内核之外。最终这变得太昂贵，从时间的角度来看，结果微软将窗口管理重新放回了操作系统的内核中，这实际上对时间管理上有很大帮助。

使其变得不太稳定，因此关于某些内容是否在操作系统内部或外部的问题是一个有趣的问题，我们将在本学期继续讨论这个问题。关于基于时间的多路复用的替代方案，提了一个很好的问题。嗯，你们都应该看看聊天，安东尼提到了操作系统实际上是。

在时间和空间上进行多路复用，思考这一点的方式实际上是内存，注意到这一点。内存有一些专门分配给不同进程的部分，如果我们有多个核心，那么我们实际上可以让不同的核心同时处理内存或存储器的不同部分，操作系统将会管理这一切。

好的，顺便说一下，如果你们中的一些人担心这变得太复杂，太快了，我会告诉你们，我们一开始将抛开多核的概念，先考虑一个进程在一个核心上运行，或者说一个核心上运行多个进程，以帮助你们更好地理解这一点，之后我们再引入多核。

一旦你理解了如何让一个核心工作，添加其他核心其实是非常容易的，而且操作系统通常还会处理电池管理、电源管理等等。好吧，所以有很多管理工作需要做。

![](img/ae0f44ab6904d80ba96175b3495ad498_51.png)

所以如果我们将这些放在一起，操作系统是什么？它是一个裁判，一个魔术师，还有粘合剂。好吧，这三样东西将在本学期多次出现，随着我们讨论操作系统的不同方面，很多情况下你们实际上是，嗯，让我看看，没错，你们实际上将实现这三者中的部分功能在操作系统中。

你们的团队将在学期中继续开展工作，因此你们将获得一个非常好的内视图，了解这些东西是如何由操作系统提供的。好吧，那么为什么要选61c课程，除了它很酷，授课的教授也很酷之外，可能还有其他原因，对吧？其中之一是，你们中的一些人可能会在职业生涯中设计和构建操作系统。

现在这种情况比以往任何时候都更为可能，因为我们正在获得这些嵌入式的物联网风格的设备，在某些情况下，人们从零开始设计自己的操作系统小模块，因为这些设备的资源有限，或者你可能会在初创公司深度参与Linux的开发。总之，了解它们的工作原理非常重要。

你们中的许多人，甚至可以说所有人，都将会创建一些大型系统，这些系统将会运用到我们今天讨论的核心概念。所以当你们设计下一个大系统、云计算系统或其他项目时，了解底层发生了什么，对你们的工作将非常有帮助。无论你是从事硬件还是软件开发，掌握这些概念都会对你们有很大帮助。

在162课程中，这将非常有帮助。有一个好问题是，为什么不使用Rust？Rust语言非常强大，但学习曲线较陡，它是一个非常棒的语言。不过我们现在还是决定使用C语言，因为它在操作系统领域更加常见。如果你们有兴趣，我非常乐意在办公时间和你们讨论Rust。

充分理解操作系统的应用非常重要，理解得越透彻，你就能越好地使用它们。那么现在让我简单介绍一下我们自己。我是John Kubital，大多数人叫我Kuby，可能是因为他们不太能发我的姓。我有硬件设计的背景，曾在麻省理工学院参与过Alwatt项目的工作。

研究生，给你看看我的芯片，这是我设计的通信和内存管理单元。这是最早的并行系统之一，集成了共享内存和消息传递两种技术。我有扎实的操作系统背景，因此曾在麻省理工学院的Athena项目中作为操作系统开发者工作，做过设备驱动和网络文件系统的开发。

我曾参与过集群高可用性系统的开发。Tessellation是我帮助开发的一个操作系统，属于伯克利大学的PAR实验室项目。我在这里做了很多对等系统的工作。我在伯克利的第一个项目是OceanStore项目，在这个项目中，我们讨论了如何存储。

我们已经存储了几千年的数据，并且开发了一些有趣的对等系统，例如Tapestry和Bamboo。这些系统在云存储领域具有开创意义，远在云计算兴起之前，Athenaic项目就已经出现了，他还参与了OceanStore项目，这在当时非常有趣。此外，我还从事量子计算的研究，尽管这与目前的内容关联不大。

我们正在探索**量子计算机架构**以及为设计量子计算机而开发的CAD工具。最近，我参与了**伯克利实验室智能边缘**的**Swarm实验室**，我有一个名为**全球数据平面**的项目，此外还涉及到存储容器，即数据胶囊。我们将详细讨论这个项目，安东尼也参与了这个项目，我们有很多内容要分享。

![](img/ae0f44ab6904d80ba96175b3495ad498_53.png)

我们正在研究**边缘机器人学**，有一个项目我们称之为**雾计算机器人学**。这部分内容涉及到数据胶囊，直观的理解是这些存储容器，你可以看到它们出现在奥克兰港口，我在这里已经坐了六个月。基本上，这是我们设计数据胶囊的灵感来源，这些容器是经过**加密保护**的。

数据的**硬化容器**，我们会在学期的后续讲座中详细讨论这个话题。那么，去吧。安东尼，他是谁？在那里，他就是我，我是安东尼·约瑟夫，我是**EKES**的教授，我坐在**RISE实验室**，是RISE实验室的一部分，我最近承担了**工程学院方学院工程领导力研究所**的院系主任角色。

正如库比提到的，我在多个不同的研究领域工作，我是雾计算机器人学和**GDP**的一部分，我还从事**机器学习**，尤其是**安全机器学习**。这意味着你在面对敌对方的情况下使用机器学习，你需要做出决策，比如判断某个程序是否是**恶意软件**，而敌对方知道你正在使用机器学习。

机器学习者正在尝试操控他们的答案，例如将**恶意软件**错误分类为**非恶意**，我还与**Detour Security**网络安全测试平台合作，这是全球最大的公共网络安全测试平台，行业、政府和研究人员都在使用它，而且它也被用于许多不同大学和学院的教学。

我之前参与过多个系统领域的项目。例如，**Moden**是一个替代**Pandas** Python库的工具，它提供了最高达100倍的性能提升，并且允许你利用现代**多核CPU**和我们机器上拥有的**数十到数百GB的内存**。我还从事**云计算**工作。

**Patchy Mesos**是我们在伯克利开发的一个项目，它是一个让你能够管理运行在**大型集群**上的应用程序的项目。我还从事**计算生物学**，我们开发了处理整个人类基因组序列的管道，每个序列的大小为250GB，这是一个庞大的数据量，尤其在你处理人口规模的数据时。

比如说，10,000个基因组，你将会处理从千兆字节到太字节级别的数据。所以我们让处理这些大数据集变得非常高效，正如之前提到的，我们一起做了一个名为tapestry的项目，涉及到点对点网络，我还从事过移动计算、无线和蜂窝网络等方面的工作。此外，我也参与了一些外部活动。

混合授课模式是我非常熟悉的。2015年和2016年，我们开发了五门不同的课程，教授如何处理大数据和使用Apache Spark，注册人数超过24万人，完成率达到了11%到15%，这非常令人惊讶，因为通常完成率只有3%左右。我还是一家生命科学领域创业公司的联合创始人。

我们在iGenomics工作，基本上是将我们在amp实验室和rise项目中所做的工作应用于计算生物学，并将这项技术商业化。我们致力于罕见病的治疗，所以接下来我将把话题转回给kuby，并且在我们失去Anthony之前，告诉你们，我们还没有确定具体的替代计划，但你们将会参加一些讲座。

这也是来自Anthony的，他将在这里提供很大的帮助，也会向我学习。

![](img/ae0f44ab6904d80ba96175b3495ad498_55.png)

好的，我们还安排了一些助教，你们将会非常熟悉他们。由于一切都转为虚拟形式，我想在我们第一次面对面的课程上，他们会到场，我们会介绍他们，你们将在这些课程中与他们互动。

![](img/ae0f44ab6904d80ba96175b3495ad498_57.png)

课程的前几周已经过去了，我觉得应该提一下关于注册的事情，我们收到了很多电子邮件，不幸的是，这门课程这个学期的名额非常有限，比以往任何时候都要紧张。目前课程的报名人数是327人。然而，我们正在努力确保增加另一个班级，这样可能会允许更多的学生加入。

所以请注意观察，但请不要通过邮件联系我们要求特殊调整等待名单的顺序，因为Anthony和我其实并不控制人选的顺序。不过，这个名额非常有限，正如我之前说的，我们可能会再开设一个班级。需要特别注意的是，这是一门早期退课截止的课程。

退课截止日是第二周的星期五，也就是28号。如果你知道自己不打算认真上这门课，请尽早退课，因为系里会继续招收其他学生填补空缺，这样就能让其他有意愿加入课程的同学进来，我们会关闭注册。

可能在接下来的几周内你会被从候补名单中移除，我们希望确保每个有机会的人都能进入课程。如果你在前两周坚持下来，理论上，退课就会更难了。我们这么做的原因是因为你会加入项目小组，第三周初我们会要求你组建你的团队并……

我们希望确保团队保持有效运作，同时避免成员流失，所以请仔细考虑这个问题。如果你打算在接下来的两周内加入项目小组并继续参与，确保你有长期参与的打算。好吧，话说回来，我们会继续努力让更多人加入，如果你在候补名单上，或者是并行注册，或者……

你得做功课，因为如果你不做，可能就会被我们允许进入课程，但到时候你会跟不上进度。我每年教这门课，每学期都会有这样的人——他们忘记自己还在候补名单上，没做任何功课，而且有点以为自己不在班级里，直到有时几周后才发现……

课程进行到这个阶段时，如果你还在班级里，那时候想退课就有点麻烦了。所以如果你在候补名单上，而且不打算继续上这门课的话，记得完成任务，确保你能退出候补名单。好了，关于这个问题有没有什么疑问？至于关于 Piazza 的问题，所有有机会进入课程的人……

如果你可以访问 Piazza 和我们的自动评分系统，顺便提一句，这并不意味着你已经在课程中，只有在正式注册的情况下，才算真正加入课程。你需要去大学的官方网站上查看自己是否已经注册上课，这能告诉你……

无论你是否已经在课堂上，但如果有可能进入课程，请确保完成作业，好吗？我们对这个问题都清楚了吗？好了，关于基础设施，网站是 cs162.ecs.berkeley.edu，我们也有 cs162.org，Piazza 链接可以从主页找到。我们会暂时将讲座录像放在主页上， 希望能够……

课程会继续进行下去，但我们都希望很快能恢复面对面的授课。好了，我看到有人在问课程日历的事，如果你在主页上看不到课程日历，那很可能是因为你处于隐身模式，你需要以学生身份登录。好的，我们的教材是……

《安德森与达林操作系统原理与实践》是一本非常不错的教科书，我们认为它是其中最好的之一。不同的人有不同的学习方式，阅读这本书的建议章节可能对你有帮助，我也会推荐它，因为它确实是一本很好的书。

我们还有一些额外的补充材料，你可以在操作系统《三大难题》一书中找到，还有 Robert Love 编写的《Linux开发》第三版。我们还有一些其他内容，链接在资源页面上，还有一些 Riley 的书籍，可以帮助你学习。好的，还有 C 语言教学的书籍，这些书也可以在页面上找到。

资源页面也有，我偶尔还会放一些研究论文在资源页上，并在整个学期中引用它们，给你一点关于这些想法来源的背景。好的，我们的教学大纲如下，我们将会讨论很多内容。

![](img/ae0f44ab6904d80ba96175b3495ad498_59.png)

操作系统概念如何作为系统程序员进行导航，所以我们将从像是什么的内容开始。进程、输入输出、网络、虚拟机，然后我们将学习并发性。今天我们收到很多问题，比如一个 CPU 是否能同时运行多个进程等。我们已经多次回答这个问题，答案是肯定的，我们将向你展示基本上如何实现这一点。

线程、调度、锁、死锁、可扩展性、公平性等。从一个极端来看，是如何在单个处理器上实现并发性，另一极端则是如何使用锁等进行编程。因此，将有几个星期，我们会带你走过这些概念，其中一部分内容是关于地址空间的。

我们还将讨论虚拟内存和地址转换、保护与共享，这些都是操作系统中的 61 C 概念，我们将会提醒你这些内容。我们还将讨论文件系统，令人着迷的是，你知道如何从磁盘上的单个块转换到你可以认为是包含视频等内容的文件吗？这也涉及到如何在操作系统中处理这些。

目录具有长路径名的部分，我们将会详细讨论这些细节和不同的文件系统。所以我们将从输入输出设备开始，然后逐步讲解到文件、事务、数据库等内容。然后在学期的后期，我们将开始讨论大型分布式系统。我今天一开始就谈到了互联网的奇妙之处。

你知道将世界上每个设备都连接到互联网，一旦你完成了这个任务，那就是一个庞大的分布式系统。虽然这门课从小系统开始，我们会首先研究单节点的小系统，但我们将逐步扩展，涵盖各种分布式系统协议，如RPC、NFS、分布式哈希表，我们还将讨论一致性、可扩展性和多播等问题。

当然，云计算贯穿其中，尤其是在学期结束时，我们将讨论关于可靠性和安全性的话题，涉及容错保护、日志记录以及这些如何帮助确保系统可靠性。此外，我们还将讨论云计算相关内容。好的，这是一门通过实践学习的课程，所以做好不仅要完成学术任务的准备。

你们将进行编程并以团队形式工作，因此我们既有个人作业，要求你们单独完成，这有助于你们掌握行业工具和个人技术，例如套接字编程、线程编程等，也有小组项目。请注意，作业零和项目零非常重要，因为它们是在学期的前几周完成的。

所以你们应该查看课程安排，我们将立刻开始作业零，并且项目零不需要小组参与，它将由你们自己完成。这些作业零和项目零都是关于你们熟悉我们的基础设施，确保你们能快速适应并迅速开始这门课程。小组项目也是如此。

其他组的成员实际上将分为四人一组，你将在第三周开始时告诉我们你所在的组，组内成员是谁，以及你对分配小组的偏好等等。接着，你将与组员一起在整个学期内合作，开发操作系统内部的一些功能。

好的，这些小组项目每组有四名成员，我通常认为应该是四人一组，不可以是三人，也不可以是五人。你们将组成四人小组，基本上是学习现实世界中事物如何运作。我们还需要确保你们所有人都在同一小组，或者至少有相同的TA，这样我们就能确保顺利进行。

在某些情况下，我们可能需要稍微分散一些人手，但其实这门课主要是关于确保你们每个人都有一个TA，TA能够了解你们的进度，确保沟通与合作顺畅。因此，我会不断强调这一点，Anthony也会在学期中不断提醒大家，你们需要定期举行会议。

和你的小组一起工作，而本学期令人期待的是，我们希望一切顺利。我们将首次面对面见面，几乎已经有两年没有这样做了，真正坐在咖啡馆里。好吧，现在我们有那家很棒的小咖啡馆，或者你知道，类似的地方，和小组成员交流对于顺利的团队互动至关重要。

好的，你们将一起完成设计文档，实际上，我真的很强调面对面的交流。因为无论我们的社交媒体应用程序（Slack、Messenger、Facebook等）有多好，它们真的不能替代面对面的交流。我多年来遇到过很多不协调的团队，它们的共同点就是没有定期见面，你知道的。

有些人仅仅使用电子邮件，然后当其他伙伴没有理解时就会感到沮丧等等。所以计划好定期与团队见面。好吧，有一个问题是，讨论课是不是只在周四和周五进行？实际上，现在周三、周四和周五都有讨论课，我们正在努力调整，因为我们希望所有内容都安排在周五。

如果可能的话，这样会让你在第一部分学到的内容更容易理解，特别是与讲座相关的内容。但如果你有强烈的偏好，想要选择其他时间而不是周五，请一定在 Piazza 上给我们留言。现在我们确实有一些小组安排在周三和周四，每个小组成员都应该有明确的责任，你们将在每个项目结束时评估队友的表现。

比如说，大家没有表达清楚自己的观点或者怎么做，关于这个我们会在项目一结束时再讨论。你们将基本上学习如何作为一个团队合作，通常那些试图按任务分配的团队，哦，你做一二三，我做四五六，通常并不奏效，你们会看到为什么到了后面会这样。

因为你知道，你们会分开，各自走自己的路，然后回来时没有很好地融合在一起。然后你就会慌了，开始琢磨接下来该怎么办。所以有一个问题是：如果我们是面对面的，内容还会被录制吗？我们已经准备好了屏幕录制，所以是的，我认为没问题。还有一点是，即使我们面对面，我们可能还是会用类似 Zoom 这样的方式，我们现在还不确定。

这将取决于资源的安排，即使内容已经录制，你也应该尽量参加讲座，因为那样你可以提问，了解进展情况。你知道，团队项目还涉及到与导师的沟通，就像你在真实世界中的工作一样，那将是你的助教。我们会进一步讨论如何使这一切顺利进行。

小组项目对于这门课至关重要，它们是现实的一小部分。好的，所以大家开始吧，不管你是在候补名单上还是在并行注册，只要有机会进入这门课，就立刻开始做作业零。如果现在还没有发布，它今天应该会发布，我想，项目零会在下周初开始。

也请尽早开始做这些，好的，哦，听说助教们已经发布了作业零，太好了。这将帮助你们做一些事情，比如设置 GitHub 账户、虚拟机环境、熟悉所有工具、如何提交给自动评分系统等。好的，前两周你们可以参加任何一个小组。我想我们会在 Piazza 上提供更多细节，但一旦我们分组。

小组出勤将是强制性的，因为我们希望确保助教了解你们的进展，同时参加小组课也很重要，这样你们可以得到问题的解答，因为我们不希望有人迷失在课程中。这是我们“没有学生掉队”模式的核心，好的。项目将要求你们使用 C 编程。

你们需要对指针感到舒适，必须对内存管理和使用 GDB 调试感到自如。所以这将比你们在 61C 课程中遇到的代码库要大得多、复杂得多。我们还没有准确发布具体时间，但它将在未来两周内发布，那就是关于 C 语言的复习课程，旨在帮助你们。

给你们提供了一些需要思考的内容，但我们也在课程网站上提供了一些资源。我们有关于 Git 和 C 的电子书，还有一本仍在 Beta 阶段的编程参考手册，是由伯克利的同学们编写的。它基本上是在阶梯（ladder）和第一部分的两节内容上，也会涉及一些编程和调试的复习，好的，这是初步的安排。

评分占比为 36%，包括三次期中考试，每次占 12%。初步安排的日期是星期四，分别是 2月17日、3月17日、4月28日。具体时间尚未确定，将根据我们能找到的教室安排。而期中考试主要会集中在那个时间段内的内容。所以可以理解为本学期将被分为三个部分，但我们还会进一步细分。

假设你们记得之前期中考试的所有内容，因为可能会有基于之前内容的背景问题。所以期中考试当然会集中在新材料上，但你们也可能会被问到和之前的材料相关的内容，好的。项目占 36%，作业占 18%，等等。参与度也很重要，这也是另一个因素。

参加课程的理由，好的，等等。所以我们总是必须谈到的另一件事是个人诚信和学生荣誉守则，作为加州大学伯克利分校社区的一员，我必须以诚实、正直和尊重他人的态度行事。好的，解释一下，你必须小心，明白吗？不要把你的答案直接给别人，也不要抄袭别人的答案，因为我们会对这些进行检查。

我们有软件工具来发现这种情况，这也是非常不诚实的。好的，向另一个小组解释概念可能是可以的，概念性地讨论算法或测试策略可能是可以的，与其他小组讨论调试方法也许是可以的，在线搜索通用算法这些可能是可以的。好的，问题是共享代码或测试用例是不允许的。

其他小组，嗯，抄袭或查看其他小组的代码，好的，抄袭或查看往年在线的代码或测试用例，嗯，帮助其他小组调试代码，好的，我们过去曾遇到过这样的情况：一个小组的人坐下来帮助另一个小组调试代码，结果两个小组都卷入了作弊丑闻。

所以你不想这么做，嗯，这也不诚实。好的，如果你不确定，当然可以问你的助教某些事情是否合适，但我们将对项目提交和作业提交与往年的进行对比。所以，做自己的工作吧，这样能让大家都更轻松，谢谢。

你知道，不要让朋友陷入不该帮忙的尴尬境地。好的，我们遇到过学生因为被强迫帮忙而陷入困境，因为他们把自己的答案给了别人。我们只是希望你不要这么做，好的，不要让朋友陷入这种境地。好，所以讲座的目标是互动的，好的，现在在聊天中提问，但随着我们继续进行，你将有机会，嗯，真正提问。

好的，嗯，你知道，我们快结束了，还有几分钟。但，嗯，除非他们真的，我暂停一下，看看是否还有其他关于行政事务的问题。有一个人问他们是否应该开始寻找小组，尽管他们在等候名单上。你知道，我会关注你在等候名单的位置，也许。

开始考虑一下你可能想要合作的伙伴，嗯，你知道我们直到等候名单关闭后才会形成小组。但是，嗯，认识一些你可能想要合作的人是没有坏处的。如果你在等候名单上，说明你还没有进入课堂，但仍有可能被选上，也有可能不会。所以，嗯，问题是参与分数。

仅仅从课程出勤来看，嗯，就是课程出勤，嗯，是办公室时间，嗯，可能的话，课堂出勤，嗯，也许我们会做这个，嗯，我们会通知你们的，但只要参与，我们会在旁边观察，好吗？所以今天的总结，嗯，你知道，是什么让操作系统变得如此令人兴奋。

![](img/ae0f44ab6904d80ba96175b3495ad498_61.png)

挑战性，嗯，我喜欢这张图片，因为这实际上是在谈论世界作为一个单一的巨大系统，嗯，从小型内存传感器开始，这是一只微型，嗯，我不知道算不算昆虫，但它可以行走，实际上是由硅制成的，嗯，汽车，你知道，最近在谈论特斯拉时，它们一直都在连接，并且不断接收更新。

你有大型云系统，你有巨大的集群，实际上，世界就是一个巨大的系统，这令人兴奋，因为，嗯，首先，如何让它运作，其次，随着大量事物相互连接，系统的复杂性开始呈现出一些你没有预料到的有趣行为。

那种行为有时候是好的，有时候是不好的，嗯，所以你知道我们在这门课上做的大多数事情就是讨论如何控制复杂性，试图从中获得可预测的反应，但是，嗯，它依然非常有趣，好吗？嗯，你知道，另一件事是。

![](img/ae0f44ab6904d80ba96175b3495ad498_63.png)

现在，有时，真正的技术趋势与摩尔定律有关，嗯，你大概从你来到伯克利的那天就听说过摩尔定律，如果你仔细看看，真的很有意思，如果你看看左边的这张图，嗯，戈登·摩尔曾在4004芯片还是最先进的技术时，在一次会议上被问到，未来会发生什么，他画了几张图。

在对数线性尺度上的几个点，他画了一条线，并说这将会发生。现在，从某种角度看，这显然是荒谬的，因为在对数线性尺度上的几个点意味着画一条直线就预测了指数增长，但它是对的，嗯，多年来，摩尔定律一直是它，嗯，这非常令人兴奋，因为我们经历了这种指数增长的翻倍。

晶体管的数量持续增长了很多年，嗯，最近有所放缓，但这意味着单个组件的复杂性正在以极快的速度增长，嗯，导致世界系统的复杂性也在快速增长，这就需要良好的操作系统设计，并且你们可以在这方面提供帮助，好吗？嗯，沿着这条线的一个大挑战。

![](img/ae0f44ab6904d80ba96175b3495ad498_65.png)

你可能在2002年左右看到过这种情况，我们当时将摩尔定律转化为不断增长的CPU性能，所以你可以懒惰地说，嗯，这个时代的电脑对于我的需求来说不够快，但是没关系，因为我只需要再等几年。由于性能每18个月翻倍，这一切都可以接受。有趣的是。

然而，到了2002年左右，这种方式不再奏效，原因有很多，我们进入了多核时代。突然之间，我们不得不弄清楚如何构建大型并行系统，这也催生了对新编程方式的各种需求。因此，另一个问题就是功率密度。如果你看一下数据，实际上我们不必担心，安东尼刚刚说了，你不需要担心。

参与的方式虽然是虚拟的，但另一个挑战是功率密度。实际上，如果你不减缓硬件变得越来越快的速度，你可能就得在笔记本电脑上放置火箭喷嘴一样的功率，这显然不是一个好主意。因此，多核的出现实际上是在想方设法利用这些晶体管的另一种方式。

到2007年左右，人们开始讨论具有多个核心的大芯片。例如，这是2007年发布的英特尔80核芯片，2010年发布的芯片有24个模块，每个模块包含两个核心，现在56核乘以2的配置已经出现在高端服务器中。那么，问题就来了，如何编程这些东西呢？这是长期以来的一个笑话，我有这么多的核心，我该如何利用它们。

用两个显示器来处理视频和音频，一个用于文字处理，一个用于浏览器，剩下的用来做病毒检查，就是这样。事实上，这开始推动了并行计算的需求。在这个阶段，我们完全拥抱了并行计算，这是你的一部分。

![](img/ae0f44ab6904d80ba96175b3495ad498_67.png)

有趣的地方在于，摩尔定律已经接近尾声，我们不再每18个月或甚至24个月就能获得两倍的晶体管数量了，这实际上改变了一些事情，方式也发生了变化。我们将讨论更多的内容，看看未来会发生什么。

![](img/ae0f44ab6904d80ba96175b3495ad498_69.png)

随着存储容量的不断增长，这里展示的是存储容量的对数线性图。比如我最喜欢的SSD之一，适配三英寸半的形态因子，它的容量是，抱歉，应该是多达数TB，甚至上百TB的存储容量，百TB的存储，竟然可以放在一块三英寸半的硬盘里。我们将进一步讨论这个话题。

但百TB的存储容量可不是一个小数目，而三英寸半的硬盘也不大。所以可以说，我们正走向一个拥有巨量存储的未来，我们将深入讨论如何保护这些存储，以免它们丢失。随着社会日益数字化，存储变得越来越重要。

![](img/ae0f44ab6904d80ba96175b3495ad498_71.png)

保护和连接，这意味着我们面临着所有这些安全漏洞，我们将讨论。

![](img/ae0f44ab6904d80ba96175b3495ad498_73.png)

随着网络的容量不断增加，嗯，你知道，这意味着我们能够以更快的速度与世界的遥远角落进行通信。这也意味着我们所连接的系统做的事情会越来越多，速度也会越来越快，而这可能是一个非常快速的失败方式，或者是一个非常快速的成功方式。

额外的功能取决于你现在的设计方式，问题是你是否需要。161这门课你不一定需要参加，但161是一门很棒的课程，所以我强烈推荐在这门课之前或之后参加。好吧，如果你愿意，我们可以再详细讨论一下。并且不仅仅是PC是连接的。

![](img/ae0f44ab6904d80ba96175b3495ad498_75.png)

当然是互联网，嗯，还有许多手机，但即使是手机也不是现在的主流，越来越多的小型设备，嗯，你知道，我们每个人都有一个Fitbit，或者Apple Watch，我们身边有各种小型传感器。好吧，这实际上又是这一张幻灯片。现在我们已经进入了物联网的时代。

![](img/ae0f44ab6904d80ba96175b3495ad498_77.png)

每个人每天都有成百上千的CPU在为他们工作，好吧，那操作系统是什么呢？

![](img/ae0f44ab6904d80ba96175b3495ad498_79.png)

再说一次，操作系统是资源管理的裁判，是保护和隔离的守护者，它是一个幻术师，提供简洁易用的抽象层，它是粘合剂，提供常见的服务。在整个学期中，我们会一直思考这一点，好吧，我们也将会教你很多相关的内容。那么我将在这里结束。嗯，请记住，在接下来的学习过程中，每当我说“总的来说”，通常是...

人们会走神，但实际上我希望你在那个时候重新集中注意力。这样我可以给你一个我们讨论内容的简短总结。所以，总的来说，我们想讨论的是提供方便的抽象层来处理多样化的硬件，我们将协调资源，并利用一些关键的硬件机制保护用户互不干扰，从而简化应用程序。

开发提供标准服务，我们将提供故障容器、故障隔离、故障恢复，而CS 162将会把许多不同领域的内容结合在一起。我期待和大家一起深入学习，也希望这学期我们能够度过一个美好的时光。谢谢，谢谢大家的发言，谢谢。

![](img/ae0f44ab6904d80ba96175b3495ad498_81.png)

[silence]。
