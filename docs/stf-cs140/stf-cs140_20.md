# 技术与操作系统

CS 140 讲座笔记

2014 年春季

约翰·奥斯特豪特

+   许多操作系统中的基本思想是在 30-40 年前开发的，当时的技术非常不同。 这些思想今天和未来是否仍然相关？

+   过去 25 年的技术变化：

    +   CPU 速度：15 兆赫 -> 2.5 吉赫（增加 167 倍）

    +   记忆体大小：8 兆字节 -> 4 千兆字节（增加 500 倍）

    +   磁盘容量：30 兆字节 -> 500 千兆字节（增加 16667 倍）

    +   磁盘传输速率：2 兆字节/秒 -> 100 兆字节/秒（增加 50 倍）

    +   网络速度：10 兆位/秒 -> 1 吉位/秒（增加 100 倍）

+   分页的作用：

    +   最初提出时（1960 年代）：

        +   磁盘速度：80 毫秒延迟，每秒 250 千字节传输

        +   记忆体大小：256 千字节（64 页）

        +   替换所有记忆体的时间：

            +   6.4 秒（随机访问）

            +   1 秒（顺序）

    +   如今：

        +   磁盘速度：10 毫秒延迟，每秒 100 兆字节传输

        +   记忆体大小：4 千兆字节（1,000,000 页）

        +   替换所有记忆体的时间：

            +   10,000 秒（3 小时）（随机访问）

            +   40 秒（顺序）

    +   除非它将长时间处于闲置状态，否则无法负担将某些内容换出。

    +   分页还有意义吗？

        +   增量加载进程的机制？

            +   为什么不一次读取整个二进制文件？

            +   10 MB 的二进制文件需要 0.1 秒。

        +   临时紧急情况的安全阀？

            +   或许，但在“系统根本不分页”和“系统完全无法使用”之间没有太多空间。

    +   虚拟内存仍然非常有用：

        +   简化物理记忆管理

        +   允许受控共享

        +   记忆体映射文件

        +   虚拟机

    +   页大小太小了：

        +   替换的随机访问成本太高。

        +   没有足够的 TLB 覆盖率。

+   磁盘：

    +   容量增加速度比访问时间更快。

    +   实际上无法访问您可以存储在磁盘上的所有信息！

    +   频繁访问的信息必须移到其他地方

+   TLB：

    +   记忆体大小没跟上

    +   64 项 -> 256 千字节覆盖范围

    +   在 80 年代中期，这在记忆体中占了相当大的一部分（8 兆字节）。

    +   如今 TLB 只能覆盖极小的记忆体部分

    +   一些 TLB 支持更大的页大小：

        +   1 兆字节

        +   1 吉字节

        +   但是，这使内核记忆管理变得复杂。

+   多核心

    +   多年来，芯片技术的改进使处理器时钟速率迅速提高。

    +   不幸的是，更快的时钟频率意味着更多的功耗；现在的功率限制限制了时钟频率的改进。

    +   芯片设计师现在正在利用技术在芯片上放置更多的处理器（核心）。

    +   结果：

        +   所有操作系统现在都必须是多处理器操作系统

        +   不清楚如何利用所有这些核心：应用程序开发人员现在必须编写并行程序？

        +   编写并行程序非常困难

+   当前操作系统开发的热点领域：

    +   非常小（设备）

        +   Android、iPhone 等

    +   非常大（数据中心）

        +   协调数千台机器共同工作
