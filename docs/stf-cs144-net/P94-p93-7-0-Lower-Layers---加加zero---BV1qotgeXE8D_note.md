# 计算机网络课程 P94：链路层基础与工作原理 🖧

在本节课中，我们将深入探讨网络协议栈的底层——链路层。我们将学习数据是如何在物理媒介上传输的，以及链路层如何解决传输过程中遇到的各种问题。课程将涵盖通信的基本原理、不同链路类型（有线与无线）的工作方式，以及由此引发的网络层问题，如分片和时钟同步。

## 通信基本原理 📡

上一节我们介绍了本单元的学习目标，本节中我们来看看通信的基本原理。这部分内容处于计算机科学与电气工程的交叉领域。

我们将讨论信号、噪声以及**信噪比**。信噪比实际上决定了一条链路的潜在比特率容量。今天我们没有每秒百吉比特的链路层，原因之一就在于这些通信的基本数学原理。

基于此，我们将查看像**位错误**这样的问题。链路层通过使用**错误纠正码**来从中恢复。例如，在链路层帧中添加一些冗余信息，这样即使物理层和链路层出现几个位错误，接收方也能恢复并接收到正确的帧。

## 链路的实际构建 🔗

我们在这个单元中要学习的第二个事情是，这些链接是如何实际构建的。你或许记得从第一单元学到的知识：TCP/IP的薄层设计允许许多不同的物理层或链路层在下方运行，并仍然能使用互联网协议将它们连接在一起。

物理链接有不同的类别，我们将讨论其中的两种。

### 有线链路：以太网

以下是关于有线链路，特别是以太网的介绍。

*   **共享介质与CSMA/CD**：以太网的原始版本使用了共享电缆，因此需要一种方法来共享该电缆。我们将学习被称为**CSMA/CD**的协议或访问控制机制，它允许我们共享那条物理电缆。
*   **现代以太网与交换机**：今天，我们也将学习现代以太网的工作原理，它使用**交换机**。你在前一个单元中已经学习了一些关于交换机如何学习地址以及那些转发表是如何被填充的知识。

### 无线链路

现在我们来学习无线链路。无线与有线有很大的不同，不仅仅在于它是通过空气广播这一事实。

以下是无线链路的一些根本性不同特性，我们在构建实用系统时必须注意：

*   **信号可变性**：无线信道中的信号本身会随时间变化，不像有线链路那样在同一条链路上始终具有相同的容量。信道会衰减，可能存在不同类型的干扰。
*   **多径干扰**：信号可以走不同长度的路径并相互干扰。
*   **广播特性与安全挑战**：因为信号是广播的，每个人都能听到，这引入了安全挑战，因为每个人都能听到你的通信内容。
*   **隐藏终端问题**：这是指当两个客户端都与一个接入点通信时，它们可以愉快地与接入点对话，但由于彼此之间没有直接的信号联系，它们无法感知对方的存在。因此，网络中需要额外的协调机制，以确保它们在接入点处不会相互干扰。

## 链路差异带来的网络层后果 🧩

除了学习这些不同类型的链接外，我们还将学习由于这些不同类型的链接而产生的一个后果：不同类型的链接可以携带的最大数据包大小不同，这个大小被称为**最大传输单元**。

例如，以太网可以携带长达**1500字节**的包。但是，其他链路可能只能传输最大到某个特定长度的包。

你们可能记得我们在前面提到过IP协议中的**分片**功能。当数据包从一个MTU较大的链路向下传输到一个MTU较小的链路时，分片是必要的，因为小MTU链路无法承载整个原始数据包。网络层会将其分解为一系列自包含的片段。这些片段直到到达终点主机时才会被重新组装，然后数据被传递给上一层。

你将了解这是如何工作的，以及IP协议内部使此工作得以实现的具体机制。

## 通信中的时钟同步问题 ⏱️

我们最后要学习的是关于通信信道中一个微妙而有趣的细节：时钟同步。

当两个主机或链路的两端在进行通信时，它们不可能使用完全相同的时钟。你无法让两个不同地方的时钟保持完全相同的频率和相位。当发送者发送数据时，它使用自己的时钟，这可能与接收者使用的时钟不同。

因此，我们需要以某种方式告诉接收者我们使用了什么样的时钟速率、频率和相位，以便接收端能正确解码数据。所以我们会学习**编码**技术来解决这个问题。

---

本节课中，我们一起学习了计算机网络链路层的核心知识。我们从通信的基本原理（信号、噪声、错误纠正）出发，探讨了有线的以太网（包括其历史协议CSMA/CD和现代交换机结构）与无线链路的根本性差异（如信号可变性、隐藏终端问题）。接着，我们了解了不同链路的MTU差异如何导致IP层的分片与重组。最后，我们认识了通信中时钟同步的重要性及其解决方案。理解这些底层机制，是构建稳定、高效网络应用的基础。