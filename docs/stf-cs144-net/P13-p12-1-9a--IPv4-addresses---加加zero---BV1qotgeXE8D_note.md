# 计算机网络课程 P13：IPv4地址详解 🌐

![](img/453444f6306a77626238e35c7b11b6d1_1.png)

在本节课中，我们将要学习互联网协议版本四（IPv4）地址。我们将了解IPv4地址的格式、作用，以及如何通过子网掩码来划分网络。这是理解网络设备如何相互通信的基础。

![](img/453444f6306a77626238e35c7b11b6d1_3.png)

---

互联网协议允许两台计算机在一个构建起来的网络上交换消息。这个协议运行在许多不同的链路层之上。它通过地址来实现设备间的通信。一个IP数据包包含一个源地址和一个目的地址。路由器根据数据包的目的地地址，决定将其转发到哪个链接。

![](img/453444f6306a77626238e35c7b11b6d1_5.png)

基于数据包目的地地址的转发，是IP路由的核心。让我们详细看看IP版本四地址的格式。

## IPv4地址的格式与目标 🎯

![](img/453444f6306a77626238e35c7b11b6d1_7.png)

![](img/453444f6306a77626238e35c7b11b6d1_9.png)

IPv4地址的原始目标是将许多不同的网络连接在一起。这需要协议具备一种方式，以便引用不在其本地网络上的计算机，并且确保地址是唯一的。例如，一个在IBM网络上的计算机，和一个通过串行线连接到路由器的计算机可以相互交谈。为了实现这一点，IPv4地址被设计出来。

![](img/453444f6306a77626238e35c7b11b6d1_11.png)

一个IPv4地址是32比特长。这32比特通常被写成四个八位组，也就是四个以点分十进制形式表示的数值，格式为 `A.B.C.D`。

![](img/453444f6306a77626238e35c7b11b6d1_13.png)

以下是三个IPv4地址的例子：
*   `1.71.64.64`
*   `64.1.2.8`
*   `30.70.6.80.2.12` （注：此地址格式有误，标准IPv4地址应为4组数字）

![](img/453444f6306a77626238e35c7b11b6d1_15.png)

通过IP连接的所有设备都必须有一个IPv4地址。IP层会将目的地地址为此地址的数据包交付给对应的那个设备。

![](img/453444f6306a77626238e35c7b11b6d1_17.png)

## 子网掩码的作用 🔍

![](img/453444f6306a77626238e35c7b11b6d1_19.png)

除了IP地址之外，一个网络设备通常还配有一个被称为**子网掩码**的东西。子网掩码用于区分哪些IP地址在本地网络中，哪些地址需要通过IP路由器转发。

![](img/453444f6306a77626238e35c7b11b6d1_21.png)

例如，想象一台笔记本电脑连接在一个无线网络中。为了将数据包发送到同一个无线网络中的其他设备，数据不需要经过IP路由器。理论上，你可以直接将数据包发送到目标设备，因为它们处于同一个网络中。

![](img/453444f6306a77626238e35c7b11b6d1_23.png)

子网掩码被写成一连串的1，从最高有效位开始，后面跟着一连串的0。一个常见的子网掩码 `255.255.255.0` 意味着前三个八位组（共24位）都是网络部分。

![](img/453444f6306a77626238e35c7b11b6d1_25.png)

具体来说：
*   子网掩码 `255.255.255.0` 意味着网络部分是24位长。
*   子网掩码 `255.255.255.128` 意味着网络部分是25位长。
*   子网掩码 `255.255.0.0` 意味着网络部分是16位长。

![](img/453444f6306a77626238e35c7b11b6d1_27.png)

你可以通过将设备的IP地址和它的子网掩码进行**按位与**运算，来确定两台计算机是否在同一网络。如果运算后得到的网络地址相等，则它们处于同一网络。

![](img/453444f6306a77626238e35c7b11b6d1_29.png)

![](img/453444f6306a77626238e35c7b11b6d1_31.png)

**判断是否在同一网络的公式：**
`(IP地址1 & 子网掩码) == (IP地址2 & 子网掩码)`

![](img/453444f6306a77626238e35c7b11b6d1_33.png)

## 实践查看：我的电脑网络配置 💻

![](img/453444f6306a77626238e35c7b11b6d1_35.png)

让我们看看在实际的电脑上如何查看这些信息。我打开终端并使用 `ifconfig` 程序。我的电脑通过Wi-Fi连接到互联网，这个网络接口正好名为 `en0`。

![](img/453444f6306a77626238e35c7b11b6d1_37.png)

如果我们查看关于 `en0` 的信息，可以看到：
*   我的IPv4地址是 `192.168.1.106`。
*   我的子网掩码是 `0xffffff00`，这是十六进制表示法，相当于 `255.255.255.0`。

![](img/453444f6306a77626238e35c7b11b6d1_39.png)

![](img/453444f6306a77626238e35c7b11b6d1_41.png)

这意味着，如果我需要向以 `192.168.1.` 开头的地址发送IP数据包（例如 `192.168.1.50`），我应该尝试直接发送（因为它们在同一个局域网内）。但如果目的地址不是以 `192.168.1.` 开头（例如 `8.8.8.8`），那么数据包就需要被发送到默认网关（路由器），由路由器负责将其转发到外部网络。

![](img/453444f6306a77626238e35c7b11b6d1_43.png)

---

![](img/453444f6306a77626238e35c7b11b6d1_45.png)

本节课中我们一起学习了IPv4地址。我们了解了IPv4地址是一个32位的唯一标识符，通常以点分十进制表示。我们还深入探讨了子网掩码的核心作用，它像一把尺子，划定了本地网络的边界，帮助设备判断一个目标地址是在本地直接通信，还是需要交给路由器进行转发。理解IP地址和子网掩码是掌握网络基础通信原理的关键一步。