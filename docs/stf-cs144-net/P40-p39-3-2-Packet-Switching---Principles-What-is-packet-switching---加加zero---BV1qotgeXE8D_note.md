![](img/e7402c1c8850e0b550c4ac1a60f64635_1.png)

# 计算机网络课程 P40：分组交换原理 📦

![](img/e7402c1c8850e0b550c4ac1a60f64635_3.png)

![](img/e7402c1c8850e0b550c4ac1a60f64635_5.png)

![](img/e7402c1c8850e0b550c4ac1a60f64635_7.png)

在本节课中，我们将要学习计算机网络中的一个核心概念——分组交换。我们将了解它的定义、工作原理，以及它为何成为互联网的基础技术。我们还会将其与另一种通信方式——电路交换进行对比，分析各自的优缺点。

![](img/e7402c1c8850e0b550c4ac1a60f64635_9.png)

## 概述：什么是分组交换？

![](img/e7402c1c8850e0b550c4ac1a60f64635_11.png)

分组交换最早由保罗·巴伦在二十世纪六十年代早期提出。它描述了信息包（即分组）如何像邮局递送信件一样，逐个通过互联网路由到目的地。选择分组交换决定了网络的许多属性。

![](img/e7402c1c8850e0b550c4ac1a60f64635_13.png)

## 背景：分组交换的前身——电路交换

在深入了解分组交换之前，我们先来看看它的前身：电路交换。我们都非常熟悉电路交换，因为它是传统电话网络中使用的方式。

![](img/e7402c1c8850e0b550c4ac1a60f64635_15.png)

### 电路交换的工作原理

![](img/e7402c1c8850e0b550c4ac1a60f64635_17.png)

在传统的电话网络中，当一部电话呼叫另一部电话时，会建立一个端到端的专用连接。这个连接在通话期间会一直保持，直到通话结束。

![](img/e7402c1c8850e0b550c4ac1a60f64635_19.png)

以下是电话通话的三个阶段：
1.  **建立**：拿起听筒并拨打号码，电话系统尝试找到并连接被叫方。
2.  **通信**：连接成功后，创建一条从一端到另一端的专用电路，声音被数字化并通过这条电路传输。
3.  **关闭**：挂断电话后，电路被拆除，沿途所有交换机的状态被移除。

![](img/e7402c1c8850e0b550c4ac1a60f64635_21.png)

在现代数字电话系统中，城市之间的高速干线（如光纤）可以同时承载成千上万个独立的电话呼叫，每个呼叫占用自己独立的64kbps电路。

![](img/e7402c1c8850e0b550c4ac1a60f64635_23.png)

### 电路交换的特点总结

![](img/e7402c1c8850e0b550c4ac1a60f64635_25.png)

以下是电路交换的主要特征：
*   每个呼叫都有其私有的、从端到端保证隔离的数据率。
*   呼叫有三个阶段：建立、通信和关闭。
*   电路最初是一条物理线，现在是由虚拟私有线组成，与别人共享物理线路但逻辑上独立。

![](img/e7402c1c8850e0b550c4ac1a60f64635_27.png)

![](img/e7402c1c8850e0b550c4ac1a60f64635_29.png)

### 电路交换的不足

![](img/e7402c1c8850e0b550c4ac1a60f64635_31.png)

尽管电路交换对电话系统工作得很好，但将其用于计算机通信时，存在一些不足：

![](img/e7402c1c8850e0b550c4ac1a60f64635_33.png)

以下是电路交换的三个主要问题：
1.  **效率低下**：计算机通信往往是突发性的（例如，发送网页内容后会有阅读的暂停期）。在沉默期，专用电路被占用但未被使用，导致网络容量利用率低。
2.  **速率不灵活**：计算机应用需要的数据速率差异巨大（从每秒几个字符到每秒数兆比特的视频流）。固定的速率电路无法适应这种多样性。
3.  **状态管理复杂**：需要为每个呼叫在沿途所有交换机上建立和维护状态（入口到出口的电路映射）。如果发生故障，需要重新配置所有状态，管理负担重，且容易产生不一致。

![](img/e7402c1c8850e0b550c4ac1a60f64635_35.png)

![](img/e7402c1c8850e0b550c4ac1a60f64635_37.png)

## 分组交换的工作原理 🔄

![](img/e7402c1c8850e0b550c4ac1a60f64635_39.png)

上一节我们介绍了电路交换及其不足，本节中我们来看看分组交换如何工作。

在分组交换中，没有端到端的专用电路。数据被分割成一个个带有地址信息的“分组”，然后独立地在网络中传输。

### 分组交换的基本过程

![](img/e7402c1c8850e0b550c4ac1a60f64635_41.png)

假设左边的笔记本电脑要与右边的服务器通信。在分组交换中，通信过程如下：
1.  发送方将数据块封装成**分组**，分组包含**数据**和**头部**。头部中最重要的信息是**目的地地址**。
2.  分组被送入网络，由沿途的**分组交换机**（如路由器）根据其内部的**转发表**，逐跳地转发到目的地。
3.  每个分组交换机查看分组的目的地址，查询转发表，决定将其发送到哪一个“下一跳”。

![](img/e7402c1c8850e0b550c4ac1a60f64635_43.png)

例如，一个分组的目的地址是 `B`。当它到达交换机 `S1` 时，`S1` 查询自己的转发表，发现地址 `B` 的下一跳是 `S2`，于是将分组发送给 `S2`。`S2` 再根据自己的转发表，将分组转发给 `S4`，最终到达目的地。

![](img/e7402c1c8850e0b550c4ac1a60f64635_45.png)

![](img/e7402c1c8850e0b550c4ac1a60f64635_47.png)

### 分组交换机的关键组件

![](img/e7402c1c8850e0b550c4ac1a60f64635_49.png)

分组交换机（如路由器）内部有两个关键部分：
*   **转发表**：用于查询每个分组应该被转发到哪个输出链路。
*   **缓冲区**：用于临时存储分组。当多个分组同时到达并竞争同一个输出链路时，来不及发送的分组需要在缓冲区中排队等待。

### 分组交换的特点总结

![](img/e7402c1c8850e0b550c4ac1a60f64635_51.png)

以下是分组交换的主要特征：
*   分组由路由器根据本地转发表**单独路由**。
*   所有分组**共享链路的全部容量**，突发流量可以高效利用带宽。
*   路由器**不维护每条通信的特定状态**，只维护通用的转发表，简化了网络管理。

![](img/e7402c1c8850e0b550c4ac1a60f64635_53.png)

![](img/e7402c1c8850e0b550c4ac1a60f64635_55.png)

## 为何互联网选择分组交换？ ✅

了解了分组交换的工作原理后，我们来看看它被选为互联网基础技术的核心原因。

以下是互联网选择分组交换的三个主要原因：
1.  **高效利用昂贵链路**：互联网骨干链路最初带宽有限且昂贵。分组交换允许多个突发性的数据流高效地共享同一条链路，极大地提高了资源利用率。
2.  **坚韧性与容错性**：由于每个分组被独立路由，且网络不维护端到端连接状态，当某条链路或路由器发生故障时，分组可以自动选择其他可用路径到达目的地，网络具有很强的生存能力。
3.  **互联异构网络**：互联网最初的设计目标是连接各种已有的计算机网络。当时，大多数计算机网络都采用分组交换技术。为了与它们兼容，互联网自然选择了分组交换。

## 总结

![](img/e7402c1c8850e0b550c4ac1a60f64635_57.png)

![](img/e7402c1c8850e0b550c4ac1a60f64635_59.png)

本节课中我们一起学习了计算机网络的核心——分组交换。我们首先了解了其前身电路交换的工作原理和不足。接着，我们深入探讨了分组交换如何通过将数据封装成带地址的分组、并由交换机逐跳转发来实现通信。最后，我们分析了分组交换因其高效性、坚韧性和兼容性而被选为互联网基础技术的原因。

![](img/e7402c1c8850e0b550c4ac1a60f64635_61.png)

![](img/e7402c1c8850e0b550c4ac1a60f64635_63.png)

在接下来的课程中，我们将学习更多关于分组交换的知识，包括其基本定义、建模方法以及多年来发展出的各种特性。