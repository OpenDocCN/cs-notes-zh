# 斯坦福CS145数据库导论笔记 📚

在本课程中，我们将学习数据库系统的基本概念，特别是关系模型和SQL语言。我们将从数据库的核心思想开始，逐步深入到数据操作和查询的具体方法。

## 1. 什么是数据库？🗄️

数据库是一个有组织的数据集合，通常以电子形式存储在计算机系统中。它由数据库管理系统（DBMS）控制。DBMS是一个软件，它允许用户定义、创建、维护和控制对数据库的访问。

上一节我们介绍了数据库的基本定义，本节中我们来看看数据库系统的核心优势。

数据库系统相较于传统的文件处理系统，主要有以下优势：
*   **减少数据冗余**：数据集中存储，避免重复。
*   **避免数据不一致性**：数据只有一份，更新时所有访问点保持一致。
*   **支持数据共享**：多个用户和应用程序可以安全地并发访问数据。
*   **实施完整性约束**：确保数据遵循特定的业务规则（如年龄不能为负数）。
*   **提供数据安全性**：通过权限控制保护数据。
*   **保证数据持久性**：确保数据在系统故障后不丢失。

## 2. 关系模型 📊

关系模型是当今数据库系统最常用的数据模型。它将数据组织成**关系**（即二维表）。

以下是关系模型中的核心术语：
*   **关系**：一个具有行和列的二维表。例如，一个“学生”表。
*   **元组**：表中的一行，代表一个实体或关系中的一个记录。
*   **属性**：表中的一列，代表实体的一个特性。例如，学生表中的“学号”、“姓名”。
*   **域**：每个属性允许的取值集合。例如，“性别”属性的域是 {‘男’， ‘女’}。
*   **模式**：关系的逻辑结构描述，包括关系名和其属性名。例如，学生(学号， 姓名， 年龄)。

关系模型的核心操作基于关系代数。接下来，我们将学习如何使用SQL语言来执行这些操作。

## 3. SQL简介 🛠️

SQL（结构化查询语言）是用于管理和操作关系数据库的标准语言。它功能强大，但入门简单。

以下是SQL的主要组成部分：
*   **数据定义语言**：用于定义和修改数据库模式。例如 `CREATE TABLE`, `ALTER TABLE`。
*   **数据操作语言**：用于查询和修改表中的数据。例如 `SELECT`, `INSERT`, `UPDATE`, `DELETE`。
*   **数据控制语言**：用于控制对数据的访问权限。例如 `GRANT`, `REVOKE`。

### 3.1 基本查询：SELECT语句

`SELECT`语句用于从数据库中检索数据。这是最常用的SQL命令。

一个基本的SELECT语句结构如下：
```sql
SELECT 列名1， 列名2， ...
FROM 表名
WHERE 条件；
```

例如，从一个名为`Students`的表中查询所有年龄大于20岁的学生姓名：
```sql
SELECT name
FROM Students
WHERE age > 20；
```

### 3.2 关键子句

为了更精确地控制查询结果，SQL提供了几个关键子句。

以下是几个必须掌握的关键子句及其作用：
*   **`WHERE`**：过滤行，指定条件。
*   **`GROUP BY`**：将行分组，以便对每个组应用聚合函数（如`COUNT`， `SUM`， `AVG`）。
*   **`HAVING`**：过滤分组，与`GROUP BY`一起使用，针对分组结果设置条件。
*   **`ORDER BY`**：对结果集进行排序（升序`ASC`或降序`DESC`）。

掌握了基本查询后，我们来看看如何创建和修改存储数据的表结构。

## 4. 定义与修改模式 🏗️

### 4.1 创建表

使用`CREATE TABLE`语句定义一个新表及其结构。

创建一个`Students`表的示例：
```sql
CREATE TABLE Students (
    sid INT PRIMARY KEY，          -- 学号，设为主键
    name VARCHAR(50) NOT NULL，    -- 姓名，可变长字符串，非空
    age INT，                      -- 年龄，整数类型
    major VARCHAR(50)              -- 专业
);
```

### 4.2 修改表

使用`ALTER TABLE`语句可以修改现有表的结构，例如添加或删除列。

为`Students`表添加一列“邮箱”：
```sql
ALTER TABLE Students
ADD email VARCHAR(100);
```

## 总结 📝

本节课中我们一起学习了数据库系统的基础知识。我们首先了解了数据库和DBMS的概念及其优势，然后深入探讨了关系模型的基本组成部分，如关系、元组和属性。接着，我们介绍了SQL语言，学习了如何使用`SELECT`语句进行基本查询，并理解了`WHERE`、`GROUP BY`、`HAVING`和`ORDER BY`等关键子句的作用。最后，我们掌握了如何使用`CREATE TABLE`和`ALTER TABLE`来定义和修改数据库表的结构。这些是进入数据库世界的基石。