# Âç°ËÄêÂü∫Ê¢ÖÈöÜÂ§ßÂ≠¶ 14-740 ËÆ°ÁÆóÊú∫ÁΩëÁªú Fundamentals of Computer NetworksÔºàFall 2020Ôºâ - P25ÔºöLecture 25 Wireless Networks - ___main___ - BV1wT4y1A7cd

![](img/d260aaee58dbf0d885f9a80f1b0d58d0_0.png)

This is 14740„ÄÇWelcome everybodyÔºå I am very glad that you're with me today„ÄÇüòäÔºåBefore we get started„ÄÇ

 I have one note to makeÔºå I hope it doesn't come to it doesn't disturb things„ÄÇ

 but it turns out my house right now has no heatÔºå my boiler is not working„ÄÇ

And so it is possible that I'm going to get interrupted when a heating guy shows up today well see I normally would not want that to actually interrupt the flow of the class„ÄÇ

 but it's cold in my house right now and I don't want him to say well I try to connect I'll talk to you again tomorrow or anything like that so I apologize ahead of time if I suddenly say hold on a minute and mute myself and run away from the screen to you know let him into the basement or something like that I hope you understand„ÄÇ

As well„ÄÇOkayÔºå so where are weÔºüWe're getting towards the end of the course„ÄÇ

 you know that there's not much left not much to talk about it's today and one more meeting time„ÄÇ

And then we've got a finalÔºå in fact„ÄÇExactly one week from this moment„ÄÇ

 we will all be in the middle of dealing with that final„ÄÇGet your studying done„ÄÇPlease ask us„ÄÇ

 reach out to us if there's anything that's confusingÔºå if there's anything you'd like to discuss„ÄÇ

 post something on Piazza office hoursÔºå feel free to send us some emailÔºå whatever needs to happen„ÄÇ

Jeremy's asking a really good question in fact it' will take a moment here to actually basically say hey„ÄÇ

 is there anybody out there that would like to connect with Jeremy I know he's been asking several times about it„ÄÇ

 I am all in favor of study groups I think they are one of the most effective ways to study for any topic„ÄÇ

They they allow you to teach the material to someone else„ÄÇ

 which is actually the best way to learn it one of the big benefits I get out of being a professor and teaching stuff is that I get to learn it really well and you know you can„ÄÇ

You know you understand it when you can actually teach it and make it work for someone else and so I would recommend so anybody else want to join join in something like this„ÄÇ

So I see a couple of youÔºå I guess that's actually one of you in the chat window„ÄÇ

Saying yes there you go will as well come on the rest of you get involved this is a great way to actually study so we've got some some movement here to you guys I don't mind if somebody wants to specify a time and a zoom location„ÄÇ

RightRight here right nowÔºå let's go ahead and get something scheduledÔºå I think that'd be great„ÄÇ

Anybody want to propose the timeÔºüJeremyÔºå what time this weekend works for youÔºüOkay„ÄÇ

 Will's got something at two on Sunday„ÄÇGreatÔºå ohÔºå is that the link that will„ÄÇ

 is that the one that was on piazzaÔºüWhy don't you go ahead and repost that to piazza and it looks like you have some people who are„ÄÇ

Sufficiently scared of the final who may join you this time„ÄÇAnd thatÔºå I think would be fantastic„ÄÇU„ÄÇ

I have posted the study guide on the website thats„ÄÇ

The list of all of the lesson objectives and it's basically just the combination of all of them from before the first quiz before the second quiz and after the second quiz so every lecture from the entire semester is concatenated into and that big list„ÄÇ

And„ÄÇAnd Ganesssh is asking if there's a sample final exam or something like that and I do not have a sample final exam to give you„ÄÇ

 I actually don't think that's a great way to prepare for the final one the issues is it tends to give students a false sense of security if you look at that exam and you say oh„ÄÇ

 I now can answer all of these questions and those are pretty much the questions that are guaranteed that I'm not going to ask you„ÄÇ

m so I I and actually there's a fair amount of educational research behind not doing that„ÄÇ

 which is why I give you the study guide that's a list technically I mean specifically that is a list of the things i'm going to ask you I will not ask you any question that is not on that list„ÄÇ

ÂóØ„ÄÇAnd I haven't yet written the finalÔºå but I will sit down probably starting this evening and just you know pick some things from the list and the list says„ÄÇ

 you know you should be able to do X and so I will write a question about that specifically„ÄÇMe here„ÄÇ

 there will be a TA led review session„ÄÇAnd I don't remember row hit we have„ÄÇ

APoing on piazza about that or not I was just making the post Oh okay itll be open next minutes Yeah fantastic„ÄÇ

 so yesÔºå there will be a review session this weekend let's try to make it not at the same time that this study group is not Sunday at too its on Saturday I think we'll get every read for Saturday yeah„ÄÇ

OkayÔºå on Saturday review sessionÔºå excellent„ÄÇDion's asking about the so the time limit is basically the entire the entire final exam session time and„ÄÇ

I'm going to there will be some additional material in there some more questions than you've seen in the quiz but not a huge amount once again I'm not trying to make this a time crunch for anybody„ÄÇ

So it may be one and a half to two times the number of questions you had on a quiz„ÄÇ

And you have twice as much timeÔºå I thinkÔºå for the actual final„ÄÇ„Åù„ÅÜ„ÄÇAll right„ÄÇ

Also just to quick point outÔºå lab3 is doing Sunday„ÄÇ

 lab3 includes the opportunity to get some extra credit and that extra credit is for helping me improve the course you will be asked for every course to complete a FCE a faculty course evaluation„ÄÇ

And those turn out to be really valuable information that I use to try to improve the course and especially in this time when I'm doing stuff remotely and you know I look„ÄÇ

for ways to improve it because I now have to present the course in different ways than we've done in the past and so I really really could use your suggestions and your critiques of this„ÄÇ

This has happenedÔºå excuse me„ÄÇYeah„ÄÇÂó∞‰∏™‰Ω†Ê∞¥„ÄÇOkayÔºå JohnÔºå thanks so much„ÄÇ‰Ω† toÂêß„ÄÇGreat„ÄÇ

 I have a heating guy comingÔºå sorry about that„ÄÇI was talking about the FCEs and the fact that I would very much like your critical information about the course and the FCEs are one of those you know one through five to degree disagree kind of scales and that's great but a lot of times the numbers don't help me a whole lot it's okay„ÄÇ

 I guess the numbers went down you know 0„ÄÇ2 this year from last year„ÄÇ

What do I do with that information it's much more important that you in a comment tell me that oh this thing is annoying I wish you wouldn't do it or this thing wasn't scheduled well or please make sure to whatever it is„ÄÇ

I very much value that information and what I'm going to do with lab three is give you bonus points for providing me with that information„ÄÇ

ÂóØ„ÄÇSo„ÄÇI ask you very much to fill out those FCEs to give me useful comments„ÄÇ

 tell me why you didn't give me a five tell me the thing specifically if you can that would help me improve so that in the future I can make the course better so that's part of lab3 please make sure you have taken a look at that before you fill out your FCs so that you can fill out your FCs in the way that I'm asking and so that you can get the points then for lab 3 I shouldn't need to say this but just to be explicit I am not asking you to give me fives okay I'm not trying to bribe you to increase my score what I'm trying to do is bribe you to give me the information so that I can improve the course and„ÄÇ

I guess and get better scores out of semesters to comeÔºå okayÔºüAll right„ÄÇ

 on with today's actual materialÔºå today we're going to look at something which is pretty fantastic and that is the wireless networks and how they work„ÄÇ

This is a data link layer thing„ÄÇWireless networks also have a lot of effects of the physical layer that bleeds into how the actual data link layer works„ÄÇ

 so we'll talk about some of those interesting challenges and why we like them„ÄÇ



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_2.png)

All rightÔºå so you guys have„ÄÇBasically grown up with wfi being an available technology and you've seen it a lot and you may not„ÄÇ

Spend a whole lot of time thinking about how great it is„ÄÇ

 but it's fantastic to be able to carry devices around in our pockets or in our wrists to have a laptop that you can carry know back in the day that you could go to the coffee shop with that you could move around and that's fantastic to have that kind of access to have those mechanisms that would let you make that connection even without actually having a real cable which is great unfortunately it's a little bit more difficult„ÄÇ

 the point of here boss here thinks it's easy to make a wireless network it turns out it's harder to make a wireless network because you have to do all the things to fake the cables that aren't there„ÄÇ



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_4.png)

So what we're going to see is the fact that we're using radio waves to actually communicate our data around and we're going to be talking today about it in an infrastructure mode where there are access points you talk to and that is the most common way of connecting to wfi I'm going to show it„ÄÇ

With this picture todayÔºå and it looks a little weirdÔºå so let me describe what's going on here„ÄÇ

We have in some access pointÔºå this little greenÔºå I don't know„ÄÇ

 angel looking figure that you know has these these waves radiating out fer it that's supposed to illustrate an access point„ÄÇ

Normally at this point of the lecture I would point to the wall of the lecture room we were in and say see that thing over on the wall that's an access point you guys know what they are you've seen them around you have one in your apartment or home right now i'm pretty sure„ÄÇ

That's the place where the connection comes in and converts everything to radio with this antenna„ÄÇ

And of courseÔºå that radio wave is communicating to the antenna that you have built into your laptop now gone are the days used to be that you actually could get laptops with little antennas sticking up out of them„ÄÇ

 but luckily the electrical engineers got involved and they've built the antenna into the laptop so that it doesn't look intrusive it's buried behind the display panel or something like that„ÄÇ

But I'm showing it here because I want us to think about the fact that we have an antenna in our laptop or whatever device that is receiving those radio waves from the access point and and replying and sending their own waves so that's you know you see these little circular waves that's to show that there's this electromagnetic spectrum„ÄÇ

WaveÔºå this electromagnetic wave that is traveling from point to point to make the communication happen„ÄÇ

There is a range to this we'll talk about it in a minute but the power output of the axis point can only be received at some distance„ÄÇ

 so as you get further and further and further from that axis point your antenna will pick up less and less and less of the actual wave of the power that is in that electromagnetic wave and so I tried to show you this on the slide with kind of darker blue in the center fading out to a you know a paler blue„ÄÇ

 but then there is some some rangeÔºå some distance beyond which you will not be able to effectively pick up that axis points signal you'll get too much noise to be able to extract it meaningfully„ÄÇ

ÂóØ„ÄÇThis access point is is called is known in the standard as a thing called a basic service set this I'm sorry„ÄÇ

 this access point and the the„ÄÇThe other devices that it's communicating to in basically this circle thing is called a BSS„ÄÇ

 a basic service setÔºå and we'll see in a minute why we have a term like or why we had to invent a term like that and can't just say„ÄÇ

 oh yeahÔºå this is the data link connection„ÄÇAmit asking about collisions and yes„ÄÇ

 collisions can happen and in fact collisions in WiF are a little bit harder to deal with„ÄÇ

 so that's one additional challenge and we'll be talking about that at some length in a few minutes„ÄÇ

ÂóØ„ÄÇAnd I see the question about homework oneÔºå I will release thequeuing theory answers„ÄÇ

Posting something on Piazza will remind me if you wantÔºå if I forget about itÔºå which might be likely„ÄÇ

YeahÔºå I can't get you those answers„ÄÇOkay this access point and the basic service set is a datalink layer piece right that's why we're talking about it here it's working at the data link layer it has the things that datalink layer has it's connecting devices directly okay laptop to laptop or laptop out to well that's part of the interesting thing this access point is going to be connected now to other devices to get out to the internet shouldn't surprise you right this whole course has been about how things connect to other things the access point is going to be able to communicate over radio to everything in the base service set„ÄÇ

But then it's going to need to somehow connect out to the internet and it's going to do that by having some sort of wire out to a router and the router then of course„ÄÇ

 goes on to get the packets out to other places in the internet„ÄÇ

Now you may be looking at thistan saying wait a minuteÔºå you know when I moved into my apartment„ÄÇ

 I went down to Best Buy and I bought a w-fi box and I did not have to connect I did not have to have a separate router„ÄÇ

 and for many of usÔºå especially consumer grade devices„ÄÇ

 the access point is actually built into the same box that there is a router„ÄÇ

 but you can still think of that single box as having the functionality of an access point that manages the antennas and all of the stuff we're going to talk about today„ÄÇ

 as well as the functionality of a router which does the network layer conversions and and figures out how to route stuff usually it's a fairly simple job because you don't only have a couple of actual connections„ÄÇ

 usually two connections to deal with„ÄÇIt's this is the point where I can show why we need a term like BSS„ÄÇ

And that's because this base service set is the„ÄÇRadio portion of the data link layer connection here„ÄÇ

 but it's not the same thing as the subnet or the LA that we have been talking about at the data link layer it's almost there but it's not entirely right and can anybody tell me what what else we need to add to the BSS to actually get the entire subnet included„ÄÇ

I meanÔºå it should be obvious you look at this picture„ÄÇThe BSS plus what else is a subnetÔºüCarartik„ÄÇ

 yesÔºå thank you for falling into my trap„ÄÇ That router there„ÄÇRemember„ÄÇ

 a router is not part of a single subnetÔºå a router actually connects lots of subnets together„ÄÇ

And so there is part of the router that is part of the subnet„ÄÇ

 but it is only the interface that deals with this particular wire right so the the„ÄÇ

Data link connection to this router„ÄÇüò°ÔºåPlus the BSSÔºå when all included that becomes the actual subnet„ÄÇ

 that becomes the landÔºå that becomes all of the network layer devices that have the same net mask or their same prefix„ÄÇ

Great„ÄÇ

![](img/d260aaee58dbf0d885f9a80f1b0d58d0_6.png)

One other reason that that is there is because it is common to connect multiple access points„ÄÇ

So the BSS from each of those connected together at the data link layerÔºå perhaps„ÄÇ

With a switch to build a larger subnet so now my subnet includes two access points and all the computers connected to each of those access points„ÄÇ

PlusÔºå the interface connected there at the router„ÄÇÂóØ„ÄÇAt this point in the lectureÔºå in normal times„ÄÇ

 I would point to a couple of access points we have on the wall„ÄÇAnd say this is commonly done„ÄÇ

 not you know not in my house or your apartmentÔºå this is done at kind of enterprise level where you get higher quality access points„ÄÇ

And then you string them together to make a single subnet by putting switches in with the sign kind of mechanism„ÄÇ

 and that's exactly how many of the access points are connected around our campus„ÄÇSort of f„ÄÇ

Partially for architectural reasonsÔºå a lot of times we have rooms where we want to have multiple access points and partially for management reasons„ÄÇ

 it's easier to manage a network like that with some switches there instead of throwing everything in and connecting it to routers and having to deal now with different prefixes for each particular section of maybe the same room and things like that„ÄÇ

I mentioned earlier that wfi is great because it has this connection and lets us you know have a laptop in the coffee shop sort of thing„ÄÇ

 it has a bunch of challenges we're going to see and those challenges„ÄÇ

Mainly fall into two categories„ÄÇThe first one we're not going to talk about a whole lot today„ÄÇ

It's a mobility issueÔºå and that is the fact that you can move your computer around and in the process„ÄÇ

 end up being on different subnets„ÄÇOkay so you could take your laptop„ÄÇ

In the middle of streaming the crown on Netflix and you could wander into a different room somewhere and now suddenly need to be connected to a different access point„ÄÇ

Which might actually move you into a different subnetÔºå depending upon what's happening„ÄÇ

 And the challenge there is that„ÄÇYou end up changing IP addresses when you move into a new subnet„ÄÇÂóØ„ÄÇ

And it's not a trouble for you as a laptop you„ÄÇYour laptop will go ahead and use DHCP to get a new IP address„ÄÇ

 your laptop can then go ahead and send data out to you know wherever you'd like to have it„ÄÇ

The problem is on the other endÔºå you were in the middle of connecting to a Netflix server„ÄÇ

 for instanceÔºå and you had a TCP connection and that Netflix server was sending you segments to your old IP address and you have no way to communicate the fact„ÄÇ

To that network F server that you have changed your IP address„ÄÇ

You can't change your IP address and still keep a TCP connection open is the real challenge there are mobility solutions for this they tend to be kind of hacky and your textbook covers and there's a decent section about IP mobility in that„ÄÇ

ÂóØ„ÄÇSo just be aware that that is one of the big questions„ÄÇIn chat„ÄÇ

 what happens when we have wireless and wired connections from the same routerÔºüÂóØ„ÄÇ

Not sure I entirely understand the question„ÄÇShootÔºå excusee me againÔºå sorry„ÄÇYeah„ÄÇOhÔºå next speaking„ÄÇ

OkayÔºå I'm gonna meet you down at the garage„ÄÇRound soÔºå okayÔºå thanks„ÄÇOkay„ÄÇ

 I apologize but I actually have a heater guy here to look at my heater so we're going to take like a two or three minute break while I let him into the house and show him what's going on Okay please excuse me i'm sorry„ÄÇ

I'm back„ÄÇSo sorry about thatÔºå my apologies„ÄÇSo where were we we had a question„ÄÇWowÔºå you guys just„ÄÇ

I like itÔºå I leave and you just dump questions in chat that's fantastic I should have learned that earlier„ÄÇ

Left more oftenÔºå so I'm backling Josh events's question„ÄÇ

WWhenho have a wired wireless and wired connection„ÄÇFrom the same router„ÄÇ So you mean if this laptop„ÄÇ

Was connected to the router with a wire„ÄÇBut also had this„ÄÇWireless connection in that case„ÄÇ

 those would be separate subnetsÔºå the wired connection here would form one subnet„ÄÇ

And that would be between an ethernet interface on the router and an ethernet interface on your laptop„ÄÇ

If you were connecting across the wire and wirelessÔºå you would have two separate interfaces„ÄÇ

 two separate link layer connectionsÔºå and your operating system„ÄÇ

You'd have to do some magic if you wanted to use both at the same time from your operating system and some operating systems will let you bond those into one connection to be able to get more bandwidth and things like that so that is possible„ÄÇ

 but those would be separate subnets„ÄÇÂóØ„ÄÇYowe is asking is the access point like a hub the access point is like a hub in that it connects a lot of devices remember the hub was a physical layer connection and so that case it is very different from a hub the access point is a data link layer device„ÄÇ

As we will seeÔºå it has to understand a lot of the data link layer protocol„ÄÇBut it can take a frame„ÄÇ

 so the access point will allow communications between this laptop and this laptop„ÄÇ

 and it will do that by sending frames back and forth between them„ÄÇOkay„ÄÇKyleÔºå yes„ÄÇ

 if you have separate frequency bandsÔºå those end up being different BSSs„ÄÇÂóØ„ÄÇ

Different data link layer connections„ÄÇMe here in the Netflix exampleÔºå yeah„ÄÇ

 Netflix servers are smart enough to figure this out and know how to fingerprint you and do more work so that when you do break that TCP connection and reconnect„ÄÇ

 it's going to want to knowÔºå ohÔºå who is this new computerÔºå ohÔºå that's me here's computer„ÄÇ

 let me go ahead and offer him the same state I had a minute ago which was halfway through this particular show„ÄÇ

There there is a mechanism called IP mobility that would allow a device to communicate backÔºå it is„ÄÇ

 I thinkÔºå uncommonly used because it's more it's easier„ÄÇ

 especially in this server based scenario where you have a Netflix server that is able to keep track of where you are because you have an account and it wants to be able to charge you money and things like that and so is going to want you to authenticate anyway„ÄÇ

 and so when you move over to a new internet IPH it's going to want you to reauthentate and so it's not going to try to maintain the same TCP connection„ÄÇ

 which is what the IP mobility spec is letting this happen„ÄÇÂóØ„ÄÇCarartik is asking about cookies„ÄÇ

 cookies are a application layer thing in your browser and Netflix does use the cookie to figure out who you are and allow you to not have to put in a new password because it can look at that data that's in the cookie to say okay„ÄÇ

 only Cartik would know this particular data so we'll go ahead and resend stuff to them„ÄÇ

And Austin is asking if multiple bSss can have so we're not going to talk a whole lot about the SSIs those are a network identifier mechanism that„ÄÇ

Makes it easy for us as humans to deal with the network and yes you can label those whatever you want there is an underlying network identifier that's a little bit more complicated we'll see some of that when we get to the actual frame in Wifi in a few minutes„ÄÇ



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_8.png)

Ôºå okayÔºå I think I'm caught up„ÄÇÂóØ„ÄÇOkayÔºå so we were talking about these challenges„ÄÇ

And I had mentioned the mobility challenge of your IP address changing„ÄÇ

We're going to talk mostly today about the actual link layer connection challenges that come because of the characteristics of the radio waves that we are actually using to communicate„ÄÇ

Those wireless links are dominated by the fact that they're sending radio and the communication engineers have come up with this equation„ÄÇ

 it's called the freeze space equation named after„ÄÇ

I thought for a while it was the free space equation because things are going through free space„ÄÇ

 but noÔºå it's named after an engineer or physicist named Frieze„ÄÇCan't remember„ÄÇ

 but basically it is letting you know how much power a receiving antenna would actually get and it's equal to the power that the transmitting antenna would send out„ÄÇ

Multiplied by this factorÔºå which is antenna gains at the transmitter and receiver„ÄÇ

 the wavelength of the signal you're sending„ÄÇDivided by four pi r squared„ÄÇ

 that's the part I want you to focus on„ÄÇF pi R squared is the surface area of a sphere„ÄÇ

And what's happening when you transmit power from an antenna is all of that power is being distributed„ÄÇ

Across a sphere at the receiving antenna's direct distance„ÄÇ

 and that means that as the sphere gets bigger and bigger„ÄÇ

 that original amount of power that's being transmitted needs to get distributed over a larger and larger surface area and so as R increases the received power is decreased quite severely„ÄÇ

OkayÔºå and„ÄÇTypicallyÔºå this means that you're going to be receiving an amount of power that is„ÄÇ

 you knowÔºå thousands or millionsths of the transmitted amount of power„ÄÇ

OkayAnd if R is of any distance whatsoever„ÄÇSpace agencies deal with us all the time because R is really„ÄÇ

 reallyÔºå really big for them„ÄÇLuckilyÔºå we're able to build„ÄÇReceives„ÄÇ

 the actual circuitry that connects to the antenna„ÄÇ

 we're able to build those receivers that are very good at receiving just a tiny amount of power and being able to convert that back into the ones and zeros of the actual bits we're sending„ÄÇ

That means that we end up having transmitters where the circuitry is designed to amplify the signal and get a lot of power sent out an antenna„ÄÇ

 and we have receivers that are very good at getting just tiny amounts of power and doing something with them„ÄÇ

If you put those two devices right next to each other„ÄÇ

Maybe even sharing the same antenna like is happening on your laptop„ÄÇ

 then we have a problem because the power that gets transmitted is way too much power and if that amount of power went into the receiver it would burn the receiver out because the receiver is very„ÄÇ

 veryÔºå very sensitive„ÄÇAnd so that means that we actually build our devices so that when you are transmitting„ÄÇ

 you shut off the receiverÔºå you physically disconnect it or electrically disconnect it from the antenna in order to preserve it in order to keep it from destroying itself„ÄÇ

And that we're going to see is a problem in a minute because that means we cannot detect collisions normally„ÄÇ

 we can't actually listen to what's going on during the time that we're transmitting„ÄÇ

Completely because we're using wirelessÔºå we're using radio waves to send this out„ÄÇOkay„ÄÇ

Let me catch up on the chat here again Stephanos is asking about directional transmitters yes„ÄÇ

 that's all in this gain function a parabolic antenna has a gain that is much higher maybe like you know1 thousand00 or 5000 compared to a a dipole antenna you know the antenna you„ÄÇ

used to be able to say you'd see on your car or TV„ÄÇ

 but you know basically just the stick of metal in the ground kind of antenna„ÄÇ

 that has a gain of I think it's 1„ÄÇ6 and that's all compared to a completely omnidirectional antenna„ÄÇ

Not too worried about it in our caseÔºå we will get some directionality of itÔºå but what this„ÄÇ

4 pi R squared thing is really the dominating part of that entire equation„ÄÇÂóØ„ÄÇ„ÅàÔºüAnd looks like„ÄÇOkay„ÄÇ

So Austinus's asking if he could destroy his laptop by just setting it really„ÄÇ

 really close to his router to the access point when he's sending„ÄÇ

I dont have to believe that this has been worked out so it would actually be okay at distances that are this far„ÄÇ

 but not distances that are directly on the same ship„ÄÇ

I don't know if you want to try it and let me know whether it worksÔºå yeah„ÄÇÂóØ„ÄÇ

Nikil is saying hey couldn't we just have a link there„ÄÇ

 couldn't we just agree how much power to send actually we do there are limits on how much power you're allowed to transmit that are based upon the vector allocations that countries governmental agencies specify and those get baked into the actual standard themselves and baked into the equations of what's going on and how the physical layer is actually constructed„ÄÇ

So yeahÔºå there are those kind of limits put into that„ÄÇOkay„ÄÇ

 other problems we have turns out when you send these electromagnetic signals through the air„ÄÇ

 there's noise in the air as wellÔºå there's noise on wires right so ethernet has a noise problem it just turns out that that noise problem is so much tinier„ÄÇ

On wires than it is on radio wavesÔºå radio waves are going through the same electromagnetic spectrum as everything else„ÄÇ

 they're bouncing in weird waysÔºå you're near an airport where they're running radars that bleed over into your spectrum or somebody turns on a microwave or you just have the background noise of the universe showing up as noise in your in your signal and that means our bit error rate is much higher for wireless length than you see in cables or fiber optic that error rate can be modulated bit it's a function here of a couple of things the modulation scheme is one of them how you actually send the bits how long the bit is for for instance„ÄÇ

 if you send a lot of power for a long time then it takes a lot of noise to actually change that bit value and so that's buried in this modulation scheme signal to noise ratio bunch of„ÄÇ

Other communication engineering sorts of things lead to a bit error rate that we see at our data link layer„ÄÇ

And„ÄÇFor wireless a bit error rate of the way we specify a bit error rate is 10 to some power„ÄÇ

 basically 10 to the minus4„ÄÇOr 10 to the minus6 that that would mean that every bit you send has a one in„ÄÇ

10000 or one in a million chance of actually being received incorrectly Okay„ÄÇ

 that doesn't sound like muchÔºå right it's okayÔºå it's only one in 10000„ÄÇUntil you start to think„ÄÇ

 how many bits am I actually sendingÔºüRightÔºå a single frame can have„ÄÇWellÔºå a single frame can have 10„ÄÇ

000 bits in it„ÄÇOkayÔºå and so that means that if every one of them is rolling at„ÄÇA one in 10„ÄÇ

000 chance of an errorÔºå you're likely to have an error in every frameÔºå which is huge„ÄÇOkay„ÄÇ

 even 10 to the minus6 is a lot of errors to have to deal with„ÄÇJeremyÔºå the noise on wires„ÄÇ

 we tend to think of noise as random stuff that happens and so if there's somebody else on the wire sending you like when we have Ethernet„ÄÇ

Two different communicators we normally don't think of that as noise„ÄÇ

 we think of that as some other packet that we or some other frame that we're colliding with noise is things it literally is just the background static of the universe that happens to show up and it is a random process that will you know add a couple volts to a signal here or subtract a couple volts from a signal there„ÄÇ

ÂóØ„ÄÇYeahÔºå and it just happens to be a lot worse in in wireless because you're kind of open to more noise when you're sending with radio„ÄÇ

Other issuesÔºå multipath effects can be a problem„ÄÇTurns out when you send the signals„ÄÇ

 you're sending them kind of everywhere and they bounce around a lot„ÄÇ

 And that means a receiver somewhere can„ÄÇCan pick up the original signal„ÄÇ

 but also it can pick up these reflectionsÔºå these echoes of the original signal so I have a picture here imagining we were back on campus and we're trying to send you know a signal from here in front of CFA down to Hamlaag right and we have a line of sight path that our signal will travel„ÄÇ

But also it will travel and balance off of other buildings„ÄÇ

And that means that the router is going to see the sum of all of these„ÄÇ

 It's going to see the original signalÔºå but it's also going to see the original signal just a couple of nanoseconds later than the original and maybe a couple copies of that that get kind of„ÄÇ

Mixed in and maybe at smaller values and so you get this what shows up as noise„ÄÇ

 although it's it's actually very correlated to the original signal and that's the key the signal processing people can remove a lot of that because they know it looks like the same thing just later and they can correlate that to what they're seeing„ÄÇ

But that's going to be a problemÔºå especially in urban environments„ÄÇ

 especially in places where you have a lot of chances for things to bounce around„ÄÇ



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_10.png)

Here's another oneÔºå we call this the hidden terminal problem and this one's going to be key to a lot of the things the wfi standard has as a way to overcome this„ÄÇ

I'm showing here two different hosts in a BSS and so notice that I have this reddish circle in the background that is the range limit of the access point„ÄÇ

But here I'm also showing the range limits of the individual laptop radios as well„ÄÇ

Now this is going to work every each of these laptops is within range of the access point so their circle overlaps the access point on both of them„ÄÇ

 that means they can send to the access pointÔºå the access point can hear them„ÄÇ

They can receive the signal because they're within the red circle„ÄÇ

 they can receive signals from the access pointÔºå so this all looks like it's working perfectly„ÄÇ

The problem is that these two computers cannot hear each other„ÄÇ

 they are hidden from each other and in then the name here these are terminal pieces of equipment because they are terminal place for a signal to finish and so these terminals are hidden from each other„ÄÇ

 they're too far away from each other they just can't can't hear each other okay and so this is going to be another reason for instance„ÄÇ

 that our collision detection is problematic because they couldn't hear a signal that's colliding with their signal because they're out of range of that other terminal„ÄÇ

Now you might look at this and sayÔºå well that's obvious Bill you've skewed the problem by making the blue circles smaller than the red one„ÄÇ

 let's just make the blue circles bigger okay well that does mean we're going to end up sending more power than we need to because really the laptop only has to send enough power to get to the access point„ÄÇ

But you're rightÔºå we could perhaps solve this problem by„ÄÇ

Making the range bigger of each of these blue circles„ÄÇ

 in fact you'd have to make those circles such that their radius was equal to the diameter of the red one„ÄÇ

But even then we would not have solved the problem„ÄÇ

Because it's possible that there is something else in the way of these two right these two could each be talking theis point„ÄÇ

 but maybe there's a wall between them„ÄÇThat is going to occlude the signal from each other no matter how much power we're sending„ÄÇ

OkayÔºå and that obstacle would keep them hidden from each other„ÄÇ

 even though they can still talk to the access point„ÄÇ

So this is a fact of life we're not going to get around this by throwing power at it Okay„ÄÇ

 we're going to end up having collisions because„ÄÇEach of the terminals is hidden from each other„ÄÇ

Now I want to bring up another problem that's often cited as kind of a similar problem and most of that's because the name is similar right there's another problem called the exposed terminal problem„ÄÇ

I don't think it's all that similar because it it shows up in different kinds of networks so so far we've been talking about wfi networks that have an access point and everybody communicates to that access point the exposed terminal problem shows up in networks where that's not true where you have an ad hoc network or a mesh network where there's no access point and frames are transmitted by some routing mechanism within the network from„ÄÇ

You knowÔºå node to node to node throughout that network„ÄÇIn these cases„ÄÇ

 you could have a situation where„ÄÇTwo devices have stuff to send„ÄÇ

 So here I have a would like to send some information to a prime and B would like to send a frame to B prime„ÄÇ

ÂóØ„ÄÇBut they don't and that's because they're within range of each other and so a hears B sending or B hears a sending„ÄÇ

 whichever they're close enough that they both hear each other's transmissions and so they will decide not to transmit even though they could„ÄÇ

the receivers are out of range of each other and so even if A and B transmitted at exactly the same time„ÄÇ

 yesÔºå those frames would collide with each other at A and B„ÄÇ

 but they would not collide at a prime and B prime because a prime is out of range of B and would not hear B's colliding signal and vice versa with B prime and A„ÄÇ

I pointed out it's the sort of thing thatÔºå you know„ÄÇ

 a recruiter will ask you about the hidden terminal and the exposed terminal problems„ÄÇ

So you ought to know about itÔºå but recognize that it is„ÄÇ

A problem for a different network and we're not going to have to deal with it too much„ÄÇ

Bailey's sayingÔºå heyÔºå couldn't we just add something to the protocol so that they could tell each other who can hear what and who's where and you could somehow get the information about the fact that there's an obstacle between us or not to each other and it's an interesting question and there is some research that has happened on that one of the fundamental problems though„ÄÇ

 is that that communication of topology has to occur over the same network you're using„ÄÇ

Right so if I let's go back to the hidden terminal problem„ÄÇ

 if I wanted to communicate information from these two laptops to let them know„ÄÇ

You know hey you guys are too far apart increase your power so that you can hear each other or something like that I have to do that over the same network using the same communication mechanisms to make that happen and that communication mechanism would run into hidden terminal problems and so yeah it'd be nice to be able to send that information around but like many distributed systems problems„ÄÇ

They're distributed and they're hard„ÄÇ

![](img/d260aaee58dbf0d885f9a80f1b0d58d0_12.png)

OkayÔºå so now let's look at a particular protocol that's going to help us overcome some of these wireless challenges let's look at CSsmaA„ÄÇ

CA„ÄÇOkayÔºå oh Stephan us is saying well just have the access point to it you're right so that's that's going to help us solve a lot of these problems is that the access point is heard by everybody„ÄÇ



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_14.png)

To answer Bailey's questionÔºå thoughÔºå the terminals are going to have to communicate something to let the access point know where they are„ÄÇ

 to know what information to actually do the communicating on„ÄÇOkay„ÄÇ

 so I still think we have a problem„ÄÇ

![](img/d260aaee58dbf0d885f9a80f1b0d58d0_16.png)

OkayÔºå CSmaA CA sounds a lot like another acronym we heard a few lessons ago„ÄÇ

 which was CSM CD that was Ether Nes„ÄÇProtocol now remember it was the protocol that solved the media access problem that allowed multiple participants in the data link layer to communicate at the same time„ÄÇ

And know that it was okay to send my message over this shared in Ether danceance case„ÄÇ

 a shared cableÔºå we're going to have the same situationÔºå I have a shared BSS„ÄÇ

 I have a shared space that I'm sending signals in and I need to get access to it I need you know when I want to send a frame I need to somehow know that I'm allowed to use that shared space or to know that I have to wait and let somebody else go ahead„ÄÇ

The pieces of this protocol are similar in some respects to ethernets right ethernets was carrier sense„ÄÇ

 listen before you send multipleaxs that's the problem we're trying to solve and that was a collision detection algorithm that would go ahead and send the frame and then listen as you sent so that you would know whether there was a collision or not„ÄÇ

In WifiÔºå I can't do that last partÔºå I can't do collision detection„ÄÇ

 so we're going to do collision avoidance„ÄÇIt's going to„ÄÇ

Try to make sure we don't run into collisions in the first place„ÄÇBut it's still not a guarantee„ÄÇ

 okay collisions will still happenÔºå we just try to reduce the chance that they're going to happen quite a bit through this protocol„ÄÇ

So it has a lot of the same pieces right first the first thing you do before you send a frame is you listen remember in Ethernet we listen for 96 bit times we're listening for an amount of time here that time is known as dis in in Wifi this is an acronym it's actually a nested acronym it stands for DCF Interframe spacing where DCF is the„ÄÇ

Distributed control function or something like that who cares it's an acronym for an amount of time depending upon which version of wfi you're using„ÄÇ

 this just means something like 50 microseconds„ÄÇSo you're going to wait for some amount of time„ÄÇ

And if you hear anything happening during that timeÔºå wellÔºå the rule here is if you hear anything„ÄÇ

 then you start an exponential back off process„ÄÇOkayÔºå you„ÄÇ

 that was the roll a random number and wait around„ÄÇ

 you do that immediately here in Wifi if you hear anybody else sending„ÄÇOn the other hand„ÄÇ

 if you don't hear anybody else during that diff's amount of time„ÄÇ

 then you go ahead and transmit your frame Now another difference shows up here in Ethernet you've transmitted the frame and you listened for a collision and if you heard a collision you immediately abortted„ÄÇ

We can't do that hereÔºå remember that we have this problem with the receiver shut off„ÄÇ

So we transmit the entire frame without having the opportunity to listen to find out if there was a collision„ÄÇ

So how do we find out if there's a collisionÔºå well once you've sent your entire frame„ÄÇ

 you turn your receiver back on and you listen and you should get an acknowledgement frame„ÄÇ

And if you get that acknowledgement frame coming in„ÄÇ

 you know you sent your frame properly because somebody else received it„ÄÇ

 if you don't get that acknowledgementÔºå then you sayÔºå ohÔºå there must have been a collision„ÄÇ

 let me go into exponential back off„ÄÇNowÔºå immediately you should be looking into saying„ÄÇ

 what an acknowledgement frameÔºå what's going on with thatÔºå where' does that come fromÔºü



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_18.png)

YeahÔºå so the acknowledgement frame is there because well here's a scenario here's my sequence diagram in this case I have a sender here on the left„ÄÇ

 I have a sender on the right and I have an access point in the middle„ÄÇ

This guy on the left waiteded around di's amount of time and then transmitted his frame and I'm showing the transmission of the frame not being a single arrow„ÄÇ

 but we're using kindness spacetime graph terminology here to show that I start sending the frame here and it takes me a while until I actually end sending that frame and those bits„ÄÇ

All travel at the same speed across my BSS to get to the access point„ÄÇ

 who hears the first bit here and hear's the last bit at this point in time„ÄÇ

Now you can also see the problem is that I have another„ÄÇSender„ÄÇOkay„ÄÇ

 this guy is sending he waited diff's amount of time also he didn't hear anything„ÄÇ

 he went ahead and transmittedÔºå okayÔºå and we show up„ÄÇ

 there's a collision there Okay now why didn't this guy on the right hear the transmission from the left„ÄÇ

WellÔºå it could be that there's a hidden terminal problem right it could be that they are out of range of each other and so there's no way for him to have heard it to start with it also could be the same problem we had in ethernet„ÄÇ

The channel has not been captured yet„ÄÇAnd so even though this guy started sending earlier„ÄÇ

 that his signal has not propagated all the way to the receiver here on the right„ÄÇ

 and so the guy on the right started out sending before he heard anything„ÄÇOkay„ÄÇ

 and so now I have a collision here„ÄÇThe in this case„ÄÇ

 the access point knows there's a collision rightÔºå The access point is hearing two signals that are starting to merge together and the„ÄÇ

Physical layer can go ahead and say this is not a single transmission„ÄÇ

 this is actually a couple of signals mixing together to give me„ÄÇSine waves„ÄÇ

 electromagnetic spectrum that should not occur„ÄÇOkay„ÄÇü§ßYeah„ÄÇAnd so in this case„ÄÇ

 there's not can be an acknowledgement„ÄÇIf the guy on the right did not transmit„ÄÇ

 here's the scenario we want to have I have the guy on the left waiting di amount of time sending his entire frame„ÄÇ

 then the access point goes ahead and transmits back an acknowledgement acknowledgecknowledments's a very small frame it's just basically a yes„ÄÇ

 I got that sort of sort of transmission„ÄÇIt is also sent following the rules„ÄÇ

Except the access point can break one of themÔºå he doesn't have to wait around a diffs amount of time„ÄÇ

 he waits around a sifts amount of timeÔºå its just another number„ÄÇ

 this is the short interframed spacing and is usually about a fifth of the amount of time of a diffs„ÄÇ

Okay the„ÄÇOkayÔºå Emmet saysÔºå wait a minuteÔºå this acknowledgement is actually going over here to the guy on the right„ÄÇ

Why is the guy on the right getting the acknowledgement right what's he going to he didn't send anything„ÄÇ

 why is he getting an acknowledgement well the issue is this is sent out into the BSS and so everybody in the BS is going to get this acknowledgement„ÄÇ

The acknowledgement does have an identifier in it so that the guy on the right„ÄÇ

Can look at this and know that it's not for himÔºå but the guy on the left looks at it and says„ÄÇ

 oh this has my address on itÔºå therefore I know this was an acknowledgecment for my frame„ÄÇ

 therefore I know I didn't collide„ÄÇOkay„ÄÇShrieeder it's„ÄÇSo„ÄÇ

When we send these bits at the fiscal layerÔºå they are particular sine wave patterns and when they collide with each other„ÄÇ

 those sine waves add to each other and so you get and that some of those two signals is a sine wave that is not a valid one or zero pattern and„ÄÇ

You can filter those out at the physical layer„ÄÇ

![](img/d260aaee58dbf0d885f9a80f1b0d58d0_20.png)

All rightÔºå so if we had a collision or if we heard somebody else„ÄÇ

transmitransmitting during our carrier sense amount of time we're going to go into exponential back off this is what we did with with ethernet as well right remember we you know chose a random K where K started out being from zero or one„ÄÇ

 but maybe then went you know if you have more collisions it got to a bigger range that you could be choosing these random numbers from„ÄÇ

So you're going to do a similar process if you've had a lot of collisions and a lot of reason to back off„ÄÇ

 you're going to be choosing random numbers from a bigger range„ÄÇJust the same sort of thing„ÄÇ

The differenceÔºå howeverÔºå is how you use that number in Ethernet you'd sayÔºå okay„ÄÇ

 you know I rolled a random twoÔºå okayÔºå I multiply that by 512 that means I need to back off 10„ÄÇ

24 bit times or whatever okay and you just sit around and you wait you count down that amount of time and then you're done you start transmitting again„ÄÇ

And that works fine for EthernetÔºå but it's one of those interesting things where this is a follow on protocol right this protocol was developed in the 90s„ÄÇ

 whereas Ethernet was developed in the late 70sÔºå early 80s„ÄÇ

And so there's been some some learning and the Wifi guys said you know that that algorithm from Ethernet works fairly well„ÄÇ

 except we'd like to add on a little bit instead of just letting you count down„ÄÇJust blindly„ÄÇ

 you knowÔºå ohÔºå I now need to wait 10Ôºå24 bit time„ÄÇ So let me just go ahead and do nothing other than wait„ÄÇ

10Ôºå24 bit times„ÄÇIn WifiÔºå you actually continue monitoring„ÄÇThe channelÔºå okay„ÄÇ

 and you only count down during those times when nothing is going on on the channel„ÄÇSo if you choose„ÄÇ

 you knowÔºå let's say you have 1024 bit timesÔºå you need to count down„ÄÇ

You can only count down if nobody else is using the channelÔºå if somebody else sends a frame„ÄÇ

 you wait„ÄÇAnd you knowÔºå I started 1024Ôºå I managed to count down to 800 and then I heard some other frame on the channel„ÄÇ

I don't count down to 799Ôºå I stay at 800Ôºå 800Ôºå 800Ôºå800 as long as I'm hearing traffic on the channel„ÄÇ

Okay„ÄÇWhen I finally get down to zeroÔºå then I can go ahead and transmit„ÄÇ



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_22.png)

The issue that we're trying to get around is what we don't want to have is we don't want to have multiple senders„ÄÇ

Whose counters expire in the middle of somebody else's frame and therefore are just waiting around till the end of that frame„ÄÇ

 and then they jump on the wire and start transmitting„ÄÇOkayÔºå and so that's what would happen if„ÄÇ

If you were using regular ethernet rulesÔºå that happens fairly often„ÄÇ

When you have many transmitters when you've got five or six„ÄÇ

Hosts that are all trying to transmit at the same timeÔºå you'll have„ÄÇ

A couple of of those hosts in collision mode counting down and they end up finishing their countdown while some other frame is transmitting„ÄÇ

 So in this caseÔºå this green one is the frame that was going on earlier and when it's done actually during its transmission under ethernet both of these end hosts would have finished their countdown And so they're both waiting around they're just saying„ÄÇ

 okay as soon as I stop hearing something then I can jump on the wire and what happens is they jump on the wire and they collide with somebody else who's jumping on the wire And so this change to the rules where you're not counting down„ÄÇ

When you're hearing stuff means that you spread out multiple collliiders more so that you don't have this situation where they're both recolliding by jumping on the channel at the same time„ÄÇ

ÂóØ„ÄÇEbieth is pointing out that it is possible to have not gotten your acknowledgement to think you have a collision„ÄÇ

 not just because you actually collidedÔºå but because your frame got there with some bit damage and so that's true„ÄÇ

 here in this pictureÔºå I should have pointed outÔºå this acknowledgement gets sent only if there's no collision and only if there's no bit error„ÄÇ



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_24.png)

OkayÔºå and so it's possible that there was a bit error in this frame„ÄÇ

And that's the reason for not getting an acknowledgement and the question is well„ÄÇ

 shouldn't we take that into account as wellÔºü

![](img/d260aaee58dbf0d885f9a80f1b0d58d0_26.png)

The protocol doesn't„ÄÇThe protocol will mean that the sender sees both of those failures as the same thing„ÄÇ

Á≥ª„ÄÇÂóØ„ÄÇYeahÔºå BayÔºå you're right„ÄÇÂóØ„ÄÇThis is something we discovered with Ethernet„ÄÇRight„ÄÇ

 Ethernet is a great protocol works really well until you have too many„ÄÇ

Transmitterters at this who want to send at the same time when you start to load up a an ethernet„ÄÇ

segmenteg and you getÔºå you knowÔºå a desire for 90% of the bandwidth to be used„ÄÇ

Spread across multiple transmitters then you start getting a lot of collisions and the efficiency of transmission really goes down luckily that often doesn't happen because we tend to be bursty communicators and so we kind of spread some of that out and the same things going to happen here in Wifi if I have a desire of five networks five laptops to each use a fifth of the bandwidth they're going to have a lot of collisions„ÄÇ

And that's not going to be good it's even worse in some situations where you have synchronized stuff going on and so Ethernet is not used in automobiles„ÄÇ

 for instanceÔºå because in automobiles you have a lot of devices that all want to fire at the same time based on you know how the engine is actually situated and so when you have top dead center of some valves you know a bunch of stuff wants to happen and all those signals would collide with each other so yeah„ÄÇ

It's the nature of the network we have„ÄÇÂóØ„ÄÇSo will yes„ÄÇ

 it is possible to have multiple collisions right it's always possible that you choose the same random number and you see the same„ÄÇ

The same process is hitting you„ÄÇBut the idea is we want to spread this out a little bit more„ÄÇ

 we want to get better at it„ÄÇBut yesÔºå you you can go through multiple rounds of collision and remember if you do the protocol„ÄÇ

Your second collision or third collisionÔºå now you're choosing random numbers from our larger set and so the chance of having to count down exactly the same amount of time as whoever you're colliding with is reduced for that very reason„ÄÇ



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_28.png)

ÂóØ„ÄÇI tried to show this back off and I'm not sure I was too successful but I tried to show it with this picture that's more of a conventional waveform„ÄÇ

 so time here is running along the X axis and I'm showing that if I tried to transmit„ÄÇ

I would wait di's amount of time and I'd need it to be clear for that amount of time and then I could start transmitting or if somebody else if this is somebody else's frame that shows up„ÄÇ

 okay„ÄÇThen I'm going to have to wait around and go into exponential back off because I heard that„ÄÇ

OkayAnd when I stop hearing themÔºå I have to wait an amount of time before I start counting down again„ÄÇ

 and so this pinkish region is supposed to show this countdown process where I'm counting down my timer each of these slot times that I have until eventually I would finish decrementing that back off and hopefully be able to transmit if no other frame has shown up in that point in time„ÄÇ

 but if they do if another frame does show upÔºå then I stop decrementing my back off„ÄÇ

And I wait until that frame has gone on and now I'm back over here what's going on on the right hand side„ÄÇ

 you knowÔºå when that frame is doneÔºå then I wait around di's amount of time and start backing start decrementing again„ÄÇ

Okay„ÄÇHope that's a little helpful„ÄÇ

![](img/d260aaee58dbf0d885f9a80f1b0d58d0_30.png)

All rightÔºå now this collision avoidance thing that we've is part of our title„ÄÇ

 we haven't talked about that at all„ÄÇThe way we do collision avoidance is to actually go ahead and try to reserve the channel to go ahead and say„ÄÇ

 heyÔºå guysÔºå I have something I'd like to send„ÄÇPlease shut up for a minute and let me send it„ÄÇAnd now„ÄÇ

The interesting thing about thatÔºå of courseÔºå is the communication about the fact that I would like to reserve the channel has to go across the channel„ÄÇ

And that communication can collide with stuff„ÄÇSo how does this workÔºü

Let's say I have a frame I'd like to send okay what I do is instead of sending the frame„ÄÇ

 I still follow all of the rules for access okayÔºå I do carry your sense for an amount of time if I don't hear anything then I start transmitting this request to send frame an RTS frame I send that to the access point„ÄÇ

And nowÔºå recognize that other„ÄÇOther terminalsÔºå other laptops in this BÔºå S„ÄÇ

 S may not have heard my request to send„ÄÇOkay that's why I'm sending it to the access point„ÄÇ

The access point„ÄÇWe'll look at that request and„ÄÇLook at whether there are other requests outstanding or whatever„ÄÇ

 and it will eventually decide okayÔºå now is time for Bill's laptop to transmit„ÄÇ

The access point will go ahead and send out a permission slip for meÔºå this is a clear to send frame„ÄÇ

 a CTS frame that clear to send frame tells my laptop yep you wanted a reservation you now have a reservation you can go ahead and send and the key here is that the clear to send frame being sent by the access point will be heard by everybody„ÄÇ

And so everybody will shut up and let me send my frame„ÄÇ

 even if those other laptops were not able to hear my request„ÄÇüò°ÔºåOkay„ÄÇ

The actual request includes a number I'm basically saying I want to send a frame„ÄÇ

I'd like this amount of time for reservation and you only reserve it for a single frame„ÄÇ

 you don't say heyÔºå I'd like it for the next 15 minutes because I have you know a very important homework to submit or something like that„ÄÇ

 you only do it for a single frame at a time but you specify is this a short frame or a long frame„ÄÇ

 how much time do I actually need when I send this request so I'm basically saying hey in my request„ÄÇ

 hey I'd like to use the channelÔºå I'd like everybody else to shut up and I'd like it to happen so that I can send a thousand bytes of data for instanceÔºü

The request to send and clear to send themselves are very small framesÔºå they're still frames„ÄÇOkay„ÄÇ

They still use all of the access mechanisms of the protocol to make this work„ÄÇ

 they still can collide with other stuff„ÄÇOkayÔºå they still use bandwidth„ÄÇSo they are overhead„ÄÇ

 they are delay„ÄÇOkay„ÄÇBut if I'm trying to send a long frameÔºå they're definitely worth it„ÄÇ

And I'm going to go ahead and pay those costs of trying to reserve the frame and waiting around to get an acknowledgement that I can have the channel for myself„ÄÇ

Because then„ÄÇBecause it's worth itÔºå hang onÔºå sorry„ÄÇBuilding here„ÄÇOK„ÄÇÂíÅÂÆ∂‰øæÂèã„ÄÇËøòÊúâÂπøÂëä„ÄÇOkay„ÄÇÂ∞±ÊòØÂïä„ÄÇYeah„ÄÇ

 you hit the boxÔºå get the anchor those close„ÄÇThanks„ÄÇYeah„ÄÇAll right„ÄÇ

 I'm so sorry that I have that delayÔºå hopefully my boiler is now working and I'll have heat in my house„ÄÇ

Which would be a good thing„ÄÇOkayÔºå sorryÔºå where were weÔºüDid I catch up on„ÄÇ

 let's see you guys once again have put a bunch of chat questions while I was goneÔºå that's great„ÄÇÂóØ„ÄÇ

Let's seeÔºå so we were talking about this reservation processÔºå sending an RTF that saysÔºå hey„ÄÇ

 I'd like to reserve for an amount of time„ÄÇGetting a clear to send back from the access point„ÄÇ

 everybody hears that clear to send and so everybody shuts up for an amount of time„ÄÇLet's see„ÄÇ

Stepha us askedÔºå is it possible to reserve for an infinite amount of time and it is not the the you actually saying this X amount of timeÔºü

In that in that reservation request and the clear asend tells everybody what that amount of time is„ÄÇ

ÂóØ„ÄÇSo„ÄÇOkayÔºå looks like„ÄÇ

![](img/d260aaee58dbf0d885f9a80f1b0d58d0_32.png)

OkayÔºå looks like you guys have dug into itÔºå which is fantastic„ÄÇ

Here's kind of my illustration of how this would work with some more sequence diagrams„ÄÇ

TheThe transmitter on the left wants to reserve the channel because he's at a long data frame to send so he sends the request to send again„ÄÇ

That request to send is a frameÔºå and so it has to abide by the rules you have to wait di amount of time you could back off or collide in this case„ÄÇ

 I'm showing everything's fine„ÄÇ he transmits the request The access point responds with a clear to send„ÄÇ

OkayÔºå I believe the clear to send also access and acknowledgement for that dis„ÄÇ

 I'm sorry for that request to sendÔºå so you don't need a separate acknowledgement„ÄÇ

I don't know what happens if you have a longer clear ascent or longer wait before that clear decent„ÄÇ

ÂóØ„ÄÇOnce you once we've received the clear descendend„ÄÇ

 then we can go ahead and actually transmit you'll notice interestingly you don't have to wait as long„ÄÇ

 you wait the short amount of time after a clear descendend before you can go ahead and transmit your frame this clear descend was heard by everybody and so this laptop on the right also sees that clear descendend„ÄÇ

Detects the duration value in that field and knows that it has to defer„ÄÇ

 It has to wait this amount of time before it's allowed to send„ÄÇ

 I'm showing here that know after the frameÔºå there's going to be acknowledgement and that„ÄÇ

That acknowledgement happens to show up about the time that the reservation„ÄÇÂóØ„ÄÇExpires„ÄÇ

Which is mostly going to be trueÔºå but the the„ÄÇThe guy here on the right is not deferring until he hears an acknowledgement„ÄÇ

 he's deferring the amount of time that was transmitted in the clear descent just so happens if things are tuned well„ÄÇ

 those are going to both expire about the same time„ÄÇ



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_34.png)

Okay„ÄÇSo we' kind of understand the process now we can we can now access this channel„ÄÇ

 we now can do it with while avoiding collisionsÔºå I can't entirely get rid of collisions„ÄÇ

 but I'm paying„ÄÇ

![](img/d260aaee58dbf0d885f9a80f1b0d58d0_36.png)

ÂóØ„ÄÇI'm paying the overhead of sending these RTSs and getting these CTSs„ÄÇ

 I'm paying that overhead in order to reduce the ability in order to avoid any collisions that would happen during this amount of time„ÄÇ

JakeÔºå yepÔºå once again we're expecting everybody else to pay attention to the rules„ÄÇ

 on the other handÔºå this is a little bit less like the prisoner's dilemma because the guy here on the right„ÄÇ

 if he's ignoring the clear descendÔºå then he knows he is deliberately making a collision„ÄÇ

Okay so if the guy on the right was to transmit by ignoring the clear descend„ÄÇ

 he's not getting any additional benefit for himself out of it„ÄÇ

 he's not going to get any extra bandwidth he's just going to be denying bandwidth to others„ÄÇ

 so a malicious actor may do this to create a denial of service scenario„ÄÇ

 but it's not the prisoner's dilemma that you're actually going to break the rules for your own benefit sort of situation„ÄÇ

But yeahÔºå you could ignore the rules if you want„ÄÇ

![](img/d260aaee58dbf0d885f9a80f1b0d58d0_38.png)

So„ÄÇYeah„ÄÇThis process this protocolÔºå the CSM CAA is part of all of the wfi protocols and there are a lot of those so you probably have a feel for this the 80211 is the wF standard„ÄÇ

802 is the data link group at IEE that makes datalink standards like Ethernet„ÄÇ

They made the wfi and I'm showing you here a selection of some of the changes that have happened through the years„ÄÇ

 not that I want you to memorize the difference between 80211 A and B or anything like that„ÄÇ

 but to give you a feel for the fact that this is a technology that people want to go faster that people are expending significant efforts in improving and we've seen over the last couple of decades some of those improvements„ÄÇ

So it started out in 1997 when the standard came into being„ÄÇ

 probably about the same time many of you came into being and at that point it it was revolutionary„ÄÇ

 I was thereÔºå I remember this is fantastic that you could have wfi networks happening that were there's still a little expensive„ÄÇ

 I thought you know two megabits per second was fantasticÔºå it was great„ÄÇ2„ÄÇ

4 gigahertz is the actual spectrum that was being usedÔºå it turns out that is an unlicensed„ÄÇ

 it's a part of the spectrum that was set aside by governmental agencies to be used without a license„ÄÇ

Other spectrum areas you need a license that for instance ham radio operators„ÄÇ

 amateur radio guys need to get a license in order to be able to transmit on those bands„ÄÇ

 radio stations have to get a governmental license to use the particular spectrums they're using this particular piece of the spectrum was available for unlicensed use as long as you weren't transmitting too much power and so that was fantastic it was an experimental area that was used and Wi-fi came out of it„ÄÇ

A couple years later„ÄÇA and B show up these are two variants I thought this was interesting they pushed the standard in two different ways because it was this tradeoff if you go at a higher frequency you can send more data okay you're basically sending the data faster and so it makes sense that you're going to get more bandwidth through that and so you can get 54 mebits per second if you use the a version of the standard unfortunately5 gigahHz is means that your range is going to be shorter it doesn't transmit as far you remember that freeze range equation had a lambda in it at a wavelength portion of that and so that means that a range is going to be limited„ÄÇ

It turns out it was about 50 feetÔºå which is considered a little on the short side„ÄÇ

You know many people's homes are larger than 50 feet right and so this wasn't seen as a really great commercial variant that you would sell to many people and so the standards organization said well we can do the same kinds of things but at the same frequency band which will give us a longer range„ÄÇ

 we just can't get the frequency out of itÔºå we can't get the throughput„ÄÇ

So it ends up being an 11 mebit per second standard„ÄÇ

 but going greater range and this is the version that generally took off I remember seeing dot a deployed when I was at the Air Force Academy teaching there„ÄÇ

 the Air Force decidedÔºå heyÔºå we can spend some money„ÄÇTo put some more antennas around„ÄÇ

 we now need them every 50 feet instead of every 150 feet„ÄÇ

 but we get more bandwidth and so that's worth it„ÄÇAs time goes on we get new versions the G version now is going faster and uses the frequency that goes longer which was great a couple years later we get a version with MImo this is multiple input multiple output has basically multiple two or four antennas that let you extend the range and go faster and this is the story we get through the years we get versions that are going faster and faster with different different values of this„ÄÇ

We get into different spectrum areasÔºå so 60 gigahertz spectrumÔºå it's a really big frequency„ÄÇ

This is actually seen as maybe a benefitÔºå something that was not appreciated early on is that sometimes you actually want to have a BSS that does not penetrate through your walls„ÄÇ

 any of you who have lived in an apartment building with lots of others around you may recognize that it would be nice if all those other people had w-fi that did not penetrate the walls of your apartment because then you don't have to share the spectrum with them„ÄÇ

And so in some cases that's a great thing let's go ahead and do this in other cases„ÄÇ

 maybe it's not great okay yeah 60 gigahertz basically doesn't leave the room that the antenna is in„ÄÇ

which means you need more of these around right if I was going to put this in my house instead of having you know just one wfi access point I might need eight so maybe this doesn't make sense for my house„ÄÇ

Maybe it makes sense thoughÔºå if I'm in an apartment building„ÄÇ

To put two of them in studio apartments or something like that„ÄÇÂóØ„ÄÇ

Y it turns out whether or not a particular frequency penetrates a wall or goes through some material is a strange relationship based upon the material properties„ÄÇ

 it's not necessarily true that a larger frequency will or will not go through particular materials„ÄÇ

 it just so happens that the 60 gigahertz doesn't go through sheet rock and plaster that we normally make walls out of„ÄÇ

And by the wayÔºå this has continued„ÄÇ we've got another new version and actually Wifi has decided to change how they count so they're not putting letters after them anymore they're like„ÄÇ

Type five or type six variant now„ÄÇI got sick of making slides to point out all those features„ÄÇ

 I just wanted you to get the feeling that yesÔºå the networks are progressing„ÄÇ

 the standards are getting better and better and betterÔºå which is fantastic for all of us„ÄÇ

NowWifi also is defined to operate in a couple different modes„ÄÇ

 we've been talking about infrastructure mode today which has that access point that you connect to it is possible to use Wifi in ad hoc mode where you don't have an access point and you just have laptops that talk to each other and the key there is that the laptops can receive a frame and forward that frame on to somewhere else„ÄÇ

Without needing an access point themselvesÔºå so you could build a network with a series of laptops and get framed from one to the other to the other through that network„ÄÇ

It's also sometimes used in point to point mode where you actually get a very directional antenna„ÄÇ

 I had a student back in Colorado in the early days who managed to get wfi from about two miles away because he was he lived close enough to a an outlet mall that had free wfi and back in the day was cheap enough for him to steal it from them rather than„ÄÇ

W I was expensive enoughÔºå it was better for him to steal it from them„ÄÇThatday is not such a big deal„ÄÇ

Wifi„ÄÇcame of age in the 90s and of course that means people kind of were thinking about security when they put together the protocol and it included a security standard called web was easily broken„ÄÇ

 it is not a good standard neverÔºå everÔºå ever used a device that uses a web as its only security mechanism it's been replaced by WPA two threes coming which are much stronger and„ÄÇ

MuchÔºå much more suited for modern usageÔºå so those are fine„ÄÇ



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_40.png)

The actual format of what's going onÔºå we have a wF frame that looks like this once again we've got a bunch of header fields„ÄÇ

 we have some data that is being transmitted and we have a CRC at the endÔºå much like others„ÄÇ

Unlike pretty much every protocol we've talked about this entire semester„ÄÇ

 every other protocol has had a source address and a destination address„ÄÇ80211 hasÔºå look„ÄÇ

 there's Nas oneÔºå twoÔºå threeÔºå and fourÔºå there are four different addresses in the actual frame header„ÄÇ

 which is a lot„ÄÇAdddres  one is the destination iss going to address 2 is the source„ÄÇ

Ads3 is a way to communicate to an access pointÔºå you're going to send a frame to the access point„ÄÇ

 but you're going to tell the access point heyÔºå please to actually send this over to that gateway router and so that's what that's used for and Ads4 is actually used when you're doing that forwarding process in ad hoc mode that I mentioned earlier„ÄÇ



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_42.png)

Here's the picture of using„ÄÇThe third address in infrastructure mode„ÄÇ

So assume you're trying to send a transmission out to the internet so you have this frame„ÄÇ

And you're going to send the frame to the access point„ÄÇThe X point is a data link layer device„ÄÇ

 okay it's not a routerÔºå so it's going to receive your frame„ÄÇ

But before this gets to the network layerÔºå it that frame has the data in the frame has to get moved over to the router„ÄÇ

 which is a network layer device„ÄÇOkayÔºå and so that„ÄÇ

Forwarding mechanism has to happen over a different data link standard„ÄÇ

And so the way this works is the frame that you transmit has„ÄÇ

Your address and the access point address„ÄÇYou're sending it to because that's the source and destination of the actual frame„ÄÇ

But really your destination is the default gateway„ÄÇ

is the interface on this router where you'd like to get your packet into the network„ÄÇOkay„ÄÇ

 and so you put in addressure3Ôºå you put that default network„ÄÇDefault gateway address„ÄÇ

And then when the access point gets the frameÔºå it takes the data out of the packet and constructs an ethernet frame„ÄÇ

And it knows who to send that to because you told itÔºå you saidÔºå hey„ÄÇ

 send this to the default gateway„ÄÇAnd it knows how to make that happen„ÄÇ

How to forward that and so we need to be able to have a third address for this process„ÄÇ



![](img/d260aaee58dbf0d885f9a80f1b0d58d0_44.png)

Let's see that's the address portions of the frame what's left there's a frame control up front we'll talk about that in a minute there's a lot of little bits in there there's a duration this is the value that we were talking about a few minutes ago when we were reserving the channel this is how long you want to reserve the channel for„ÄÇ

There is a sequence control fieldÔºå this is basically a sequence numberÔºå yes„ÄÇ

 it turns out we're going to do reliable data transfer at the Wifi level we'll talk more about that in that slide or two„ÄÇ

 gives us the reliability we want„ÄÇSorryÔºå JeremyÔºå I'll finish„ÄÇVery rapidly„ÄÇ

 I actually thought this was going to be a short lecture today„ÄÇ

The data field itself needs to be able to hold everything you'd put in an ethernet frame„ÄÇ

 technically you can go up to 2304 bytesÔºå it has a larger m toU but we typically don't actually use it because we know that it's going to have to get put immediately into an ethernet frame to go elsewhere and then there's the CRC behind us to do the error detection„ÄÇ

Inside the framed control fieldÔºå just a bunch of bits that do a bunch of little flagggy things„ÄÇ

The protocol versionÔºå that's which wfi you're usingÔºå what type of frame you're talking about„ÄÇ

 whether or nots this is going to or from the access pointÔºå there's a fragmentation possibility„ÄÇ

 so you have bits that would let you fragment a frame„ÄÇ

 this is not a network fragmentation at the IP layerÔºå this is fragmentation of a frame„ÄÇ

 which is going to be important„ÄÇIt's interesting in a high noise environment if you're going to have a lot of errors then the chance of a large frame getting transmitted properly is low if you break that into several smaller frames„ÄÇ

 each of them on a bit by bit level has the same possibility of an error„ÄÇ

 but if there is a bit flippedÔºåYou now only need to retransmit a smaller frame„ÄÇ

 and so if there's a high bit error scenario going on if you're detecting a lot of errors„ÄÇ

 the access point will actually tell everybodyÔºå hey„ÄÇ

 you should start fragmenting your frames making them smaller or it'll go ahead and fragment them itself„ÄÇ

Other stuff it can doÔºå there's a power management mechanismÔºå you can actually have an access point„ÄÇ

 you can tell the access pointÔºå heyÔºå I'm going to go to sleep for a very short period of time„ÄÇ

 I'm going to turn off my w-fi to save power and you for the next like10 milliseconds or so I'm going to not be communicating with this wfi connection„ÄÇ

 please hold any frames that are coming to meÔºå don't try to send them to me I'm just going to be asleep„ÄÇ

And that saves a lot of powerÔºå especially in mobile devices on phones and things like that„ÄÇ

 the display is the number one power draw and Wifi is number two„ÄÇ

 and you want to save all the battery you can„ÄÇThe access point can also tell everybody to slow down if you slow the transmission rate„ÄÇ

 that means each bit is being sent for longerÔºå there's more power behind each bit and so you can actually overcome„ÄÇ

Bit errors by slowing the transmission rate and so that access point will tell everybody to make that happen„ÄÇ

ÂóØ„ÄÇAnd finallyÔºå I just want to point out that I've touched on Wi-fi and how important it is„ÄÇ

 but there's a huge world here right there are cellular networks we haven't talked about„ÄÇ

 they actually have to handle the mobile users problem much more than than other scenarios you actually have like people traveling on trains or cars at high speed off and have to change access points often if they're kind of mesh networks„ÄÇ

 wireless sensor networks or networks where you have massive numbers of sensors that are sending data that they're collecting usually in the very low power battery sensitive scenario and also personal networks like Bluetooth and I just want to point out this is registration time if you are interested in w-fi at all„ÄÇ

 we have lots and lots and lots of interesting courses around that go into more detail here„ÄÇ

And with thatÔºå we're done„ÄÇÂïä„ÄÇTake a look at the last objectives I apologize that we went long today we will definitely not go long on Thursday that one's a short lecture and hopefully i'll have heat in my house and not have to run off and talk to other people thank you so much for putting up with me as I do both of those go long and and had to disappear to take phone calls and whatnot I appreciate that but I now have heat in my house i'm a happier happier person Thank you all very much„ÄÇ

Have a great day„ÄÇ

![](img/d260aaee58dbf0d885f9a80f1b0d58d0_46.png)

ÊãúÊãú„ÄÇ