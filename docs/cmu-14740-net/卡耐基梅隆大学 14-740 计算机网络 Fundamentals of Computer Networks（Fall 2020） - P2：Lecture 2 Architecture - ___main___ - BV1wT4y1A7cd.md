# å¡è€åŸºæ¢…éš†å¤§å­¦ 14-740 è®¡ç®—æœºç½‘ç»œ Fundamentals of Computer Networksï¼ˆFall 2020ï¼‰ - P2ï¼šLecture 2 Architecture - ___main___ - BV1wT4y1A7cd

![](img/37122ede236b2579448af31f30fcb11b_0.png)

All rightã€‚Ma'am go onï¼Œ Okayï¼Œ excellentã€‚All rightã€‚So a couple things happen one is you've turned in your first paper review hopefully that means you read your first paper for the class and hopefully you enjoyed it it's a fairly decent read I think it's certainly kind of from the early days of computer networking papers and things can be a little bit more relaxed and also David Clark was basically anything he writes somebody's going to publish so that worked out well so hopefully you enjoyed it and you wrote a paper review and I'd like to talk a few minutes about paper reviews and the paper review process and what it might look like and things like that soã€‚



![](img/37122ede236b2579448af31f30fcb11b_2.png)

This is my paper review of this paper okayï¼Œ and so a couple things I want to point out one is I've got a contribution statement that like I said to you guysã€‚

 it starts off with the contribution of this paper right let's make it a bold statementã€‚

 this is why this paper is importantï¼Œ this is why Professor Nace made you read the paperã€‚

Okay that's you know this paper has that contributionã€‚

 others don't you should be looking anytime you have to read a paperã€‚

 you should be wondering that why am I reading thisã€‚

 what is the contribution of that paper and so I wrote it there I try to make that single sentence short and snappy you don't want to know go too long you want to be able to figure out whether you need to reread this paper or which paper this is if you're referring to this paper of you laterã€‚

My three important pointsï¼Œ those are things you might not have written the same thing I didã€‚

 that's not what I'm getting atï¼Œ this is not a key that you have to somehow magically divine what I'm thinking in my head and write down the same thing as meã€‚

Okayï¼Œ insteadï¼Œ you need to find important points in the paper that you could reasonably defend defend as this really is importantã€‚

 rightï¼Œ There's a lot of things that are said in the paperã€‚ You just have to make it look likeã€‚

You read the paper and that you found the important things instead of just kind of randomly picking a paragraph somewhere and describing what's in that paragraphã€‚

 Okayï¼Œ And then I have a couple of questions or commentsã€‚ I haveã€‚

 I have a question and a comment Okayï¼Œ and the intention there is those are things that you could reasonably asking class rightã€‚

 You would not be embarrassed if you saidï¼Œ wait a minuteï¼Œ you knowã€‚

 military purposes why didn't I haveï¼Œ you knowï¼Œ have security more in itã€‚

 a really good question about how the network was designedï¼Œ especially from today's perspectiveã€‚Okayã€‚

 and so nobody would fault you for standing up the class and asking that questionã€‚è¯¶éƒ½ä¸è§ã€‚

I also includebl enough bibliographic information that I could find this paperã€‚

 or presumably if I'm writing my own paper that's going to cite thisï¼Œ I don't have to do any workã€‚ğŸ˜”ã€‚

It's all here already I don't have to go figure out and where did that paper come from what did I do with it I want to point out this is a particular format for bibliographyã€‚

Okay this is the one I happen to use it's called BTã€‚

 it integrates nicely if you're writing papers and letteã€‚But it's not the only one out thereã€‚Okayã€‚

 and youï¼Œ I'm not forcing you to write it in bit techã€‚I'm making it easy for you thoughã€‚

 because the bib tech is actually on the websiteã€‚And so if you want to just take that and copy it into this into your paper review fileã€‚

 okayï¼Œ that would be really easyã€‚

![](img/37122ede236b2579448af31f30fcb11b_4.png)

Let me talk a minute about the why we're doing paper reviewsã€‚Obviouslyã€‚

 I have some papers that I think are important for you to read and the paper reviewã€‚

 maybe it's a little bit of a blunt instrumentï¼Œ it's a way for me to get you to read them and even better get you to read them before class instead of like the night before the exam or something like that okay and also to include questions so maybe we could have a discussion you could ask that question so you're already ready to go for this paperã€‚

I also want to bring this to mind and have you think about itã€‚

 you are starting off your career as a grad studentã€‚ğŸ˜”ï¼ŒAnd who knows where that's going to goã€‚

 I'm guessing that some of you will go on to PhD worthy careers and do great stuffã€‚And it's worthã€‚

 I thinkï¼Œ thinking about how you want to handle papersã€‚ğŸ˜¡ã€‚

Okay so I have told you before I was a grad student here at Carnegie Mellon and I actually came in as a grad studentã€‚

 I showed up at the end of Mayï¼Œ I showed up early and spent all summer working hereã€‚

 mostly reading papers getting rightï¼Œ which is what most grad students do a lot of and I spent the summer doing a bunch of that and I would read a paper and sayã€‚

 oh this is greatï¼Œ this was back beforeã€‚We were able to get too many of them onlineã€‚

 so many of them were papers that I'd copied out of the library or gotten the journal from the library and read itã€‚

And after two or three of my said to myselfã€‚I should be taking notes on this stuff right it's not all going to stick in my headã€‚

 and so I started taking notes on the sides of the paperã€‚And then after a couple moreï¼Œ I saidã€‚

 you knowï¼Œ I should make these notes a little bit easier to findã€‚

I should say more about what's going on in the paperã€‚

 so I started stapling an index card to the top of the paperï¼Œ okayï¼Œ and I put my notes on thatã€‚

By the end of the summerï¼Œ I'd read you knowï¼Œ a good six inches worth of papersï¼Œ probablyã€‚

 and I was ready to start working on my own first paperã€‚And that's when I ran into troubleã€‚

 because I found that when I was writing that paperã€‚

I had to almost reread all those other papers to findï¼Œ you knowã€‚

 I was like I know there was a paragraph about this somewhere and then I was the archaeologist who had to dig through that stack of paper to find it againã€‚

ğŸ˜”ï¼ŒAnd I quickly learned that's a bad idea and so one of my less obvious purposes with the paper reviews is to have you think about how you want to operate with your knowledgeã€‚

 you're going to be reading papers to learn thingsã€‚And some of that will stick in your headã€‚

The stuff that doesn't and especially the stuff that you're going to need to cite later which needs to be precise you got to make sure you don't trust your head for which paper this clo came from or where did this idea first show up do not do that you need to have your citations precise and you're going want to look those up and so you need a process to make this happen so I think it's important that you think about how to store the knowledge you're getting some little go in your head but some of it needs to be in notesã€‚

And how to search itï¼Œ how do you find it later onï¼ŸOkayã€‚

 imagine you've been five years as a PhD studentï¼Œ maybe lessã€‚

 hopefully right you read a lot of papers and you're writing your thesis okayã€‚

 you do not want to be in the situation of now looking at a three foot stack of paperã€‚And sayingã€‚

 I know there was that experiment about X and the need to talk about it for a patient half in my thesisã€‚

ğŸ˜”ï¼ŒLet me go find it somehowï¼Œ you want to be able to easily find it so you should have a process for thatã€‚

And here's the process that I came up with that I worked well for me and I've used it since and it still works well for meã€‚

ğŸ˜”ï¼ŒI'm not saying this should be your processã€‚I'm just pointing it out as a processã€‚

 the sort of things you should think aboutã€‚Every paper I readï¼Œ I make sure I get a PDF offã€‚Okayã€‚

 and that PDF goes into a folder in my home directory called Papers and I name it the last name of the first author and the year and yesã€‚

 you'll notice with like some of my papers I have a Y2k problem I should be using four digits and it's okayã€‚

 I doubt that I will be around writing papers when that becomes a problemã€‚I then write a reviewï¼Œ yesã€‚

 I do the same thing that you did last night when reading Clark 88ã€‚

 I do the same thing for the papers I read and I put the review in a subdirecty of that papers folderer called reviews rightã€‚

And every review actually shows up as a bibT fileã€‚Okayï¼Œ so I name my reviews the same paper nameã€‚

 so Clark88ã€‚ divivtã€‚And in that fileï¼Œ I have the bibT citation okayã€‚

 and so these files can be read by Lite when I'm creating my paper and it'll do the bibliographies for me and I don't have to worry about does that thing get underlined or italicized or all that stuffï¼Ÿ

I go ahead I write a contribution statementï¼Œ this paper is important becauseã€‚

I do specify some important pointsã€‚This is my notesã€‚ This is the stuff I got when I read the paperã€‚

I try to grab the abstractã€‚Okayï¼Œ usually I'm not going to retype itï¼Œ especially these daysã€‚

 I can just copyï¼Œ paste the abstract and put it in thereã€‚Okayã€‚

 and then I say why I read this paper in 14740 because F A4 me right thats you knowï¼Œ that's the whyã€‚

Then that sits in a fileï¼Œ and this file is easily searchableï¼Œ right This is text stuffã€‚

If I remember years from nowï¼Œ oh yeahï¼Œ I was in that advanced operating systems class and there was this great paper and I don't remember which one it isã€‚

 I can do word search right and find advanced operating systems classã€‚

 which probably would be the end of this saying I read this because I was in the advanced operating systems classã€‚

Okay I can also look for you of all the papers on software defined networking because somewhere in that contribution statementã€‚

 the important points are the abstractï¼Œ I'm going to have the key letters of software defined networkingã€‚

So this becomes a way to help me find the knowledgeã€‚ğŸ˜¡ï¼ŒThat I've already stored somewhereã€‚

This is the keyï¼Œ and I hope this was true for youã€‚ I hope this was not a lengthy exerciseã€‚

If it takes you an hour to read the paper and then an hour to make a paper reviewã€‚

 you're never going to make the paper reviewã€‚ğŸ˜¡ï¼ŒUnless if you awake more disciplined than Iã€‚Okayã€‚

 so this has got to be quick for meã€‚It should take a couple minutes when I'm doneã€‚Okayã€‚

 so that this is a quick process that I will actually follow and it turns out it's worked for meã€‚

 I still follow it 20 years laterã€‚å–‚ã€‚Rememberï¼Œ I'm not saying you have to do all this stuffã€‚

I'm saying you have to do some of itï¼Œ you have to create a file that has some form of bibliographic citation that has a contribution statement that has some important pointsã€‚

 that's what I'm saying you have to doã€‚Okayï¼Œ I'm asking you to do that in partã€‚

 to kickstar your own process so that you can think about how do I want to store this knowledgeã€‚

 Maybe there'sï¼Œ you knowï¼Œ a note taking app that works really well for youã€‚ Fasticã€‚

 Put all your stuff in that note taking appã€‚ğŸ˜Šï¼ŒAnd just put it somewhereã€‚

Have a process that will work for youã€‚Okayã€‚Any questions about the paper reviewï¼ŸAll rightã€‚

Before we get to todayï¼Œ you may recall we didn't quite finish things up last lessonã€‚ğŸ˜”ã€‚



![](img/37122ede236b2579448af31f30fcb11b_6.png)

So let's go ahead andã€‚Finish upï¼Œ we had a couple more slidesã€‚To handle hereã€‚ And soã€‚

On the wrong screenï¼Œ of courseã€‚So we were talking about our networksã€‚

And some broad ideas about networksã€‚ And we have gotten to this idea of packet switch networksã€‚

And we said that packet switch networks did not have any guarantees of bandwidthã€‚

 so they did not use frequency division or time division multiplexing to split things up because they weren't able to guarantee thatã€‚

We you to see the slide on the Zoom meetingã€‚Because I haven't shared him yetã€‚Insteadã€‚

Packet switching uses a technique called statistical multiplexingï¼Œ which basically meansã€‚

When stuff gets to a routerï¼Œ it sends them as it canã€‚

And there's no guarantees of who gets exactly how much bandwidthã€‚

 there are statistical guarantees that you can make aboutï¼Œ wellã€‚

 on average you're going to have this much bandwidth assuming these things about the others who are competing for that same bandwidthã€‚

Okay so you get the router sending the packets in some formã€‚Usually as fairly as it canã€‚

 we'll talk about some specifics there as the course goes onã€‚Okayã€‚



![](img/37122ede236b2579448af31f30fcb11b_8.png)

å¥½å»ã€‚Something else I mentioned about packet switch networks is that they are store and forward networksã€‚

Okayï¼Œ so when the packet is sent down a wireã€‚When it is received at the routerã€‚

 the entire packet has to be received at the routerã€‚Okayã€‚

 the router cannot take any action on that package until it gets the whole thingã€‚

So until the packet has been stored at that routerï¼Œ the router then processes itã€‚

 it looks for errors in itï¼Œ for instanceï¼Œ which involves a little bit of mathã€‚

 it then may do other things one of the things it has to do is look up the address and figure out where it should goã€‚

And so it then has toã€‚Remember that our routers are not as simple as I've shown here right I'm showing a router with two wires on it probably have many moreã€‚

 so the many decisions about where that packet should goã€‚

 it has to figure out which one should you know which direction is the quickest path to get this packet to its destinationã€‚

So it has to store the packet and do some work on it before it can forward itã€‚So in this caseã€‚

 I'm going to be able to send that packetï¼Œ which has L bits in itã€‚Down a lengthã€‚

 which has our bandwidth in L over R secondsã€‚ But that's the amount of time it will take for the first halfã€‚

When the router stores it and then forwards itï¼Œ it's going to take L over R again for that next topã€‚

å—¯ã€‚And so here's a numerical example to think about thisã€‚

 let's imagine once again I've chosen some numbers so that things will work out with minimal mathã€‚ğŸ˜”ã€‚

Let's say I have a 7ã€‚5 mega bit file remember all of our network transmissions are measured in bits per secondã€‚

 so let's just start with how many bits are in the fileï¼Œ not how many bytesã€‚

Seven and half megabit fileï¼Œ and I want to send it from the left computer to the right computerã€‚

 those are the end postsã€‚At the edge of my networkã€‚

 I want to send it through those two routers that are the core of my networkã€‚

All the lengths are one and half megabits per secondã€‚I'm saying let's ignore a couple thingsã€‚

 we'll talk more in a few minutes about what those things are that we're ignoring hereã€‚ğŸ˜”ã€‚

And let's just say we send this as a single packetï¼Œ what's the math workout to beï¼ŸOkayã€‚

 so how long will it take for the end host to put the packet onto the wireã€‚

 Ill take L over our amount of time rightï¼Œ what is Lã€‚æ²¡æœ‰ã€‚One of the two numbersï¼Œ rightã€‚

7 and a half megabitsã€‚ rightï¼Œ What is Rã€‚1ã€‚5 megabits per second right cancel out some units and you end up with five secondsã€‚

 it takes five seconds to put that packet onto the wireï¼Œ okayã€‚

Turns out there are three hops in my network so that that forwarding process has to happen three timesã€‚

Okayï¼Œ so we will forward it to the first routerï¼Œ the first router will forward it to the second routerã€‚

 the second router will then forward it to the destination hostse total of 15 secondsã€‚Makes senseã€‚

Simple maã€‚ Yeahï¼Œ exceptã€‚This looks really badã€‚Okayã€‚

 what do you think iss 7 and a half megabits a big fileï¼ŸNoï¼Œ it's a tiny fileã€‚ rightã€‚

 I'm sure you have pictures of your cat that are way bigger than thatã€‚Okayã€‚

 so why should it take 15 seconds to get down this small networkã€‚And what's even worseï¼Ÿ

What happens if there are four hopsï¼ŸOr five hops or six hopsã€‚å¯¹ã€‚

What's happening to my time as I add extra hopã€‚ç”³ã€‚seconds each oneï¼Œ rightï¼Œ L over R for each oneã€‚

Aren't we assuming that the whole file should basically go to one half should complete one half before it could be sent to the other halfï¼Ÿ

Well remember we have a store and forward network so that has to happen there's no way for me to send a packet such that the packet will start being transmitted down the second hop before his finish being received Yesã€‚

 but this is a whole marked that factory cover around this then hu it doesn't have to be sent in a single packetã€‚

Maybe this is what you're getting atï¼Œ rightã€‚Let's imagine that instead I take myself and a half meggabit file and I break it up into chunks Okay I'm going to break it up into 5000 chunksã€‚

 sounds like a lotã€‚Againï¼Œ make the math work out nicelyã€‚I'm gonna break it into 5000 packetsã€‚

Seven and a half megabits divided by 5ï¼Œ000 is 1500 bits eachã€‚

Whi is a reasonable size for packet we'll discover how long will it take now to forward one of those packetsï¼Ÿ

What have I done to the time to forward itã€‚Still L over Rã€‚R is the sameï¼Œ but L is different nowã€‚

 rightã€‚So instead of L being seven and a half megabitsï¼Œ L is now 1ï¼Œ500 bitsã€‚

So I can send that whole thing in a millisecondã€‚And that packet will act the same way it's got to go over three  hopsã€‚

So that's going to be a millisecond for each of those hopsã€‚ the network is still sting forwardã€‚Stillã€‚

 every router has to receive the entire packet before it sends itã€‚Okayã€‚

 but now the packages just smallerã€‚So it's going to take three milliseconds for my first packet to get received at the end hostã€‚

Okayï¼Œ I still have 4999 other packets to sendï¼Œ rightï¼Ÿ

The key here is what's going on with that second packetï¼Ÿå“ã€‚

That second packet is able to be transmitted before this first packet reaches the endpostã€‚

As soon as the first packet gets to the routerã€‚The first router will start transmitting that first packetã€‚

 but at the same time the end host can start transmitting the second packetã€‚å–‚ã€‚

And so what we end up doing is overlapping some of our timeã€‚Okayï¼Œ we can think about this asã€‚

The first pack it's going to get to the end at 3 millisecondsã€‚

The second packet's going to show up with the end post at the destination hostã€‚1 millisecond laterã€‚

 rightã€‚Because when it when this first packet gets received at the destination hostã€‚

 the second packet has just been received by that second routerã€‚

And so all we need to do is transmit another L over R1 millisecond to get that second packet received destination postã€‚

 so it's going to show up at the fourth millisecondã€‚

And the third packet is going to show up at the fifth millisecondã€‚I have 4999 to goã€‚

 so the whole file is going to take the amount of time for that first packet to get received three milliseconds and then the remaining 4999 packets are going to come in one millisecond each laterã€‚

And so if I do that mathã€‚5ã€‚002 secondsã€‚Muchï¼Œ much better than 15 secondsï¼Œ What't you sayã€‚

But it gets even betterã€‚What happens now if there are four hops instead there are three hopsï¼ŸğŸ˜”ã€‚

What happens to that number if I add morehawksï¼Ÿone more millisecondã€‚Okayï¼Œ much betterï¼Œ rightï¼Ÿ

If I sense the whole thing as one packetï¼Œ it was taking an extra five seconds per hopã€‚

 now it's taking a millisecond per hopã€‚OkayThis works out really wellã€‚

 this is why we break big stuff into little packets to send it because the store and forward nature of our network means we get this kind of improvement and that improvement keeps going as and lets us build a bigger and bigger network without slowing things down tremendouslyã€‚



![](img/37122ede236b2579448af31f30fcb11b_10.png)

Fantastic ideaã€‚So packet switching versus circuit switchingã€‚

Circuit switching gives every user a guarantee of bandwidthï¼Œ which sounds greatã€‚

Except from the network operator's perspectiveï¼Œ it's not so greatã€‚

let's imagine I have a bunch of users here I have some number of users connected to a networkã€‚

 and they are all sharing the network bandwidth leaving that routerã€‚

That's just the way this has been builtã€‚ They've got to share it somehowã€‚

 They can share it either by circuit switching or packet switchingã€‚

 If they share it by circuit switchingï¼Œ each of them is going to get a guaranteeã€‚Okayã€‚

 so let's imagine they take 100 kilobits per second eachã€‚

That means I can support 10 users because I have one megabit per second on that linkã€‚

And everybody needs 100 kilobits per secondï¼Œ so I can support 10 usersã€‚

I can guarantee bandwidth to 10 usersã€‚But it turns out most of what we do does not require that bandwidth all the timeã€‚

 We do a lot of things that are very burstyã€‚How often is your computer waiting for you to send an emailï¼Ÿ

Okayï¼Œ versus actually sending emailsã€‚It takes you a lot longer to compose email than send itã€‚

And so thatã€‚Guaranteedï¼Œ yesï¼Œ when I didn need been withã€‚

 I want a guarantee I want my 100 kilobits for a secondã€‚

 but I'm not used all the time that means I'm going to be wasting a lot of that bandwidthã€‚

And in circuit switchingï¼Œ there's nothing you can do about that because you've guaranteed itã€‚

 you can't give that bandwidth to somebody elseï¼Œ you can't support an 11th userã€‚ğŸ˜”ã€‚

Even though a lot of the timeï¼Œ none of those users is going to be using all of bandwidthã€‚

Because you guaranteed itï¼Œ it might happen that they all ask for their full bandwidth at the same time you have to be able to provideã€‚

In fact it's switchingï¼Œ that's not trueã€‚And packet switching when one person is not using the bandwidthã€‚

Since there's no guaranteeï¼Œ others can use itã€‚ so you can actually support more usersã€‚

 And I'm going to ask you inã€‚In your homework to be able to justify this answerã€‚å—¯ã€‚

Turns out if you do the math in this scenarioï¼Œ the chance that more than 10 users want to use the networkã€‚

Alrightï¼Œ so I why 10ã€‚ Wellï¼Œ because I can only support 10 actual transmitting at the same timeã€‚

It turns out that the probability for a number even as high as 40 users is really lowã€‚

If I have 40 usersï¼Œ each of which are only using the network 10% of the timeã€‚

The chance that I will overwhelm that network is less than 0ã€‚1%ã€‚Which is pretty goodã€‚Okayã€‚

 and so that's the case for why packet switching as a winã€‚Okayã€‚å—¯ã€‚Yesï¼Œ it's a winã€‚

 we do have to recognize that there are costsã€‚ğŸ˜¡ï¼Œpacket switching is great in this world for everybodyã€‚

ğŸ˜Šï¼ŒIsn't using a guaranteed amount of bandwidth all the time in other situationsã€‚

 maybe that would not be the caseã€‚There are other places where maybe it makes more sense to have a circuits which noã€‚

The issueï¼Œ thoughï¼Œ the ugly part of packet switching is this congestionã€‚

 It is possible right 01% of the time there will be 40 users whoï¼Œ I'm sorryã€‚

 there will be 11 users who want to use the network at the same timeã€‚ and when that happensã€‚

That bandwidth cannot be allocated to all of them at the same time and so somebodys can end up waitingã€‚

 we call that congestion and that will lead to delay and packet lossã€‚

 which we will examine in today's lecture in a few minutesã€‚All rightã€‚

 this brings us to the end of yesï¼Œ last times last lectureã€‚

 I want to point out that I specify lesson objectives for each of your lecturesã€‚

And I placed them here in the slidesã€‚ I placed them on the websiteã€‚

 and I placed them in a study guide for the quizã€‚ This is basically me telling youã€‚

Here's a way to checkï¼Œ did you learn the things I wanting you to learn todayï¼ŸOkayï¼Œ wellã€‚

 this is me telling you from this lectureï¼Œ you should have learned how to think about the network in terms of nuts and boltsã€‚

That model we had about what the pieces areï¼Œ rightã€‚

 You should be able to describe what a protocol is and how it's used in the Internet and all these other wordsã€‚

 Okayï¼Œ You should be able to identify things that are in the edge and things that are in the coreã€‚

Okayï¼Œ so I'm basically telling you here's what you would have learnedã€‚

This becomes especially important to you because this is what I'm going to ask you questions about for the quiz okay I'm literally telling you what is on the quiz when I sit down to write the quiz I will choose some of these less objectives and then I will write it like ohã€‚

 I should ask the students to identify the network components that belong to the core in the edgeã€‚

Okayï¼Œ how am I going to write that questionï¼Œ Well let's have a multiple choices questionã€‚

 chooseose the things that are in the coreã€‚è§£å•Šã€‚So this is telling you what's going to be on the quizã€‚

 soã€‚Useful information you might want to think aboutã€‚Okayã€‚Yeahã€‚All rightã€‚

 let's get on to the next lectureã€‚å—¯ã€‚Thank you soon takingã€‚Yeahã€‚å—¯ç®—ä¸ªã€‚Yeahã€‚å—¯æœ‰ã€‚All rightï¼Œ we goodã€‚Exã€‚

Okayï¼Œ so today a couple things to talk about one is I mentioned delay and loss that are caused by packet switch networksã€‚

 I think it's fair that we spend some time looking at where the delays come from and what the losses areã€‚

 and then I want to talk about the architecture of the network this is a big idea about how to coordinate how the pieces of a network go together and there's a particular model we will learn about as wellã€‚

So first offï¼Œ delay and lossã€‚What happens to our packets and why don't they end up at our destination instantaneouslyï¼Ÿ

This process I showed you a picture very similar to this a few minutes ago where we had some end host sending packets and they hit some routerã€‚

And in the picture I showed you a minute agoï¼Œ I saidï¼Œ youã€‚

 some of those will end up having to sit in a queue and wait while others are being transmittedã€‚

That was a little bit simplisticã€‚Insteadï¼Œ I want to point out that there are basically four different things that go on in that router that will delay your packet that will take up timeã€‚

Okay so we need to figure out what's going on with each of those four operations at that routerã€‚

So the first one isï¼Œ so I'm going to think about it in terms of as the packet gets to the routerã€‚

 what's the router got to do the first thing is the router is going to do some processingã€‚

 it's going to take some CPU cyclesï¼Œ It's going to do some mathï¼Œ it's going to do some computationã€‚

 Much of this is accelerated by hardwareï¼Œ but it still takes time to go ahead and look at that packet and process itã€‚

And so there are two main things we're going to do hereã€‚

 there are other pieces that may or may not come in in terms of how you are managing your networkã€‚

 but specifically you always have to check for bit errorsã€‚You got to pack it inã€‚Maybe along the wayã€‚

 youï¼Œ some of those bits ran intoï¼Œ some other network noiseã€‚

 something going on and a bit got flippedã€‚That would be badã€‚

 We don't want to be trusting the bits that are in our packet if they have been manipulated orã€‚

Manipulated sound bad if they have been somehow changed by the environment or I guess by some external actorã€‚

 rightï¼Œ So we want to look at this bit to make sure they're the sameã€‚

 So there's a little bit of math we do call it check some or a sick with redundancy check to make sure that the bitsã€‚

With high likelihood have not been modified at allã€‚

The other thing we have to do is we have to look at the packet and figure out which of the many output wiresã€‚

ğŸ˜¡ï¼ŒThis particular packet' going to go downã€‚Okayï¼Œ remember our router has 96 wires out of itã€‚

 I was I'm showing two on this slide right it's got to choose some particular placeã€‚

 so it's got to look at the packet and sayï¼Œ ohï¼Œ this packet is going to South Dakota and South Dakota is out wire number 14 and so we'll put it inã€‚

We'll specify this has got to go out on wire number 14ã€‚

So that's what's going on with this first stepï¼Œ the processingï¼Œ like I said there maybe other thingsã€‚

 maybe it's been set up to do deep packet inspection and you know the NSA is looking at them or things like thatã€‚

 whatever that would all come under CPU cycles that take up time in the routeã€‚

Second thing that's going to happen now that we know the packet is going to North Dakotaã€‚

There may be other packets that are going to North Dakotaï¼Œ I knowï¼Œ shopperï¼Œ rightï¼ŸButã€‚

If there are other packets going thereï¼Œ then this packet's going to have to waitã€‚ğŸ˜¡ï¼ŒOkayã€‚

 so that means that there is some congestion at this router and we're going to have to put it in a queueã€‚

So the router is going to have memory that it can allocate to each of the outbound wiresã€‚

And it will put the packet in that memoryã€‚To store them long enough for them to wait until it's their turn to be sentã€‚

So we're going to end up with a queueeï¼Œ some kind of bufferï¼Œ some kind of line for the packetsã€‚

And after some amount of timeï¼Œ the packet will get to the front of that lineã€‚

That amount of time is this queuing delayã€‚Okayï¼Œ and so this mayã€‚

 maybe it's nothing because maybe nobody else wants to go to North Dakota or maybe it's a lot because all of a sudden everybody wants to go to North Dakotaã€‚

Third thing isã€‚We then when the packety gets to the front of this queueeï¼Œ we start transmitting itã€‚

Wellï¼Œ it turns outã€‚Take so while the transmit this by the wayã€‚

 is the L over R we've been talking aboutã€‚ğŸ˜¡ï¼ŒR is the bandwidth of the length that is a restraintã€‚

Because of the technology of that linkï¼Œ so for instanceï¼Œ if this is an ethernet connectionã€‚

The ethernet standard says that it takes so long to form each bitã€‚

And so when you were transmitting the packetã€‚You have to create the correct waveformã€‚ğŸ˜¡ã€‚

And the circuitry that is in the Eent card will take a certain amount of time to create that bandwidthã€‚

To be able to send a zero or a1ã€‚So that's the bandwidthï¼Œ that's the R partã€‚

That's a per bit amount of time and then there is the packet length we do that forï¼Œ you knowï¼Œ heyã€‚

 I've got 1500 bitsã€‚Thereforeï¼Œ it takes this amount of time to transmitã€‚Thatï¼Œ that signalã€‚Okayã€‚å—¯ã€‚

That gets it out of this routerã€‚But now we've got to figure out how long it will take to get into the similar position where we started this analysisã€‚

 and that would be such that the next router downã€‚ğŸ˜”ï¼ŒIs able to start upã€‚

And pick up with its own processingã€‚Wellï¼Œ that means that our packet actually has to propagateã€‚

 It has to travel down the wireã€‚From one router to the otherã€‚Okayã€‚

 this sounds a little bit like transmissionã€‚But it's not the transmission timeã€‚

 that transmission bandwidth is based on the specification of that technologyã€‚ this is ethernetã€‚

 therefore it goes at this bandwidthã€‚The propagation time is more dependent upon the lengthã€‚

 the distance that we're travelingã€‚ You can think of thisã€‚You knowã€‚

 I could have a short ethernet cable or a long ethernet cableã€‚

And it would take different amount of time to get from one end of that table to the otherã€‚

 even though it's being sent at infinitenet speedsã€‚So when you buy the new fancyã€‚

 40 gigabit per second ethernet connectorã€‚It doesn't get it down the wire fasterã€‚

 it just puts the bits on the wireï¼Œ they still have to travel down the wire Now they tend to travel fastã€‚

ğŸ˜¡ï¼ŒOkay so the speed at which you can propagate again it depends on the technology and what's going on with thereã€‚

 but usually you get you know things like some significant fraction of the speed of light and in fact some of our connectors are actually lasers going down by rocky cables and you're getting it's actually like traveling so it's pretty good so this is pretty fast but it's still takes a little bit of time and so the math here is basically you know your distance equals great times time how long is it going to take is dependent upon how far you have to travelã€‚

 and divide that by the speed you're traveling and that will give you the amount of time that it will take to get down the waterã€‚

Proropagation delay different from transmission delayã€‚

Now all four of those things then connect togetherã€‚

 you add them together to figure out how long it will take to get your packet through each node through each routerã€‚

 you can call this the nodal delay and it's the sum of those four numbers that we've given youã€‚Okayã€‚

 it's the transmissionï¼Œ the processing delayã€‚Usually this is not longã€‚

 routers are fast computers and they have a lot of hardware support so that they actually do that processing really quicklyã€‚

A couple think secondsã€‚The queuing delay can be the most significant feature here so depending upon you know if you're on the Apple campus and everybody's playing fortnite at the same timeã€‚

 you know that means all of the packets are going down the same wire there's going to be a lot of congestion that can take a while so that a while being milliseconds right but from a computer's perspective that's a long timeã€‚

The transmission delayï¼Œ that's a technology based thing depends upon or using 10 megabit per second or 100 megabit per second Ethernetã€‚

And so that's something that you can speed up by getting faster lengthã€‚

And it's also something that means that the technology increases as we go through timesã€‚

 such that that number goes up pretty wellï¼Œ actually does better than Moore's lawã€‚

And then the propagation delay is effectively dependent upon how far you're sending the signalã€‚Okayã€‚

 what that that distance isï¼Œ Yesï¼Œ it depends on your propagation speed alsoã€‚

 but those are all going to beã€‚You knowï¼Œ a quarter toã€‚9 C or soã€‚

 so it's going to matter more if I'm sending that you knowï¼Œ to a low earth orbit satelliteã€‚

 for instanceï¼Œ that's a long distance versus across the room Eã€‚

For the queue delay that0 to a few mill a few millisecond depending onã€‚helping the queue and the rotã€‚

So the question is what is the factor that drives the queuing delay to be zero to some number of milliseconds and it is the amount of congestion in that queueeã€‚

 this is how many packets are ahead of youã€‚Okayï¼Œ so if you show up and you knowã€‚

 there are 20 packets in front of youï¼Œ it's going to take more time than if there's only two packetsã€‚

And it also will depend on the size of those packets and things like that follow so so that's the case like the routerã€‚

å“¦å“¦ã€‚I can't accept anymoreã€‚ Does that mean like the axone is unbound orï¼ŸToNext slideã€‚

 I'm going to just havingã€‚You canï¼Œ but then you increase the lossï¼Œ that means we'll see them in factã€‚

Might as well head thereã€‚Sorryï¼Œ everyone once's in the while my computer is flackyã€‚å—¯ã€‚

So let me jump to packet loss and we'll come back to that slideã€‚

So the routers have a limited amount of memoryã€‚And so if that queue gets too big and holds too many packets in itã€‚

 that's where we get lostã€‚Basicallyï¼Œ a packet shows up and there is no room in the end and you know no place to put itã€‚

 the router has no choice but to throw it awayã€‚Okayï¼Œ actuallyã€‚

 it has no choice other than to throw some packet awayã€‚Okayï¼Œ in most situationsã€‚

 it's going to be the one that just showed up and we'll talk more about that as well Okayï¼Œ so yesã€‚

 there is some limitã€‚ Now in recent yearsï¼Œ I should point out memorys gotten really cheap and so routers tend to have big memory and that causes another problem called buffer bat where packets justã€‚

It would be better to drop a few and clean out the queueã€‚

 but now there's enough memory to keep a lot of packets around and so you always have a long queue to go throughã€‚

It's a different situationï¼Œ we won't talk about it much in this classï¼Œ advanced networks says thoughã€‚

All rightï¼Œ I skipped over this slide a minute agoã€‚This isã€‚

Another way of thinking about the queuing delay and what's going on with itã€‚

So the idea is that the packets are arrivingï¼Œ they're coming in and we are servicing themã€‚ They'reã€‚

 we're getting rid of them as fast as we canã€‚TheAs fast as we canï¼Œ thoughã€‚

 is limited by that bandwidthã€‚ That's the L over R problemã€‚ How fastã€‚

 how long does it take to transmit each of thoseã€‚And so if I think about what's going on withã€‚

The the packet's coming in and think aboutï¼Œ wellï¼Œ let's make's I don't know exactly when a packet is going to show upã€‚

But I can' measure long term averagesï¼Œ I can say thatï¼Œ ohï¼Œ you know it it's Sunday nightã€‚

 everybody's watching Game of Thrones or somethingï¼Œ and so there's going to be lots of packetsã€‚

I can make those kind of statementsã€‚ And so that's what this lambda number isã€‚

 That's a long term average of the arrival rateã€‚ How many packets are showing upã€‚

We multiply that by the L over Rã€‚ğŸ˜¡ï¼ŒOf how fast we can service these thingsã€‚

To get a number we call traffic intensityã€‚And I've roughly drawn this nice graph over there that you'll notice has very few units on itã€‚

 This is a lot of hand wavingã€‚å—¯ã€‚Delay is the Y axis and traffic intensity is X axisã€‚

 And it's intended to tell you thatã€‚Bad things happenã€‚

When that traffic intensity number gets too bigã€‚Okay so certainly if the traffic intensity gets greater than oneã€‚

 that means more packets are showing up than you are able to get rid ofã€‚

Okay this is not a good situationï¼Œ you're actually being told to do more work than you're able to doã€‚

And so there's nothing that could happen other than the work pile up and pile up and not get doneã€‚

So that's going to mean a really long delay for those packetsã€‚

Because many of them are never ever going to get serviceã€‚So we' got to be less than oneã€‚

 but it turns out that we really want to beã€‚Way less than oneã€‚Okayï¼Œ because you might sayï¼Œ ohã€‚

 we'll let you knowï¼Œ I might as well work as hard as I canï¼Œ let me get packets coming inã€‚

 we'll service them as fast as we canï¼Œ so therefore I should be able to you knowã€‚

 Lambo El O bra should be close to one rightï¼Œ Noï¼Œ it turns out because this is an average and we'll talk about this more when we do killinging theoryã€‚

 it turns out that you get this asymptotic relationshipã€‚Such that you get a really big delayã€‚

 even though mathematically you would think that you'd be able to keep up with itã€‚

 but the random nature when they show up means you're going to get bursts and then never be able to recover from those burstsã€‚

Okayï¼Œ and so long delayã€‚ And so you really do want yourã€‚Yourã€‚

Your capacity to do work to be well beyond the average amount of workã€‚ğŸ˜¡ï¼ŒOkayã€‚Okayã€‚

These are all theoretical ideass what if we wanted to know what's actually going on in our network could we measure it The network is a veryã€‚

 very dynamic placeï¼Œ especially over long chunksï¼Œ many hops kind of distances big paths but we can take a look at what's going on we have a tool called tracer route but you'll be using a lot many of you probably have used it here before it is actually a tool that does measurements that lets you know on a hop by hop basis between your computer and some destination tells us you what the delays are how long does it actually take to get hop to hop to hop all the way to my destinationã€‚

And it does this fairly simple algorithmã€‚Basically once to check how long does it take to get to the first routerã€‚

 how long the secondï¼Œ how long to the thirdï¼Œ how long to the fourthï¼Ÿå—¯ã€‚

And so what it's going to do is it's going to send some probe packetsã€‚ğŸ˜¡ï¼ŒOkayï¼Œ I'm saying three hereã€‚

 that's the default numberã€‚ You can tell it to send moreã€‚

 It's going to send these packets such that they are headed for the destinationã€‚

 but then we're going toã€‚Ask the I router so we're going to sayï¼Œ okayã€‚

 how long does it take to get five steps down this pathï¼Œ hey router number fiveã€‚

 would you go ahead and send me back a notification that you got this packetï¼ŸOkayã€‚

 and I can time from the amount of time from when I sent the probe to when that router replied to meã€‚

 and I can tell you how long that isã€‚ so that's the amount of delay it would take in this particular instance to get to the fifth router andã€‚

OkayRightï¼Œ so good questions allã€‚

![](img/37122ede236b2579448af31f30fcb11b_12.png)

Thisï¼Œ soã€‚Remember the network is very dynamicï¼Œ and so the thing you measure at one instant may not be true an instant laterã€‚

OkayAnd so things like your question about the routeã€‚

 we imagine that I send this probe to a router and it's going to reply to me and we imagine that thereforeã€‚

 you know probably half of that time is the amount time it takes to get there and half backã€‚

 but I don't know thatã€‚I also don't know that the router didn't take a while before it replied to meã€‚

But these are the sort of numbers we come up with and certainly as you go further and further through the networkã€‚

 you're going ascend to the second router in the third routerã€‚

 it gets more and more likely that the dynamic nature of the network means that it's possible that I sent a packet down one route and it returns through anotherã€‚

It's also possibleï¼Œ by the wayï¼Œ that the packets going through that third router actually did not go through the second routerã€‚

Okayï¼Œ so I'm showing it here on this slide is if they're all going down the same wayã€‚

 the network is very dynamicã€‚So we only get average kind ofã€‚Field goody sort of numbersã€‚

 they're not numbers that you can calculate to the ninth decimal place sort of numbersã€‚



![](img/37122ede236b2579448af31f30fcb11b_14.png)

Here's an exampleï¼Œ I ran this trace route from my office to a web server in Japan that was we used to have students in Japan in this courseã€‚

 and so this is a web server in Co Japanã€‚And so I did that by typing trace route and then a destinationã€‚

 wwwã€‚sujã€‚jpã€‚And it spits out this textï¼Œ it saysï¼Œ okayã€‚

 you wanted to do a trace route to that destinationï¼Œ here's the IP addressã€‚

We're going to cap it at 64 hopsï¼Œ so if it takes longer than thatã€‚

 we're going to give up and we're going to send out small packetsã€‚

 40 bytes at a time and then it goes and lists a whole bunch of different placesã€‚Okayã€‚

 so you can immediately see it took 24 hops to get to Japanã€‚

The first hop was to a destination called HH130 routerã€‚Okayã€‚I have to look at that and guessã€‚

 I'm going to look at that and say HH130 that probably means it's in Hamly Hall somewhere since my office is in the hammerly Hall that makes senseã€‚

 it's some routerï¼Œ there's the IPH addressã€‚Okayï¼Œ and thenã€‚We get some measurement numbersã€‚

The first measurement number you should always ignoreã€‚

That's because it takes a while to like load the networking stack out of virtual memory into the cache and get things running properly on the computer and get kind of the setup working properly okay and so youll almost always see a really big number and then some smaller onesã€‚

Okayï¼ŒBecause the second third time thingï¼Œ you knowï¼Œ the skids were already greasedã€‚

 so it goes out and comes backã€‚We're talkingã€‚382 microseconds doesn't sound like very longï¼Œ rightï¼Ÿ

This is the total of those four numbersã€‚Yesï¼Œ someone a decently fast networkã€‚

ProThis also means that router probably is not busyï¼Œ so I don't know when I ran thisã€‚

 but you know if this could have been some Sunday night when nobody else is in hammers like Hall or something like thatã€‚

We don't know our second third oneï¼Œ thoughï¼Œ slightly shorterï¼Œ 378 microsecondsã€‚

 I would say that's indistinguishable from the second measurementã€‚Okayï¼Œ do not look at that and sayã€‚

 ohï¼Œ it goes fasterã€‚You knowï¼Œ fiveï¼Œ five microseconds don'tï¼Œ you knowã€‚

 that's way beyond the precision of this measurementã€‚Other stuff we noticeï¼Œ let's seeã€‚

 well the second one goes to some pod A in Wan Hall router somewhere probably the third one gives me these asterisksã€‚

Okayï¼Œ and those asterisk mean that we sent out a packet and did not get a responseã€‚

Usually this is because the router decided not to send anythingã€‚

We're relying on the goodness of those routers to actually reply to us and that one probably didn'tã€‚

 it could also be that my packet got lostã€‚But especially if it happened three times on just one routerã€‚

 much more likely that somebody configure that router not to replyã€‚And unfortunatelyã€‚

 more and more cisadmins are doing that because they think that what we're doing is has security implicationsã€‚

 they are wrongï¼Œ but they still do itã€‚If we keep looking at theseã€‚

 we'll notice that there's a point where we go fromã€‚You knowï¼Œ eight milliseconds to 67 millisecondsã€‚

There atã€‚The 12th to the 13th stepã€‚ What's going on thereã€‚ Wellã€‚

 if you look at the names of the routersï¼Œ we can kind of figure outï¼Œ rightï¼Œ The 12th one isã€‚

 something that's numbersï¼Œ numbersï¼Œ somethingï¼Œ something NBA  O2ã€‚

 that's probably North Virginia O2 in the US on this networkï¼Œ whereas the 13th one is somethingã€‚

 somethingï¼Œ somethingã€‚LS andï¼Œ probably Los Angelesã€‚we are guessing based upon names of stuffã€‚Okayã€‚

 and we could if we wanted to hunt down more information about where those areã€‚

 we may or may not be able to get itï¼Œ but it looks to me like that's the transplantal linkã€‚

It goes to some router in Virginiaã€‚ and then there's a cross country single linkã€‚

Single fiber optic cableï¼Œ singleï¼Œ you knowï¼Œ whateverï¼Œ maybe it's a satellite link who knowsã€‚

 but that's the one that suddenly takesã€‚From 8 milliseconds up to 67 millisecondsã€‚

 so it about 60 milliseconds to get across the countryã€‚Okayï¼Œ if we look a little bit furtherã€‚

 we get another one of these cup hops later where we go from 67 milliseconds up to 177 millisecondsã€‚

 another big jump and they hintã€‚Is that we're now on line 15ï¼Œ probably in Osakaï¼Œ Osakaï¼Œ Japanã€‚ç³»ã€‚å¯¹ã€‚

This one is also funï¼Œ you'll see this occasional look at line 19ï¼Œ 19 lists or an IP addressã€‚

It says 187 millisecondsï¼Œ 118 millisecondsï¼Œ and then it lists another IP addressã€‚

And says 176 millisecondsï¼Œ 172 millisecondsã€‚What's going on thereï¼Œ for some reasonã€‚

 the 19th pop got a reply from a different routerã€‚Not sure why it could be that the 18thr or the 19th router just failedã€‚

ğŸ˜¡ï¼Œso the network sent me to a different routerã€‚Remember also that what's going on with this algorithmã€‚

 it could also be that the path veered at that point in time because we're doing these sequentially after I had established talking to the router in step 19ã€‚

 then all of a sudden router number five started sending things down a different path and I'm still just counting 19 hops and I just get to a different answerã€‚

so it's not necessarily happening over thereï¼Œ it could be somewhere along the path as we do thisã€‚

 but that's how it shows that you got a different response from a different routerã€‚

And here we are finally after 24 hopsï¼Œ we're in Japan at our destinationï¼Œ 175 millisecondsã€‚

To get from my computer in Hammerchai Hall to Japanã€‚Okayã€‚Kind of cool when you think about itã€‚

It's a lot of hopsï¼Œ 24  hops to get thereã€‚that means at least 24 routers are working together to get my packetã€‚

From here to there also meansã€‚The timing is so much biggerï¼Œ three orders of magnitudeã€‚

This is one of the kind of cool things about networking is that it works well at small scale and at large scaleã€‚

There are a lot of systemsï¼Œ in factï¼Œ most engineered systems don't cover three orders of magnitude very wellã€‚

 rightï¼ŸOkay think about your car right you normallyï¼Œ wellï¼Œ I can drive it five miles an hour okayã€‚

 but I can't also have the same car travel at 5000 miles per hourã€‚ğŸ˜”ã€‚

so most systems won't do that our network is doing fine at three orders of magnitude dynamic rangeã€‚

æ•£leã€‚Excuse me wayï¼Œ if you're going to be done much with trace routeã€‚

 I recommend some improvements MTR is pretty goodã€‚Because it the standard trace route does these sequentially and once or I guess three probes perã€‚

routerã€‚ And then you're doneã€‚ MR continuously sends them out to all of the routers along the wayã€‚

 And so you end up with aã€‚I don't know a better feel for the entire system as it's goingã€‚

 I also like the stats betterï¼Œ I've been told if you're on Windows there's a version called win MPRã€‚

I dont know do you figure about thatã€‚Okayã€‚ğŸ¤§ã€‚All rightï¼Œ howã€‚How did this network come about thoughï¼Ÿ

We've got to network with three orders of magnitude dynamic range and these routers working and everythingã€‚

 the fact that we can get a packet fromã€‚The Japan is pretty amazingï¼Œ it's a complex thingã€‚

There's a lot of moving partsã€‚Okayï¼Œ a lot of them are the componentsã€‚

 the nuts and bolts of my systemã€‚Rightï¼ŒThere are a lot of routers out thereã€‚

 We're gonna to learn later onã€‚ There are close to 800000 big steel routers in the in the worldã€‚

 not counting the little guys in your apartmentã€‚Okayï¼Œ there are lots of protocols that are being runã€‚

 people want to run all kinds of applicationsï¼Œ somehow it still all worksã€‚Even more importantã€‚

 there are many different peoples who are part of the networkã€‚ğŸ˜¡ï¼ŒMany playersã€‚

 we don't have one corporation or one government entity that is providing the network and doing itã€‚

 howeverï¼Œ it thinks the network should runã€‚Insteadã€‚

 Carnegie Mellon has its own IT group that runs its own network and figures out how that should operate best for Carnegie Mellon itself as an organizationã€‚

And so if you think about itï¼Œ that's astonishing that we haveã€‚Many different playersã€‚

All of whom still kind of get along well enoughã€‚To make this all workã€‚How do you do thatï¼Ÿ

How do you organize a networkï¼Œ how do you put it all together we have to be careful when we think about this because we are sitting with hindsight seeing that there is a global network that worksã€‚

ğŸ˜”ï¼ŒDavid Clarkï¼Œ years agoï¼Œ was not in such a good situationã€‚He was trying to make a networkã€‚

But he knew and he knew there were all these complexitiesï¼Œ he had to figure out how toã€‚

 and how do we actually organize itï¼Œ how do we put all the pieces together so that they will flow nicelyã€‚

How do you manage this network andã€‚Construct it properlyï¼Œ that's an architectural questionã€‚

This is the architecture is how you put components together to solve some problem we think about the word in terms of building buildingsã€‚

 how do you put stairways and hallways and rooms and windows and roofs together to build a buildingã€‚

We're doing the same thing with the networkï¼Œ how do we put routers and organizations and all those pieces together somehow with some protocol glue and a little you know many applications such that it all works that's the architectural question that we're going to examine today we're going to see the solution that that was proposed and it worked we have to be careful because sometimes we look at this and we say well this is obviously how you build a networkã€‚

But rememberï¼Œ we're doing that with the hindsight and the knowledge that this network can be builtã€‚

The architecture that was usedã€‚ğŸ˜¡ï¼ŒIs a layered architecture so againï¼Œ didn't have to be this wayã€‚

 it was decided that this would be the way though that they would try and it worked and it has worked beautifully ever sinceã€‚

ğŸ˜¡ï¼ŒA layered architecture is one particular way to arrange the components of your systemã€‚

When you're taking these pieces of the network and putting them togetherã€‚

And I guess architecture also has to figure out what the pieces should beï¼Œ what they areã€‚

 a layered architecture takes these pieces and puts them in layers and stacks them one on top of the otherã€‚

And the key toã€‚The layering is that each layer is going to be designed suchã€‚

That it provides a service to the layer above itã€‚Okayï¼Œ so that blue layer down at the bottomã€‚

Provides some serviceï¼Œ it provides blueness to the layer above itã€‚ğŸ˜¡ï¼ŒOkay so greenã€‚

 when it needs some blueï¼Œ it can go to the layer below it and get some blue okay and then it will use that blue with whatever protocols it has to run or whatever computations it needsã€‚

 it will use that blue to create the service that the layer above it needsã€‚

But it doesn't give the blue to the layer bugã€‚ It gives reading because it's a green layerã€‚

And so its job is to provide whatever service it does to the layer of upã€‚

And if these are constructed wellï¼Œ it will use the blue to make the green that the red needsã€‚

And the redï¼Œ of courseï¼Œ will use that green to do whatever it has to doã€‚Okayã€‚

 so if you designed them wellï¼Œ then they fit together nicelyã€‚

Each of the layers is going to run some protocols or something toã€‚

Do to be able to come up with its its greennessï¼Œ there will be a green protocol that somehow gets executed to make that green out of blueã€‚

There's also a nice interface between themã€‚ somehow you have to decide how exactly does green ask for more bluenessï¼Ÿ

Okay what's that interface like and so some of those are going to be here's an application programming interfaceã€‚

 these are the actual function calls that you would make to get that service from the layer below and so in building a network in this wayã€‚

 you can't just say ohï¼Œ we're going to use the layered architecture that's itã€‚

You then have to define what pieces go in each layerã€‚ What things should be in the blueã€‚

 What responsibilities does green haveã€‚But blue doesn'tã€‚

And how is dream going to be able to fulfill those responsibilities based upon the things the services it can get from the layer belowï¼Ÿ

Now this layering works out pretty wellï¼Œ it is certainly you need some way of breaking up a big complex thing into smaller pieces this isã€‚

 by the wayï¼Œ what engineers always doï¼Œ rightï¼ŸWe always take a big problem that's really going to be meaty and great and we're going to solve all the world's problems with it and what we do is we break it into chunksã€‚

And we solve each of those chunksã€‚ The question isï¼Œ how do you break it into chunksã€‚

 What chunks come out of itï¼Œ That's the architectural questionã€‚

 So we got to have something that's not monolithicã€‚

 We have to have some way of understanding the components easilyã€‚

 We got to make sure that the layers are constructed properly so that they fit together and so that they can have a protocol to do their job to be able to generate whatever service they needã€‚



![](img/37122ede236b2579448af31f30fcb11b_16.png)

å—¯ã€‚

![](img/37122ede236b2579448af31f30fcb11b_18.png)

In generalï¼Œ what we've done is we've come up with some way to take a really complex job and break it up in weekã€‚

 sorryï¼Œ I'm not taking credit for this right the founding fathers of the internet figured out a way to take the complex tasks that are there and break them up into manageable people pieces by using this layered network architectureã€‚

Now there are some issues that people would say there are problems withï¼Œ often you'll see people sayã€‚

 wellï¼Œ one of the problems with layered architecture is that you end up doing the same thing in each layerã€‚

And in the network stackï¼Œ they often cite reliabilityã€‚Will'll sayï¼Œ you knowã€‚

 the link layer already does reliability and you know you're also getting reliability to the transport layerã€‚

 and that's a duplicationã€‚I don't think that's a really good argument because the kinds of reliability you're getting are different at the different layersã€‚

 we will talk about that when we get into those layersï¼Œ but there may beã€‚

 so depending on the layered architecture you useï¼Œ if you don't do a good job of designing the architectureã€‚

 you may have some duplication where everybody has to do the same kind of stuff as it goesã€‚

U and up and enoughã€‚One other aspect thatã€‚That can be laid at the feet of a layered architecture is that sometimes you have information in some layer that you want and you can't get to itã€‚

It may be that red needs something about blue and needs to know thatã€‚

Okay and this may be a problem with how you put the architecture togetherã€‚ Maybe you should sayã€‚

 wellï¼Œ why does red need to know thatï¼Œ shouldn't red be able to get away without itã€‚

 shouldn't it be designed to be abstracted away so it doesn't need that informationã€‚

 but maybe you do have situations and there actually is one in our network that is aã€‚

I'll agree to that oneï¼Œ it would be nice if some information from the data link layer was available to the transport layerã€‚

 but oh wellã€‚We'll talk about that one as wellã€‚All rightã€‚

 so that has been an argument that we should doã€‚This layering architectureï¼Œ that the networkã€‚

 if you're going to take this complex network and break it upï¼Œ let's go ahead and do it in layersã€‚

The next question isï¼Œ okayï¼Œ what's in each layer how that work and so we're going to look at a particular model of thatã€‚

 a particular layered architecture called the open systemss Interconnect model that was developed by the International Standard organization so sometimes called the ISO OSI model looks like they were really into palindromesã€‚

It's interesting because that's a common model and one of the reasons I'm teaching it to you is that every network engineer knows itã€‚

And so we use it to communicateï¼Œ even though it never really got deployedã€‚

And the reason it didn't get deployedï¼Œ because this standardsã€‚Organization started in 1978ã€‚

That was whenï¼Œ at that point it had become obvious that different organizationsã€‚

 IBM had a networking mechanism and other companies had networking mechanismsã€‚

 but they couldn't work togetherã€‚And IBM didn't want anybody else to work togetherã€‚

 they wanted you to get rid of that other companies's computers and buy IBM computersã€‚

and so I sort of stepped in as oh well we can develop some standards to make this all work and so they started working on that and then TPIP got deployed and kind of took the whole world over and so this workã€‚

Nobody ever built thisã€‚But we all use it to talk about networks and understand the networksã€‚ğŸ˜”ã€‚



![](img/37122ede236b2579448af31f30fcb11b_20.png)

So here's the model that's sometimes called the seven layer cake because there's seven layers to thisã€‚

I'm showing you this picture where the stacks on the sides on the left and right those are end postss so I have some sender and some destination over there and in the middle I have a couple of routersã€‚

 the routers don't need the top couple layers and so they're small length these lines here at the bottom would be physical connection so this is the actual wire or Wifi or whatever that connects and endpost to that first routerã€‚

And then inside the end hostst we have all these layersï¼Œ we have physical data link networkã€‚

 all these layers that go together to make this work outã€‚

And so what you end up doing is having the physical layer talk to the physical layerã€‚ So you knowã€‚

 there are some signals that have to travelã€‚ That layer has a protocol to talk to the other router to be able to communicateã€‚

And then it provides that service to the layer above itã€‚

 so beta link layer now can talk to the next router over by using the physical layer below itã€‚

And this just keeps going up and up the stack until at the very topï¼Œ you have your applicationã€‚

All right I have my fortnite client who's talking to a fortnight server somewhereã€‚Okayã€‚

 using this whole staffï¼Œ even though it doesn't have to worry about what's going onã€‚

 it just needs to know that it can use the services of the layer below it to make that happenã€‚

And it almost feels like there's some connection directly between thoseã€‚



![](img/37122ede236b2579448af31f30fcb11b_22.png)

I'm going to start at the bottom and talk about each of these layersã€‚ğŸ˜”ã€‚

Remember the course is actually going to go from top downã€‚

 but for today I'm going to start at the bottom and build up these layers and just give us a little feel for what goes on in each layer So the first layer is the fiscal layerã€‚

Its mission is to transfer bits from one end of a length to another so a couple things to notice here first offã€‚

 every layer has a mission okayï¼Œ and you should be able to say this is what this layer does okay what its job is so its job is to transfer bitsã€‚

From one end of a wire to the other end of a wire or whatever that link isã€‚Second thingã€‚

 every layer is going to have its own data typeï¼Œ its own thing that it's sendingã€‚

 so the fiscal layer worries about bitsã€‚Andã€‚There's a lot that goes on in the fiscal layerã€‚

 the fiscal layer we're not going to talk about much in this classã€‚

 but it's a very electrical engineering heavy layer and it's one of the reasons we don't talk about it's very different from the more computer engineering other layers of the network stack this is where we're worried about what the waveform is going to look like as it travels through the electromagnetic spectrum down a wire through a fiber optic cable across from antenna to antenna from radiosã€‚

How do we create that electromagnetic waveï¼Œ how do we understand it when we get it at the receiving antenna and get it rid of all the noise that was there and things like thatã€‚

 so very much electrical computer communication engineering sort of topicã€‚

And it's the standard is going to depend on lots of physical things because this is where you actually do some physical connection to something so we all kind you know what an internet cable looks like in that little jackie thing that plugs in that's part of the standard somebody had to sit down and say okay it's got to be you know this big and that big and this is how springy that spring clip that always breaks off is and things like that Okay so that's what's bound up in the physical wayã€‚

The layer above thatï¼Œ So the service the physical layer provides is transferring bits from one end of a wire to another end of the wireã€‚

 The data link layer uses that service to provide its mission of transferring a frameã€‚Notice againã€‚

 a different piece of dataï¼Œ a different data typeï¼Œ it will transfer a frame across the direct connection between two computersã€‚

So if the fiscal layer is worried about single bitsã€‚

 the data link layer is now worried about lots of bitsï¼Œ so here's 1500 bits in a frameã€‚

Let's make sure to get it from Bill's computer to that wfi adapter on the wallï¼Œ Okayã€‚

 that's what the data link layer's job isã€‚It's going to build the frame with some extra information in it to make it be able to do its jobã€‚

 stuff like addresses and error correction thingsï¼Œ stuff like thatã€‚

 and then it will go ahead and transmit the frameã€‚It may discover the frame got lost and retransmitted or things like thatã€‚

 there's much that can go on hereã€‚ It's not just taking the frame and asking the physical layer to send each of 1ã€‚

500 bitsã€‚It'll do thatï¼Œ but there is more stuff involved in getting the link started and things like thatã€‚

One of the significant things that the data link layer doesã€‚

That is kind of more protocolish than just sending bit by bit by bit is there has to be some way in shared data link environmentsã€‚

Like Wifi here in this auditorium where I have lots of people competing with me to send frames to that access point on the wallã€‚

 There has to be some way for the data link layer to figure out it's okay for me to send my frame or notã€‚

Okayï¼Œ am I going to step on a frame you're sending or not and what happens if I do we call this media access and there's a protocol built into the data link layerã€‚

ğŸ˜”ï¼ŒThat works that out and figures out how do we share this appropriate but how do we make sure that I can go ahead and send my frame and that I am assured that it actually got somewhere and so that I can go send the next oneã€‚

ğŸ˜”ï¼ŒAnd soï¼Œ this protocol will go ahead and have some form to be able toã€‚

 maybe we willll all take turns somehowã€‚ my turn to sendï¼Œ I will go ahead and send my frameã€‚

All rightï¼Œ the network layer then exists on top of the data link layerã€‚

 The network layer's job is to get the packetã€‚Da a datata type is called a packetã€‚

 its job is to get that packet from any computer to any other computerã€‚

This almost sounds like the datalink layer's jobï¼Œ right the data link layer's job was to get a frameã€‚

From one computer to another computerï¼Œ but those two computers had to be connectedã€‚

By the Wifi link or the Internetthernet cableã€‚now we're saying the network can get a packet from any computer in the world to any other computer in the worldã€‚

OkayNow clearly it's going to use the data link layer services to do thisã€‚

 it's going to use the wfi to get the packet from my computer to the first top routerã€‚

 it's then going to use Ethernet to get from the first top router to the second hop routerã€‚

 it's then going to use fiber optic to get from the second top router to the third hop router etc ceã€‚

 each of those is a different data link layerã€‚The network layer is going to put those together and it's going to figure out these are the 28 routers we have to go through to get my packet from here to Japanã€‚

That's the data link layers jobã€‚ I'm sorryã€‚ That's the network layers job connecting my computer to any other computer in the worldã€‚

 This is by far the most complex layerã€‚ This is the part thatã€‚

Has the most troubles because it's a distributed system problemã€‚

 Every router in the world has to kind of agreeã€‚This is the path that package should take to get from Bill's computer to Japanã€‚

Okayï¼Œ so they they're going to have to communicate amongst each other to come up with that understandingã€‚

 okayï¼Œ really complexï¼Œ really fascinating layerï¼Œ a lot of cool stuff going onã€‚

ğŸ¤§The layer above that is called the transport layerï¼Œ the transport layer job is to send segmentsã€‚

Fromã€‚Any end host to any other end hostï¼Œ and in the processã€‚

 connect the applications running on those hostsã€‚This again sounds kind of like the layer below right the network layer got packets from any computer to any other computerã€‚

The transport layer is going to get a segment from any applicationã€‚To any other applicationã€‚

So obviouslyï¼Œ it's going to use the network layer to get it from my computer to some computer in Japanã€‚

ğŸ˜¡ï¼ŒAnd then the transport layer here and in Japan will connectã€‚

My Zoom application to a Zoom server or whateverï¼Œ the actually applications runã€‚okã€‚

You'll notice that the transport layer is not actuallyï¼Œ it's using the network layerã€‚

 it doesn't have to actually communicate router router routerã€‚

 and that's why we normally skip over the routers in the middleã€‚Yesã€‚

 the packets will go through those routersï¼Œ but the transport layer doesn't really know about where the routers are and what's going along with themã€‚

ğŸ¤§The transport layer store we have these different services we talked about these last timeã€‚

 there is a reliable connection oriented serviceã€‚There is a best effort deliveryï¼Œ connectionã€‚

 less serviceã€‚And technicallyï¼Œ there are other transport layer protocols as wellã€‚

 but we often think of just these twoã€‚Sureã€‚Above the transport layerã€‚

 there are a couple other layers in our modelã€‚ There's a session layerï¼Œ and a presentation layerã€‚

And it turns out both of those are better implemented in the actual applicationã€‚

If you want some session to handle logins and things like thatï¼Œ you do that in your applicationã€‚

 you don't have the network do that for you if you want your data to be presented in some way that it doesn't matter what machine you're running onã€‚

 you use Unicode in your in your application insteadã€‚

 So those are things that are found into the applications and so we typically ignore themã€‚

So those are two layers from the seven layer cake we don't use instead we just hop up the application and say ohã€‚

 that's where we actually get our network service rightï¼Œ that's where I get my emailã€‚

Transmitted when my email client needs to talk to an email serverã€‚That's where those liveã€‚

 And they will use the transport layer to make that connection to send the message they want to send from one to the otherã€‚

 And so we're going to end up with this five layer cakeã€‚

That we're going to talk about for the rest of the semesterã€‚

 we're going to think about networks in this modelã€‚

Which is handy because pretty much every network engineer thinks about the networks in this modelã€‚

 and so that means you can talk to other people well and you can sayï¼Œ ohã€‚

 this is a layer free device and they know what you're talking about because they know this modelã€‚

Okay so very important you understand that model as wellã€‚Any questions on thatï¼Ÿ

Here's your last objectives for todayï¼Œ I'd recommend again that you go through and take a look and make sure you actually can do all these things if you can'tã€‚

Ask me nowï¼Œ ask me on piyazzaã€‚Okayï¼Œ come to office hoursã€‚ Let's figure it outï¼Œ okayã€‚Already thenï¼Œ ohã€‚

 on So weã€‚So the original reason about that this whole sort of like cake set got but was like implemented was to sort of reduce the amount of like periodability like in these sort of like low over playersã€‚

 And then I was likeï¼Œ would it be correct to think that this sort of like proprietarys that sort of got pushed up into the application there in this bottom there is not standardã€‚

So I'm not sure I'd agree that it was to reduce variability unless I'm maybe don't understand what mean by variabilityã€‚

 I think it was more of usã€‚Implementation that'sã€‚Yeahï¼Œ yeahã€‚

 so I guess one of the advantages of having this model is you then can of having a layered architecture is that in theory you can pull out an implementation of a particular layer and insert another one okay and so for instanceã€‚

 we do that at the data layer and link all the time I had a wfi from here to there right I could also just run a cable from here to there and have ethernet between them and I've just swapped out that layerã€‚

Okayï¼Œ and so depending on where you are proprietaryilyï¼Œ you knowã€‚

 you can still sell ethernet equipment or token ring network equipmentã€‚

Be part of the data link layer as long as you can fulfill the protocols that are availableã€‚Okayã€‚

Some of those layersï¼Œ by the wayï¼Œ harder to pull up than others were having a real trouble pulling up the IPV4 version of the network layer and putting in IPV6ã€‚

 but we'll get there eventually maybeã€‚The questions meanoo onooI apologize I I should have repeated that questionã€‚

 Sp Young was wondering kind of how the layers work in terms of the corporations that were involved and this idea that ISO was trying to standardize corporate behavior and how those didã€‚

Good aã€‚Sorryï¼Œ thank you for letting me knowã€‚Just somebody on Zoomï¼Œ yell repeat the questionã€‚

 and I will repeat itã€‚Okay Alrighty then so all you in zoom landã€‚

 I hope you have a wonderful day I'll see you next Tuesday we'll pick pick this conversation up have a great weekend have a goodã€‚

ğŸ˜Šï¼ŒLabor Day well three a weekend wellã€‚You guys in the in the audienceï¼Œ thank you for showing upã€‚

 Thanks for providing in the audienceã€‚ We'll see you as wellã€‚ Have a great weekend thereã€‚ğŸ˜Šï¼ŒByeæ‹œã€‚å¥½ã€‚

Sureã€‚è®²éƒ½å…¶å® o k ã€‚like step 23 has like both we all longer links is than the actual step to see in YouTubeã€‚

å—¯ã€‚å—¯ã€‚Yeahã€‚Shotã€‚This one if you look at all of them are shorter right so remember what's happening here trace Ro is measuring a probe and that one for some reason that one took 192 milliseconds to get to the 23rd hop and then come backã€‚

And then after that came backï¼Œ then it sent the 24th probe outã€‚

 and so something happened in the weather of the internet to make that one go fasterã€‚Okayã€‚

 and so that's the way you have to be thinking when you look at this is realizingï¼Œ ohã€‚

 network's really dynamicï¼Œ you knowï¼Œ stuff happensã€‚

And so very much I'm in of the opinion that these are order of magnitude sort of answers right and oftentimes more interesting where they go than how long it takes to get thereã€‚

 things like thatï¼Œ I've had a lot of funland tracer route when I'm traveling and like oh I'm in Shanghaiã€‚

 I wonder you know what the route is know does it go down to Singapore first you know who knows right and you can get a feel for some of that but at no point should you be like oh you know it's 183ã€‚

011 milliseconds you know you know they should probably just report that as 180 millisecondsï¼Ÿå¯¹ã€‚Yeahã€‚

 sirã€‚I got like clear my firstã€‚Howre when theyã€‚Does pasts yeahã€‚Just that routeNoã€‚

 we'll talk more about this with Tra Ro butã€‚When you're sendingã€‚

 you don't actually send it to the third routerã€‚Because you don't know what the third router isã€‚

 The network layer knows what the third layer isã€‚ So all these packets are actually being sent to Japanã€‚



![](img/37122ede236b2579448af31f30fcb11b_24.png)

But we're sayingï¼Œ heyï¼Œ after one hopï¼Œ could you just drop this packet and give me a reply and there's a way to do that in the protocol okayã€‚

 and so at no point do you sayï¼Œ ohï¼Œ I'd like to send it to podï¼Œ Iï¼Œ CIHï¼Œ whateverã€‚Okayã€‚

 and so we're all going that wayï¼Œ and that's why maybe some of these come up because some the network changed and they ended up going down a different pathã€‚

And we don't knowã€‚å¯¹å•Šã€‚All rightï¼Œ have a great day everybodyï¼Œ see you laterã€‚

