# Âç°ËÄêÂü∫Ê¢ÖÈöÜÂ§ßÂ≠¶ 14-740 ËÆ°ÁÆóÊú∫ÁΩëÁªú Fundamentals of Computer NetworksÔºàFall 2020Ôºâ - P3ÔºöLecture 3 Design Principles - ___main___ - BV1wT4y1A7cd

Oh„ÄÇYeah„ÄÇÂØπ„ÄÇ

![](img/85cf5cca049c270d6286a39ee6331ba5_1.png)

This is 1474 welcome everybodyÔºå we're getting a slightly larger crowd in the economy every time it seems„ÄÇ

This is good„ÄÇWe aren't yet anywhere near our capacity limits„ÄÇ So I'm not doing any of the formal„ÄÇ

Pooning kind of mechanisms that I think I'm supposed to to ensure that we don't overflow capacity„ÄÇ

 we'll see what happens as time goes on„ÄÇSo welcome to our second week of classes„ÄÇ

 hopefully you all had a„ÄÇRelaxing long weekend and we're able to get away from class a little bit and do some other cool stuff„ÄÇ

 You knowÔºå I got my lawn modeÔºå things like that„ÄÇüòäÔºåBut here we are„ÄÇOn lecture three„ÄÇ

 so let's go ahead and get started„ÄÇÊ≤°Êúâ„ÄÇ

![](img/85cf5cca049c270d6286a39ee6331ba5_3.png)

![](img/85cf5cca049c270d6286a39ee6331ba5_4.png)

So a good oneÔºå aren'tÔºüAll rightÔºå so today we're going to take another look kind of at the big scope of things last lecture we talked about the actual architecture and today we're going to look at some of the principles that went into designing the internet and making it what we know and love today before we get into that i've got a couple of administrative points to work on„ÄÇ

First offÔºå I hope nobody worried about a paper review for the salttzer paper that was assigned as reading„ÄÇ

 but not assigned as a paper reviewÔºå but I would like to mention that there is a paper review due for next time„ÄÇ

It's not quite a„ÄÇA conference paper„ÄÇBut it it's labeled Norton 2010„ÄÇ

 and I want to point out in particularÔºå there also is a Norton 2003 in on the website„ÄÇ

 you'll be reading it laterÔºå make sure you get the correct one for your paper review„ÄÇ

It's about peeringÔºå yesÔºå yes„ÄÇÂóØ„ÄÇI also have asked you to take a look at an RFC and I chose this almost at random„ÄÇ

 the point is not for you to understand all the material in that„ÄÇ

The point is for you to understand what an RFC looks like and recognize that it is something that you should not be scared of if I mention it in class and say„ÄÇ

 oh yeahÔºå this was standardized in some RFCÔºå you can go read those those are incredibly readable documents„ÄÇ

 especially I've done my share of reading standards documents„ÄÇThere are plenty of them in the world„ÄÇ

 the RFCs tend to be the most readable of all they're very accessible„ÄÇ

 and so if you want to know the details of you know how TCP manages the timers„ÄÇ

It's there in the RFCs and you can go read it and so this one is a is an overview RFC„ÄÇ

But I'd just like you to open it upÔºå look at the kind of the structureÔºå what it looks like„ÄÇ

 maybe read a couple paragraphs here and thereÔºå you will not be tested on the details of this particular RFC„ÄÇ

Okay„ÄÇYour paper view for Clark 88 has been graded mostly so true all all yeah has been graded so go take a look on you can look at your grade„ÄÇ

Which I'm not sure I don't think I've linked back to Canvas yet„ÄÇ

 but it's on grade scope and you should be going there anyway if you have questions about why you got that particular grade„ÄÇ

 that's where the TAs will be providing feedback to you„ÄÇAnd so go take a look there at„ÄÇ

Not only what your score is„ÄÇBut take a look at the feedback you're going to be putting in lots of paper reviews in this class„ÄÇ

 it would be nice for you to know what is being expected so that next time you can do it properly„ÄÇ

I want to make a couple of points based on what we saw„ÄÇ

 one is remember the paper review is supposed to be short and sweet we're not grading you in quantity„ÄÇ

 In factÔºå I think a three page paper review„ÄÇIs way too much„ÄÇ

We're not taking points off for being too longÔºå although it may come out in other ways„ÄÇBut certainly„ÄÇ

 this should be something that isÔºå you know„ÄÇHalf a page to a page length kind of thing okay„ÄÇ

 don don't go overboard„ÄÇAlsoÔºå you're talking about a paper that you know which paper you're dealing with„ÄÇ

 there's no need to quote it„ÄÇOkayÔºå you can sayÔºå you knowÔºå this topic was discussed sort of things„ÄÇ

 but there's absolutely no reason to throw a paragraph from the paper into the paper review„ÄÇ

Unless if you're trying to make it look longer„ÄÇAnd the previous point says that's not a good idea anyway„ÄÇ

 so don't do thatÔºå okayÔºüAny questions about the paper review itselfÔºü

Yes I should actually be paying attention to have a chat window open so I can ignore chat deliberately„ÄÇ

ÂóØ„ÄÇAllright„ÄÇYeah„ÄÇSo last time we were looking at the„ÄÇThe layers of the architecture„ÄÇ

 I'm trying to see what it meant for there something to be a layered architecture„ÄÇ

 why the layering works for networks and what each piece actually has„ÄÇ

 we talked about the seven layer cake model and we decided we didn't like two of the layers so we're going to have five layers to the layer cake that we think about„ÄÇ

And I showed you this picture„ÄÇRightAnd this is„ÄÇIt's really key„ÄÇ

 it's hard to overstate how important this model is in networking„ÄÇ

Everybody thinks about it and uses it and makes decisions based upon this model„ÄÇ

 so understanding how it works„ÄÇIs actually incredibly important and yet pictures like this oftentimes don't help and they obscure and they're like„ÄÇ

 what are these arrows goingÔºå you knowÔºå how did the arrows go from one end to the other end and what does that mean„ÄÇ

 things like that„ÄÇNowTitionally in this classÔºå this has been the point where we've had a class demonstration that I've labeled the Dorkkey class demonstration„ÄÇ

 where I would actually bring eight people from the audience up to play the different layers and„ÄÇ

Actually work out how messages get transformed through the staff„ÄÇ

I couldn't figure out how to do that in a CoVId social distancing fashion„ÄÇ

 And I was actually had trouble„ÄÇ I couldn't even dig up the videos from last year to to do that for you„ÄÇ

 So I'm going to play the Dorky class demonstration todayÔºå and I'm going to do all parts of it„ÄÇOkay„ÄÇ

 so we'll see how this goes„ÄÇSo normally what I would do is I'd bring students up and I'd hang these big signs around them and say you know that they're the application layer or the transport layer or something like that„ÄÇ

 so we're going to have to imagine that I make different people like one for each of my personalities or something like that and I'm going to start off„ÄÇ

With„ÄÇLet's go ahead and bring up this picture for this„ÄÇ

 I'm going to start off with the application layer and we're going to send a message in a particular message I have„ÄÇ

 let's imagine I am tweeting out this particular message„ÄÇOkay and so that means on my computer„ÄÇ

 I would have an application that wants network resources„ÄÇ

 and so therefore it is in the application layerÔºå it would beÔºå for instanceÔºå a Twitter client„ÄÇ

Where I have typed this message inÔºå and what I want to do is transform this message and get this message delivered to a server at Twitter's corporation or under Twitter's control that can do something with this message„ÄÇ

OkayÔºå so that's the entire point of this„ÄÇThis network operation is to move this message from my client application on my laptop over to a server application on some server in a data center somewhere„ÄÇ

GuysÔºå we want to get this communication going„ÄÇAnd so what the application layer does it says it takes this message right this is a message at this point„ÄÇ

 it is some data that the application layer wants to transform and the application layer would basically hand this off to the transport layer„ÄÇ

OkayAnd so and the application layer would tell the transport layer say hey„ÄÇ

 here is a message that I would like you to send for me and I would like you to get this to the Twitter server computer that's the hardware version of where it's supposed to go„ÄÇ

 but also I will tell you I want it to go to the Twitter server app so there's some application running on Twitter server„ÄÇ

 that's where this message is supposed to go„ÄÇFrom the applications perspective„ÄÇ

 from me as a Twitter client„ÄÇI imagine that this message just gets delivered somehow„ÄÇ right„ÄÇ

 I hand it off the transport layer„ÄÇ The transport layerÔºå you makes it across the Internet somehow„ÄÇ

 I don't care„ÄÇRightÔºå I just want this application to eventually end up„ÄÇ

On this server given to the server app„ÄÇThat's kind of what that top arrow means in this picture„ÄÇ

From the application perspectiveÔºå it's like the messages just are going from application to application„ÄÇ

Does make sense„ÄÇOf courseÔºå there is no way to just„ÄÇ

You magically make this message appear somewhere else„ÄÇ

 so we need to use the services of the layered architecture„ÄÇ

 the services below so the application is going to ask the transport layer to do this for it„ÄÇ

 the transport layer is going to make it appear as if this message just magically got transported to a server somewhere and handed off to a server app„ÄÇ

S good„ÄÇAll rightÔºå so what happens with the transport layer„ÄÇ

 I'm now the transport layer on the senderÔºå I have been handed this message„ÄÇ

And I've been told that this message needs to go to a particular destination„ÄÇSo what do I doÔºå Well„ÄÇ

 I make this into a segment„ÄÇ What is a segmentÔºå A segment is a particular data structure that the transport layer uses„ÄÇ

And I'm going to represent that by this business size envelope„ÄÇ

The transport layer is going to send segments„ÄÇSegments are well defined„ÄÇ

 They are of this size or smaller„ÄÇ OkayÔºå they have particular writing on them„ÄÇ

That is in transport level language„ÄÇOkayÔºåAnd so we're going to take this message that was handed to us by the application layer and we're going to put it into a segment„ÄÇ

If we're going to create a segment out of it to send the message now immediately we see we have a problem„ÄÇ

Our message is too bigÔºå it will not fit in a single segment„ÄÇ

So one of the things the transport layer does„ÄÇIt has scissors„ÄÇ

It will take our message and it will go ahead and chop it„ÄÇüò°„ÄÇ

Into pieces that are small enough to fit in segments„ÄÇOkayÔºå so it will take„ÄÇ

Piece of the message and itll put it into a segment„ÄÇNowÔºå that segment holds that data fine„ÄÇüò°„ÄÇ

That segment also has what's known as a header„ÄÇWhich is some space to write some data on„ÄÇ

 so I'm going to represent that by writing on the actual envelope here„ÄÇAnd the things I would write„ÄÇ

 I would sayÔºå for instanceÔºå that this is going„ÄÇI need to give it some destination„ÄÇ

 I'll say this is going to the Twitter app„ÄÇOn the Twitter server„ÄÇOkay„ÄÇ

 so I that's information I was given„ÄÇFrom the„ÄÇFrom the application layer it was given those pieces„ÄÇ

 and those are going to be important to get this segment delivered to the right place„ÄÇ

The other thing I have to do is have to keep track of which this is I've put my message into parts„ÄÇ

 and so we're going to end up sending multiple segments„ÄÇ

 and so I will say that this is number one of two„ÄÇAlso on the actual segment„ÄÇOkay„ÄÇ

I'm going to do the same thingÔºå of course„ÄÇFor my second piece of the message„ÄÇ

 that also goes into a segment„ÄÇI create a segment out of that and I say two„ÄÇ

And this is number two of two„ÄÇSo I put my address on here as well as the numbering system„ÄÇOkay„ÄÇ

 so a couple things that the transport layer has to doÔºå the transport layer creates segments„ÄÇOkay„ÄÇ

 in order to do thatÔºå it will chop apart the message we get„ÄÇ

 there are a couple other things that the transport layer does that we'll be talking about in a week or two as well„ÄÇ

And now these then get handed to the network layer„ÄÇüò°ÔºåOkayÔºå the network layer below us„ÄÇ

Is going to give us the service of getting this to the server computer„ÄÇOkay„ÄÇ

 the actual hardware thing„ÄÇ And so we're going to hand these to the network layer„ÄÇ

 We typically do them one at a time„ÄÇ of course we'll say heyÔºå network layer here take this thing„ÄÇ

 get it to the Twitter server right and then the transport layer will then repeat that with the second segment„ÄÇ

 hey network layerÔºå please get this to the Twitter server„ÄÇ

And at that point the network layer the transport layer on the sending machine is done Any questions so far about what's happeningÔºü

So I wantÊòØ„ÄÇSo„ÄÇW says give the second to the server as opposed to getting the entire application„ÄÇ

Yeah so the network layer's mission is to move data from any hardware host to any other hardware host so you're right„ÄÇ

 this gets a little confusing because I have a Twitter app and a Twitter server right and so there's an application running on a server right there we're going to tell the network layer we're not going to tell the network layer anything about the application„ÄÇ

üò°ÔºåWe're going to tell the network layerÔºå please get it to that hardware over there„ÄÇüò°ÔºåÂïäÔºåÊ≤°Êúâ„ÄÇYeah„ÄÇ

 we'll deal with that in a minute when it gets the other sideÔºå but basically you know„ÄÇ

 the network layer there on the far rightÔºå when it gets the data„ÄÇ

 it will pass to the transport layer toÔºå heyÔºå I got this for youÔºå you should do something with it„ÄÇ

And the transport layer then will its job will be to get it to the right application„ÄÇ

Do we have a question winner Oh I'm sorry I forgot to repeat the question the question was about this confusion of what the mission is and how that aligns with the fact that I have an application and a server„ÄÇ

Okay and in my exampleÔºå I'm naming them the Twitter server and the Twitter application and so that can get a little confusing keep in mind there applications are the software running on the servers which are hardware„ÄÇ

Lese for this„ÄÇThis context„ÄÇOkay„ÄÇAll rightÔºå so now I'm the network layer„ÄÇ

The network layer got handed this segment saidÔºå heyÔºå please deliver this to some computer„ÄÇ

The network layer does not deal in segments„ÄÇThe network layer takes this segment and puts it into a packet„ÄÇ

This is a packet„ÄÇOkayÔºå it's different sizesÔºå it's designed such that the segment will fit inside it„ÄÇ

OkayÔºå we'll learn later about some fragmentation if it doesn't„ÄÇ

 so the network layer is going to take this„ÄÇThe segment put it into a packet„ÄÇAndÔºå again„ÄÇ

The packet includes some header information that the network needs to get it to the right place„ÄÇOkay„ÄÇ

 for us todayÔºå that is merely a hardware destination„ÄÇYeah„ÄÇ

So I'm going to put onto the packet enough information for the network layer to get it to its destination„ÄÇ

 in this caseÔºå just the hardware„ÄÇLocationÔºå so we're going to do that for each of the segments that come in this segment also goes into„ÄÇ

A packet„ÄÇThat packet also marked with a„ÄÇYeah„ÄÇWith a destination„ÄÇOkay„ÄÇÂõ†‰∏∫‰ªñÂèØ‰∏çË¶Å„ÄÇÂóØ„ÄÇ

A packet will only contain a single segment rightÔºå see one segment fits in here„ÄÇ

 there's no space for anything else„ÄÇOkayÔºå the network„ÄÇ

Layer doesn't bother with noticing that these are going to the same place and trying to combine them it's going to assume that the transport layer has has already done the job of cutting them up into segments and done that well enough that these will each fit into a packet and there won't be any room in the packet for anything else„ÄÇ

üò°ÔºåOkayÔºå so the network player is not going to bother trying to combine them or anything like that„ÄÇ

The question is are the packets dynamically sizedÔºå yes they are„ÄÇ

 the packet will be some set of header spaceÔºå whatever we need here„ÄÇ

 plus as many bytes as necessary to fit a segmentÔºå so if you give me a small segment„ÄÇ

 then I'm going to end up with a smaller packet„ÄÇThen if the transport layer had given me a large segment„ÄÇ

YesÔºå and that's true for segments as well„ÄÇ segmentsments can be of various sizes„ÄÇ

 They all have a maximum length„ÄÇAnd then some amount of header space to to for all this writing things So there's kind of a minimum minimum maximum so is the reason for like the change to segments to packets its that for the header information because it goes to hardware or otherwise like what's the reason for it and so the question is„ÄÇ

Why am I making such a big deal about segments being different from packetsÔºüclose enoughÔºå yeah„ÄÇ

 these are different things„ÄÇ The format is very different and who owns it and thinks about and uses it as very different„ÄÇ

 and mostly a segment has to fit inside a packet„ÄÇAnd so they can't be the same thing„ÄÇ

If one has to go inside the other that it won't doÔºå I can't put a packet in a packet„ÄÇThat way„ÄÇ

 and I don't need to because the way the network is structured„ÄÇ

At this point I guess I should point out I am more pedantic than some about this difference„ÄÇ

 I think it is very important to know that a segment is different from a packet„ÄÇYou will read„ÄÇ

And here people using the word packet for all of this„ÄÇOkayÔºå and so in those cases„ÄÇ

 you need to be able to distinguish the context„ÄÇAnd realizeÔºå ohÔºå somebody is saying„ÄÇ

 that's a wfi packet„ÄÇAnd you in your brainÔºå you should be sayingÔºå ohÔºå wait a minute„ÄÇ

Bnas told me that's a bad thing to thinkÔºå Wifi is a data link thingÔºå that should be a Wifi frame„ÄÇ

Not a wfi packetÔºå but many people are very loose about the terms„ÄÇOkay„ÄÇ

 I think they're important because there are different things„ÄÇDealt with by different groups„ÄÇÂõ†‰∏ãÂÖ®ÂçÅÂêßÂàÜÈíü„ÄÇ

„ÅØ„ÄÇSo theÔºå it's not so much that we're trying„ÄÇWellÔºå I guess the advantage is if I had a fixed size packet„ÄÇ

 then I would always have to sendÔºå let's sayÔºå 1Ôºå500 bytes„ÄÇOkay„ÄÇ

 and that would mean that if the segment that was given to me was small was representing a single keyboard press and had a single character in it„ÄÇ

 then I would have to end up sending more data than necessary„ÄÇ

And so because we sometimes want to send a lot and sometimes want to send small„ÄÇ

 we go ahead and allow ourselves to have variable size segments and packets„ÄÇOkay„ÄÇAll right„ÄÇ

 so the network layer„ÄÇSo far this seems very much like the transport layer right the transport layer took something„ÄÇ

 put it in an envelope wrote on the envelopeÔºå the network layer took something„ÄÇ

 put it in an envelope wrote on the envelopeÔºå but now the network layer has to do its hard job„ÄÇ

 which is figure out how to get this somewhere„ÄÇOkayAnd so the network layer is going to look at this packet that's come in and have to figure out which of the possibly many connections that we're connected to should this get sent down now from an end host„ÄÇ

 this typically is very simple right my laptop is only connected via wfi to that w-fi access point on the wall so the network layer in my laptop doesn't have to do a whole lot of work it's got to figure out should this stay on this laptop because it's possible to send this packet to another application running on this laptop„ÄÇ

Happens sometimes„ÄÇOkayÔºå but most of it's just going to beÔºå ohÔºå this is for the outside world„ÄÇ

 let me send it that way„ÄÇÂìé„ÄÇAnd that may be what's happening here on the end„ÄÇ right„ÄÇ

 That network layer will send the packet„ÄÇTo the wfi access point on the wall„ÄÇ

 which acts kind of like a routerÔºå which will ventÔºå oh„ÄÇ

 that guy then has a harder job right because that guy is going to have more choices„ÄÇOkay„ÄÇ

Maybe they're simpleÔºå I don't know the layout of the topology of this roomÔºå but at some point„ÄÇ

 we're going to get to routers in the middle of an internet„ÄÇThat have a much harder choice to make„ÄÇ

OkayÔºåAnd what they're going to do is they're going to have this address table„ÄÇ

This address table will have appeared„ÄÇNot quite by magic„ÄÇ

 will have appeared through running some protocols and communicating with the routers around it to decide which of the many wires that router is connected to should„ÄÇ

Packets be sent to in order to get to a particular destination„ÄÇ

So the table inside each router is a table of destinations„ÄÇüò°„ÄÇ

And the outgoing link that they should be sent on Okay so in this case I've got a pretty simple router right this one's just got a couple of different wires leaving it and we're only worried about a couple of addresses for a real world router in the middle of the internet that might have1 hundred or so wires leaving it„ÄÇ

OkayÔºå it will actually know be able to look up any address of any computer in the entire world„ÄÇ

And figure outÔºå ohÔºå this is the Twitter computer here„ÄÇThis is the wire it should be leaving on„ÄÇOkay„ÄÇ

 in our caseÔºå it would be you some router has a connection to things on the right and the things up and left and down and over there„ÄÇ

 in this case we're going to take the packet that comes in and we're going to look at the packet and packet it says it's going through the Twitter server„ÄÇ

 we're going to look that address up in this table and sayÔºå oh„ÄÇ

 this needs to get sent out the wire to my left„ÄÇOkayÔºå so out to the leftÔºå we're going to send this„ÄÇ

Now how do we send thisÔºüOnce the network layer has decided that this packet needs to go out a particular wire„ÄÇ

 it's going to hand it off to the data link layer that's in charge of that particular wire„ÄÇ

That particular wire could have any kind of technological means of transmitting bits right„ÄÇ

 it could be ethernetÔºå it could be WifiÔºå it could be satellite communications or fiber optics„ÄÇ

 or there are manyÔºå many choices here each of those data link layers works a little bit different„ÄÇ

But they all are going to take this packet that's given to them by the network layer and provide the service of connecting it to the next computer line„ÄÇ

Okay so for us now now I'm going to be the data link layer„ÄÇ

 on the data link layer on some router somewhereÔºå I've just been handed this packet and told to get it to the other end of the physical connection I have„ÄÇ

So I'm going to take this packet and I'm going to make it into a frame„ÄÇThis is a frame„ÄÇ

 frame is biggerÔºå a frame encapsulates my packet„ÄÇ I can put my packet into the frame„ÄÇ

And then the frame provides space for me to write some stuff on it to help me communicate this„ÄÇ

Down the wire„ÄÇ And what that is is going to vary„ÄÇ A Wifi frame looks different from an ethernet frame looks different from a bi optic frame„ÄÇ

One of the things that's going to be very important that we will usually want to do at the data link layer is to make sure that this data gets received properly„ÄÇ

And so the data link layer sender„ÄÇWe'll usually do some math„ÄÇOkay„ÄÇ

 look over all the bits that are in this frame and come up with something we call a check some or a cyclic redundancy check some some value based upon that map and I have a hard time doing math on„ÄÇ

Thiss gel atoms here„ÄÇ So I'm going to imagine that the math I gave when I looked at this frame told me what color it was„ÄÇ

 right So right nowÔºå as a senderÔºå I would look at this frame I've constructed and I would sayÔºå oh„ÄÇ

 this thing is white„ÄÇOkayÔºå that's the math I do would come up with the answer white„ÄÇ

 this thing is white„ÄÇAnd then I would take this and I would send it„ÄÇDown the wire through the ether„ÄÇ

Up to a satelliteÔºå whateverÔºå however we're getting this somewhereÔºå I would take this„ÄÇ

 and I would send it„ÄÇNowÔºå thisÔºå unfortunatelyÔºå I can't show you this is I in some ways„ÄÇ

 the best part of this Dorky demonstration is that we would pull out„ÄÇ

Two cups on a string to be our physical layer okay we would hand this down to the physical layer and we would actually connect this to the string and move it down from one side to the other really hard for me to show that as a single person up here so you're going to have to use your imagination I'm handing this down to the physical layer the physical layer is creating the electromagnetic waves that will take this entire frame and send it down to the other end of the wire„ÄÇ

So now on'm the data link layer on the receiving siteÔºå the fiscal layer has just handed me this„ÄÇ

And saidÔºå heyÔºå here's a frame for youÔºå what should you want to do with thisÔºüWell„ÄÇ

 we're going to check the math„ÄÇ We're going to do the same kind of math over the entire contents of this frame„ÄÇ

And in this caseÔºå we're going to sayÔºå ohÔºå the math tells me„ÄÇ

 what does the math tell me it tells me that this is white„ÄÇ

And I'll look and see in the frame it's written what color it should be„ÄÇüò°ÔºåIt's quiteÔºå therefore„ÄÇ

 this is a good brain„ÄÇOkayÔºå now„ÄÇThe back on the sending sideÔºå I still have one more packet to send„ÄÇ

The the sender„ÄÇSide data length layerÔºå we'll go ahead and create a frameÔºå do the same kind of math„ÄÇ

 OhÔºå look at thisÔºå this is also white„ÄÇWe'll put it onto the wireÔºå that's the physical layer„ÄÇ

 transmit it to the receiver„ÄÇThe receiver getting this would do the same math„ÄÇ

 and if I looked at this and decided that this was red„ÄÇ

 that means something happened to the bits in transit„ÄÇBecause the math tells me it's red„ÄÇ

 but it's written that it should be white„ÄÇOkayÔºå then„ÄÇThat means a bit got flipped somehow„ÄÇ

 Something damaged us„ÄÇ OkayÔºå so there was some noise in the electromagnetic spectrum„ÄÇ

 Something happened„ÄÇ The thing got truncatedÔºå not all the bits got here„ÄÇ Who knows„ÄÇ

If it turns out to be read„ÄÇWe can't accept this as a good frame and depending upon the data link layer„ÄÇ

 we could either have it be retransmitted„ÄÇUntil we get one that looks white or other data link layers just start away„ÄÇ

OkayÔºå but we can't take one that the math shows that they're bits flipped and give it to the network layer„ÄÇ

As if it were a goodÔºå a good packet„ÄÇOkay„ÄÇDoes make sense„ÄÇ

The data link layer on the receiving side then gets this thing„ÄÇIt gets a frame„ÄÇTakes the„ÄÇ

The data out of the frame decapsulates it and ends up with a packet„ÄÇOkay„ÄÇ

 the data linklay doesn't know what this isÔºå can't read this doesn't do anything with it other than hand it up to network layer and say„ÄÇ

 heyÔºå network layerÔºå I got something you should look at„ÄÇüò°ÔºåThe network layer looks at this and says„ÄÇ

 ohÔºå this packetÔºå which I now understandÔºå the network layer can read this„ÄÇAnd sayÔºå oh„ÄÇ

 this is going to the Twitter server„ÄÇAnd depending upon where we are in our picture„ÄÇ

 maybe we have just been received at another router and that router will again look up Twitter server„ÄÇ

 figure out which direction it goes„ÄÇSend it to the data link layer who puts it in another frame and transmits it to the next layer„ÄÇ

Let to the next by next top„ÄÇOr it could be that we're now finally at the very left hand side of this picture„ÄÇ

Yeah„ÄÇYou're right„ÄÇAt which case this has been delivered„ÄÇThe network layer will sayÔºå oh„ÄÇ

 Twitter serverÔºå that's me„ÄÇI don't have to do anything with this„ÄÇ I don't have to forward it anymore„ÄÇ

 All I have to do is take„ÄÇThe content of my packet out and give it to the transport layer„ÄÇOkay„ÄÇ

Of courseÔºå this continues with our other frame as well„ÄÇThe frame comes in„ÄÇ

 in this case we do the math who says whiteÔºå it is white„ÄÇWe've gotten this correctly„ÄÇ

 the data link layer pulls this outÔºå this is some dataÔºå let's give it to the network layer„ÄÇ

The network player saysÔºå ohÔºå this packetÔºå I understand this packet„ÄÇ

It's going to the Twitter server and that's meÔºå therefore it's where it should be„ÄÇ

 let's take our segment out„ÄÇAnd give it to the transport layer„ÄÇDoes all make sense„ÄÇ

The transport layer has gotten these two segments„ÄÇThat have been candid by the network layer„ÄÇ

Thanks sure we understand the context„ÄÇ We're now at the destination machine„ÄÇAnd the transport layer„ÄÇ

 I am now the transport layerÔºå the transport layer has just been handed a segment„ÄÇOkay„ÄÇ

The transport layer is going to look at this and sayÔºå ohÔºå okayÔºå I have a segment„ÄÇI know segments„ÄÇ

 I can read this and ohÔºå this is number two of two„ÄÇOkayÔºå what can we do with this at this pointÔºü

Can I give this to the applicationÔºüClearlyÔºå I can't do of the segments to the application„ÄÇ

 Could I take the data out of it and give the data to the application„ÄÇËøôÊúâÁÇπ„ÄÇYes„ÄÇ

 I'm on the end server there in Twitter's data center„ÄÇCan I give this to the applicationÔºü

But it would be out of orderÔºå the application would not be able to read this„ÄÇüò°„ÄÇ

This is not the order the bits were sent to me„ÄÇüò°ÔºåSo the transport layer is not going to do„ÄÇ It says„ÄÇ

 lookÔºå number two of twoÔºå And I haven't gotten number one of two yet„ÄÇSo let's set this aside„ÄÇ

 let's just put this in a little buffer somewhere and wait„ÄÇOkayÔºå not do anything with that yet„ÄÇ

A minute laterÔºå hopefullyÔºå the network layer hands us another segment„ÄÇAnd in this caseÔºå we sayÔºå oh„ÄÇ

 number one of twoÔºå number two of twoÔºå these go together„ÄÇOkayÔºå I now can take the data out of them„ÄÇ

This is the number one of two„ÄÇ This is the number two of two„ÄÇRightÔºå iss this a message„ÄÇNo„ÄÇ

 this is not yet a message„ÄÇThis is the data from two segments„ÄÇBut they're separate„ÄÇ

So one of the things the transport layer does„ÄÇit has tape„ÄÇ

It will take these different segments that have been sent and it will put them back together„ÄÇ

So we'll go ahead and take„ÄÇTake those individual pieces of data„ÄÇ

Tappe them back together to make a message out of it„ÄÇ

And now we can take this message and give it to the application layer„ÄÇEdric„ÄÇ

the transfer they by summary„ÄÇThe segment so that you can get your„ÄÇTo segment messages„ÄÇ

Different to separate lesson„ÄÇYeahÔºå so we'll talk more about this when we get to transport layer„ÄÇ

 let's just for now assume that there will be a different set of numbers coming in for each of our applications„ÄÇ

Okay„ÄÇNow the application is going to have to deal withÔºå it got a messageÔºå got another message„ÄÇ

 got a different message and being able to separate those and know what to do with them„ÄÇ

The transport layer1„ÄÇNoow whether this is the whole thing or notÔºå it'll just sayÔºå hey„ÄÇ

 here's some data for you„ÄÇI guess the question is my„ÄÇFrom the transport„ÄÇ

What is it something that Okay and I apologize to people in Zoom I once again have forgotten ver repeat the question the question is how the receiving transport layer is getting all these segments coming in one after another that we're putting together into messages is there anything that keeps the transport layer from putting the next segment on the bottom of this right if I got number a third segmentsÔºü

And attached it to this and gave it to the application that might be different somehow than this two segment case„ÄÇ

And the answer is noÔºå the transport layer doesn't know about any message boundaries„ÄÇ

 it just knows I'm receiving all this dataÔºå one chunk of dataÔºå second chunk of data„ÄÇ

 I know I got them in the correct orderÔºå and I'll give them to the application in the order they were received„ÄÇ

üò°ÔºåOkayÔºåThe application is going to have to figure out of these bunches of segments it's getting„ÄÇ

Which ones are different tweaksÔºå for instanceÔºå and so it will have to put some structure around this data to understand those pieces„ÄÇ

Á≥ª„ÄÇI a question two different time„ÄÇ‰Ω†ÊòØ„ÄÇRight okayÔºå so back on the transmitting side„ÄÇ

 right the application handed some data down to the transport layer„ÄÇ

And the transport layer decided to cut this into two pieces„ÄÇ

 it could have cut it into three or four or five segments„ÄÇRightÔºå and so the question is„ÄÇWho decidesÔºü

Does the application get to say or does the operating system what's called the recognize that the transport and network layer are both in the operating system data link layers„ÄÇ

 probably some drivers and some hardware on the machine so the answer is the„ÄÇ

Mostly the transport layer decides how to cut it up„ÄÇüò°„ÄÇ

Now there are a couple of things you can do if for instance„ÄÇ

 you don't want the transport layer to like wait around to get more data to fill out a segment„ÄÇ

 which the transport layer might want to do„ÄÇOkayÔºå and that's not good for a real time application and so there are ways to tell the transport layer„ÄÇ

 heyÔºå as soon as I give you some dataÔºå send it out„ÄÇOkayÔºå so that if I send some small data„ÄÇ

 it'll go as a single pieceÔºå but in generalÔºå the transport layer looks at this data and decides how to chop it up„ÄÇ

And normallyÔºå it„ÄÇChps it by filling as big a segment as it can out of each piece of data„ÄÇ

There's one piece we haven't covered yet„ÄÇOkay and that isÔºå againÔºå for context„ÄÇ

 I'm the transport layer on the receiving machine„ÄÇ I've been handed this message„ÄÇ

 I've been handed these two segments that put together into a message„ÄÇ

And I want to hand it to the application layer„ÄÇBut there are multiple applications running on this machine or could be„ÄÇ

üò°ÔºåCertainly your laptop has multiple network using applications on it at any point in time„ÄÇ

So the transport layerÔºå when it gets a messageÔºå has to know who to send this to and luckily on our segment„ÄÇ

We had a destinationÔºå and that destination was an application„ÄÇ

We said please give this message to the Twitter application running on Twitter server it's on Twitter server now„ÄÇ

 so effectively the transport layer is going to look around and sayÔºå hey„ÄÇ

 any application here wants some data for Twitter app„ÄÇSort of„ÄÇÂèØÁöÑ„ÄÇIt will knowÔºå oh„ÄÇ

 that particular application of the 10 applications that are running on this computer is the Twitter app„ÄÇ

 Let me give it to that application instead of to the web server application or the email server application that's running on the same hardware„ÄÇ

OkayÔºå so another important piece is the transport layer test„ÄÇÂÆ∂ÂÅöÂèë‰∏â„ÄÇOkay„ÄÇ

So the first question does only the datalink layer check if there's a mistakeÔºå no„ÄÇ

 the datalink layer always has toÔºå the transport layer often does as well„ÄÇ

 we'll talk about we talked about this briefly when we said there are connection oriented and connection less transport layers„ÄÇ

And the connection oriented transport layerÔºå PCP will also do reliable data transport so it will actually check that the data was there properly„ÄÇ

And that is a check over the entire stream of dataÔºå the even the connection listÔºå however„ÄÇ

 does a check over the bits that are in the particular applicationÔºå a particular segment as well„ÄÇÂóØ„ÄÇ

And the other question for each network nodeÔºå so the routers„ÄÇIAssuming when it receives the packet„ÄÇ

 does it re encapsulate the data with new headers or simply forward the packet it receives„ÄÇ

 So the situation isÔºå I'm a routerÔºå and I just got this packet„ÄÇOkay„ÄÇ

 what do I do with it Okay well typically the way the router works is it actually cuts the packet when it comes in because some of this is the payload and some of it is header and some of the data some of the things in the header have to change but the payload doesn't and so usually there in the router architectures usually there are two streams one of which is a control stream handling the headers and then it will put that back into a new packet when it leaves so you can imagine as if the packet actually changes„ÄÇ

Like we would take the segment out of the packet and put the segment into a different packet as it goes through the route„ÄÇ

Okay„ÄÇAnother questionÔºå what are the benefits of redundant checks in the transport layerÔºü

We'll talk about that in a minute that was one of the key points of the assaulttzer paper today was about where do you do some of these checking things„ÄÇ

I guess I might as well talk about it now in the salttzer paper„ÄÇ

 there's a really good example of a theoretical application called a careful file transfer that points out that even if you do the checking at the data link layer„ÄÇ

That is a network level check„ÄÇI'm sorry that is a check of network operations that's happening so the data link layer is guaranteeing that the bits that were sent are the same as the bits that were received„ÄÇ

But if you look at this thing as an entire flow from end to end„ÄÇ

 there's also stuff in the router itself that can screw up„ÄÇ

OkayAnd so a transport layer check actually is checking the entire stream as opposed to the data link layer„ÄÇ

 which is just checking the sending to receiving points in this So if you think about kind of in our picture the data link layer makes sure that the arrows are all correct„ÄÇ

But inside the boxesÔºå things can screw up and there's an awesome example in the salttzer paper of a router at MIT that had a bug in it„ÄÇ

 and every once in a whileÔºå every couple million data transfersÔºå it would transpose two bytes„ÄÇ

And apparently and so that was happening in the memory buffers of the router so the fact that things were protected at the datalink layer did not help protect against that and after moving source code for their operating system back and forth a whole bunch of times„ÄÇ

 they found they had too many errors in itÔºå and they actually had to go back and look at printouts to calls it the ultimate error checking„ÄÇ

Which is kind of„ÄÇSo that's the advantage of an end to end check„ÄÇOkayÔºå so at this point„ÄÇHopefully„ÄÇ

 my demonstration has given you a little bit more insight into this picture„ÄÇRight„ÄÇ

 if you think about those arrows„ÄÇIf you think about what the application is imagining„ÄÇ

 the application basically saidÔºå heyÔºå here's a message and I just need to get it to that other application„ÄÇ

 that other piece of software running over there„ÄÇAnd that's what I mean by that arrow taking a message to connect to applications„ÄÇ

Now of courseÔºå that arrow didn't actually exist right there„ÄÇ

 that arrow was implemented by the transport layer„ÄÇThat took individual segments„ÄÇ

C the segments and got the segments to send between ends„ÄÇ In factÔºå we had to send two segments„ÄÇ

Between the transport layerÔºå sender and receiver in order to get our message through„ÄÇOkay„ÄÇ

 in order to provide that service to the application layer„ÄÇBut again„ÄÇ

 the transport layer is basically saying this is a segment I created and I'm going to give it to that other transport piece of software running on the end host who's going to decode it„ÄÇ

Of course there's no arrow thereÔºå instead we hand it to the network layer and the network layer puts it in packets„ÄÇ

And sends a packet from„ÄÇEnd hosts to router to router to end host„ÄÇ

Getting it from any computer in the world to any other computer in the world„ÄÇüò°ÔºåAnd of course„ÄÇ

 the network layer actually doesn't send it from endhost to router„ÄÇ

 instead it gives it to the data link layer„ÄÇThat makes a frame out of it„ÄÇ

And connects from one end of the wire to the other end of the wire„ÄÇFor a single hop„ÄÇAnd of course„ÄÇ

 the data link layer isn't actually transferring a frame„ÄÇ

 the data link layer is asking the physical layer to transfer each of the individual bits in the frame„ÄÇ

 which are sent one by one across this wire„ÄÇF optctic cable or whatever the media is„ÄÇYeah„ÄÇ

Hopefully that gives you a little bit more insight into this„ÄÇ

As you go you know over the next couple days hopefully this becomes more and more intuitive to you if you do have any questions or you find this is still confusing to you„ÄÇ

 please talk to us because this is the model we're going to hang stuff on for the rest of the semester„ÄÇ

Okay„ÄÇThusÔºå ended„ÄÇThe Dorky class demonstrationÔºå I'll let you decide if this is worse or better„ÄÇ

More or less dorky than having six students up here with signs hanging around their necks„ÄÇOkay„ÄÇToday„ÄÇ

 let's talk a little bit about the design decisions that went into the creation of these protocols„ÄÇ

This is often called the TCP IP architectureÔºå in fact I just recently read that it was originally called the IP TCP architecture„ÄÇ

 which just„ÄÇfeels weird to hear it that wayÔºå but of course this is the TCP IP architecture in the context of all of the layers„ÄÇ

 including datalink application layers„ÄÇThis is a blown up picture of the different layers and tries to put some particular names on some of the players in the actual architecture stack„ÄÇ

OkayÔºå so in this caseÔºå I've got this connection of lots of different applications up top„ÄÇOkay„ÄÇ

 some of themÔºå I've got web and mail and DNS and ZoomÔºå basically up across the topÔºå OkayÔºå and they„ÄÇ

Use transport layer and they can use different transport layer pieces„ÄÇ

To decide whether they would like to have a reliable serviceÔºå for instance„ÄÇ

 to get all their data there reliablyÔºå or whether using some datagram service„ÄÇ

 the user Datagram service just sends each chunk of dataÔºå sends each segment„ÄÇ

Without any need to set up connectionsÔºå but also without any reliability„ÄÇ

And there are other choices here as well on the transport layer„ÄÇ

The next layer down is the internet protocolÔºå the network layer„ÄÇThe network layer„ÄÇüò°„ÄÇ

Does it best to get the data from any computer to any other computerÔºå we call this best effort„ÄÇüò°„ÄÇ

It's not actually guaranteeing that any particular packet will get delivered„ÄÇüò°„ÄÇ

But it will do the best it can„ÄÇAnd so overallÔºå it's going to do„ÄÇPretty good statistically over many„ÄÇ

 many packetsÔºå but you can't guarantee I can't say that this particular packet will get delivered properly to the other end„ÄÇ

OkayÔºåAnd then thatÔºå of courseÔºås„ÄÇThat of course connects at the data link layer to a whole bunch of different network technologies„ÄÇ

They have different ways of connecting and sending data from„ÄÇ

 I think of it as one end of a wire to another end where the wire could be a real wire or could be a radio link or a light link„ÄÇ

Âìé„ÄÇSo that's kind of the way these layers are put together„ÄÇ

And there's some features that come out of this„ÄÇ I know a lot of people sayÔºå wait a minute„ÄÇ

 These layers seem kind of burdensome„ÄÇ Do I always need to„ÄÇ

Send data from layer to layer to layer to layerÔºå and technically you don't have to„ÄÇ

So there's nothing keeping you from writing an application that just talks directly to Ethernet„ÄÇOkay„ÄÇ

 there's nothing keeping you from writing an application that sends raw IP packets„ÄÇ

That you construct„ÄÇÂñÇ„ÄÇMost applications of network applications are going to use TCP or UDP or some other transport layer„ÄÇ

 but there's nothing keeping you from thatÔºå you don't have to„ÄÇNow recognize if you do that„ÄÇ

 you may give up some services from those layers„ÄÇRightIf you're writing raw I packets and connecting directly to I„ÄÇ

Then you can't expect to get reliable data transfer„ÄÇUnless if you write it yourself„ÄÇ

 which you may want to„ÄÇOkayÔºå but you skip TCP so you don't get any of TCP's features„ÄÇ

I have actually written applications that use Ethernet directly„ÄÇRight„ÄÇ

I've done that because I've been in the lab and I've got a board of some sort that has an internet connector to it„ÄÇ

 and I want to get data in and out of it„ÄÇüò°ÔºåAnd so I run some program on my laptop that connects to that board„ÄÇ

 I'm connecting directly to the data link layerÔºå and in the process I'm giving up anything that the network layer would get to give me„ÄÇ

So it means that my code can only work when directly connected to a board„ÄÇ

I cannot run my code and expect to connect it across the network to that piece of hardware somewhere else„ÄÇ

Because I've skipped the network layer„ÄÇÂñÇ„ÄÇBut there's nobody keeping youÔºå there's no police that say„ÄÇ

 ohÔºå this is illegalÔºå you haven't done all the letters„ÄÇËÆ≤Ëøô‰πàÂÖ≥„ÄÇYou are unlikely to want to bypas„ÄÇelse„ÄÇ

YeahÔºå if you want to get internet global networking„ÄÇ

 then you certainly can't skip the IP layer to make that happen and with UDP there's really no reason to go directly to IP UDP is such a thin layer that provides a couple of useful services you might as well do it„ÄÇ

OkayÔºå but there's nothing keeping you from skipping if you wanted to„ÄÇÊ≤°Êúâ„ÄÇAll right„ÄÇ

 something else to notice is we have diversity at the top and diversity at the bottom„ÄÇ

It's designed this way„ÄÇ you want to be able to connect lots of different applications„ÄÇ

 you want to be able to use lots of different technologies„ÄÇ

To get your data moving around but they're in the middle„ÄÇYou don't have a whole lot of choice„ÄÇ

That middle layerÔºå the network layerÔºå has been carefully chosen to be the glue„ÄÇ

 it's got just the right things to allow the top stuff to connect to the bottom stuff„ÄÇOkay„ÄÇ

 you don't get choices there„ÄÇ

![](img/85cf5cca049c270d6286a39ee6331ba5_6.png)

ÂóØ„ÄÇSo this does what it's supposed to doÔºå rightÔºå It connectsÔºå you know„ÄÇ

 these higher level applications to lower level stuff„ÄÇ It's great„ÄÇ It all works well„ÄÇ

 We're thankful for it„ÄÇüòäÔºåUntil we want to change itÔºå One of the problems we have that we've„ÄÇ

Realized over the last 25 to 30 years we've been trying to change from IT version4 to version 6„ÄÇ

Is because that's the glue that everybody uses„ÄÇ If you want to change it„ÄÇ

 you have to get everybody to change„ÄÇAnd so that has been incredibly difficult„ÄÇ

Something else you ought to know about this architecture is who's managing it„ÄÇ

 who's in charge of it we've mentioned the Internet engineering task Force the IETF before„ÄÇ

 this is the group that standardizes all of these protocols„ÄÇ

 they're the ones who figure out oh yeah we need to have IP version6 and here's what that will look like and all the techniques and the specificities about how that will work„ÄÇ

They're the ones who will hash out details of a new specification„ÄÇÂóØ„ÄÇI got to admit„ÄÇ

 I love these guys as a standards group„ÄÇThey tend to be people who are passionate about the networking technology„ÄÇ

 not lawyers from companies who want some marketing advantage„ÄÇ

And so they tend to form these working groups very„ÄÇVery informally„ÄÇ

 they collect into groups that are working on particular topics„ÄÇ

 they usually hash them out beat them up over email distribution lists„ÄÇ

Three times a year they get together in meetings„ÄÇÂóØ„ÄÇ

When there are two independent implementations of two different people write the code for that protocol and those two different pieces of code actually communicate properly„ÄÇ

 then they sayÔºå heyÔºå that's pretty good„ÄÇIn factÔºå their watchword is they work on rough consensus and running code„ÄÇ

They don't worry about kings and voting and things like thatÔºå they sayÔºå hey„ÄÇ

 we've got some code working and most of us sort of agree to itÔºå then let's make it a standard„ÄÇ

Now that standard is usually in a thing called a request for comment or RFC„ÄÇ

 you'll read one for next lessonÔºå or you'll skim one for next lesson„ÄÇ

And there are a wide variety of things that go into RFcs„ÄÇ Okay„ÄÇ

 there are strict standards about some protocol that are detailing what every bit should be that gets sent down the wire„ÄÇ

There are experimental protocolsÔºå things that never actually see the light of day okay there's an example check out 1149 and I'd like to point out if you want to look up an RF„ÄÇ

 it's really easy IETF„ÄÇorg right so internetengering task force is an organization„ÄÇ

org/ RFf/ RFf and a number okay I actually have a text macro on my computer so I can just say RF and a number and it goes to that URL and let me read it„ÄÇ

OkayÔºå so they're very accessibleÔºå very easy to get„ÄÇ You don't have toÔºå you know„ÄÇ

 pay IEE money or anything like that to to get to look at the standard„ÄÇOkay„ÄÇ

So the RFCs end up being wide mostly their standard„ÄÇ

 but some of them are comments on this is a historical understanding of why we used to do it that way„ÄÇ

 and somebody's written that out as an RFC„ÄÇÂèØ‰ª•„ÄÇAll rightÔºå so now let's let's take a look at„ÄÇ

And the paper you read for last time actuallyÔºå a do a little catching up here„ÄÇ

 The Clark 88 paper was about the„ÄÇThe design of the Internet and kind of the philosophies in the ways that that was put together was written in 1988„ÄÇ

You may recognize that that is after RF the TCP and IP protocols were actually implemented and in use„ÄÇ

OkayÔºå so this is definitely a retrospective looking back„ÄÇü§ß„ÄÇAnd it's sayingÔºå you knowÔºå I was there„ÄÇ

 I was a member of this and this is what's going onÔºå this is important stuff„ÄÇOkay„ÄÇ

 here's the motivation„ÄÇ here's how we decided things„ÄÇAnd in the paperÔºå he's listing a bunch of goals„ÄÇ

 He's sayingÔºå heyÔºå yeahÔºå this was the most important„ÄÇ And these other things were also important„ÄÇ

 And that thing didn't make the listÔºå basically„ÄÇIt's important also to recognize these are you'll notice from the title these are the DARPA Internet protocols right DARPA was an organization in the United States military that was in charge of advanced research and they're the ones who funded this research the research was actually done by mostly academics at universities including Carnegie Mellon„ÄÇ

But DARPA was the funding agency that was giving money and giving overall guidance so that research work done in one place matched up with research work done in another„ÄÇ

And that meantÔºå by the wayÔºå that they' were trying to solve problems for the US government„ÄÇ

Not really with the intent of building the kind of worldwide„ÄÇ

Internet that we have today that everybody's using for Netflix and eBay and things like that„ÄÇ

At that point in timeÔºå because everybody was getting funded by the same funding organization„ÄÇ

 because there was a small group of academics that kind of hang out and had to work with each other„ÄÇ

 that meant that there was a shared visionÔºå everybody kind of agreed this is where we were going„ÄÇ

And they're basically just wanting to get these computers hooked together so they could transfer data back and forth as well as run their own applications and so part of the funding included„ÄÇ

 ohÔºå I think we should build an email client„ÄÇAnd so you'd have some professorÔºå you know„ÄÇ

 basically some grad student somewhere whose job was to build an email client as part of all this„ÄÇ

OkayÔºå and then that application would get handed out to everybody else„ÄÇ

 everybody else would run it on their machines if they could„ÄÇ

 and the protocols would work out to send the email„ÄÇNotice not many companiesÔºå in fact„ÄÇ

 no company involved in thisÔºå no commercial entity other than an academic organization„ÄÇ

Also no thought for trustworthinessÔºå so it basically assumedÔºå hey we're you know„ÄÇ

 we're in this togetherÔºå in factÔºå some of the early versions didn't even have passwords on things so you could no problem looking at each other's files in that file transfer protocol sort of thing„ÄÇ

Here's the fundamental goal„ÄÇ This is the thing David Clark says„ÄÇThey live or die on„ÄÇ

 This is what it was all about„ÄÇ It was about interconnecting existing networks„ÄÇ

They're not creating networks„ÄÇüò°ÔºåFrom the ground upÔºå they've already got networks„ÄÇ

This is the 70s and 80sÔºå networking has been around since the 50s„ÄÇOkayÔºå as soon as„ÄÇ

Computer scientists built two computers„ÄÇ What do they want to do„ÄÇ

 They want to connect them and have them talk to each other„ÄÇSo it's been around for a while„ÄÇ

And there are a bunch of organizations that have networksÔºå in factÔºå in the US government„ÄÇ

 there are a bunch of different organizations that have networks that don't work together„ÄÇ

And so that's why we have these existing networks and the goal is to get them to be able to connect and do stuff Okay so one way to think about this is the Army„ÄÇ

 the Navy and the Air Force all have their own networks and now DARPpo wants to make sure that they can all talk to each other„ÄÇ

OkayÔºå so that they can send messages from one computer to another„ÄÇ

Even if they're on these different networksÔºå so that they can coordinate whatever the military has to coordinate„ÄÇ

They were using technology that had been aroundÔºå so they were building on a previous project called APE that had basically proven that packet switching works„ÄÇ

That you can do store and forward networks with packet switching„ÄÇ

And you would connect networks with these gateways„ÄÇ

 and so that's the procedure that we're going to use and so you'll often see the word gateway used as a connecting device„ÄÇ

Now in 2020Ôºå we call these things routers„ÄÇOkay but we'll occasionally see the gateway word pop up in various protocols and whatnot„ÄÇ

 and when that happens you have to kind of mentally do the mapping and say oh yeah„ÄÇ

 gateway means router„ÄÇThere are a bunch of other goals as well„ÄÇ

And David Clark makes it very clear that these are secondary level goals„ÄÇ

 if they had solved all of this and not been able to do this oneÔºå it would have been a failure„ÄÇOkay„ÄÇ

 if they do this and mostly get some of these handledÔºå that's okay„ÄÇ

 And it's basically the status of what what they got done„ÄÇ So these are the goals they wanted to„ÄÇ

 to have„ÄÇ They wanted to be robust„ÄÇ They wanted multiple data link layer devices„ÄÇ

 They wanted multiple services„ÄÇ OkayÔºå They wanted to be able to„ÄÇ

Work in the environment they had of multiple networks„ÄÇEt ceteraÔºå et cetera„ÄÇ

So let's take a look at a few of these„ÄÇSo this is the top level secondary goal„ÄÇ

They wanted it to be robustÔºå they wanted if there's a failureÔºå they wanted that not to cause trouble„ÄÇ

One of the things they're recognizing here is they're building a system with lots of parts„ÄÇ

And as you build system with lots of partsÔºå there's a very high chance that some part somewhere is broken„ÄÇ

RightÔºå anybodybody want to bet„ÄÇRight now that somewhere on the network„ÄÇ

 there's a computer that's broken or router that's down„ÄÇOkay„ÄÇYeahÔºå it's„ÄÇI don't know where it is„ÄÇ

 but I will guarantee somewhere theres a router that is rebooting at this very instant„ÄÇOkay„ÄÇ

 and that's pretty much guaranteed because we've got 800Ôºå000 routers in the world„ÄÇso yes„ÄÇ

 one of them is rebooting right now„ÄÇ And so therefore„ÄÇ

 the architecture that David Clark was building needs to recognize this„ÄÇ

If it only works when everything is working properlyÔºå it's not going to work very often„ÄÇ

 So what do you do if there is a failureÔºüThis is an issue basically with replicating the state of what was going on„ÄÇ

 If you're in the middle of transferring some data from Nho A to Nho B„ÄÇ

 and there's a failure somewhere„ÄÇOkay„ÄÇWellÔºå if there's a computer that crashes„ÄÇ

 what does the computers do wellÔºüThey will eventually reboot„ÄÇ The question isÔºå what do we do about„ÄÇ

About making everything right until that computer reboots or once it reboots„ÄÇ

 trying to make sure that the conversation we were havingÔºå that data transfer can still go on„ÄÇ

So basicallyÔºå we have some stateÔºå we need to keep track of well„ÄÇ

 what data has been transferred and what has it We're not actually saying that we need to keep track of the data as it's transferred„ÄÇ

OkayÔºå but we need to knowÔºå you knowÔºå did segment one get thereÔºå How about segment two„ÄÇ

 is that deliveredÔºüThat's what we're talking about when we're talking about the state of a conversation„ÄÇ

We saw earlier we're sending segments„ÄÇFrom one place to another„ÄÇWhich of the segments got there„ÄÇ

 Which didn'tÔºå with pieces happen„ÄÇ And there are a couple of choices you can make„ÄÇ

One is also pretty logical right number one here is we'll say„ÄÇ

 I've got this network and it's the network that's failing„ÄÇ

So the network should provide as a service the robustness right„ÄÇ

 the network should make sure that when it failsÔºå it is able to recover properly„ÄÇOkayAnd to do that„ÄÇ

 that means the network itselfÔºå the routers that make up the network„ÄÇ

 should be keeping track of the state of this conversation„ÄÇ

Okay approach number two says wait a minuteÔºå we don't have to do that OkayÔºå instead„ÄÇ

 if we just put the state at the endhosÔºå let's let the sender and the receiver keep track of where they are„ÄÇ

OkayÔºå and you kind of sayÔºå wait a minuteÔºå it's the network that's failing„ÄÇ

 why should those guys have to do itÔºüSo basically two approaches here„ÄÇ

The approaches are all about where does the state get storedÔºå what's happening to it„ÄÇ

 and it's possible to do number oneÔºå in factÔºå we build lots of distributed systems that do this„ÄÇ

Many of our distributed systems have some replication going on and there's some kind of leader election„ÄÇ

 so you know who's in charge of choosing where the replicas go and things like that„ÄÇ

 distributed systems are all about that sort or that is at least a big chunk„ÄÇ

 let's say approximately a third of the problems that distributed systems have to deal with„ÄÇ

It's possible to build these algorithms„ÄÇüò°ÔºåBut what it means is we now have to synchronize that„ÄÇ

The data about the state„ÄÇCan't be kept on a router that would crash and be central to that conversation„ÄÇ

 So if the conversation is going through a bunch of routers„ÄÇ

And you're worried about any of those routers crashing„ÄÇ

 you need to make sure that the state of that conversation is kept at some other router somewhere else„ÄÇ

OkayAnd so now you have to have some synchronization protocol that will make sure that as the conversation progresses„ÄÇ

 this data at some other router is kept up to date„ÄÇAnd that turns out to be doable but complicated„ÄÇ

Approach number two actually hasÔºå it's almost cheatingÔºå it's got this like ohÔºå right„ÄÇ

Kind of aspect to it„ÄÇ We call that fate sharing„ÄÇThe idea is that yes„ÄÇ

 there are a bunch of routers that are handling this conversation„ÄÇBut reallyÔºå theÔºå the„ÄÇ

People who care about the conversation are the end hosts„ÄÇOkay„ÄÇ

 and if you stored state at the end hosts instead of in the routers in the middle„ÄÇWell„ÄÇ

 then that means you are vulnerable if either of the end host crashes„ÄÇ

If a router in the middle crashes it's not a problem because the end hosts have all the data they need to get around it„ÄÇ

But if an end ho crashesÔºå that's a problem because that's where your data„ÄÇ

 where the state of the conversation is keptped„ÄÇNow the point here about bait sharing is„ÄÇWellÔºå yeah„ÄÇ

 but if they crashÔºå then they probably don't care about the conversation anymore„ÄÇ

That's called fate sharingÔºå their fate is bound up with the fate of the actual conversation„ÄÇÂóØ„ÄÇ

I think it'sÔºå I don't knowÔºå I've heard it in other context„ÄÇ

 but that's because the two words make sense fate and sharing and you can put them together in this sense„ÄÇ

You what you just mentioned„ÄÇÂØπ‰∫∫‰Ω†„ÄÇÂÆå was„ÄÇWhy was whatÔºüYou you mentioned„ÅåË¶ã„ÄÇ‰ªñ„Å´ÂÆöË¶Å„ÄÇW„ÄÇOhÔºå approach one„ÄÇ

 so the question isÔºå why bother with approach one if you know about approach two„ÄÇ

 approach one was actually consideredÔºå but wellÔºå let me say engineers or engineers right you're building a network„ÄÇ

And you start to sayÔºå wellÔºå let me protect my network„ÄÇOkay„ÄÇ

 and so you're thinking about things in the network anywayÔºå and you know how to solve the problem„ÄÇ

 it just is complicatedÔºå rightÔºüEngineers often will sayÔºå it's complicatedÔºå but I could do it„ÄÇ

 you knowÔºå it'll be greatÔºå I'll have job securityÔºå know we'll build this complicated thing„ÄÇ

And Salaltzer in his papers is basically sayingÔºå wait a minuteÔºå you don't have to do that„ÄÇOkay„ÄÇ

 and I'm just pointing that out now here„ÄÇSo this means this is the approach that's actually taken with„ÄÇ

With TCPIP and our current network„ÄÇWe use the stateless coreÔºå that means the routers„ÄÇ

We call them dumb routersÔºå we don't mean to be insulting„ÄÇOkay„ÄÇ

 what we mean is the routers themselves don't have to keep track of all this information„ÄÇ

Okay so from some one senseÔºå it is an elegant approach„ÄÇ

 an elegant solution that engineers would like because they're being lazy and saying I don't have to build that stuff„ÄÇ

 we're not going to so the routers are stateless„ÄÇThey just send packets back and forth right each packet gets sent„ÄÇ

 there's no information in this about this is number one of two or two of two or anything like that„ÄÇ

 they just send the packets back and forth„ÄÇAnd it's also worth pointing outÔºå as I do here„ÄÇ

 there's another archaic word kind of like I said gateateway is an old word for router Datagram is an old word for„ÄÇ

As wellÔºå so when you hear that this is a datagram network„ÄÇBasically„ÄÇ

 it's a network that sends packets around without having to be keep the state of all of„ÄÇOkay„ÄÇÂóØ„ÄÇÂïä„ÄÇ

All rightÔºå so when I say dumb routers„ÄÇAgainÔºå not being insulting„ÄÇ

 just what it means is we've got routers that are tuned for one thing and one thing only right what you want your router to be able to do„ÄÇ

Is routeÔºå you want them to take packets and forward them as fast as possible„ÄÇ Don't spend time„ÄÇ

Trying to synchronize state with other routers and do any of that kind of stuff because that would slow down the delivery of my packets and what I want is I want fast packet delivery get those things moving as fast as possible that's what the router is supposed to do Anything else is just getting in the way of that„ÄÇ

If you you then put the intelligence in the end hosts right my laptop is now the intelligent device it's keeping track of the state of the conversation and it will keep track of a lot of other things„ÄÇ

 We'll see when we learn PCPÔºå what's going on there that there's a lot of state to keep track of as we try to determine what congestion boundaries are and things like that„ÄÇ

Next lectureÔºå we'll talk a little bit about how some of this is changing and some of the internals of the network„ÄÇ

Are getting smarter and smarterÔºå're moving away from the dumb router idea„ÄÇAll right„ÄÇ

 next on the list of features requirements was that there would be different types of service„ÄÇ

OriginallyÔºå the design of the network was going to give you bulk transfer of data„ÄÇ

And that was the network was going to optimize thatÔºå we call that TCP today„ÄÇ

 is going to give you bulk reliable transfer of dataÔºå and it would do this byÔºå well„ÄÇ

 it would have a lot of algorithms that would optimize knowing how fast we could send stuff„ÄÇ

It would also keep track and look for problemsÔºå look for losses that happen and if there was a packet that got lost somewhere„ÄÇ

 maybe because some data link layer did the math and said this is actually red and so we've got to throw this frame away if they throw that frame away then the packet that's inside it disappears„ÄÇ

And in that caseÔºå TCP will discover that loss occurred and retransmit„ÄÇ

 it we go ahead and just send that segment againÔºå ohÔºå segment 50 never got there„ÄÇ

 let's resend segment 50„ÄÇAnd that's what TCP is doing„ÄÇThe problem is„ÄÇ

 and luckily they ran this experiment when they were developing these protocols„ÄÇ

 some applications don't want you to retransmit segment 50„ÄÇOkay„ÄÇ

 there are applications that would prefer for it to stay lost„ÄÇThen to retransmit„ÄÇ

 And the problem is this„ÄÇIn order to detect that we should retransmit segment 50„ÄÇ

 we have to keep track of which segments we've gotten and there needs to be some acknowledgements sent back of those so that the sender knows whether segment 50 got there or not„ÄÇ

And if it did get thereÔºå then it doesn't have to retransmit„ÄÇ but if it didn't get there„ÄÇ

 then we'll go ahead and send it again„ÄÇOn the receiving side„ÄÇ

 if I've gotten segments up to 49 but have not gotten segment 50„ÄÇ

 we would then be waiting around for segment 50 to get retransmitted„ÄÇAnd effectively„ÄÇ

 we are delaying giving this data to the application because we want this missing segment to come in„ÄÇ

 and there are some applications that that delay is deadly for„ÄÇMostly things like Zoom„ÄÇ

Things that are streaming servicesÔºå okayÔºå audio conferencing was the one that was picked up on back in the day„ÄÇ

 they were trying to build an audio conferencing application„ÄÇ

 but anytime there was a segment at lostÔºå the audio on the receiver would just stop until that audio data could be retransmitted„ÄÇ

ÂóØ„ÄÇAnd that's not what you want to do„ÄÇ rightÔºå You would much rather lose that„ÄÇ

Segment and get the segment after it and just kind of can we can do algorithms on on the receiving host to kind of fill in that blank space„ÄÇ

 you either replay the sound you just played for the frame for the segment before it or you do some other kind of interpolation„ÄÇ

 but that's better than waiting around and not having any data at all until something gets retransmitted„ÄÇ

OkayÔºå and so„ÄÇWe need to have different types of serviceÔºå and in fact„ÄÇ

 this was the decision to actually break TCP into its own layer„ÄÇ

So that you could substitute so you could have something other than TCP there„ÄÇOkay„ÄÇ

And so this turns out to be a really good idea„ÄÇ Thank goodnessÔºå because otherwise„ÄÇ

 we would not have UDP and other transport layer protocols that we have today„ÄÇ

 And when that means some applicationsÔºå Netflix would just suck all the time„ÄÇ

 It would constantly be buffering anytime there was a loss„ÄÇOkay„ÄÇInstead of„ÄÇ

Throwing away the fact that that data hasn't gotten here and moving on„ÄÇ

We wanted distributed management„ÄÇSo this is back to Army Navy Air Force all have their separate networks„ÄÇ

 you have to distribute didn't have toÔºå it was a very wise decision to distribute that management„ÄÇ

Which I find remarkable many times the solution in the military is you choose one you sayÔºå okay„ÄÇ

 we'll all use the Air Force's network styleÔºå Navy and army you lose„ÄÇ

 you guys have to buy all new networking equipment and do the thing the way the Air Force does it„ÄÇ

OkayÔºå that's not what happened here„ÄÇüò°ÔºåDARPA was smart enough to say there's no way we're going to get these other you know we can't choose a winner among the Army Navy Air Force and get the other two to buy their stuff let's just go ahead and build it so that we could administer it differently so that„ÄÇ

Air Force can administer their networkÔºå Navy can administer their networkÔºå ohÔºå and by the way„ÄÇ

 we've got these academics and all these„ÄÇResearch universities that also have their different networks„ÄÇ

 we're not going to get them to throw it out and change it will let them all administer it themselves„ÄÇ

And we'll build in some protocols that will allow them to communicate about how things should be set up„ÄÇ

 OkayÔºå and those protocolsÔºå we'll talk about some of those protocols that that let the different organizations work together„ÄÇ

 OriginallyÔºå there was a bunch ofÔºå you knowÔºå the way you„ÄÇ

Ched the routing between organizations was you sent a network administrator around each machine to individually type stuff in and that's not good„ÄÇ

Nowadays we have a protocol called the border Gateway protocolÔºå there's that gateway word again„ÄÇ

Right„ÄÇAnd that helps us communicate among big networks the information that is needed to do to make routing decisions to be able to get stuff from who's connected to who sorts of information„ÄÇ

This is still not a completely solved problemÔºå I mean it works„ÄÇ

 but there's lots of kind of issues and niggling questions off in the corners that happen for instance there's a thing called route hijacking border gateway protocol basically works by you announced to neighboring networks and you say yes I can connect to somewhere and every once in a while somebody screws that up or sometimes deliberately sends an announcement message and says„ÄÇ

 heyÔºå if you want to get to Facebook send your data to me„ÄÇ

And if you can convince some router to accept that announcement„ÄÇ

 then all of a sudden any traffic going through that router that's intended for Facebook will come to you„ÄÇ

you can do whatever nefarious things you want to with it„ÄÇThere was also accounting„ÄÇ

 you'll notice it was way down the list„ÄÇOkayÔºå accounting means let's figure out who should pay money to who for network usage„ÄÇ

OkayÔºå and„ÄÇReallyÔºå at that pointÔºå nobody paid a whole lot of attention to it„ÄÇ

 basically the military was paying all the bills„ÄÇAnd so it didn't much matter whether„ÄÇ

 you know Carnegie Mellon needed to get paid by some other network that it was connecting to because both were getting paid by DARPA anyway„ÄÇ

 there are some core grain tools that we use that we have relied on for a long time„ÄÇ

 they typically are measurement tools that tells youÔºå okayÔºå well„ÄÇ

 how many bits have you actually sent to that„ÄÇto that neighbor or how many packets have you sent to that neighbor and then there are other tools that get built upon those to help us look at flows of traffic and figure out who it should get paid for for what there's a lot more research that can be done here I think to make this a little bit more robust„ÄÇ

OkayÔºå quickly then let's talk about this end to end argument that shows up in the Saltzer paper that I ask you to read„ÄÇ

 this is SaltzerÔºå you'll notice David ClarkÔºå somebody we know is also in here turns out Salalter is the PhD advisor for David Clark„ÄÇ

And SaltzerÔºå by the wayÔºå was one of Claude Shannon's studentsÔºå so nice„ÄÇNice genealogy there„ÄÇ

 Saltzer paper discusses what is compton be known as the end to end argument that basically says if you can implement a function at the application layer„ÄÇ

Now notice that application layer is going to be on the end hosts„ÄÇ

 so basically saying if you can move something out of the network„ÄÇ

 out of the core of the network to the ends of the network„ÄÇ

 then you should probably do it instead of implementing it in the lower layers like the network or datalink layers„ÄÇ

The idea is here you're trying to eliminate any kind of duplication across the layers„ÄÇ

 you don't want one layer to do somethingÔºå and then another layer needs to undo that or do something of its own to take advantage of it„ÄÇ

The other thing that was recognized here is that innovation is muchÔºå much easier at the end host„ÄÇ

If I want to run some software in the networkÔºå it's much easier if all I have to do is install it on my laptop and maybe your laptop to allow us to experiment this way if I need to get software changes to every router that a packet will travel through„ÄÇ

 that's a much harder thing to do„ÄÇOkayÔºå and so if we can innovate at the edges„ÄÇ

 we should probably do that„ÄÇThere's also a reliability argument there„ÄÇ

 If we can move functionality to the edgesÔºå then that means the core is easier and simpler„ÄÇ

Those routers are not doing other things thenÔºå and as I said a minute ago„ÄÇ

 what you want to do is you want the routers to send packets„ÄÇ

 you want that to happen as fast as possible„ÄÇAnd so by moving functionality out of the routers„ÄÇ

 you're speeding that up„ÄÇThere is an exception„ÄÇ That's a performance optimization thing„ÄÇ

 It's possible that„ÄÇSome lower layerÔºå it's possible that some function will work really well if implemented at some lower layer and the example I show here is wireless networks that have a very high loss rate„ÄÇ

 they usually have to actually implement some reliability„ÄÇ

 otherwise that you end up with too many retransmissions from frames that go lost holding packets you want„ÄÇ

Saler points out this is a reallyÔºå really complex decision you should be very careful about this trade off„ÄÇ

ÂóØ„ÄÇWe've talked today about the design of the network and how it was put together and the decisions„ÄÇ

 the goals that were made thereÔºå if we were doing it again todayÔºå would we still do it that wayÔºü

Would we still use the same goals all over the placeÔºå so might be changedÔºå for instance„ÄÇ

 accountabilityÔºå I think is a more important thing now than it used to be„ÄÇ

 and so we might spend some more time there„ÄÇDavid Clark actually wrote a paper 15 years later in 2002„ÄÇ

 it's a very famous paper called Tssle in CyberspaceÔºå which is basically he's saying things changed„ÄÇ

Back in '88Ôºå it was this nice wonderful Eden world where everybody had a shared vision and nobody was breaking into each other's computers and now things are different he says those old principles may not apply„ÄÇ

 he says different stakeholders have adverse interests„ÄÇ

Each buy to favor their particular positions right so instead of having a shared visionÔºå we now have„ÄÇ

 you know we have different companies that in some cases want to take over the internet for their own use„ÄÇ

Facebook or other nefarious or other commercial interests as well„ÄÇ

Also we end up moving away from the Dung coreÔºå we end up with other devices in the center that do more work„ÄÇ

 we have applications that are much more demanding„ÄÇ

 it's hard know I doubt if anybody in 1988 would have imagined our use of social media these days or I guess people you did imagine„ÄÇ

 but you knew it was impossible to actually deliver video on demand the way we do„ÄÇ

We've also got huge numbers of end hosts that we didn't have back then okay you know I'm carrying a couple myself„ÄÇ

 you guys probably are all carrying a couple your home„ÄÇ

 you know my home has 53 devices last second itÔºå okayÔºå you know„ÄÇ

 there's just unimaginable numbers of end hosts„ÄÇSo things are changing a bunch„ÄÇ

 We're also seeing the networks trying to distinguish themselves by adding extra features to their core so that they can sell and charge more money„ÄÇ

And the users come backing David Clark's DayÔºå everybody connected to the network„ÄÇ

had a compd degree or you know was really close to somebody who did and so nowadays you want to have a lot of people who want to use the network but don't have any idea what a packet it is or what a router would be„ÄÇ

 which is much different„ÄÇThe routers themselves getting much smarter„ÄÇ

 we're adding a bunch of acronyms to them we'll talk about quality service sum we'll talk a lot about software defined networking where you actually are programming the protocols and how the router is actually working and we're adding in a bunch of things like I mentioned accounting a few times we're adding that into the routers to keep track of what's going on„ÄÇ

OkayÔºå apologize for running over„ÄÇWe're at the end of the lecture though„ÄÇ

 so we've got a couple less objectives to hope you will read and understand„ÄÇ

 make sure you know any last questions„ÄÇÂ•ΩÂ•ΩÔºåÈÇ£„ÄÇcomputer was a question asking that a network„ÄÇÂì¶Ôºå‰ΩÜÊòØ„ÄÇÂëÉÔºåÂ§™Áúã„ÄÇ

OkayÔºå so the question is about fragmentation and whether the network layer just lives up to the segments that are given to it by the transport layer„ÄÇ

 mostly the transport layer is going to actually try hard to create segments of the right size so that when they get put in packets„ÄÇ

 the network layer can transmit them well„ÄÇThere are some situations though where the packet as it travels through the network needs to get broken apart as well„ÄÇ

 we call that IP fragmentationÔºå we'll learn about that when we get to the network layer and so if we don't like for that to happen„ÄÇ

 but there is a facility to actually break a packet into several packets„ÄÇAnd thusÔºå of course„ÄÇ

 the data in them means that the segment actually will travel over several packets„ÄÇOkay„ÄÇ

Allrighty then thank you very much everybodyÔºå we'll see you on ThursdayÔºå have a great day„ÄÇ

 don't forget to do your paper reviewsÔºå etc ceter„ÄÇüòäÔºåAll right„ÄÇByeÔºå byeÔºå everybody„ÄÇMyÔºå thank you„ÄÇ

Bye bye„ÄÇ

![](img/85cf5cca049c270d6286a39ee6331ba5_8.png)

‰∏çÊòØ„ÄÇYeah„ÄÇÂì¶Áü•ÈÅì„ÄÇ