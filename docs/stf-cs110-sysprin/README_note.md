# 斯坦福CS110计算机系统原理笔记 📚

在本节课中，我们将学习计算机系统的基本原理，包括进程、内存管理和系统调用等核心概念。这些知识是理解现代计算机如何工作的基础。

## 进程与程序 🧠

上一节我们介绍了计算机系统的整体框架，本节中我们来看看进程与程序的区别。程序是存储在磁盘上的静态指令和数据集合，而进程是程序的一次动态执行实例。进程拥有独立的内存空间和系统资源。

以下是进程的关键组成部分：
*   **代码段**：存放可执行指令。
*   **数据段**：存放全局变量和静态变量。
*   **堆**：用于程序运行时动态分配的内存区域。
*   **栈**：用于函数调用，存放局部变量和返回地址。

## 内存管理 💾

理解了进程的构成后，我们需要了解系统如何为进程分配和管理内存。操作系统通过虚拟内存机制，为每个进程提供一个独立的、连续的地址空间，使其感觉独占了整个内存。

内存管理的一个核心概念是**地址转换**，其公式可以简化为：
`物理地址 = 虚拟地址 + 基址寄存器值`
操作系统通过页表等数据结构，将进程使用的虚拟地址映射到实际的物理内存地址。

## 系统调用 🔧

进程在运行时，经常需要请求操作系统内核提供服务，例如读写文件或创建新进程。这个过程通过系统调用实现。系统调用是用户程序与操作系统内核之间的接口。

以下是常见的系统调用类别：
*   **进程控制**：`fork()`, `exec()`, `wait()`
*   **文件管理**：`open()`, `read()`, `write()`, `close()`
*   **设备管理**
*   **信息维护**
*   **通信**

例如，创建一个新进程通常使用 `fork()` 系统调用，其基本代码模式如下：
```c
pid_t pid = fork();
if (pid == 0) {
    // 这是子进程执行的代码
} else {
    // 这是父进程执行的代码
}
```

## 进程间通信 📨

当系统中存在多个进程时，它们可能需要协作或交换数据。这就需要进程间通信机制。IPC允许不同进程安全地共享信息和协调行动。

主要的IPC方式包括：
*   **管道**：用于具有亲缘关系进程间的单向通信。
*   **消息队列**
*   **共享内存**：最高效的方式，允许多个进程访问同一块内存区域。
*   **信号量**：用于进程间的同步控制。

---

本节课中我们一起学习了计算机系统原理的核心基础。我们明确了进程作为程序执行实体的概念，探讨了操作系统如何通过虚拟内存管理进程的地址空间，介绍了程序通过系统调用请求内核服务的方式，并概述了进程间通信的主要方法。理解这些概念是进一步学习并发、网络等高级系统主题的基石。