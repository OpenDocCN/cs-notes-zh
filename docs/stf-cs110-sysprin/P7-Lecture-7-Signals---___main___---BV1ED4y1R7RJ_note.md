# è¯¾ç¨‹ P7ï¼šç¬¬ä¸ƒè®² ä¿¡å· ğŸš¦

åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†è¦å­¦ä¹ æ“ä½œç³»ç»Ÿä¸­çš„**ä¿¡å·**æœºåˆ¶ã€‚ä¿¡å·æ˜¯è¿›ç¨‹é—´é€šä¿¡çš„ä¸€ç§åŸºæœ¬æ–¹å¼ï¼Œç”¨äºé€šçŸ¥å¦ä¸€ä¸ªè¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿã€‚æˆ‘ä»¬å°†é€šè¿‡ç¼–å†™ä»£ç ç¤ºä¾‹ï¼Œæ·±å…¥ç†è§£ä¿¡å·çš„å·¥ä½œåŸç†ã€ä¿¡å·å¤„ç†ç¨‹åºçš„ç¼–å†™ï¼Œä»¥åŠå¦‚ä½•åº”å¯¹ä¿¡å·å¤„ç†ä¸­å¯èƒ½å‡ºç°çš„**ç«æ€æ¡ä»¶**ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_1.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_3.png)

---

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_5.png)

## æ¦‚è¿°

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_7.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_9.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_11.png)

ä¿¡å·æ˜¯ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼Œå…è®¸ä¸€ä¸ªè¿›ç¨‹é€šçŸ¥å¦ä¸€ä¸ªè¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿã€‚å®ƒä¸ä¼ é€’å…·ä½“æ•°æ®ï¼Œåªä¼ é€’ä¸€ä¸ª**ä¿¡å·ç¼–å·**ã€‚æœ¬èŠ‚è¯¾æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•è®¾ç½®ä¿¡å·å¤„ç†ç¨‹åºï¼Œå¤„ç†å­è¿›ç¨‹çŠ¶æ€å˜åŒ–ï¼Œå¹¶è§£å†³ä¿¡å·å¤„ç†ä¸­çš„åŒæ­¥é—®é¢˜ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_13.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_15.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_17.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_19.png)

---

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_21.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_23.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_25.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_27.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_29.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_31.png)

## ä¿¡å·åŸºç¡€

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_33.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_34.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_36.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_38.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_40.png)

ä¸Šä¸€èŠ‚æˆ‘ä»¬ä»‹ç»äº†ä¿¡å·çš„åŸºæœ¬æ¦‚å¿µã€‚æœ¬èŠ‚ä¸­æˆ‘ä»¬æ¥çœ‹çœ‹ä¿¡å·çš„å…·ä½“å·¥ä½œæœºåˆ¶ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_42.png)

ä¿¡å·æœ¬è´¨ä¸Šæ˜¯ä¸€ç§é€šçŸ¥æœºåˆ¶ã€‚å½“ä¸€ä¸ªè¿›ç¨‹éœ€è¦é€šçŸ¥å¦ä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œå®ƒå¯ä»¥å‘é€ä¸€ä¸ªç‰¹å®šçš„ä¿¡å·ç¼–å·ã€‚æ¥æ”¶ä¿¡å·çš„è¿›ç¨‹å¯ä»¥é¢„å…ˆå®šä¹‰ä¸€ä¸ª**ä¿¡å·å¤„ç†ç¨‹åº**ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“ä¿¡å·åˆ°è¾¾æ—¶ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_44.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_46.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_48.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_50.png)

**æ ¸å¿ƒå…¬å¼/ä»£ç ï¼šè®¾ç½®ä¿¡å·å¤„ç†ç¨‹åº**
```c
#include <signal.h>
void (*signal(int sig, void (*func)(int)))(int);
// ä¾‹å¦‚ï¼Œè®¾ç½® SIGCHLD ä¿¡å·çš„å¤„ç†å‡½æ•°ä¸º reap_child
signal(SIGCHLD, reap_child);
```

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_52.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_54.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_56.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_58.png)

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¿¡å·å¤„ç†ç¨‹åºæ— æ³•æ¥æ”¶é™¤ä¿¡å·ç¼–å·ä»¥å¤–çš„å…¶ä»–ä¿¡æ¯ã€‚å¦‚æœéœ€è¦åœ¨è¿›ç¨‹é—´ä¼ é€’æ›´å¤šæ•°æ®ï¼Œå¿…é¡»å€ŸåŠ©å…±äº«å†…å­˜ã€æ–‡ä»¶ç­‰å…¶ä»–æœºåˆ¶ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_60.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_62.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_64.png)

---

## å¤„ç†å­è¿›ç¨‹çŠ¶æ€å˜åŒ–

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_66.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_67.png)

åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œçˆ¶è¿›ç¨‹ç»å¸¸éœ€è¦çŸ¥é“å…¶å­è¿›ç¨‹çš„çŠ¶æ€å˜åŒ–ï¼ˆå¦‚ç»“æŸã€åœæ­¢ï¼‰ã€‚`SIGCHLD` ä¿¡å·å°±æ˜¯ä¸ºæ­¤è®¾è®¡çš„ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_69.png)

å½“çˆ¶è¿›ç¨‹çš„ä¸€ä¸ªå­è¿›ç¨‹çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå†…æ ¸ä¼šå‘çˆ¶è¿›ç¨‹å‘é€ `SIGCHLD` ä¿¡å·ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¿¡å·å¤„ç†ç¨‹åºä¸­è°ƒç”¨ `waitpid` ç³»ç»Ÿè°ƒç”¨æ¥â€œæ”¶å‰²â€å·²ç»“æŸçš„å­è¿›ç¨‹ï¼Œå¹¶è·å–å…¶é€€å‡ºçŠ¶æ€ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_71.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_73.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_75.png)

**æ ¸å¿ƒä»£ç ï¼šåœ¨ SIGCHLD å¤„ç†ç¨‹åºä¸­æ”¶å‰²å­è¿›ç¨‹**
```c
void reap_child(int sig) {
    pid_t pid;
    int status;
    while ((pid = waitpid(-1, &status, WNOHANG)) > 0) {
        // æˆåŠŸæ”¶å‰²ä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¤„ç†å…¶é€€å‡ºçŠ¶æ€ status
        num_children_done++;
    }
}
```
ä¸Šé¢çš„ä»£ç ä½¿ç”¨ `while` å¾ªç¯å’Œ `WNOHANG` é€‰é¡¹ï¼Œç¡®ä¿å³ä½¿å¤šä¸ªå­è¿›ç¨‹åŒæ—¶ç»“æŸï¼Œä¹Ÿèƒ½å…¨éƒ¨è¢«æ­£ç¡®å¤„ç†ï¼Œè€Œä¸ä¼šé—æ¼ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_77.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_79.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_81.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_83.png)

---

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_85.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_87.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_89.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_91.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_93.png)

## ç«æ€æ¡ä»¶ä¸ä¿¡å·åŒæ­¥

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_95.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_97.png)

ä¸Šä¸€èŠ‚æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•æ”¶å‰²å­è¿›ç¨‹ã€‚æœ¬èŠ‚ä¸­æˆ‘ä»¬æ¥çœ‹çœ‹ä¿¡å·å¤„ç†ä¸­ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼š**ç«æ€æ¡ä»¶**ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_99.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_101.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_103.png)

ç«æ€æ¡ä»¶æ˜¯æŒ‡å½“å¤šä¸ªäº‹ä»¶ï¼ˆæˆ–è¿›ç¨‹ï¼‰å‡ ä¹åŒæ—¶å‘ç”Ÿæ—¶ï¼Œå…¶æ‰§è¡Œé¡ºåºçš„ä¸ç¡®å®šæ€§å¯èƒ½å¯¼è‡´ç¨‹åºç»“æœä¸ç¬¦åˆé¢„æœŸã€‚åœ¨ä¿¡å·å¤„ç†ä¸­ï¼Œè¿™å°¤å…¶æ£˜æ‰‹ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_105.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_107.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_109.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_111.png)

è€ƒè™‘ä»¥ä¸‹åœºæ™¯ï¼šçˆ¶è¿›ç¨‹ `fork` å‡ºå­è¿›ç¨‹ï¼Œå¹¶å°†å…¶åŠ å…¥ä¸€ä¸ªä½œä¸šåˆ—è¡¨ã€‚å­è¿›ç¨‹ç»“æŸåï¼Œä¿¡å·å¤„ç†ç¨‹åºä¼šå°†å…¶ä»åˆ—è¡¨ä¸­ç§»é™¤ã€‚å¦‚æœå­è¿›ç¨‹ç»“æŸå¾—**å¤ªå¿«**ï¼Œå¯èƒ½åœ¨çˆ¶è¿›ç¨‹å°†å…¶åŠ å…¥åˆ—è¡¨**ä¹‹å‰**ï¼Œä¿¡å·å¤„ç†ç¨‹åºå°±å·²ç»è¯•å›¾ç§»é™¤å®ƒäº†ã€‚

**ç¤ºä¾‹ï¼šæœ‰é—®é¢˜çš„ä½œä¸šåˆ—è¡¨ç¨‹åº**
```c
// çˆ¶è¿›ç¨‹ä»£ç ç‰‡æ®µ
for (int i = 0; i < 3; i++) {
    pid_t pid = fork();
    if (pid == 0) {
        // å­è¿›ç¨‹ï¼šç«‹å³æ‰§è¡Œå‘½ä»¤å¹¶é€€å‡º
        execvp(...);
    }
    sleep(1); // çˆ¶è¿›ç¨‹ä¼‘çœ 1ç§’
    printf("Job %d added to task list.\n", pid);
}
// SIGCHLD å¤„ç†ç¨‹åºä¼šæ‰“å° â€œJob %d removed from task list.â€
```
è¿è¡Œæ­¤ç¨‹åºï¼Œå¯èƒ½ä¼šçœ‹åˆ°â€œç§»é™¤â€æ‰“å°åœ¨â€œæ·»åŠ â€ä¹‹å‰ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç«æ€æ¡ä»¶ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_113.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_115.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_117.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_118.png)

---

## ä½¿ç”¨ä¿¡å·é˜»å¡å®ç°åŒæ­¥

ä¸ºäº†è§£å†³ä¸Šè¿°ç«æ€æ¡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æ§åˆ¶ä¿¡å·çš„æ¥æ”¶æ—¶æœºã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ **ä¿¡å·é›†** å’Œ **ä¿¡å·æ©ç ** æ¥æš‚æ—¶é˜»å¡ç‰¹å®šçš„ä¿¡å·ï¼Œç›´åˆ°æˆ‘ä»¬å‡†å¤‡å¥½å¤„ç†å®ƒä»¬ã€‚

ä»¥ä¸‹æ˜¯å®ç°åŒæ­¥çš„æ­¥éª¤ï¼š

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_120.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_122.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_124.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_125.png)

1.  **åˆå§‹åŒ–ä¿¡å·é›†**ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„ä¿¡å·é›†ã€‚
2.  **æ·»åŠ ä¿¡å·åˆ°é›†åˆ**ï¼šå°† `SIGCHLD` ä¿¡å·æ·»åŠ åˆ°è¯¥é›†åˆä¸­ã€‚
3.  **é˜»å¡ä¿¡å·**ï¼šåœ¨å…³é”®ä»£ç æ®µï¼ˆå¦‚å°†å­è¿›ç¨‹åŠ å…¥åˆ—è¡¨ï¼‰æ‰§è¡Œå‰ï¼Œé˜»å¡è¯¥ä¿¡å·é›†ä¸­çš„ä¿¡å·ã€‚
4.  **è§£é™¤é˜»å¡**ï¼šåœ¨å…³é”®ä»£ç æ®µæ‰§è¡Œåï¼Œè§£é™¤å¯¹ä¿¡å·çš„é˜»å¡ã€‚æ‰€æœ‰åœ¨é˜»å¡æœŸé—´åˆ°è¾¾çš„ `SIGCHLD` ä¿¡å·ä¼šè¢«é€’å»¶ï¼Œæ­¤æ—¶æ‰ä¼šè°ƒç”¨ä¿¡å·å¤„ç†ç¨‹åºã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_127.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_129.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_131.png)

**æ ¸å¿ƒä»£ç ï¼šé˜»å¡ä¸è§£é™¤é˜»å¡ä¿¡å·**
```c
#include <signal.h>

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_133.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_135.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_137.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_139.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_141.png)

sigset_t set;
sigemptyset(&set); // åˆå§‹åŒ–ç©ºä¿¡å·é›†
sigaddset(&set, SIGCHLD); // å°† SIGCHLD åŠ å…¥é›†åˆ

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_143.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_145.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_147.png)

// åœ¨ fork å’Œå…³é”®æ“ä½œå‰ï¼Œé˜»å¡ SIGCHLD
sigprocmask(SIG_BLOCK, &set, NULL);

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_149.png)

// ... æ‰§è¡Œ forkã€å°†å­è¿›ç¨‹åŠ å…¥åˆ—è¡¨ç­‰å…³é”®æ“ä½œ ...

// å…³é”®æ“ä½œå®Œæˆåï¼Œè§£é™¤é˜»å¡
sigprocmask(SIG_UNBLOCK, &set, NULL);
```
é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬ç¡®ä¿äº†â€œæ·»åŠ ä½œä¸šåˆ°åˆ—è¡¨â€çš„æ“ä½œä¸€å®šå‘ç”Ÿåœ¨â€œä»åˆ—è¡¨ç§»é™¤ä½œä¸šâ€çš„ä¿¡å·å¤„ç†ç¨‹åºä¹‹å‰ï¼Œä»è€Œæ¶ˆé™¤äº†ç«æ€æ¡ä»¶ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_151.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_153.png)

---

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_155.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_157.png)

## å…¶ä»–ç›¸å…³ç³»ç»Ÿè°ƒç”¨

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_159.png)

é™¤äº†å·²ç»ä»‹ç»çš„å†…å®¹ï¼Œè¿˜æœ‰ä¸¤ä¸ªé‡è¦çš„ç³»ç»Ÿè°ƒç”¨ç”¨äºå‘é€ä¿¡å·ï¼š

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_161.png)

*   **`kill`**ï¼šå‘æŒ‡å®šè¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ã€‚
    ```c
    kill(pid, SIGUSR1); // å‘è¿›ç¨‹ pid å‘é€ç”¨æˆ·è‡ªå®šä¹‰ä¿¡å· SIGUSR1
    ```
*   **`raise`**ï¼šå‘è¿›ç¨‹è‡ªèº«å‘é€ä¸€ä¸ªä¿¡å·ã€‚
    ```c
    raise(SIGTERM); // å‘è‡ªå·±å‘é€ç»ˆæ­¢ä¿¡å·
    ```

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_163.png)

`kill` å‘½ä»¤åŠŸèƒ½å¼ºå¤§ï¼Œé™¤äº†å‘é€ç»ˆæ­¢ä¿¡å·ï¼Œè¿˜å¯ä»¥å‘é€ä»»ä½•å…¶ä»–ä¿¡å·ã€‚é€šè¿‡æŒ‡å®šè´Ÿæ•°çš„è¿›ç¨‹ç»„IDï¼Œè¿˜å¯ä»¥å‘æ•´ä¸ªè¿›ç¨‹ç»„å‘é€ä¿¡å·ã€‚

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_165.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_167.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_169.png)

---

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_171.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_173.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_175.png)

## æ€»ç»“

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_177.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_179.png)

![](img/5307d4923970aa2b8e91ebe06d2ca1fa_181.png)

æœ¬èŠ‚è¯¾ä¸­æˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†æ“ä½œç³»ç»Ÿä¿¡å·æœºåˆ¶çš„æ ¸å¿ƒå†…å®¹ï¼š

1.  **ä¿¡å·åŸºç¡€**ï¼šä¿¡å·æ˜¯ç®€å•çš„è¿›ç¨‹é—´äº‹ä»¶é€šçŸ¥æœºåˆ¶ï¼Œé€šè¿‡ç¼–å·æ ‡è¯†ã€‚
2.  **ä¿¡å·å¤„ç†ç¨‹åº**ï¼šæˆ‘ä»¬ç¼–å†™äº†å¤„ç† `SIGCHLD` ä¿¡å·çš„å‡½æ•°ï¼Œç”¨äºæ”¶å‰²ç»“æŸçš„å­è¿›ç¨‹ï¼Œå¹¶å­¦ä¼šäº†ä½¿ç”¨ `WNOHANG` é€‰é¡¹å¤„ç†å¤šä¸ªå­è¿›ç¨‹åŒæ—¶ç»“æŸçš„æƒ…å†µã€‚
3.  **ç«æ€æ¡ä»¶**ï¼šæˆ‘ä»¬è®¤è¯†äº†ä¿¡å·å¤„ç†ä¸­ç”±äºæ—¶åºä¸ç¡®å®šæ€§å¯¼è‡´çš„ç«æ€æ¡ä»¶é—®é¢˜ã€‚
4.  **ä¿¡å·åŒæ­¥**ï¼šæˆ‘ä»¬ä½¿ç”¨ `sigprocmask`ã€ä¿¡å·é›†ç­‰å·¥å…·é˜»å¡å’Œè§£é™¤é˜»å¡ä¿¡å·ï¼Œç¡®ä¿äº†å…³é”®ä»£ç æ®µçš„æ‰§è¡Œé¡ºåºï¼Œè§£å†³äº†ç«æ€æ¡ä»¶ã€‚
5.  **ä¿¡å·å‘é€**ï¼šæˆ‘ä»¬äº†è§£äº† `kill` å’Œ `raise` ç³»ç»Ÿè°ƒç”¨ï¼Œç”¨äºä¸»åŠ¨å‘é€ä¿¡å·ã€‚

ä¿¡å·æ˜¯å¹¶å‘ç¼–ç¨‹ä¸­å¼ºå¤§ä½†éœ€è¦è°¨æ…ä½¿ç”¨çš„å·¥å…·ã€‚æ­£ç¡®ç†è§£å’Œä½¿ç”¨ä¿¡å·ï¼Œå¯¹äºç¼–å†™å¥å£®çš„å¤šè¿›ç¨‹ç¨‹åºè‡³å…³é‡è¦ã€‚