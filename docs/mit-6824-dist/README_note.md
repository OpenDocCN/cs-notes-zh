# MIT 6.824 2021 分布式系统笔记：第1课 - 引言 🚀

在本节课中，我们将要学习分布式系统的基础概念、核心挑战以及设计目标。课程内容将帮助你理解为什么需要分布式系统，以及构建它们时需要考虑的关键问题。

## 什么是分布式系统？

分布式系统由多个通过网络连接的计算机组成。这些计算机协同工作，共同完成一个任务。它们看起来像是一个单一、连贯的系统。

上一节我们介绍了分布式系统的定义，本节中我们来看看它的主要驱动力。

构建分布式系统主要有两个原因。第一个原因是**性能**。通过并行使用多台计算机的CPU、内存、磁盘和网络，可以获得更高的整体能力。第二个原因是**容错**。多台计算机可以提供冗余；即使其中一台出现故障，系统整体仍能继续工作。

## 分布式系统的核心挑战

设计分布式系统面临几个主要挑战。这些挑战源于系统的核心组成部分——多台独立的计算机和连接它们的网络。

以下是分布式系统设计者必须应对的关键挑战：

*   **并发性**：系统中的多个组件会同时执行操作。
*   **部分故障**：系统中的一部分可能发生故障，而其他部分仍在运行。故障可能难以检测。
*   **性能**：系统的性能（如吞吐量、延迟）是一个关键指标，需要仔细设计来优化。

## 可扩展性

可扩展性是分布式系统的一个重要目标。它指的是通过增加机器数量，系统处理负载的能力能够随之增长。

理想的可扩展性通常用公式描述：**N倍机器 -> N倍吞吐量**。这意味着，当我们将机器数量从1台增加到N台时，系统每秒能处理的任务量也应该增加到原来的N倍。然而，在实际中，由于通信开销和管理成本，达到完美的线性扩展非常困难。

## 容错

容错意味着即使某些组件发生故障，系统也能继续正确运行。这对于需要高可用性的服务至关重要。

实现容错通常依赖于两个基本概念：
1.  **可用性**：系统在特定时刻能够正常响应的概率。
2.  **可恢复性**：系统在故障后能够恢复并保持数据一致性的能力。

常见的容错技术是使用**复制**。将数据或服务复制到多台机器上，当一台机器故障时，其他副本可以接管工作。这引出了复制状态机（Replicated State Machine）的概念，即多台机器从相同的初始状态开始，按照相同的顺序执行相同的操作指令，从而保持状态一致。

## 一致性

一致性模型定义了客户端读取数据时能看到什么样的结果。在分布式系统中，这是一个复杂的问题，因为数据可能有多个副本。

强一致性（如线性一致性）要求系统表现得像只有一份数据副本，所有操作都是原子的且顺序执行。这简化了程序员对系统的理解，但可能影响性能。弱一致性模型则提供了更高的性能，但编程模型更复杂。

## 课程实践：MapReduce

本课程将通过一个著名的案例——MapReduce，来具体探讨分布式系统的设计。MapReduce是一个用于处理海量数据的编程模型和框架。

它的核心思想是将计算任务分为两个阶段，用代码描述其简化流程如下：
```go
map(k1, v1) -> list(k2, v2)
reduce(k2, list(v2)) -> list(v2)
```
1.  **Map阶段**：由多台工作机并行执行，读取输入数据块，生成一组中间键值对。
2.  **Reduce阶段**：将Map阶段产生的、具有相同键的中间值聚集到一起进行处理，生成最终结果。

MapReduce框架自动处理分布式执行、容错（重新执行失败的任务）和数据移动等复杂问题，使程序员只需关注Map和Reduce函数的业务逻辑。

---

本节课中我们一起学习了分布式系统的基本概念。我们了解到，分布式系统通过多台机器协作来追求性能与容错，但同时也面临着并发、部分故障和一致性等挑战。可扩展性、容错和一致性是设计的核心目标。最后，我们预览了MapReduce这一经典框架，它巧妙地将分布式计算的复杂性封装起来，为处理大数据提供了简洁的模型。在接下来的课程中，我们将深入更多实现细节和算法。