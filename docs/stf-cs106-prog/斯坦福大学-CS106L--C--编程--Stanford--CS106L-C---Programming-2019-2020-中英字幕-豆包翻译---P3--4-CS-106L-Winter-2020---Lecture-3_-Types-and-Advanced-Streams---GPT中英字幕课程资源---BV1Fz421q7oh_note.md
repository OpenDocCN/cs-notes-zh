![](img/0b97fb2356033ca01f9a52a6f213b1fa_0.png)

# æ–¯å¦ç¦å¤§å­¦ã€ŠCS106Lï¼šC++ç¼–ç¨‹ã€‹è¯¾ç¨‹ç¬”è®° - ç¬¬3è®²ï¼šç±»å‹ä¸é«˜çº§æµæ“ä½œ ğŸ§ 

![](img/0b97fb2356033ca01f9a52a6f213b1fa_2.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_4.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_5.png)

åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†è¦å­¦ä¹ C++ä¸­è¾“å…¥è¾“å‡ºæµï¼ˆI/Oï¼‰çš„é«˜çº§ç”¨æ³•ï¼Œä»¥åŠç°ä»£C++ä¸­çš„ä¸€äº›æ ¸å¿ƒç±»å‹æ¦‚å¿µã€‚æˆ‘ä»¬å°†ä»åˆ†æä¸€ä¸ªå¸¸è§çš„è¾“å…¥é”™è¯¯ç¨‹åºå¼€å§‹ï¼Œé€æ­¥æ¢è®¨å¦‚ä½•ç¨³å¥åœ°å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œå¹¶ä»‹ç»`auto`ã€`pair`ã€`struct`ç­‰æœ‰ç”¨çš„ç±»å‹å·¥å…·ã€‚

![](img/0b97fb2356033ca01f9a52a6f213b1fa_7.png)

## æµæ“ä½œå›é¡¾ä¸é—®é¢˜å¼•å…¥

![](img/0b97fb2356033ca01f9a52a6f213b1fa_9.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_11.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_13.png)

ä¸Šä¸€èŠ‚æˆ‘ä»¬ä»‹ç»äº†å­—ç¬¦ä¸²æµï¼ˆ`stringstream`ï¼‰ç”¨äºè§£æå­—ç¬¦ä¸²ã€‚æœ¬èŠ‚ä¸­æˆ‘ä»¬æ¥çœ‹çœ‹æ ‡å‡†è¾“å…¥æµ`cin`çš„å·¥ä½œåŸç†åŠå…¶å¸¸è§é™·é˜±ã€‚

![](img/0b97fb2356033ca01f9a52a6f213b1fa_15.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_17.png)

`cin`ä¸æå–è¿ç®—ç¬¦`>>`ç»“åˆä½¿ç”¨æ—¶ï¼Œå…¶è¡Œä¸ºç±»ä¼¼äºå­—ç¬¦ä¸²æµï¼Œä½†æœ‰ä¸€ä¸ªå…³é”®åŒºåˆ«ï¼šå½“ç¼“å†²åŒºä¸ºç©ºæ—¶ï¼Œ`cin`ä¼šä½¿ç¨‹åºç­‰å¾…ç”¨æˆ·è¾“å…¥ã€‚

```cpp
std::string name;
int age;
std::cin >> name; // ç¨‹åºåœ¨æ­¤ç­‰å¾…ç”¨æˆ·è¾“å…¥
std::cin >> age;
```

![](img/0b97fb2356033ca01f9a52a6f213b1fa_19.png)

ç„¶è€Œï¼Œè¿™ç§ç®€å•çš„ç»“åˆä½¿ç”¨ä¼šå¸¦æ¥å‡ ä¸ªé—®é¢˜ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªâ€œç³Ÿç³•çš„æ¬¢è¿ç¨‹åºâ€æ¥æ¼”ç¤ºã€‚

![](img/0b97fb2356033ca01f9a52a6f213b1fa_21.png)

## åˆ†æâ€œç³Ÿç³•çš„æ¬¢è¿ç¨‹åºâ€ ğŸš«

ä»¥ä¸‹ç¨‹åºå°è¯•è¯»å–ç”¨æˆ·åå’Œå¹´é¾„ï¼Œä½†å…¶å®ç°å­˜åœ¨ç¼ºé™·ã€‚

```cpp
void badWelcome() {
    std::string name;
    int age;
    std::string response;

    std::cout << "What's your name? ";
    std::cin >> name;
    std::cout << "What's your age? ";
    std::cin >> age;
    std::cout << "Hello, " << name << " of age " << age << std::endl;
    std::cout << "Try again? ";
    std::cin >> response;
}
```

![](img/0b97fb2356033ca01f9a52a6f213b1fa_23.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_25.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_27.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_29.png)

### ç¨‹åºå­˜åœ¨çš„ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜

![](img/0b97fb2356033ca01f9a52a6f213b1fa_31.png)

ä»¥ä¸‹æ˜¯è¯¥ç¨‹åºè¾“å…¥æœºåˆ¶çš„ä¸»è¦ç¼ºé™·ï¼š

![](img/0b97fb2356033ca01f9a52a6f213b1fa_33.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_35.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_37.png)

1.  **é€æ ‡è®°è¯»å–**ï¼š`cin >>`åªè¯»å–åˆ°ä¸‹ä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼ˆå¦‚ç©ºæ ¼ã€æ¢è¡Œï¼‰ï¼Œä¸æ¶ˆè€—è¯¥ç©ºç™½å­—ç¬¦ã€‚å¦‚æœç”¨æˆ·è¾“å…¥â€œAvery Wangâ€ï¼Œ`name`å˜é‡åªä¼šå¾—åˆ°â€œAveryâ€ï¼Œâ€œWangâ€ä¼šç•™åœ¨ç¼“å†²åŒºã€‚
2.  **ç¼“å†²åŒºæ®‹ç•™å¯¼è‡´æç¤ºé”™ä¹±**ï¼šç”±äºä¸Šä¸€ä¸ªé—®é¢˜ç•™ä¸‹çš„æ®‹ç•™æ•°æ®ï¼Œåç»­çš„`cin`æ“ä½œå¯èƒ½ä¸ä¼šåœ¨é¢„æœŸæ—¶åˆ»æš‚åœå¹¶æç¤ºç”¨æˆ·ï¼Œå› ä¸ºç¼“å†²åŒºéç©ºã€‚
3.  **å¤±è´¥çŠ¶æ€è”“å»¶**ï¼šä¸€æ—¦æŸæ¬¡`cin`æ“ä½œå¤±è´¥ï¼ˆä¾‹å¦‚å°è¯•å°†â€œabcâ€è¯»å…¥`int`ï¼‰ï¼Œæµçš„å¤±è´¥æ ‡å¿—ä½ä¼šè¢«è®¾ç½®ï¼Œæ‰€æœ‰åç»­çš„`cin`æ“ä½œéƒ½ä¼šç«‹å³å¤±è´¥ï¼Œä¸ä¼šå°è¯•è¯»å–ã€‚

![](img/0b97fb2356033ca01f9a52a6f213b1fa_39.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_41.png)

## å®ç°ç¨³å¥çš„è¾“å…¥ï¼šä½¿ç”¨`getline`å’Œ`getInteger` âœ…

ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦é‡‡ç”¨æ›´ç¨³å¥çš„è¾“å…¥æ–¹æ³•ã€‚

![](img/0b97fb2356033ca01f9a52a6f213b1fa_43.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_45.png)

### ä½¿ç”¨`getline`è¯»å–æ•´è¡Œ

![](img/0b97fb2356033ca01f9a52a6f213b1fa_47.png)

`getline`å‡½æ•°å¯ä»¥è¯»å–ä¸€æ•´è¡Œè¾“å…¥ï¼Œç›´åˆ°é‡åˆ°æ¢è¡Œç¬¦ï¼Œå¹¶ä¸”ä¼šæ¶ˆè€—æ‰è¿™ä¸ªæ¢è¡Œç¬¦ã€‚è¿™è§£å†³äº†é€æ ‡è®°è¯»å–å’Œç¼“å†²åŒºæ®‹ç•™çš„é—®é¢˜ã€‚

```cpp
std::string line;
std::getline(std::cin, line); // è¯»å–æ•´è¡Œåˆ°lineå˜é‡ä¸­
```

**æ³¨æ„**ï¼šæ··åˆä½¿ç”¨`cin >>`å’Œ`getline`æ—¶éœ€è¦å°å¿ƒã€‚å› ä¸º`cin >>`åœ¨è¯»å–åä¼šåœ¨ç¼“å†²åŒºç•™ä¸‹æ¢è¡Œç¬¦ï¼Œç´§æ¥ç€çš„`getline`ä¼šç«‹åˆ»è¯»åˆ°ç©ºè¡Œã€‚è§£å†³æ–¹æ³•æ˜¯åœ¨`cin >>`åä½¿ç”¨`cin.ignore()`å¿½ç•¥ä¸€ä¸ªå­—ç¬¦ã€‚

### å®ç°å®‰å…¨çš„`getInteger`å‡½æ•°

å¯¹äºè¯»å–æ•´æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½å¤„ç†é”™è¯¯è¾“å…¥å¹¶é‡æ–°æç¤ºçš„å‡½æ•°ã€‚å…¶æ€è·¯æ˜¯ï¼šè¯»å–æ•´è¡Œå­—ç¬¦ä¸²ï¼Œç„¶åå°è¯•ç”¨`stringstream`å°†å…¶è½¬æ¢ä¸ºæ•´æ•°ã€‚

ä»¥ä¸‹æ˜¯`getInteger`å‡½æ•°çš„ä¸€ä¸ªå®ç°æ¡†æ¶ï¼š

![](img/0b97fb2356033ca01f9a52a6f213b1fa_49.png)

```cpp
int getInteger(const std::string& prompt) {
    int result;
    std::string line;
    while (true) {
        std::cout << prompt;
        std::getline(std::cin, line);
        std::istringstream iss(line);
        // å°è¯•è½¬æ¢ï¼Œå¹¶ç¡®ä¿å­—ç¬¦ä¸²åé¢æ²¡æœ‰å¤šä½™å­—ç¬¦
        if (iss >> result && !(iss >> std::ws).eof()) {
            std::cout << "Invalid input. Please enter only an integer." << std::endl;
        } else if (iss.fail()) {
            std::cout << "Invalid input. Please enter an integer." << std::endl;
        } else {
            return result; // æˆåŠŸè¯»å–
        }
        // å¾ªç¯ç»§ç»­ï¼Œé‡æ–°æç¤º
    }
}
```

## ç°ä»£C++ç±»å‹ç®€ä»‹ ğŸ†•

![](img/0b97fb2356033ca01f9a52a6f213b1fa_51.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_53.png)

åœ¨è§£å†³äº†æµè¾“å…¥çš„é—®é¢˜åï¼Œæˆ‘ä»¬è½¬å‘ç°ä»£C++ä¸­ä¸€äº›æœ‰ç”¨çš„ç±»å‹æ¦‚å¿µã€‚

![](img/0b97fb2356033ca01f9a52a6f213b1fa_55.png)

### æ— ç¬¦å·ç±»å‹ä¸`size_t`

C++ä¸­æ•´æ•°æœ‰æœ‰ç¬¦å·ï¼ˆå¦‚`int`ï¼Œå¯æ­£å¯è´Ÿï¼‰å’Œæ— ç¬¦å·ï¼ˆå¦‚`unsigned int`ï¼Œä»…éè´Ÿï¼‰ä¹‹åˆ†ã€‚åƒ`string.size()`è¿™æ ·çš„å‡½æ•°è¿”å›çš„å°±æ˜¯æ— ç¬¦å·ç±»å‹`size_t`ã€‚

```cpp
std::string str = "hello";
// è­¦å‘Šï¼šæœ‰ç¬¦å·ä¸æ— ç¬¦å·æ•´æ•°æ¯”è¾ƒ
for (int i = 0; i < str.size(); ++i) { /* ... */ }
// æ­£ç¡®ï¼šä½¿ç”¨ size_t
for (size_t i = 0; i < str.size(); ++i) { /* ... */ }
```

**å¸¸è§é”™è¯¯**ï¼šå¯¹æ— ç¬¦å·æ•°è¿›è¡Œ`size() - 1`æ“ä½œæ—¶ï¼Œå¦‚æœ`size()`ä¸º0ï¼Œä¼šä¸‹æº¢å˜æˆä¸€ä¸ªéå¸¸å¤§çš„æ­£æ•°ï¼Œå¯¼è‡´è®¿é—®è¶Šç•Œã€‚

### ç±»å‹åˆ«åä¸`auto`å…³é”®å­—

**ç±»å‹åˆ«å** (`using`) å¯ä»¥ä¸ºå¤æ‚çš„ç±»å‹ååˆ›å»ºç®€çŸ­çš„åˆ«åã€‚
**`auto`** å…³é”®å­—è®©ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼å˜é‡ç±»å‹ã€‚

```cpp
// ç±»å‹åˆ«å
using MapIterator = std::map<std::string, int>::iterator;

// auto ç¤ºä¾‹
auto x = 3.14; // x è¢«æ¨å¯¼ä¸º double
auto name = std::string("Avery"); // name æ˜¯ std::string
const auto& ref = x; // ref æ˜¯ const double&
```

**ä½•æ—¶ä½¿ç”¨`auto`**ï¼šå½“ç±»å‹åç§°å¾ˆé•¿ï¼ˆå¦‚è¿­ä»£å™¨ï¼‰ï¼Œæˆ–è€…ä½ ä¸å…³å¿ƒå…·ä½“ç±»å‹æ—¶ã€‚å¯¹äº`int`ã€`double`ç­‰ç®€å•ç±»å‹ï¼Œç›´æ¥å£°æ˜å¯èƒ½æ›´æ¸…æ™°ã€‚

### å¤åˆç±»å‹ï¼š`pair`, `tuple` å’Œ `struct`

![](img/0b97fb2356033ca01f9a52a6f213b1fa_57.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_59.png)

*   **`std::pair`**ï¼šå°†ä¸¤ä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå•å…ƒã€‚
    ```cpp
    auto price = std::make_pair(19.99, "USD");
    std::cout << price.first << " " << price.second << std::endl;
    ```
*   **ç»“æ„åŒ–ç»‘å®š** (C++17)ï¼šæ–¹ä¾¿åœ°ä»`pair`æˆ–`tuple`ä¸­æå–å€¼ã€‚
    ```cpp
    auto [amount, currency] = price; // amount=19.99, currency="USD"
    ```
*   **`struct`**ï¼šå°†å¤šä¸ªå¯èƒ½ä¸åŒç±»å‹çš„æˆå‘˜ç»„åˆæˆä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹ã€‚å®ƒæ¯”`pair`æ›´æ¸…æ™°ï¼Œå› ä¸ºæˆå‘˜æœ‰åå­—ã€‚
    ```cpp
    struct Coupon {
        double discount;
        std::string expiryDate;
    };
    Coupon c = {0.2, "2024-12-31"};
    ```

### å‚æ•°ä¼ é€’çš„æƒ¯ç”¨æ³•

å‡½æ•°å‚æ•°çš„ç±»å‹ä¼ è¾¾äº†å…¶ç”¨é€”ï¼Œè¿™æ˜¯ä¸€ç§è‡ªæˆ‘æ–‡æ¡£åŒ–çš„æ–¹å¼ã€‚

![](img/0b97fb2356033ca01f9a52a6f213b1fa_61.png)

*   **`void func(int x)`**ï¼šå€¼ä¼ é€’ã€‚ç”¨äºå»‰ä»·æ‹·è´çš„ç±»å‹ï¼ˆå¦‚`int`, `double`ï¼‰ã€‚å‡½æ•°å†…ä¿®æ”¹`x`ä¸å½±å“å¤–ç•Œã€‚
*   **`void func(const std::vector<int>& x)`**ï¼šå¸¸é‡å¼•ç”¨ä¼ é€’ã€‚ç”¨äºä¸æƒ³ä¿®æ”¹çš„å¤§å‹è¾“å…¥æ•°æ®ï¼Œé¿å…æ‹·è´å¼€é”€ã€‚
*   **`void func(std::vector<int>& x)`**ï¼šéå¸¸é‡å¼•ç”¨ä¼ é€’ã€‚ç”¨äºéœ€è¦ä¿®æ”¹çš„è¾“å…¥è¾“å‡ºå‚æ•°ã€‚
*   **`std::vector<int> func()`**ï¼šç›´æ¥è¿”å›å€¼ã€‚ç°ä»£C++ä¸­ï¼Œè¿”å›ä¸€ä¸ªå±€éƒ¨å®¹å™¨æ˜¯é«˜æ•ˆä¸”æ¨èçš„åšæ³•ã€‚

## æ€»ç»“ä¸æŒ‘æˆ˜ ğŸ¯

![](img/0b97fb2356033ca01f9a52a6f213b1fa_63.png)

æœ¬èŠ‚è¯¾ä¸­æˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†ï¼š
1.  `cin`ä¸æå–è¿ç®—ç¬¦`>>`ç»“åˆä½¿ç”¨çš„ä¸‰å¤§é™·é˜±ï¼šé€æ ‡è®°è¯»å–ã€ç¼“å†²åŒºæ®‹ç•™å’Œå¤±è´¥çŠ¶æ€è”“å»¶ã€‚
2.  å¦‚ä½•ä½¿ç”¨`getline`å’Œè‡ªå®šä¹‰çš„`getInteger`å‡½æ•°å®ç°ç¨³å¥çš„ç”¨æˆ·è¾“å…¥ã€‚
3.  ç°ä»£C++ä¸­çš„å…³é”®ç±»å‹æ¦‚å¿µï¼šæ— ç¬¦å·ç±»å‹ä¸`size_t`ã€ç±»å‹åˆ«åã€`auto`ç±»å‹æ¨å¯¼ã€ä»¥åŠ`pair`/`struct`ç­‰å¤åˆç±»å‹ã€‚
4.  é€šè¿‡å‡½æ•°å‚æ•°ç±»å‹ï¼ˆå€¼ä¼ é€’ã€å¸¸é‡å¼•ç”¨ã€éå¸¸é‡å¼•ç”¨ï¼‰æ¥è¡¨è¾¾æ„å›¾çš„ç¼–ç¨‹æƒ¯ç”¨æ³•ã€‚

![](img/0b97fb2356033ca01f9a52a6f213b1fa_65.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_67.png)

![](img/0b97fb2356033ca01f9a52a6f213b1fa_68.png)

**æœ¬èŠ‚æŒ‘æˆ˜**ï¼šå°è¯•ç¼–å†™ä¸€ä¸ªå‡½æ•°`promptUserForFile`ï¼Œè¯¥å‡½æ•°èƒ½ç¨³å¥åœ°æç¤ºç”¨æˆ·è¾“å…¥ä¸€ä¸ªæœ‰æ•ˆçš„æ–‡ä»¶åï¼Œç›´åˆ°ç”¨æˆ·è¾“å…¥æˆåŠŸæˆ–é€‰æ‹©é€€å‡ºã€‚è¿™å¯¹äºå¤„ç†æ–‡ä»¶æ“ä½œçš„ç¨‹åºéå¸¸æœ‰ç”¨ã€‚