![](img/7c7b65a35fc6571053315e7b4d5ce045_0.png)

# 课程 P23：同步数字系统与逻辑电路基础 🧠

在本节课中，我们将学习同步数字系统的基本概念、布尔逻辑化简以及时序分析。课程内容将涵盖逻辑代数、SDS核心组件以及如何分析电路中的信号传播与时钟约束。

***

## 布尔逻辑化简 🔍

上一节我们介绍了课程概述，本节中我们来看看布尔逻辑化简。布尔代数是数字电路设计的基础，核心操作包括与（AND）、或（OR）、非（NOT）以及它们的组合，如异或（XOR）。

德摩根定律是解决许多逻辑化简问题的关键。其公式如下：
*   **NOT (A AND B) = (NOT A) OR (NOT B)**
*   **NOT (A OR B) = (NOT A) AND (NOT B)**

以下是证明等式 `NOT (A OR (A AND B)) = NOT A` 的步骤：

1.  从等式左边开始：`NOT (A OR (A AND B))`。
2.  首先，将 `(A AND B)` 视为一个整体。根据德摩根定律，`NOT (A OR X)` 可以转换为 `(NOT A) AND (NOT X)`。这里 `X = (A AND B)`。
3.  应用定律后，表达式变为：`(NOT A) AND (NOT (A AND B))`。
4.  对新的内层项 `NOT (A AND B)` 再次应用德摩根定律，将其转换为 `(NOT A) OR (NOT B)`。
5.  现在表达式是：`(NOT A) AND ((NOT A) OR (NOT B))`。
6.  注意到 `(NOT A)` 是公共项。利用分配律，可以将其提取出来：`(NOT A) AND ( (NOT A) OR (NOT B) )`。
7.  根据布尔代数吸收律或通过真值表分析，`A AND (A OR B) = A`。因此，`(NOT A) AND ((NOT A) OR (NOT B))` 简化为 `(NOT A)`。
8.  至此，左边 `NOT (A OR (A AND B))` 被证明等于右边 `NOT A`。

另一种思路是考虑逻辑含义：原表达式意味着“A为假，或者（A为真且B为真）”。如果A为真，则整个括号内为真，取反后为假，即 `NOT A` 为假。如果A为假，则无论B如何，`NOT A` 为真。因此两者等价。

***

## 同步数字系统核心概念 ⏱️

理解了逻辑化简后，我们进入同步数字系统的核心。SDS 使用时钟信号来协调电路中各部分的动作，这对于构建复杂、稳定的数字系统（如CPU）至关重要。

系统主要包含两类元件：
1.  **组合逻辑元件**：如与门、或门、非门。其输出**立即**响应输入变化，不依赖于时钟。
    ```verilog
    // 例如：一个与门
    output = input_a & input_b;
    ```
2.  **状态元件**：如寄存器（Register）。其输出仅在时钟信号的特定边沿（如上升沿）才根据输入更新，具有记忆功能。
    ```verilog
    // 例如：一个上升沿触发的寄存器
    always @(posedge clk) begin
        q <= d;
    end
    ```

一个典型的SDS数据路径遵循“寄存器-组合逻辑-寄存器”的模式：
*   输入由第一个寄存器在时钟边沿采样并稳定。
*   采样值经过组合逻辑电路处理。
*   处理结果在下一个时钟边沿被第二个寄存器捕获。

***

## 时序参数与约束 📊

要保证上述流程可靠工作，必须理解并满足时序约束。所有时序都以时钟上升沿为参考点。

以下是关键的时序参数定义：
*   **时钟周期**：相邻两个上升沿之间的时间。
*   **T_clk-to-q**：时钟上升沿后，寄存器输出稳定有效所需的时间。
*   **T_setup**：在时钟上升沿**之前**，寄存器输入信号必须保持稳定的最短时间。
*   **T_hold**：在时钟上升沿**之后**，寄存器输入信号必须继续保持稳定的最短时间。
*   **T_prop**：信号通过组合逻辑传播所需的时间。

由此可以推导出两个核心约束公式，它们决定了电路能正常工作的时钟频率：
1.  **最小时钟周期约束**：时钟周期必须大于最长的路径延迟，以确保信号有足够时间传播。
    **`T_clk > T_clk-to-q + T_prop_max + T_setup`**
2.  **保持时间约束**：最短路径的延迟必须足够长，以防止新数据过早到达干扰当前数据。
    **`T_hold < T_clk-to-q + T_prop_min`**

其中，**`T_prop_max`** 是寄存器间所有路径中**最长**的组合逻辑延迟，它决定了电路的最高速度（最小时钟周期）。**`T_prop_min`** 是**最短**的组合逻辑延迟，用于检查保持时间是否被违反。

***

## 时序分析实例 🛠️

现在，我们应用这些概念分析一个具体电路。假设已知：
*   时钟周期 `T_clk = 8 ps`
*   寄存器时钟到Q延迟 `T_clk-to-q = 2 ps`
*   寄存器建立时间 `T_setup = 4 ps`
*   寄存器保持时间 `T_hold = 2 ps`
*   反相器（非门）的传播延迟 `T_inv = 1 ps`

分析信号从输入 `A`，经过寄存器 `R1`、反相器，到寄存器 `R2` 的传播过程：

1.  **初始状态**：在第一个时钟上升沿，`R1` 采样输入 `A`。由于 `T_clk-to-q` 延迟，`R1` 的输出在时钟沿后 `2 ps` 才更新。
2.  **组合逻辑延迟**：`R1` 的新输出经过反相器，产生 `1 ps` 的延迟。
3.  **到达 `R2`**：信号在时钟沿后 `2 ps + 1 ps = 3 ps` 到达 `R2` 的输入。
4.  **检查建立时间**：`R2` 的下一个时钟上升沿在 `8 ps` 处。信号在 `3 ps` 时已稳定，距离下一个时钟沿有 `8 - 3 = 5 ps`，大于要求的 `T_setup (4 ps)`，因此**建立时间满足**。
5.  **检查保持时间**：`R2` 在当前时钟沿后需要输入保持 `T_hold (2 ps)` 稳定。新信号在 `3 ps` 时才到达，这已经超过了 `2 ps` 的保持时间窗口，因此**保持时间也满足**（旧数据在要求的时间内未受新数据干扰）。

通过这个例子，我们可以看到如何利用时序参数来验证电路在给定时钟下的工作可靠性。

***

## 常见问题澄清 ❓

以下是关于性能与路径延迟的几个关键点澄清：

1.  **逻辑化简影响性能吗？**
    是的。化简布尔表达式可以减少实现所需的逻辑门数量或改变其层级结构，从而可能减少关键路径的 `T_prop_max`，提高电路可运行的最高时钟频率。

2.  **逻辑门越少，电路一定越快吗？**
    不一定。速度取决于**关键路径**的延迟。即使总门数少，但如果它们串联成一条很长的路径，延迟可能很大。反之，门数多但路径并行，关键路径延迟可能更短。

3.  **最短路径决定时钟频率吗？**
    不。电路的最高时钟频率（最小时钟周期）由寄存器之间的**最长组合逻辑路径延迟**决定。最短路径延迟主要用于验证是否违反保持时间约束。

***

![](img/7c7b65a35fc6571053315e7b4d5ce045_2.png)

本节课中我们一起学习了布尔逻辑的化简技巧，深入探讨了同步数字系统的基本原理，包括状态元件与组合逻辑元件的区别，并掌握了时序分析的核心参数与约束公式。通过实例分析，我们了解了如何应用这些知识来评估电路的正确性与性能。这些基础是后续设计更复杂数字系统（如数据路径和CPU）的基石。