![](img/871db9a38be557766c273c0ebed8a644_1.png)

# è¯¾ç¨‹ P40ï¼šç¬¬30è®²ï¼šå¹¶è¡Œæ€§ II - OpenMP ä¸å…±äº«é—®é¢˜ ğŸ”„

åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ çº¿ç¨‹çº§å¹¶è¡Œæ€§çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œé‡ç‚¹ä»‹ç» OpenMP è¿™ä¸€å¹¶è¡Œç¼–ç¨‹åº“ï¼Œå¹¶æ¢è®¨åœ¨å…±äº«å†…å­˜ç¼–ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„â€œç«äº‰æ¡ä»¶â€ç­‰æ ¸å¿ƒé—®é¢˜ã€‚

![](img/871db9a38be557766c273c0ebed8a644_3.png)

![](img/871db9a38be557766c273c0ebed8a644_5.png)

---

![](img/871db9a38be557766c273c0ebed8a644_7.png)

## å¹¶è¡Œç¼–ç¨‹è¯­è¨€æ¦‚è§ˆ ğŸ—ºï¸

ä¸Šä¸€èŠ‚æˆ‘ä»¬ä»‹ç»äº†çº¿ç¨‹çº§å¹¶è¡Œæ€§çš„åŸºæœ¬æ¦‚å¿µã€‚æœ¬èŠ‚ä¸­æˆ‘ä»¬æ¥çœ‹çœ‹æ”¯æŒå¹¶è¡Œç¼–ç¨‹çš„ä¸åŒè¯­è¨€å±‚æ¬¡ã€‚

![](img/871db9a38be557766c273c0ebed8a644_9.png)

![](img/871db9a38be557766c273c0ebed8a644_11.png)

å¹¶è¡Œç¼–ç¨‹å¯ä»¥åœ¨ä¸åŒå±‚æ¬¡ä¸Šè¿›è¡Œï¼Œä¾‹å¦‚æ§åˆ¶å¤šå°æœºå™¨æˆ–æ§åˆ¶å•ä¸ªæœºå™¨çš„å¤šä¸ªæ ¸å¿ƒã€‚ç›®å‰å­˜åœ¨å¤§çº¦40å¤šç§æ”¯æŒå¹¶è¡Œç¼–ç¨‹çš„è¯­è¨€ã€‚

![](img/871db9a38be557766c273c0ebed8a644_13.png)

![](img/871db9a38be557766c273c0ebed8a644_15.png)

ä»¥ä¸‹æ˜¯é€‰æ‹©ç¼–ç¨‹è¯­è¨€æ—¶éœ€è¦è€ƒè™‘çš„ä¸€äº›å› ç´ ï¼š
*   **æ˜ç¡®æ§åˆ¶ä¸é«˜çº§æŠ½è±¡**ï¼šåƒ C è¿™æ ·çš„è¯­è¨€å…è®¸ç¨‹åºå‘˜æ˜ç¡®æ§åˆ¶ç¡¬ä»¶æ“ä½œï¼ˆä¾‹å¦‚ï¼Œå¦‚ä½•å°†æ•°æ®ä»ä¸€ä¸ªéƒ¨åˆ†ç§»åŠ¨åˆ°å¦ä¸€ä¸ªéƒ¨åˆ†ï¼‰ã€‚è€Œåƒ Python è¿™æ ·çš„é«˜çº§è¯­è¨€åˆ™æ›´å…³æ³¨â€œè¦åšä»€ä¹ˆâ€ï¼Œç”±ç¼–è¯‘å™¨æˆ–è¿è¡Œæ—¶ç³»ç»Ÿå†³å®šâ€œå¦‚ä½•åšâ€ã€‚
*   **ä»»åŠ¡ç±»å‹å·®å¼‚**ï¼šä¸åŒçš„åº”ç”¨é¢†åŸŸï¼ˆå¦‚ç§‘å­¦è®¡ç®—ã€ç½‘ç»œæœåŠ¡å™¨ï¼‰å¯¹å¹¶è¡Œæ€§çš„éœ€æ±‚ä¸åŒã€‚
*   **è¾“å…¥/è¾“å‡ºï¼ˆI/Oï¼‰å¤„ç†**ï¼šI/O æ“ä½œé€šå¸¸æ˜¯å¼‚æ­¥å’Œä¸å¯é¢„æµ‹çš„ï¼Œè¿™æœ¬èº«å°±æ˜¯ä¸€ç§å¹¶å‘é—®é¢˜ï¼Œéœ€è¦ç‰¹å®šçš„è¯­è¨€ç‰¹æ€§æ¥å¤„ç†ã€‚

![](img/871db9a38be557766c273c0ebed8a644_17.png)

åœ¨ CS61C è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹ä½¿ç”¨ C è¯­è¨€ï¼Œå¹¶å¼•å…¥ **OpenMP** åº“æ¥å¸®åŠ©æˆ‘ä»¬åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨è¿›è¡Œå¹¶è¡Œè®¡ç®—ã€‚

![](img/871db9a38be557766c273c0ebed8a644_19.png)

---

![](img/871db9a38be557766c273c0ebed8a644_21.png)

## ä»€ä¹ˆæ˜¯ OpenMPï¼Ÿ ğŸ§µ

OpenMP æ˜¯ä¸€ä¸ªæ”¯æŒå…±äº«å†…å­˜å¹¶è¡Œç¼–ç¨‹çš„ C è¯­è¨€æ‰©å±•ã€‚å®ƒçš„ä¸»è¦ä¼˜ç‚¹æ˜¯å…è®¸ç¨‹åºå‘˜é€šè¿‡æœ€å°‘çš„ä»£ç ä¿®æ”¹æ¥å®ç°å¹¶è¡ŒåŒ–ã€‚

![](img/871db9a38be557766c273c0ebed8a644_23.png)

å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨ **ç¼–è¯‘æŒ‡å¯¼è¯­å¥**ã€‚è¿™äº›è¯­å¥ä»¥ `#pragma omp` å¼€å¤´ï¼Œå¯¹äºä¸æ”¯æŒ OpenMP çš„ç¼–è¯‘å™¨æ¥è¯´ï¼Œå®ƒä»¬ä¼šè¢«å¿½ç•¥ã€‚åªæœ‰å½“ä½ åŒ…å«äº† OpenMP å¤´æ–‡ä»¶å¹¶å¯ç”¨äº†ç›¸åº”ç¼–è¯‘é€‰é¡¹æ—¶ï¼Œè¿™äº›è¯­å¥æ‰ä¼šç”Ÿæ•ˆã€‚

![](img/871db9a38be557766c273c0ebed8a644_25.png)

OpenMP é‡‡ç”¨ **fork-join** å¹¶è¡Œæ‰§è¡Œæ¨¡å‹ï¼š
1.  ç¨‹åºå¼€å§‹æ—¶åªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ã€‚
2.  é‡åˆ°å¹¶è¡ŒåŒºåŸŸæ—¶ï¼Œä¸»çº¿ç¨‹â€œæ´¾ç”Ÿâ€å‡ºä¸€ç»„å·¥ä½œçº¿ç¨‹ã€‚
3.  æ‰€æœ‰çº¿ç¨‹åœ¨å¹¶è¡ŒåŒºåŸŸå†…æ‰§è¡Œä»£ç ã€‚
4.  å¹¶è¡ŒåŒºåŸŸç»“æŸæ—¶ï¼Œæ‰€æœ‰å·¥ä½œçº¿ç¨‹â€œåˆå¹¶â€ï¼Œåªå‰©ä¸‹ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚

![](img/871db9a38be557766c273c0ebed8a644_27.png)

çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦çš„è½¯ä»¶å®ä½“ï¼Œå®ƒä»¬è¢«æ˜ å°„åˆ°ç¡¬ä»¶æ ¸å¿ƒä¸Šæ‰§è¡Œã€‚ä¸ºäº†è·å¾—å‡†ç¡®çš„æ€§èƒ½æµ‹è¯•ç»“æœï¼Œåº”ç¡®ä¿åœ¨è¿è¡Œå¹¶è¡Œç¨‹åºæ—¶ï¼Œç³»ç»Ÿè´Ÿè½½è¾ƒä½ã€‚

![](img/871db9a38be557766c273c0ebed8a644_29.png)

![](img/871db9a38be557766c273c0ebed8a644_31.png)

---

![](img/871db9a38be557766c273c0ebed8a644_33.png)

## ä½¿ç”¨ OpenMP å¹¶è¡ŒåŒ–å¾ªç¯ ğŸ”„

![](img/871db9a38be557766c273c0ebed8a644_35.png)

ä¸€ä¸ªéå¸¸å¸¸è§çš„å¹¶è¡Œæ¨¡å¼æ˜¯å¹¶è¡ŒåŒ– `for` å¾ªç¯ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä» 0 åˆ° 99 çš„å¾ªç¯ï¼Œåœ¨æ‹¥æœ‰ 4 ä¸ªæ ¸å¿ƒçš„ç³»ç»Ÿä¸Šï¼Œç†æƒ³æƒ…å†µæ˜¯å°†è¿­ä»£ç©ºé—´å¤§è‡´å¹³å‡åœ°åˆ†ç»™ 4 ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚

ä½¿ç”¨ OpenMP å¯ä»¥æå…¶ç®€å•åœ°å®ç°è¿™ä¸€ç‚¹ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬ç¤ºä¾‹ï¼š

![](img/871db9a38be557766c273c0ebed8a644_37.png)

```c
#include <stdio.h>
#include <omp.h>

int main() {
    omp_set_num_threads(4); // å»ºè®®ä½¿ç”¨4ä¸ªçº¿ç¨‹
    int a[10];
    int n = 10;

    #pragma omp parallel for
    for (int i = 0; i < n; i++) {
        int thread_id = omp_get_thread_num();
        a[i] = i + thread_id * 10;
        printf("Thread %d: a[%d] = %d\n", thread_id, i, a[i]);
    }

    // æ‰“å°ç»“æœ
    for (int i = 0; i < n; i++) {
        printf("%d ", a[i]);
    }
    printf("\n");
    return 0;
}
```
è¿™æ®µä»£ç é€šè¿‡ `#pragma omp parallel for` æŒ‡ä»¤å°†åç»­çš„ `for` å¾ªç¯å¹¶è¡ŒåŒ–ã€‚æ¯ä¸ªçº¿ç¨‹ä¼šæ‰§è¡Œä¸€éƒ¨åˆ†è¿­ä»£ï¼Œ`omp_get_thread_num()` å‡½æ•°è¿”å›å½“å‰çº¿ç¨‹çš„ IDã€‚è¿è¡Œç¨‹åºæ—¶ï¼Œè¿­ä»£åˆ†é…åˆ°çº¿ç¨‹çš„é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚

![](img/871db9a38be557766c273c0ebed8a644_39.png)

![](img/871db9a38be557766c273c0ebed8a644_41.png)

![](img/871db9a38be557766c273c0ebed8a644_43.png)

---

![](img/871db9a38be557766c273c0ebed8a644_45.png)

## å®æˆ˜æ¡ˆä¾‹ï¼šå¹¶è¡Œè®¡ç®— Ï€ å€¼ ğŸ¥§

![](img/871db9a38be557766c273c0ebed8a644_47.png)

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªè®¡ç®— Ï€ å€¼çš„å®ä¾‹æ¥æ·±å…¥ç†è§£ OpenMPã€‚æˆ‘ä»¬ä½¿ç”¨æ•°å€¼ç§¯åˆ†æ³•ï¼Œå…¬å¼å¦‚ä¸‹ï¼š

**Ï€ = âˆ«â‚€Â¹ (4 / (1 + xÂ²)) dx**

æˆ‘ä»¬å¯ä»¥ç”¨é»æ›¼å’Œæ¥è¿‘ä¼¼è¿™ä¸ªç§¯åˆ†ã€‚ä»¥ä¸‹æ˜¯ä¸²è¡Œå®ç°çš„ä»£ç ï¼š

![](img/871db9a38be557766c273c0ebed8a644_49.png)

![](img/871db9a38be557766c273c0ebed8a644_51.png)

![](img/871db9a38be557766c273c0ebed8a644_53.png)

```c
#include <stdio.h>
#include <math.h>

![](img/871db9a38be557766c273c0ebed8a644_55.png)

![](img/871db9a38be557766c273c0ebed8a644_57.png)

static long num_steps = 1000000; // ç§¯åˆ†æ­¥æ•°
double step;

![](img/871db9a38be557766c273c0ebed8a644_59.png)

![](img/871db9a38be557766c273c0ebed8a644_61.png)

int main() {
    int i;
    double x, pi, sum = 0.0;
    step = 1.0 / (double) num_steps;

    for (i = 0; i < num_steps; i++) {
        x = (i + 0.5) * step; // å–ä¸­ç‚¹
        sum = sum + 4.0 / (1.0 + x * x);
    }
    pi = step * sum;
    printf("Pi = %.15f\n", pi);
    return 0;
}
```

![](img/871db9a38be557766c273c0ebed8a644_63.png)

### ç¬¬ä¸€æ¬¡å°è¯•ï¼šç®€å•çš„å¹¶è¡ŒåŒ–åŠå…¶é—®é¢˜

æˆ‘ä»¬å°è¯•ç›´æ¥æ·»åŠ å¹¶è¡ŒæŒ‡ä»¤ï¼š

```c
#pragma omp parallel for private(x) reduction(+:sum)
for (i = 0; i < num_steps; i++) {
    x = (i + 0.5) * step;
    sum = sum + 4.0 / (1.0 + x * x);
}
```
ä½†è¯·æ³¨æ„ï¼Œè¿™é‡Œå­˜åœ¨ä¸€ä¸ªå…³é”®é—®é¢˜ã€‚å¦‚æœåƒæœ€åˆé‚£æ ·å°† `sum` å£°æ˜ä¸ºå•ä¸ªå…±äº«å˜é‡ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å†™ `sum` ä¼šå¯¼è‡´é”™è¯¯ã€‚è¿™å°±æ˜¯ä¸€ç§ **ç«äº‰æ¡ä»¶**ã€‚

![](img/871db9a38be557766c273c0ebed8a644_65.png)

![](img/871db9a38be557766c273c0ebed8a644_67.png)

### æ­£ç¡®çš„å¹¶è¡ŒåŒ–ï¼šä½¿ç”¨å½’çº¦å­å¥

æ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨ OpenMP çš„ **`reduction`** å­å¥ã€‚å®ƒæŒ‡ç¤ºæ¯ä¸ªçº¿ç¨‹åˆ›å»ºè‡ªå·±çš„ `sum` å˜é‡ç§æœ‰å‰¯æœ¬ï¼Œåœ¨å¾ªç¯ç»“æŸæ—¶è‡ªåŠ¨å°†æ‰€æœ‰ç§æœ‰å‰¯æœ¬çš„å€¼ç›¸åŠ åˆ°å…¨å±€å˜é‡ä¸­ã€‚

![](img/871db9a38be557766c273c0ebed8a644_69.png)

![](img/871db9a38be557766c273c0ebed8a644_71.png)

```c
#include <stdio.h>
#include <omp.h>

![](img/871db9a38be557766c273c0ebed8a644_73.png)

![](img/871db9a38be557766c273c0ebed8a644_75.png)

![](img/871db9a38be557766c273c0ebed8a644_77.png)

static long num_steps = 1000000;
double step;

![](img/871db9a38be557766c273c0ebed8a644_79.png)

![](img/871db9a38be557766c273c0ebed8a644_81.png)

![](img/871db9a38be557766c273c0ebed8a644_83.png)

int main() {
    int i;
    double pi, sum = 0.0;
    step = 1.0 / (double) num_steps;

    #pragma omp parallel for reduction(+:sum)
    for (i = 0; i < num_steps; i++) {
        double x = (i + 0.5) * step;
        sum += 4.0 / (1.0 + x * x);
    }
    pi = step * sum;
    printf("Parallel Pi = %.15f\n", pi);
    return 0;
}
```
é€šè¿‡ `reduction(+:sum)` å­å¥ï¼Œæˆ‘ä»¬å®‰å…¨é«˜æ•ˆåœ°å®ç°äº†å¹¶è¡Œè®¡ç®—ï¼Œå¹¶èƒ½è·å¾—æ˜¾è‘—çš„åŠ é€Ÿæ¯”ã€‚

---

## ç†è§£ç«äº‰æ¡ä»¶ä¸é”æœºåˆ¶ âš ï¸ğŸ”’

å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å’Œä¿®æ”¹åŒä¸€å…±äº«èµ„æºï¼ˆå¦‚å˜é‡ï¼‰æ—¶ï¼Œå¦‚æœæ‰§è¡Œç»“æœä¾èµ–äºçº¿ç¨‹æ‰§è¡Œçš„ç‰¹å®šé¡ºåºï¼Œå°±ä¼šå‘ç”Ÿ **ç«äº‰æ¡ä»¶**ã€‚è¿™ä¼šå¯¼è‡´ç¨‹åºè¡Œä¸ºä¸ç¡®å®šå’Œç»“æœé”™è¯¯ã€‚

![](img/871db9a38be557766c273c0ebed8a644_85.png)

### ç«äº‰æ¡ä»¶ç¤ºä¾‹

è€ƒè™‘ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œä¸€ä¸ªç®€å•çš„é€’å¢æ“ä½œï¼š`counter = counter + 1;`ã€‚
å‡è®¾ `counter` åˆå§‹å€¼ä¸º 100ã€‚æˆ‘ä»¬æœŸæœ›ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œåç»“æœä¸º 102ã€‚

![](img/871db9a38be557766c273c0ebed8a644_87.png)

![](img/871db9a38be557766c273c0ebed8a644_89.png)

ä½†ç”±äºæ“ä½œä¸æ˜¯åŸå­çš„ï¼ˆå¯åˆ†è§£ä¸ºåŠ è½½ã€è®¡ç®—ã€å­˜å‚¨ï¼‰ï¼Œå¯èƒ½ä¼šå‘ç”Ÿä»¥ä¸‹äº¤é”™æ‰§è¡Œï¼š
1.  çº¿ç¨‹ A åŠ è½½ `counter` (å€¼ 100)ã€‚
2.  çº¿ç¨‹ B åŠ è½½ `counter` (å€¼ 100)ã€‚
3.  çº¿ç¨‹ A è®¡ç®— 100+1=101ï¼Œå¹¶å­˜å‚¨å› `counter` (ç°ä¸º 101)ã€‚
4.  çº¿ç¨‹ B è®¡ç®— 100+1=101ï¼Œå¹¶å­˜å‚¨å› `counter` (è¦†ç›–ä¸º 101)ã€‚
æœ€ç»ˆç»“æœæ˜¯ 101 è€Œä¸æ˜¯ 102ã€‚è¿™å°±æ˜¯ç«äº‰æ¡ä»¶å¯¼è‡´çš„é”™è¯¯ã€‚

![](img/871db9a38be557766c273c0ebed8a644_91.png)

![](img/871db9a38be557766c273c0ebed8a644_93.png)

![](img/871db9a38be557766c273c0ebed8a644_95.png)

### é”ï¼šä¸€ç§åŒæ­¥æœºåˆ¶

è§£å†³ç«äº‰æ¡ä»¶çš„ä¸€ç§åŸºæœ¬æ–¹æ³•æ˜¯ä½¿ç”¨ **é”**ã€‚é”ç¡®ä¿ä¸€æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¿›å…¥è¢«ä¿æŠ¤çš„ä»£ç åŒºåŸŸï¼ˆä¸´ç•ŒåŒºï¼‰ã€‚

é”çš„åŸºæœ¬é€»è¾‘æ˜¯ï¼š
*   **åŠ é”**ï¼šçº¿ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºå‰å°è¯•è·å–é”ã€‚å¦‚æœé”å·²è¢«å ç”¨ï¼Œåˆ™ç­‰å¾…ã€‚
*   **æ‰§è¡Œ**ï¼šè·å¾—é”åï¼Œçº¿ç¨‹å®‰å…¨åœ°æ‰§è¡Œä¸´ç•ŒåŒºä»£ç ã€‚
*   **è§£é”**ï¼šæ‰§è¡Œå®Œæ¯•åé‡Šæ”¾é”ï¼Œå…è®¸å…¶ä»–çº¿ç¨‹è·å–ã€‚

ç„¶è€Œï¼Œå®ç°ä¸€ä¸ªæ­£ç¡®çš„é”æœ¬èº«ä¹Ÿéœ€è¦ç¡¬ä»¶æŒ‡ä»¤æ”¯æŒï¼ˆå¦‚æµ‹è¯•å¹¶è®¾ç½®æŒ‡ä»¤ï¼‰ï¼Œä»¥é¿å…åœ¨é”çš„å®ç°ä¸Šå‡ºç°ç«äº‰æ¡ä»¶ã€‚OpenMP æä¾›äº†é«˜çº§çš„åŒæ­¥æŒ‡ä»¤ï¼ˆå¦‚ `critical` åŒºåŸŸï¼‰ï¼Œé¿å…äº†æ‰‹åŠ¨æ“ä½œé”çš„å¤æ‚æ€§ã€‚

![](img/871db9a38be557766c273c0ebed8a644_97.png)

```c
#pragma omp critical
{
    // è¿™éƒ¨åˆ†ä»£ç ä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ
    shared_counter = shared_counter + 1;
}
```

![](img/871db9a38be557766c273c0ebed8a644_99.png)

![](img/871db9a38be557766c273c0ebed8a644_101.png)

---

![](img/871db9a38be557766c273c0ebed8a644_103.png)

![](img/871db9a38be557766c273c0ebed8a644_105.png)

![](img/871db9a38be557766c273c0ebed8a644_107.png)

## æ€»ç»“ ğŸ“š

![](img/871db9a38be557766c273c0ebed8a644_109.png)

æœ¬èŠ‚è¯¾æˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†ï¼š
1.  **OpenMP ç®€ä»‹**ï¼šä¸€ä¸ªé€šè¿‡ç¼–è¯‘æŒ‡å¯¼è¯­å¥å®ç°å…±äº«å†…å­˜å¹¶è¡Œçš„ C è¯­è¨€æ‰©å±•åº“ï¼Œé‡‡ç”¨ fork-join æ‰§è¡Œæ¨¡å‹ã€‚
2.  **å¹¶è¡ŒåŒ–å¾ªç¯**ï¼šä½¿ç”¨ `#pragma omp parallel for` æŒ‡ä»¤å¯ä»¥è½»æ¾åœ°å°†å¾ªç¯è¿­ä»£åˆ†é…ç»™å¤šä¸ªçº¿ç¨‹æ‰§è¡Œã€‚
3.  **å®æˆ˜è®¡ç®— Ï€**ï¼šé€šè¿‡æ•°å€¼ç§¯åˆ†æ¡ˆä¾‹ï¼Œå­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ `reduction` å­å¥æ¥å®‰å…¨åœ°å¤„ç†å¹¶è¡Œè®¡ç®—ä¸­çš„ç´¯åŠ é—®é¢˜ï¼Œé¿å…ç«äº‰æ¡ä»¶ã€‚
4.  **ç«äº‰æ¡ä»¶**ï¼šç†è§£äº†å½“å¤šä¸ªçº¿ç¨‹æ— åºè®¿é—®å…±äº«èµ„æºæ—¶ä¼šå¯¼è‡´ä¸ç¡®å®šçš„ç¨‹åºè¡Œä¸ºå’Œæ•°æ®é”™è¯¯ã€‚
5.  **åŒæ­¥æœºåˆ¶**ï¼šè®¤è¯†äº†é”ä½œä¸ºä¿æŠ¤ä¸´ç•ŒåŒºã€è§£å†³ç«äº‰æ¡ä»¶çš„åŸºæœ¬æ¦‚å¿µï¼Œå¹¶äº†è§£åˆ° OpenMP æä¾›äº†æ›´é«˜çº§çš„åŒæ­¥åŸè¯­ã€‚

![](img/871db9a38be557766c273c0ebed8a644_111.png)

![](img/871db9a38be557766c273c0ebed8a644_113.png)

OpenMP ä»¥å…¶å¯¹ç°æœ‰ä»£ç æ”¹åŠ¨é‡å°çš„ç‰¹ç‚¹ï¼Œæˆä¸ºäº†å…±äº«å†…å­˜å¹¶è¡Œç¼–ç¨‹çš„é‡è¦å·¥å…·ã€‚ç„¶è€Œï¼Œç¼–å†™æ­£ç¡®çš„å¹¶è¡Œç¨‹åºéœ€è¦ä»”ç»†è€ƒè™‘æ•°æ®å…±äº«ä¸åŒæ­¥ï¼Œä»¥é¿å…ç«äº‰æ¡ä»¶ç­‰é™·é˜±ã€‚