- en: 哈佛 CS50-WEB ｜ 基于Python ／ JavaScript的Web编程(2020·完整版) - P19：L6- web用户接口与交互 2 (动画与交互)
    - ShowMeAI - BV1gL411x7NY
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 哈佛 CS50-WEB ｜ 基于Python ／ JavaScript的Web编程(2020·完整版) - P19：L6- web用户接口与交互 2 (动画与交互)
    - ShowMeAI - BV1gL411x7NY
- en: for things to，move around and change their properties，in some way and it turns
    out that css。has support for animation css has，already given us support，for things
    like styling elements saying。we want this element to be of this color，and this
    size for example but it also。gives us the ability to animate those，properties
    as well to change。
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 为了让事物在某种方式下移动并改变其属性，结果显示CSS已经支持动画。CSS已经为我们提供了支持，允许我们为元素设置样式，比如我们希望这个元素是什么颜色，以及多大，例如，但它也赋予我们动画这些属性的能力。
- en: the size of something or change the，position of something over some。amount of
    time and so let's now take a，look at an example，of what that might actually look
    like。i'll go ahead and create a new file，and i'll call it animate。html，and inside
    of animate。html i'll go ahead，and what i'd like to do is just add a，little bit
    of animation。
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 改变某物的大小或在某段时间内改变某物的位置。那么现在我们来看看一个实际的例子，我将创建一个新文件，命名为animate.html。在animate.html中，我想添加一点动画。
- en: using css into this particular page i'm，going to start with just a heading。a
    heading that says something like，welcome，for example it's just going to display
    a。welcome message such that now，if i open animate。html，here's what i see just
    a message that。![](img/14176991cb5571611e59b9556458646c_1.png)
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 将CSS应用到这个特定页面，我将从一个标题开始，一个像“欢迎”这样的标题，它将显示一个欢迎消息，因此现在如果我打开animate.html，我看到的只是一个消息。![](img/14176991cb5571611e59b9556458646c_1.png)
- en: says welcome，but now let's add some css to it let's。![](img/14176991cb5571611e59b9556458646c_3.png)
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 说欢迎，但现在让我们为它添加一些CSS。让我们。![](img/14176991cb5571611e59b9556458646c_3.png)
- en: go into the style tag，and for h1 for this heading i'd like to。![](img/14176991cb5571611e59b9556458646c_5.png)
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 放入样式标签中，对于这个标题h1，我想要。![](img/14176991cb5571611e59b9556458646c_5.png)
- en: apply a particular animation to it，and i first need to specify what the。animation's
    name is going to be，and i can pick a name for the animation，i'll say something
    like。grow for example i'll set the，animation's duration，to be two seconds and
    then the animation。fill mode is like what direction should，the animation move
    in should it go。
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 为其应用特定的动画，我首先需要指定动画的名称，我可以为动画选择一个名字，比如说“增长”。我会将动画的持续时间设置为两秒，然后动画填充模式就像动画应该朝哪个方向移动，应该向前还是向后。
- en: forwards or should it go backwards，we'll generally want our animations to。go
    forward so they're making some sort，of forward progress，according to some rules
    that we're going。to specify so here i'm saying we're，going to animate all of our
    headings。using an animation called grow and now i，actually，does and to do that
    up above in style。
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 向前还是向后，我们通常希望我们的动画向前进行，以便根据我们将要指定的一些规则取得某种前进的进展。所以在这里我说我们将使用一个叫做“增长”的动画来为所有标题动画，现在我实际上做到了这一点，并且在样式上方。
- en: i'm going to say，at keyframes grow，and what this is going to allow me to do，is
    specify some key。frames for this particular element，meaning where should the element
    start。what should its style properties be and，then at the end what should its
    style，properties be。and css is going to take care of the，process of figuring out
    what needs to。
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 我会说，在关键帧“增长”，这将允许我为这个特定元素指定一些关键帧，这意味着元素应该从哪里开始，样式属性应该是什么，然后在最后样式属性应该是什么。CSS将负责确定需要什么。
- en: happen in all those intermediary，fractions of seconds for example。so what i
    can say is something like go，ahead and grow from，meaning what should its initial。properties
    be and maybe initially i want，it to have a font size of，20 pixels and then we'll
    say 2。font size of 100 pixels for example，so all in all what this is saying is
    i。
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 发生在所有那些中间的几分之一秒内。例如，我可以说像“开始增长”，这意味着它的初始属性应该是什么，可能一开始我想让它的字体大小为20像素，然后我们说字体大小为100像素。所以总体来说，这表明我。
- en: would like to apply an animation，called grow to all of my headings this。animation
    should last two seconds and go，forwards。![](img/14176991cb5571611e59b9556458646c_7.png)
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 我想将名为“增长”的动画应用于我所有的标题，这个动画应该持续两秒并向前进行。![](img/14176991cb5571611e59b9556458646c_7.png)
- en: and what is the grow animation going to，do well it's going to mean at the start。anything
    that obeys the grow animation，we'll start with a font size of 20，pixels。and at
    the end it will grow to a font，size，of 100 pixels and i have now defined。what
    it is that that animation，means so now if i go ahead and refresh，this page animate。html。
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 而“增长”动画将会做什么呢？嗯，它意味着在开始时，任何遵循“增长”动画的东西将以20像素的字体大小开始，而在结束时将增长到100像素的字体大小，我现在已经定义了这个动画的含义，所以如果我继续刷新这个页面
    animate.html。
- en: you'll see that welcome changes size，over the course of two seconds it goes，from
    smaller。to larger by obeying those keyframes i，told it to obey，this particular
    step a set of。instructions where it goes from a，particular font size，to another
    font size and as a result we。![](img/14176991cb5571611e59b9556458646c_9.png)
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 你会看到“欢迎”在两秒钟内改变大小，它从小变大，遵循那些我告诉它遵循的关键帧，这个特定步骤是一组指令，它从一个特定的字体大小变为另一个字体大小，因此我们。![](img/14176991cb5571611e59b9556458646c_9.png)
- en: see the effect here，on the page and it turns out you can do，more than just manipulate
    size you can。manipulate just about any css property，you want so if i tell the。heading
    that it should have a relative，position，meaning its position should be relative。to
    other elements or other things in its，parent，i can say you should change your，position
    from being。
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在页面上查看效果，结果你可以做的不止是操控大小，你可以操控几乎任何你想要的CSS属性。所以如果我告诉标题它应该有一个相对的定位，这意味着它的位置应该相对于其他元素或其父元素中的其他事物，我可以说你应该将你的位置从。
- en: zero percent away from the left side of，the screen，to being 50 of the way from
    the left。side of the screen，and at this point grow is probably not，the best name
    for this animation i'll。call it move instead，so animation name is move and so
    now，what this animation is going to do is。it's going to say when you run the，animation，go
    from being right next to the left，side of the screen。
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 从屏幕左侧的零百分比，移动到距离左侧50%的位置。在这一点上，“增长”可能不是这个动画的最佳名称，我会称它为“移动”，所以动画名称是“移动”，现在这个动画将会做的是。当你运行动画时，它将从紧靠屏幕左侧的地方开始。
- en: to being about 50 away from the left，side of the screen，and we see that's the
    animation that。takes place it goes from the left。![](img/14176991cb5571611e59b9556458646c_11.png)
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 调整为距离屏幕左侧大约50个像素，我们看到的就是动画的过程，它从左边开始。![](img/14176991cb5571611e59b9556458646c_11.png)
- en: all the way back up to about halfway，across the screen，refresh the page and
    it goes ahead and。does the exact same thing，and it turns out we don't just need
    to，specify a beginning point and an。endpoint for an animation，we can specify various
    different key。![](img/14176991cb5571611e59b9556458646c_13.png)
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 一直刷新到屏幕大约一半的地方，刷新页面，它就会执行完全相同的操作，结果我们不仅需要指定动画的开始点和结束点，我们还可以指定各种不同的关键。![](img/14176991cb5571611e59b9556458646c_13.png)
- en: frames for different points within the，animation，that we would like to capture
    something。like at the beginning of the animation，have this set of css properties
    maybe。halfway through the animation have a，different set of css properties。and
    then at the very end have yet，another set of css properties。
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在动画的不同点设置帧，我们希望捕捉到一些东西。例如，在动画开始时，具有这组CSS属性，可能在动画进行到一半时有一组不同的CSS属性，然后在最后再有一组CSS属性。
- en: so i could say something like if i want，the heading not just to move from left。to
    right but also to move back again i，can say at the beginning。at the zero percent
    point when you're，zero percent of the way through the，animation。you should be
    zero percent away from the，left-hand side when you're 50。
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 所以我可以说，如果我想让标题不仅向左移动到右边，还要再移动回来，我可以说在开始时，在零百分比的时候，当你完成零百分比的动画时，你应该距离左侧零百分比。
- en: of the way through the animation you，should be 50 away from the left-hand，side。and
    then when you're done with the，animation 100 of the way through let's，go back。uh
    to zero percent away from the，left-hand side i now have three。keyframes beginning
    of the animation，middle of the animation back to the。
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在动画进行到一半时，你应该距离左侧50个像素。当你完成动画时，100%到达左侧，让我们回到。嗯，距离左侧为零百分比，我现在有三个关键帧，动画的开始，动画的中间回到。
- en: beginning of the animation again，and the effect of this is if i refresh，the
    page we go to the right。and then we go back we're able to move，one direction and
    then move back。![](img/14176991cb5571611e59b9556458646c_15.png)
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 动画的开始，再次刷新页面时，我们会向右移动，然后再回来，我们能够向一个方向移动，然后再移动回来。![](img/14176991cb5571611e59b9556458646c_15.png)
- en: and there are other properties we can，well，i can set the animation iteration
    count。![](img/14176991cb5571611e59b9556458646c_17.png)
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 还有其他属性，我可以设置动画的迭代次数。![](img/14176991cb5571611e59b9556458646c_17.png)
- en: for example to 2，to mean rather than just do the，animation once and then stop。do
    the animation twice and then stop so，i refresh it goes to the right。and then it
    goes left and then it，repeats that a second time，and it turns out if you really
    want you。![](img/14176991cb5571611e59b9556458646c_19.png)
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，设置为2，这意味着动画不是只运行一次然后停止，而是运行两次然后停止。因此，当我刷新时，它向右移动，然后向左移动，然后再重复一次。如果你真的想的话。![](img/14176991cb5571611e59b9556458646c_19.png)
- en: can set this to，infinite to me never stop performing，that animation it's consistently。![](img/14176991cb5571611e59b9556458646c_21.png)
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 可以将其设置为无限，这意味着从不停止执行这个动画，它始终在进行。![](img/14176991cb5571611e59b9556458646c_21.png)
- en: going to have this heading move to the，right and then move left。according to
    those key frames that i've，specified and so if you ever see things。moving around
    on a page interactive in，some way，there are a number of ways to do it you，example。but
    there are many cases where css alone，is pretty good at just creating。
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 要将这个标题移动到右侧，然后再移动到左侧，依据我指定的关键帧。因此，如果你看到页面上有东西以某种方式互动地移动，有很多方法可以实现这一点，但仅使用CSS也能很好地创建这类动画。
- en: these types of animations and while this，animation right now is just running，forever。we
    could use javascript in order to，control that animation，as well so let's see an
    example of what。that would look like，i'll go back here in the body of the，page
    in addition to a heading that says。welcome，i'll go ahead and add a button that
    just，says，do，is add a little bit of javascript i'm。
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 而现在这个动画只是无限循环。我们可以使用JavaScript来控制这个动画，所以让我们看看效果。我要回到页面的主体，除了一个写着“欢迎”的标题，我还会添加一个按钮，上面写着“做”，接下来就是添加一点JavaScript。
- en: going to add some javascript，so that the button can now control the。animation
    decide when the animation is，going to start，and stop and so what we'll do inside
    of。this script，is to first say，document。addeventlistener，dom content loaded meaning
    wait until。the dom is done loading，as we've done before and let me now get，that
    h1 element。
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我将添加一些JavaScript，以便按钮现在可以控制动画，决定动画何时开始和停止。因此我们在这个脚本内部的操作是，首先说，document.addEventListener，DOMContentLoaded，这意味着等到DOM加载完成，如同我们之前所做的，现在让我获取那个h1元素。
- en: and initially i'm going to set its，style。animationplaystate，equal to paused。so
    animation playstate is a property of，the style that lets me decide if the。animation
    is playing or paused，and i can control that using javascript。rather than just
    say run infinitely，forever，i can say the animation play state，should start out。
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 我最初会将它的样式。animationPlayState设置为paused。所以，动画播放状态是样式的一个属性，让我决定动画是正在播放还是暂停，我可以使用JavaScript来控制它。与其说无限运行，我可以说动画的播放状态应该从。
- en: as pause by first getting the h1 element，then modifying，the animation playstate
    property of that。particular element but now what i'd like，to happen，is anytime
    someone clicks on the button。i want to change the animation playstate，so i'm going
    to say，document。queryselector button。meaning get that button and when someone，clicks
    on the button，let's run this function where if。
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 通过首先获取h1元素，然后修改该元素的动画播放状态属性来实现暂停。但是我希望的情况是，每当有人点击按钮时，我想要改变动画的播放状态。所以我要说，document.querySelector按钮。意味着获取那个按钮，当有人点击按钮时，让我们运行这个函数。
- en: the current animation playstate is，paused，we'll then go ahead and set animation，playstate。equal
    to running and otherwise if it's，already running，then let's go ahead and set the。animation
    play state，equal to paused，so all in all what this function is。going to do is
    it's going to get me the，heading，pause this initially and every time the。
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 当前的动画播放状态是paused，我们将继续设置动画播放状态为running，否则如果它已经在运行，那么我们就将动画播放状态设置为paused。因此，整体来看，这个函数将做的是，它将获取标题，初始暂停每次。
- en: button is clicked run this function。![](img/14176991cb5571611e59b9556458646c_23.png)
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 如果按钮被点击，运行这个函数。![](img/14176991cb5571611e59b9556458646c_23.png)
- en: where the function says if we're paused，go ahead and start running the animation。otherwise
    go ahead and pause the，animation by modifying that animation，playstate。property
    of the heading so now if i，refresh this page，right now we have welcome plus a
    button。that says click here and initially，everything is paused there's no，animation
    happening。
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 函数会判断如果我们暂停，就开始运行动画；否则通过修改标题的动画播放状态来暂停动画。所以现在如果我刷新这个页面，我们有欢迎信息加上一个按钮，上面写着“点击这里”，最初一切都是暂停的，没有动画发生。
- en: but i click here and that begins the，animation which will go on indefinitely。until
    i decide that i want to stop it at，which point i click it again and the，animation
    pauses。and i can control when to start and when，to pause，that animation as well
    and so this can。be helpful and nice，when you want to create something a，little
    bit more interactive something。
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 但我点击这里，这开始了动画，它将无限进行，直到我决定停止它，此时我再次点击它，动画暂停。我可以控制何时开始和何时暂停动画，这在你想创建更互动的东西时特别有帮助。
- en: animated on the page，but this is especially helpful because。![](img/14176991cb5571611e59b9556458646c_25.png)
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 页面上的动画，但这尤其有帮助，因为。！[](img/14176991cb5571611e59b9556458646c_25.png)
- en: it means that you can gradually change，css properties over time，rather than
    just immediately change。something you have the ability to，animate something，to
    make it work a little bit better so。let's take a look at an example，of how you
    might put that idea into，practice let's go back to。our posts example where we
    had this，infinite scrolling list of posts but。
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着你可以逐渐地改变 CSS 属性，而不是立即改变。你有能力去动画化某些东西，让它更好地工作。那么，让我们看一个例子，如何将这个想法付诸实践，回到我们的帖子示例，我们有一个无限滚动的帖子列表，但。
- en: imagine now that we want the ability to，hide posts，when we're done with them
    so i've。prepared an example called hide，which is very similar to what we had，before。![](img/14176991cb5571611e59b9556458646c_27.png)
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 现在想象一下，我们希望在完成后能够隐藏帖子，所以我准备了一个名为隐藏的示例，它与之前的非常相似。！[](img/14176991cb5571611e59b9556458646c_27.png)
- en: but this time i've just added one extra，button，and the button says hide on every
    single。![](img/14176991cb5571611e59b9556458646c_29.png)
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 但这次我只添加了一个额外的按钮，按钮上写着“隐藏”。！[](img/14176991cb5571611e59b9556458646c_29.png)
- en: div，right now clicking the hide button does，nothing we'll go ahead and implement。that
    in just a moment。![](img/14176991cb5571611e59b9556458646c_31.png)
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: div，现在点击隐藏按钮什么也不做，我们稍后将实现这一点。！[](img/14176991cb5571611e59b9556458646c_31.png)
- en: but first to see how this worked if you，go into hide go into。![](img/14176991cb5571611e59b9556458646c_33.png)
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 但首先要查看这是如何工作的，如果你进入隐藏，进入。！[](img/14176991cb5571611e59b9556458646c_33.png)
- en: the index。html template the only change，that's been made here，is what happens
    when i add a new post。does，is it loads posts from a server and then，when it gets
    to those posts it goes。loops over each of the individual posts，which is just a
    string of text。and it adds that string of text inside，of an element，onto the page
    via this add post function。
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: index.html 模板中唯一的变化是当我添加一个新帖子时会发生什么。它从服务器加载帖子，然后在获取到那些帖子时，它会遍历每个单独的帖子，这只是一个字符串文本。并且它将那个字符串文本添加到页面的一个元素中，通过这个
    add post 函数。
- en: and what the ad post function is going，element，create a div in which to store
    that post。give it a class name because that's how，we're going to animate it。and
    then set its inner html equal to the，contents of the post，something like post
    number one post。number two post number three，and then add a button that just says，hide。
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: ad post 函数是创建一个 div 来存储那个帖子。给它一个类名，因为我们将通过这个类名来动画化它。然后将其内部 HTML 设置为帖子的内容，比如“帖子编号一”、“帖子编号二”、“帖子编号三”，再添加一个只写着“隐藏”的按钮。
- en: and then we're going to go ahead and add，that to the dom as well。so that's what
    adpost is now going to do，we're sort of generating some html。using this javascript
    code and then，adding that html to the page。and now what we're adding is a div
    that，text，but it's also going to give us access to，a button。
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们将把它添加到 DOM 中。这就是 adpost 现在要做的，我们通过这段 JavaScript 代码生成一些 HTML，然后将这些 HTML 添加到页面上。现在我们添加的是一个
    div，包含文本，同时还会给我们访问一个按钮的权限。
- en: that ultimately we hope is going to let，us hide that post as well。so how do
    we actually get the hiding of，the post to work，well what we want to do is somehow。detect
    when the user clicks，on one of those hide buttons so there's。a number of ways
    we could do this，but one way is just to listen for any，time，anyone clicks on。
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 我们最终希望能够隐藏那篇帖子。那么我们如何让帖子隐藏功能正常工作呢？我们想要做的是以某种方式检测用户何时点击这些隐藏按钮，有多种方法可以做到这一点，但一种方法是监听任何点击事件。
- en: the document as a whole anytime anyone，clicks on the document。i might like to
    ask something like what，did they actually click on。and it turns out that with
    most event，listeners the function the event，listener takes in。can take as an optional
    argument the，object，that contains information about the，event that happened。
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 每当有人点击文档时，我可能会想问他们到底点击了什么。结果是，对于大多数事件监听器，事件监听函数可以将事件信息作为可选参数传入。
- en: like the click event or the scroll event，or the key down event or the key up，event
    for example。and one of the properties you get access，to is event，dot target which
    is like what was the。target of the event，in this case what was the thing that
    was，actually clicked on and i'll go ahead。and save event。target，inside of a variable
    called element，where the idea now is that whatever gets。
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 比如说点击事件、滚动事件、按下键事件或抬起键事件。你可以访问的一个属性是event.target，它代表事件的目标，在这种情况下就是实际被点击的东西。我会把event.target保存在一个名为element的变量中，现在的想法是无论发生什么。
- en: clicked on that is the events target，we're going to save that inside of。element
    and what i want to know is，is element is that one of the hide。buttons i want to
    know is it a hide，button i could have also，attached an event listener to each
    of。the hide buttons this is just an，alternative way of doing it that i'm。
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 被点击的目标是事件的目标，我们将其保存在element中。我想知道element是否是隐藏按钮，我也可以为每个隐藏按钮附加事件监听器，这只是另一种实现方式。
- en: showing you for sake of demonstration，where we say when we click anywhere in，on。and
    save it inside of this variable and，if it's a hide button。then it's going to have
    a class of hide，because i gave every class，every hide button a class of hide。and
    so what i can say is if，element dot class name equals hide。
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 为了演示，我们说当我们在任何地方点击时，将其保存在这个变量中，如果它是一个隐藏按钮，那么它将具有类名hide，因为我给每个隐藏按钮都赋予了类名hide。所以我可以说，如果element.className等于hide。
- en: well that means that what was clicked on，is something with a class of hide we
    can。assume that it is in fact，a hide button and then what i want to do，is i can
    do something like。element。remove to say go ahead and get，rid of that element，so
    now what does this do if i refresh。the page，let's try it post number one if i
    hide，it i want to hide post number one。
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着被点击的对象是具有类名hide的元素，我们可以假设它实际上是一个隐藏按钮。接下来，我想做的是调用element.remove来去掉那个元素。那么如果我刷新页面，这会有什么效果呢？让我们试试帖子一，如果我隐藏它，我想隐藏帖子一。
- en: all right that didn't quite work it was，close it got rid of the hide button。![](img/14176991cb5571611e59b9556458646c_35.png)
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 好吧，这并没有完全成功，虽然接近，它去掉了隐藏按钮。![](img/14176991cb5571611e59b9556458646c_35.png)
- en: but i didn't want to get rid of the hide，button i wanted to get rid of the whole，post。so
    what's going on here is it seems to，be that if the element's class name is。hide
    meaning i clicked on a hide button。![](img/14176991cb5571611e59b9556458646c_37.png)
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 但我并不想去掉隐藏按钮，我想去掉整个帖子。所以这里发生了什么似乎是，如果元素的类名是hide，意味着我点击了一个隐藏按钮。![](img/14176991cb5571611e59b9556458646c_37.png)
- en: element。remove just removes that element，it removes，the hide button but it doesn't
    remove。the post that contains it，and if you think about this in terms of，the dom
    the post is a div。and its child element is the button this，hide button，and so
    you remove the button but it。doesn't also remove the post as well，if you want
    to remove the post as well。
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: element.remove只会去掉那个元素，它去掉了隐藏按钮，但并不去掉包含它的帖子。如果从DOM的角度考虑，帖子是一个div，而它的子元素是这个隐藏按钮，所以去掉按钮并不会同时去掉帖子。如果你也想去掉帖子。
- en: you need to remove not the element，but the element's parent and in。javascript
    it turns out there's a way to，do that too，element。parentelement。remove。to say
    take the element get its parent，and remove that，one，i want to hide it i hide post
    one and。all right now i see post two。
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要去掉的不是元素，而是元素的父级。结果在JavaScript中也有方法可以做到这一点，element.parentElement.remove。也就是说获取这个元素的父级并去掉它，我想隐藏它，隐藏帖子一，好的，现在我看到帖子二。
- en: '![](img/14176991cb5571611e59b9556458646c_39.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](img/14176991cb5571611e59b9556458646c_39.png)'
- en: and post one has gone away if i want to，hide post three i hide post three。now
    post three is gone now i go straight，from post two to post four，so this works
    but it's also not。because，all of the posts are the exact same。![](img/14176991cb5571611e59b9556458646c_41.png)
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我想隐藏帖子三，我就隐藏帖子三。现在帖子三消失了，现在我直接从帖子二跳到帖子四，这样是有效的，但也不是，因为所有的帖子都是完全相同的。![](img/14176991cb5571611e59b9556458646c_41.png)
- en: three，it's not immediately obvious to the eye，that they've gone away because。post
    two and four they look almost，exactly the same you really have to be，paying attention。to
    know that the hiding worked and so，this can be a time，where animation can actually
    be quite。helpful so what i can do is say，something like，let's go ahead and give
    this post。
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 三，看起来并不明显，因为帖子二和四几乎看起来一模一样，你真的要注意才能知道隐藏成功了。因此，这可能是动画实际上非常有帮助的时候。我可以说些类似的话，让我们给这个帖子。
- en: an animation associated with every post，we'll give it an animation name。called
    hide an animation duration of two，seconds we'll say it'll take you two。seconds
    in order to hide，uh in an animation fill mode of forwards。i want to go forwards
    with the animation，and initially i'll give the post an，animation playstate。
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 每个帖子都有一个关联的动画，我们将给它一个动画名称，叫做隐藏，动画持续时间为两秒，我们将说需要两秒才能隐藏，并且设置动画填充模式为前进。我想向前进行动画，最初我将给帖子设置一个动画播放状态。
- en: of paused meaning initially i don't want，the animation to be running because
    i。don't want to hide all the posts，immediately，pause this animation later we'll
    go。ahead and run the animation，in order to actually hide the post，then i need
    to define what does it。actually mean to hide the post，and i'll say well all right
    at the zero。
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 初始时，我不想让动画运行，因为我不想立即隐藏所有帖子，暂停这个动画。稍后我们会继续运行动画，以便实际隐藏帖子，然后我需要定义隐藏帖子到底意味着什么，我会说好吧，在0的状态下。
- en: percent mark what does it mean，let's give yourselves an opacity of one。opacity
    is a css property that just，controls，how opaque or how transparent an html。element
    happens to be，and at the end 100 of the way done with，the animation。will set opacity
    to zero so initially，we can fully see the element at the end。
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 百分比标记，这意味着什么，让我们给自己一个不透明度为1。不透明度是一个CSS属性，它控制HTML元素的透明度，而在动画结束时将不透明度设置为0。因此，最初我们可以完全看到这个元素。
- en: the element is totally transparent，and now what i need to do is actually，trigger
    this to happen。somehow so this is probably going to，happen，inside of my event
    listener where。instead of removing the element right，away，let me just take the
    parent element and。set its animation play state，equal to running for example，meaning
    when i click the hide button go。
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这个元素是完全透明的，现在我需要做的实际上是触发这个事件。某种方式下，这可能会在我的事件监听器内发生。在不立即移除元素的情况下，让我先获取父元素并将其动画播放状态设置为运行，例如，意味着当我点击隐藏按钮时就开始运行动画。
- en: ahead and run the animation，that will change the opacity from one to，zero。over
    the course of a couple of seconds，and then if i really want to i can add。another
    event listener to say，take the parent element add event，listener。there's an event
    called animation end，which happens when the animation is over。
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 动画将会在几秒钟内将不透明度从1变为0。如果我真的想要的话，可以添加另一个事件监听器，表示获取父元素，添加事件监听器。有一个事件叫做动画结束，当动画结束时会触发。
- en: and then i can say all right when the，animation is over，we'll then go ahead
    and remove the，element。so all in all rather than just，immediately remove the element
    when i。click on the button that says hide。![](img/14176991cb5571611e59b9556458646c_43.png)
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我可以说，好的，当动画结束后，我们将继续移除这个元素。因此，总的来说，而不是在我点击隐藏按钮时立即移除元素。![](img/14176991cb5571611e59b9556458646c_43.png)
- en: what i'd like to do is say if you click，on a button and the button is hide。go
    ahead and get the parent element not，the hide button but the post itself。set its
    animation playstate to running，meaning run the hide animation。and then add an
    event listener to the，parent to that post as a whole。
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 我想做的是，如果你点击一个按钮，而这个按钮是隐藏的，那么就获取父元素，而不是隐藏按钮，而是帖子本身。将其动画播放状态设置为运行，意味着运行隐藏动画，然后为整个帖子添加一个事件监听器。
- en: to say when the animation is over go，ahead and remove，that entire post from
    the dom altogether。so what is the effect of all of this now，of having this animation。and
    running it well now if i refresh the，page，i see all these posts if i try and hide。like
    post number two for example，you'll see that the opacity changes and。
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 当动画结束时，去掉整个帖子，从DOM中完全移除。那么现在这一切的效果是什么，进行这个动画后，如果我刷新页面，就会看到所有这些帖子。如果我试图隐藏第二个帖子，比如说，您会看到透明度变化。
- en: then it slowly disappears and then only，after it's totally transparent。the post
    disappears entirely so i can，say hide post number four。it disappears and then
    post number five，jumps up to fill its place and i can do。that for any of these
    posts，triggering the animation when i click on，the hide button。
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 然后它慢慢消失，直到完全透明时，帖子才会完全消失。所以我可以说隐藏第四个帖子，它消失了，第五个帖子跳起来填补它的位置，我可以对这些帖子做任何事，点击隐藏按钮时触发动画。
- en: and so this is part of the value of what，animation can do is to be able to。make
    our user interfaces a little more，user，by not immediately getting rid of a post。but
    by having a nice fade out so it，disappears，nicely now even this is not perfect。animation
    wise like one thing you might，notice，is that it jumps up as soon as the post。
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是动画能做的一部分价值，它能让我们的用户界面更友好，而不是立即删除一个帖子，而是通过优雅的淡出效果让它消失。即使这样做也并不完美，动画上可能会注意到的一件事是，它在帖子消失时会跳起来。
- en: is gone if i hide post number three，i hide it it disappears and post five，sort
    of jumps up。very abruptly in order to fill its place，what i might like is to be
    a little bit，clever。to somehow shrink the size of the post，after it's gone，so
    that the post doesn't jump into place。but it slides a little bit more，naturally
    into place，and so there's some additional things i。
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我隐藏第三个帖子，它就消失了，第五个帖子会突然跳起来以填补它的位置。我希望能更聪明一点，在帖子消失后稍微缩小它的大小，这样帖子不会猛地跳入位置，而是更自然地滑入。
- en: can play with here maybe i want to say，that all right let me make this。animation
    a multiple part animation。![](img/14176991cb5571611e59b9556458646c_45.png)
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这里我可以玩玩，也许我想说，让我将这个动画变成多部分动画。![](img/14176991cb5571611e59b9556458646c_45.png)
- en: so here instead of just from zero to a，hundred percent setting the opacity from，one
    to zero。maybe in the first 75 percent of the，animation，that will take care of
    reducing the。opacity going down from one all the way，down to zero，but in the last
    25 of the animation。will still end with an opacity of zero，but，anything that creates
    vertical space i。
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 所以在这里，我不只是从零到百分之百设置透明度从1到0，也许在动画的前75%中，会处理透明度从1降到0，但在动画的最后25%中仍然以透明度为0结束，但任何会产生垂直空间的东西我。
- en: want to reduce down to zero so the，height，should be zero pixels the line height。which
    is how high the text is should，also be zero pixelism，any padding i want to go
    away it turns。out i've added some margin to the bottom，of the post i want to make
    that go away，as well。so i want to set all of those to zero，from whatever their
    initial values。
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望减少到零，所以高度应该是零像素，行高，也就是文本的高度，应该也是零像素，任何内边距我希望消失，实际上我已经在帖子底部添加了一些外边距，我也想去掉它。所以我希望将所有这些设置为零，从它们的初始值开始。
- en: happen to be that initially the height，is like a hundred percent of what the。height
    could be likewise for line height，100 of the parent，initially i have like 20 pixels
    of。padding and a margin at the bottom of 10，pixels，and i want all of that to still
    be true，75。of the way through the animation but，it's only in the last 25 percent
    of the，animation。
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 最初的高度恰好是高度的百分之百，对于行高也是如此，父元素的高度最初有大约20像素的内边距和10像素的底部外边距，我希望在动画的75%处这些仍然成立，但只有在动画的最后25%中。
- en: that i want to set all of these vertical，height properties down to zero i want
    to。remove all the height remove the line，height remove all the padding。and the
    effect of this is i'll have an，animation now where for the first。75 percent of
    the animation the only，thing that changes is the opacity the，opacity goes from
    one。
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望将所有这些垂直高度属性设置为零，移除所有高度，移除行高，移除所有内边距。这样效果就是，我会有一个动画，在动画的前75%中，唯一变化的是透明度，透明度从1变为0。
- en: fully visible to zero fully transparent，the，post is already transparent you
    can't。see it but it's still taking up physical，space on the page，but we're going
    to now reduce the height。of that post so that now you won't be，able to see it，at
    all so now if i refresh this page。here again are all the posts but now if，i click
    hide on a particular post。
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 完全可见到完全透明，这条帖子已经透明了，你看不见它，但它仍然占据页面上的物理空间。现在我们将减少这条帖子的高度，这样你就完全看不见它了，所以如果我刷新这个页面，这里又出现了所有帖子，但如果我点击隐藏某一特定帖子。
- en: we'll see that it first fades out and。![](img/14176991cb5571611e59b9556458646c_47.png)
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 我们会看到它首先渐渐消失。![](img/14176991cb5571611e59b9556458646c_47.png)
- en: then its height shrinks，so that the next post slides very nicely，into place
    i can do that again。hide the post it's transparent and then，it slides into place。and
    this again is just an application of，this idea of css animations using，properties
    of animation。to make our interfaces a little bit，nicer to use a little bit clearer，visually
    to the user。
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 然后它的高度缩小，以便下一个帖子能够很顺畅地滑入位置，我可以再这样做。隐藏帖子，它是透明的，然后滑入位置。这再次只是应用了css动画的这个理念，使用动画属性使我们的界面更好用，视觉上更清晰。
- en: '![](img/14176991cb5571611e59b9556458646c_49.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](img/14176991cb5571611e59b9556458646c_49.png)'
- en: that one post has gone away and the rest，of the posts have now scrolled up。in
    order to take their place，so now we've been able to use javascript。to create a
    lot of nice user interfaces，we've been able to create single page，applications。to
    create infinite scrolling to be able，to create some animations as well and，them。
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 有一条帖子消失了，其他帖子现在已经向上滚动，以便占据它的位置，因此我们现在能够使用javascript创建许多漂亮的用户界面，我们能够创建单页面应用程序，创造无限滚动，甚至可以创建一些动画。
- en: but one thing you might be realizing at，this point is that our applications
    are，starting to get。fairly complicated there's a lot of，javascript code needed
    to manipulate a。lot of different parts of our。
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 但你可能意识到的一件事是，我们的应用程序开始变得相当复杂，需要很多javascript代码来操作我们不同部分的内容。
