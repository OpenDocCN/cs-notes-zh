# 合作伙伴 B 的更多练习

## 问题 B6：第 1 部分

我们让人们从餐馆拿食物的方式在几个方面都不切实际。本周我们的总体目标是解决这个问题。作为第一步，你要创建一个 `food` 类。我们将给被视为食物的物品两个属性，一个 `edible?` 属性和一个 `calories` 属性。如果对象是食物，`edible?` 属性将具有值 `#t`。如果一个 `person` 吃了一些 `food`，那么食物的 `calories` 将被添加到人的 `strength` 中。

（请记住，由于问题 B4 中属性的实现方式，除了食物以外的对象的 `edible?` 属性将自动为 `false`。你不必到处告诉其他所有东西不可食用。）

编写一个使用 `thing` 作为父类的 `food` 类的定义。当你向它发送一个 `edible?` 消息时，它应该返回 `#t`，并且它应该正确地响应一个 `calories` 消息。

在原始的 `adv.scm` 中用一个新版本替换名为 `edible?` 的过程，利用你创建的机制，而不是依赖于内置的食物类型列表。

```
> (define pesto-pasta (instantiate food 'pasta 150))
;name is pesto-pasta, calories is 150
> (ask pesto-pasta 'calories)
150
> (ask pesto-pasta 'edible?)
#t
> (edible? pesto-pasta)
#t 
```

## 问题 B6：第 2 部分

现在你有了 `food` 类，为特定种类的食物发明一些子类。例如，创建一个从 `food` 继承的 `pasta` 类。`pasta` 不应该有任何实例化变量。给 `pasta` 一个名为 `name` 的**类变量**，其值为单词 pasta。（当我们后面发明 `restaurant` 对象时，我们会需要它。）

使用你的意大利面类，现在可以像下面这样实例化上面的香蒜酱意大利面。

```
> (define pesto-pasta (instantiate pasta))
> (ask pesto-pasta 'calories)
150 
```

## 问题 B6：第 3 部分

为人类制作一个 `eat` 方法。你的 `eat` 方法应该查看你的财产，并筛选出所有可食用的物品。然后将食物的 `calories` 值加到你的 `strength` 中。然后它应该使食物消失（不再是你的财产，也不再在你的位置）。

## 结合工作

在继续之前，请让你的合作伙伴解释问题 A6 及其解决方案。同时，向你的合作伙伴解释问题 B6 及其解决方案。

## 问题 B7

你的任务是定义 `police` 类。当警察注意到一个新的人进入他所在的地方时，警察会检查那个人是否是小偷。如果那个人是小偷，警察会说“犯罪是不值得的”，然后夺走小偷的所有财产，并将小偷直接送进监狱。

给小偷和警察默认的强度。小偷的起始强度应该比人更强，但警察应该比小偷更强。当然，如果你吃得足够多，你应该能够积累足够的 `strength` 来夺走小偷的食物。

请测试你的代码，并提交一份显示小偷偷走你的食物、你追赶小偷和警察逮捕小偷的记录。如果你还没有注意到，我们在 Sproul Plaza 放了一个小偷来帮助测试你的代码。

```
> (define somepolice (instantiate police 'grammarpolice soda)) 
```

## 问题 B8

现在我们希望重新组织`take`，以便查看谁之前拥有所需的对象。如果其拥有者是`'no-one`，那么就像往常一样拿走它。否则，调用：

```
> (ask thing 'may-take? receiver) 
```

对于属于某人的物品的`may-take?`方法应比较其所有者的力量与请求人的力量，以决定是否可以拿走它。如果接收者与持有者的力量相同，则接收者可以拿走该物品。如果物品没有持有者，则接收者可以拿走该物品。

如果人不能拿走东西，该方法应返回**`#f`**，或者如果人可以拿走东西，则返回**物品本身**。目前这比必要的要复杂一些，但我们正在为可能出现的情况做准备，例如，一个对象可能想要为一个人制作自己的克隆品。

注意这里正在进行的消息传递的大量活动。我们向拿取者发送消息。它向物品发送消息，物品向两个人发送消息以了解他们的实力。
