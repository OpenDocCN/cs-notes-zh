- en: 哈佛 CS50-WEB ｜ 基于Python ／ JavaScript的Web编程(2020·完整版) - P11：L3- Django网络编程 3 (表单与session)
    - ShowMeAI - BV1gL411x7NY
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 哈佛CS50-WEB ｜ 基于Python／JavaScript的Web编程（2020·完整版） - P11：L3-Django网络编程3（表单与session）
    - ShowMeAI - BV1gL411x7NY
- en: it just so happens to be rendering using，a loop what I'd maybe like is another。page
    that will allow me to add in new，tasks a form effectively it lets me type。in a
    new task and press add in order to，add a new task so let's do that inside。of you
    stop by I'll define a new，function that I'm going to call add and。
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 这恰好是通过一个循环来渲染的，我可能希望有另一个页面，这样可以有效地让我添加新的任务，一个表单让我输入新任务并按添加以便添加新任务，所以我们在内部进行这项工作。
- en: what the add function is going to do is，render tasks slash add dot HTML in order。to
    know when to run the phew I need to，give this view a URL so I go into URL。spy
    and add a new path when I go to the，a drought I want to go to the view add。function
    and I'll call this function add，for example and so now when I go to。
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: add函数将要做的是渲染tasks/add.html，以便知道何时运行，我需要给这个视图一个URL，所以我进入URL间谍并添加一个新路径，当我访问该路径时，我想去视图add函数，我将把这个函数称为add，例如，现在当我去。
- en: slash task slash ad it's going to call，the add function inside of views and。inside
    of use here it's going to run，this function that will render add dot。HTML so let's
    go ahead and now write a，dot HTML will go into templates I'll。create a new file
    called add dot HTML，and you know what add HTML syntax is。
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 斜杠任务/添加，将调用视图中的add函数，在这里将运行这个函数，渲染add.html，所以我们现在来写一个add.html，我们将进入templates，创建一个名为add.html的新文件，你知道add.html的语法。
- en: very similar to the syntax from index，dot HTML in terms of what the HTML。content
    is so I'll go ahead and just，copy this whole page from index dot HTML。paste it
    into add dot HTML the only，thing that's different is the body of。the page we're
    instead of an unordered。
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 与index.html的语法非常相似，就HTML内容而言，所以我将复制index.html的整个页面，粘贴到add.html中，唯一不同的是页面的主体，我们而不是无序列表。
- en: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_1.png)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_1.png)'
- en: list that displays all the tasks and，instead like a form where that form has。an
    input whose type is text and maybe，this input field has a name called tasks。such
    that I can access that input data，later and an input whose type is submit。for
    example and maybe I'll give it a big，heading at the top that says like add。
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 列出所有任务的列表，而不是一个表单，这个表单有一个类型为文本的输入框，也许这个输入字段的名称叫做tasks，这样我就可以在后面访问这个输入数据，还有一个类型为提交的输入，例如，我可能会在顶部给它一个大的标题，比如添加。
- en: tasks for example so now I have a new，route that adds a task so my default。slash
    tasks route just displays a，bulleted list of all the tasks and if I。go to slash
    tasks slash add here now is，can type，tasks press submit that right now does。nothing
    but that ultimately I hope will。
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，任务，所以现在我有一个新的路由来添加任务，我的默认斜杠任务路由只是显示所有任务的项目符号列表，如果我去斜杠任务斜杠添加，这里我可以输入任务，按提交，当前什么也不做，但我最终希望它能。
- en: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_3.png)'
  id: totrans-8
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_3.png)'
- en: actually add a new task of course，something I just did there should strike。us
    as not the best design in particular，the decision I made was because the。general
    structure this HTML page is so，similar it's got the HTML tag it's got a。head the
    title of the page is tasks，ultimately I just copied all of the，content of index。
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上添加一个新任务，当然，我刚刚做的事情应该让我们觉得不是最佳设计，特别是我做出的决定是因为这个HTML页面的总体结构是如此相似，它有HTML标签，有head，页面标题是任务，最终我只是复制了index的所有内容。
- en: html and pasted it into，this new HTML page ad dot HTML and any。time you find
    yourself copy pasting this，should be another area where you start。to think there's
    probably a better way，to do this and with just pure HTML there。kind of wasn't
    if we wanted multiple，different HTML pages that displayed。
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: html并将其粘贴到这个新的HTML页面add.html中，每当你发现自己在复制粘贴时，这应该是另一个你开始思考的地方，可能有更好的方法来做到这一点，单纯用HTML时确实没有，如果我们想要多个不同的HTML页面显示。
- en: similar content we needed the same HTML，on all those different pages but now
    in。the world of Django we have the ability，to use something called template。inheritance
    what I'm now going to do is，define an HTML file called the layout to。some file
    that the other files add HTML，and index。html are going to inherit from。
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要在所有不同的页面上使用相同的HTML，但在Django的世界中，我们可以使用模板继承。现在我将定义一个名为layout的HTML文件，其他文件add.html和index.html将从这个文件继承。
- en: they're going to inherit from my layout，all of the structure of the page that's。the
    same on both of the pages and all，ivn need to write is what differs。between the
    pages and as I mentioned，before the only thing that differs。between a dot HTML
    and index dot HTML is，the content of the body of the page over。
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 它们将从我的布局中继承页面的所有结构，在这两个页面中都是相同的，而我需要写的只是页面之间的不同之处，正如我之前提到的，`add.html`和`index.html`之间唯一不同的就是页面主体的内容。
- en: here so what can I now do well I will，create a new file inside of my template。slash
    tasks directory called layout HTML，and layout is going to have the basic。layout
    that is common to both of these，pages I have a title whose title as。tasks I have
    the body of the page and，maybe there's more in common with both。
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 所以我现在能做什么呢？我将在我的`template/tasks`目录中创建一个新文件，叫做`layout.html`，布局将包含这两个页面共有的基本布局。我有一个标题，标题是tasks，我有页面的主体，也许这两个页面之间还有更多的共同点。
- en: of the pages as well that I could add，but right here this in between the body。tags
    this is the body of the page that，is going to change between each of the。different
    pages so to denote this inside，of a new layout in Django I'll again use。the curly
    brace and % I'll call this a，block and then I'll give this block a。
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这些页面我也可以添加，但在这里，在body标签之间，这就是页面的主体，将在不同页面之间变化，所以在Django的新布局中，我将再次使用大括号和%来表示一个块，然后我会给这个块一个。
- en: name I'll call it body just cuz it's the，body of the page but I could give it
    any。name and then I'll add an end block at，the bottom here，and so what I've now
    said inside of this。layout file is that this layout file has，a body inside of
    this structure of the。page and inside the body is this block，called body and what
    I'm saying here is。
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 我会称它为body，因为它是页面的主体，但我可以给它任何名称，然后在底部添加一个end block，所以我在这个布局文件中所说的是，这个布局文件在页面的结构中有一个body，而在body内部有这个叫做body的块，我在这里说的是。
- en: this block might change depending on，which file we're using add dot HTML or，index。html
    the rest of the structure，won't change but the content of this。block this block
    called body might，change and so now what I can do inside。of index dot HTML and
    add dot HTML is，instead of including all of this logic I。
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 这个块可能会根据我们使用的文件而变化，比如`add.html`或`index.html`，结构的其余部分不会改变，但这个块的内容可能会改变，这个块称为body。
- en: can get rid of everything other than the，key part of the page that's going to
    be。different about index dot HTML the only，thing different about index dot HTML
    is。this unordered list and what I'll I now，include at the top of index dot HTML
    is。I'll say that this HTML page extends，tasks slash layout cut HTML so this is。
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 我可以去掉除了页面关键部分以外的所有内容，关于`index.html`，唯一不同的就是这个无序列表，而我现在在`index.html`顶部包含的是，我会说这个HTML页面扩展自`tasks/layout.html`。
- en: now this idea of template inheritance，I'm inheriting from the layout an HTML。template
    basically saying use the layout，at HTML template except inside of block。body I
    would like to include all of this，content and maybe I'll give it a h1 that。just
    says tasks just as a title as well，and so now what index。html is saying is。
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 现在这个模板继承的概念，我从`layout.html`模板中继承，基本上是说使用这个布局模板，除了在body块内部我想包含所有这些内容，也许我还会给它一个h1，标题就是tasks，所以现在`index.html`所说的是。
- en: rather than need to include all of that，HTML all I need to say is this HTML
    file。is based on the layout HTML file but the，difference is that inside the body
    of。the page it's going to be this，particular content here and for add dot。HTML
    I can do exactly the same thing I，can just add this line extends tasks。
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 与其包含所有那些HTML，我只需要说这个HTML文件是基于`layout.html`文件，但不同之处在于在页面的主体中，它将是这个特定内容，而对于`add.html`我可以做完全相同的事情，我只需添加这一行扩展自`tasks`。
- en: slash layout that HTML to the top of a，dot HTML and then I can get rid of all。of
    this boilerplate code so to speak and。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_5.png)
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 将`layout.html`放到`add.html`的顶部，然后我可以去掉所有这些模板代码。
- en: just include the part of the page that，differs inside the body of the page and。so
    it seems like we've done a fair bit，more work for just these two pages but。if
    you imagine more complex websites it，might have dozens or hundreds of。different
    pages the ability to factor，out the HTML the pages have in common。
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 只包含在页面主体内部不同的部分，所以看起来我们为这两个页面做了相当多的工作，但如果你想象更复杂的网站，它可能有几十个或上百个不同的页面，能够将HTML提取出页面间的共通之处。
- en: can definitely be very helpful just for，good design to be able to make sure。we're
    not repeating ourselves and if we，ever need to change，the structure rather than
    change it in。dozens or hundreds of different places，we just change it in one place
    inside of。the layout file and the result of that，is that it's going to change
    in each of。
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 这对于良好的设计肯定非常有帮助，以确保我们没有重复自己，如果我们需要更改结构，而不是在数十个或数百个不同的地方进行更改，我们只需在布局文件中的一个地方进行更改，其结果是，它将在每个继承该页面的页面中进行更改。
- en: the pages that inherit from that page as，well and we can test this by just going。back
    to slash task flush atom which，looks fine and back to tasks looks fine。to both
    of these pages now our，inheriting from that basic layout now。it's a little annoying
    that anytime I，want to switch between this page and the。
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过回到`/tasks/flush_atom`来测试这一点，外观良好，回到任务页面也看起来不错，这两个页面现在都继承了基本布局。现在有点烦人的是，每次我想在这个页面和另一个页面之间切换时。
- en: add page I have to go to the URL and，know that I need to go to slash tasks。slash
    ad in order to get back and forth。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_7.png)
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 添加页面，我必须访问URL，并知道我需要去`/tasks/ad`，以便来回切换。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_7.png)
- en: between them so I might like to add a，link that takes me from one page to the。other
    and vice versa and I can do that，if I go into index dot HTML you might。imagine
    that I could just add a link，here a href to create a link let's go to。slash tasks
    slash ad and like add a new，task maybe the name of that link except。
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在它们之间，我可能想添加一个链接，从一个页面跳转到另一个页面，反之亦然，如果我进入index.html，你可能想象我可以在这里添加一个链接，`a href`来创建一个链接，让我们去`/tasks/ad`，也许添加一个新任务，链接的名称除外。
- en: the problem is or the reason why this，isn't necessarily good design is the。Django
    is designed to make it such that，it's very easy to change the structure。of the
    pages in terms of how the URLs，all relate to each other and I have here。hard-coded
    that when you click this link，we go to slash tasks slash ad and if。
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 问题在于，或者说原因在于，这种设计不一定好，因为Django的设计使得改变页面结构（在URL之间的关系）非常容易，而我在这里硬编码了，当你点击这个链接时，我们就去`/tasks/ad`。
- en: ever I wanted to change that URL maybe，instead of slash Taft slash ad I wanted。to
    slash new instead of slash ad well，then I need to change it in two places。I need
    to go back to the URL stop pie，file to change the actual URL to say。instead of
    ad it should be called new，but then I need to find every place。
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 每当我想更改那个URL，也许不是`/tasks/ad`，而是`/new`，那么我需要在两个地方进行更改。我需要返回到urls.py文件，更改实际的URL，说明不再是ad，而应该叫new，但然后我需要找到每个相关的地方。
- en: where I use that URL and I need to，change it there as well so in order to。deal
    with this django has an additional，feature that basically lets django。figure out
    what the URL should be，instead and we do that by using the name。that we gave to
    each of those routes and，so this is where that name becomes。
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我在其他地方使用那个URL，我也需要在那里进行更改。为了解决这个问题，Django有一个额外的功能，可以让Django自动判断应该使用什么URL，我们通过使用给每个路由的名称来实现这一点，所以这就是名称变得重要的地方。
- en: relevant that I can here just say link，to a particular URL link to the URL。called
    ad so I just said link to URL，call dad and how Django figures this out。is based
    on the contents of my URL spy。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_9.png)
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我可以在这里直接说链接到特定的URL，链接到名为ad的URL，所以我只是说链接到名为ad的URL，Django是如何根据我的urls.py内容来判断的。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_9.png)
- en: file that inside my URLs that PI file I，defined a number of different paths
    and。I gave each of those paths a name this，one was called index，this one was called
    ad and so when I did。that I was able to say if you link to a，URL called a de Django
    we'll find a URL。whose name is AD and linked me directly，to that route and so
    if ever I were to。
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在我的urls.py文件中，我定义了多个不同的路径，并给每个路径起了个名字，这个叫index，那个叫ad，所以当我这样做时，我能够说，如果你链接到一个叫ad的URL，Django会找到一个名称为ad的URL，并直接链接到该路由。
- en: change the route to something else，Django would just figure out what the。new
    URL should be and I wouldn't have to，worry about it Django would fix the。problems
    for me and so now if I go back，to the tasks site I can click the add a。new task
    button and that will take me to。
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 将路由更改为其他内容，Django会自动判断新的URL应该是什么，我不必担心，Django会为我解决问题。现在如果我回到任务网站，我可以点击添加新任务按钮，这将带我到。
- en: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_11.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_11.png)'
- en: the add task and maybe now I'd like to，add a link that goes back so I can go
    to。add dot HTML and maybe add a link it，down on the bottom a href equals and。what
    URL would I like to link to。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_13.png)
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 添加任务，也许现在我想添加一个可以返回的链接，以便我可以去 add.html，可能在底部添加一个链接，a href 等于，那个我想链接到的 URL 是什么。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_13.png)
- en: well my default page was just called，index so I'll go ahead include the word。index
    I'd like to link to the URL index，and then view tasks maybe as the name of。the
    link so now if I go to just the，default tasks page I see a link to go。out a new
    task and now I see a link，that's going to take me back to the。
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 我默认的页面仅名为 index，所以我会包含单词 index，我想链接到 URL index，然后可能将查看任务作为链接的名称，所以现在如果我只去默认的任务页面，我看到一个链接可以去创建一个新任务，现在我看到一个链接，将带我回到。
- en: ability to view tasks and when I click，on that link，I see no and now that's
    probably not。what I wanted I wanted to go back to the，index page for my tasks
    application but。it seems that when I clicked on View，tasks I'm taken to know and
    what's going。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_15.png)
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 查看任务的能力，当我点击那个链接时，我看到了没有，这可能不是我想要的，我想回到我的任务应用的索引页面，但似乎当我点击查看任务时，我被带到了没有，并发生了什么。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_15.png)
- en: on here well if you look at the URL the，URL is slash New Year somehow I was
    on。the tasks app I clicked a link and I'm，back at the New Year app how did that。happen
    well turns out this is an example，of a namespace collision where I have。two things
    that all have the same name，and in this case what's happening is。
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你查看 URL，URL 是斜杠新年，不知怎么的，我在任务应用上，点击了一个链接，我又回到了新年应用，怎么会这样？原来这是一个命名空间冲突的例子，我有两个名称相同的东西，而在这种情况下，发生的事情是。
- en: that I have a URL spy file for my tasks，application where I have a route called。add
    and a route called index but it just，so happens that inside of the New Year。folder
    if I go up to New Year and I look，at New Year's URLs top I file the new。year's
    URLs DUP pi file also has a path，whose name is index and so what I said。
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 我有一个用于我的任务的 URL 间谍文件，应用程序中有一个名为 add 的路由和一个名为 index 的路由，但恰巧在新年文件夹内，如果我进入新年并查看新年的
    URL 顶部，我的文件中的新年 URL DUP pi 文件也有一个路径，名称为 index，所以我所说的。
- en: was create a link and I would like that，link to link to the thing that has the。URL
    with a name of index and it turns，out there were multiple things that all。had
    a name of index and so Jane Doe，didn't know which to choose and it just。chose
    the New Year one and you might，imagine that linking between apps is。
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个链接，我希望那个链接指向一个名为 index 的 URL，结果发现有多个名称为 index 的东西，因此 Jane Doe 不知道选择哪个，它只是选择了新年那个。你可以想象，在应用之间链接是。
- en: something you might reasonably want to，do you want，- from Amazon's shopping
    page for。example be able to click a link that，takes you to Amazon video or you
    want。from Google search to be able to click a，button that gets you to Google Maps
    but。in this case this isn't quite what I，wanted there's a namespace collision。
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 有些事情你可能会合理地想要，想要 - 比如从亚马逊的购物页面能够点击一个链接，带你到亚马逊视频，或者从谷歌搜索能够点击一个按钮，带你到谷歌地图，但在这种情况下，这不是我想要的，有命名空间冲突。
- en: where two things have the same name that，I would now like to be able to fix
    and。the easy way to fix this is inside of，URLs by for my tasks application let
    me。just give each of these URLs an app name，called tasks this just helps uniquely。identify
    all of the URLs because now，inside of a dot HTML rather than just。
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 有两个东西有相同的名称，我现在想修复它，修复的简单方法是在我的任务应用程序的 URL 中，让我给每个 URL 一个名为 tasks 的应用名称，这有助于唯一识别所有的
    URL，因为现在在 .html 中，而不是仅仅。
- en: linked to a URL whose name is index I'm。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_17.png)
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 关联到一个名为 index 的 URL，我在这里插入一张图片。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_17.png)
- en: going to instead link to tasks ： index，to mean from tasks the tasks app get
    the。index URL and likewise inside of，index。html a link to tasks ： add to get。it
    that particular route from this，particular application name so now if I。go back
    to the site go back to my tasks，page now the links work as expected I。
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 现在要改为链接到任务：索引，意味着从任务应用获取索引 URL，同样在 index.html 内部链接到任务：添加，以便从这个特定的应用名称获取特定的路由，所以现在如果我回到网站，回到我的任务页面，现在链接按预期工作。
- en: can get to the new tasks and I can get，back to the list of all of my tasks as。well
    so this now works I know have these，two pages one that displays my list one。that
    displays my ability to add a new，task but the form to add a new task。doesn't really
    do anything right now，I type in a task I type in like foo if I。
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 我可以进入新任务，并且我可以返回我的所有任务列表，所以现在这部分工作正常。我知道有这两页，一页显示我的任务列表，一页显示我添加新任务的能力，但添加新任务的表单现在实际上并没有任何作用。我输入一个任务，比如
    foo，如果我。
- en: want to add a task called foo and I，press submit and like nothing happens。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_19.png)
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我想添加一个叫 foo 的任务，我按提交，但似乎什么也没有发生。
- en: nothing changes meaningfully on this，site so I'd like for this form to do。something
    and we've seen that we can add，an action to a form to be able to take。that form
    and submit it somewhere and，that's what I'd like to do when I add a。new task I'm
    going to add an action to，this form and when I submit the form。
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 这个网站上没有什么有意义的变化，所以我希望这个表单能做点什么。我们已经看到可以为表单添加一个动作，以便将该表单提交到某个地方，这正是我在添加新任务时想要做的。我将为这个表单添加一个动作，当我提交表单时。
- en: what URL would I'd like to submit it to，well I'll go ahead and submit it back
    to，the URL for tasks ：
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望将其提交到哪个 URL 呢？好吧，我会将其提交回任务的 URL：
- en: ad I'll send it back，to that ad URL when I submit the form，and I'm gonna give
    this form a specific。request method its method is going to be，post and so we've
    already seen a request。method of get any time you type in a URL，or click on a
    link to go to another page。if the request method implicitly，associated with that
    request is called，a。
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 我会将其发送回那个添加的 URL，当我提交表单时，我会给这个表单一个特定的请求方法，它的方法将是 POST。我们已经看到 GET 请求方法，每当你在 URL
    中输入或点击链接以转到另一个页面时，如果与该请求隐式关联的请求方法被称为。
- en: particular page anytime you're，submitting data that has the potential。to change
    some state inside the，application like changing the state of。the list of tasks
    that is stored inside，the application then we'll generally use。a different request
    method called post。
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何时候你提交可能会改变应用程序内部某些状态的数据时，比如改变存储在应用程序中的任务列表状态，我们通常会使用一种不同的请求方法，称为 POST。
- en: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_21.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_21.png)'
- en: post was generally used for submitting，form data it doesn't include parameters。inside
    the URL the way a get request，does as we saw with Google for example。but this
    post ability is going to give，us the ability now to send data by a。different request
    method to my add route，and so let's now give this a try now I'm。
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: POST 通常用于提交表单数据，它不包含像 GET 请求那样在 URL 中的参数，正如我们在 Google 的例子中看到的。但这个 POST 的功能将让我们有能力通过不同的请求方法将数据发送到我的添加路由。所以现在我们来尝试一下。
- en: going to go to task slash add I see the，ability to add a task and maybe I'll
    add。a task like check email or something and，press submit and alright I get an
    error。forbidden this 403 in parentheses means，that is the response code that came
    back。this is an error that Django is，generated for me，so this 403 as we saw before
    means。
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 我将去任务/添加，我看到可以添加任务，也许我会添加一个任务，比如检查邮件，然后按提交。好吧，我得到了一个错误。被禁止，这个 403 在括号中意味着，这是响应代码的返回。这是
    Django 为我生成的错误，所以这个 403 如我们之前所见。
- en: forbidden I don't have permission to do，this for some reason now why don't I。have
    permission to submit this form it。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_23.png)
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 被禁止了，我出于某种原因没有权限去做这个，为什么我没有权限提交这个表单呢？
- en: says CSRs verification failed so CSRF，stands for cross-site request forgery。and
    what that means it is a security，vulnerability that is inherent in some。forms
    if they're not designed in a，secure way meaning that someone could。Forge a request
    to a particular web site，using some form on their own separate。
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 显示 CSRF 验证失败，所以 CSRF 代表跨站请求伪造。这意味着它是一种固有于某些表单的安全漏洞，如果它们没有以安全的方式设计，这意味着某人可能会使用自己独立的表单伪造对特定网站的请求。
- en: web site for example you might imagine，someone on a different website might。trick
    the user into submitting a form，that submits its data to our ad task。function
    that adds a new task to their，task list and maybe that's not a big。deal for tasks
    but you might imagine in，more secure contacts more sensitive。
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 例如在网站上，你可能会想象有人在另一个网站上可能会欺骗用户提交一个表单，将数据提交到我们的添加任务功能，这将新的任务添加到他们的任务列表中，也许这对任务来说不是大问题，但在更安全的上下文中可能会更敏感。
- en: context like a bank for example they，might have a form on their website for。transferring
    money from one user to，another and if they're vulnerable to。this sort of attack
    cross-site request，forgery someone else on a different。website could trick the
    user into，submitting a form where it submits form。
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，银行可能在其网站上有一个用于用户之间转账的表单，如果他们易受这种攻击的影响，跨站请求伪造可能会使其他网站上的某人欺骗用户提交表单。
- en: data and it goes to the bank's website，to say I would like to transfer money。from
    this one user to another user so we，would like to be able to design forms。that
    are not vulnerable to that，particular security vulnerability that。don't allow
    for request to be forged by，another website so how can we go about。
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 数据会发送到银行的网站，以请求从一个用户转账到另一个用户，因此我们希望设计出不易受到这种特定安全漏洞影响的表单，防止请求被其他网站伪造，那么我们该如何进行呢？
- en: doing this well one strategy that can be，used in order to deal with these sorts。of
    attacks is to add in，to our forum a hidden cross-site request。forgery token or
    CSRF token which would，just be some unique token that's。generated for every session
    so every，time a different user visits this。
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 为了妥善处理这些攻击，可以采用一种策略，即在我们的表单中添加一个隐藏的跨站请求伪造令牌或 CSRF 令牌，这将是为每个会话生成的唯一令牌，因此每次不同用户访问时。
- en: particular forum they see a different，CSRF token and then when the user。submits
    the form they're submitting that，token with the form and our web。application is
    going to check to make，sure that that token is indeed valid and。if it is valid
    then they'll allow the，form submission to go through but this。
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在特定的表单中，他们会看到不同的 CSRF 令牌，当用户提交表单时，他们将与表单一起提交该令牌，我们的 Web 应用程序将检查该令牌是否确实有效，如果有效，则允许表单提交。
- en: means that an adversary wouldn't be able，to fake a request to our website because。that
    adversary doesn't know specifically，what the generated token is so they。would
    fail the check for CSRF validation，and it just so happens the Django has。CSRF
    validation turned on by default and，it's done so via specific add-on known。
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着对手无法伪造请求到我们的网站，因为对手并不知道生成的令牌是什么，因此他们会失败 CSRF 验证，而 Django 默认启用了 CSRF 验证。
- en: as django middleware middleware refers，to the ability in django to be able to。sort
    of intervene in the request，response processing of a django request。and if i look
    at the settings pi file if，you're curious for this particular web。application
    inside of settings at pi if，we scroll down we see there's a whole。
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: Django 中间件指的是 Django 介入请求和响应处理的能力。如果我查看设置文件，如果你对这个特定的 Web 应用程序感兴趣，在设置文件中向下滚动，可以看到有一整套内容。
- en: bunch of middleware that's installed by，default inside of a django application。in
    terms of making sure that we have，various different features hooked into。this
    request response processing and one，of those is the CRS or CSRF view。middleware
    this feature of Django that，allows it to make sure that our requests。
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Django 应用程序中默认安装了一堆中间件，以确保我们有不同的功能挂钩到请求响应处理中，其中之一是 CSRF 视图中间件，这个 Django 的特性确保我们的请求是安全的。
- en: whenever we're submitting data via post，something that has the potential to。change
    the state of the application in，some way that we need to have CSRF。validation
    we need to add some sort of，token to our forum to make sure that。Django is able
    to authenticate the ver，the validity of this form to make sure。
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 每当我们通过 POST 提交数据时，这可能会更改应用程序的状态，因此我们需要进行 CSRF 验证，我们需要在表单中添加某种令牌，以确保 Django 能够验证此表单的有效性。
- en: they know the form actually came from，the web application itself and it's。quite
    easy to be able to add this token，into our HTML page Django has a built in。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_25.png)
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 他们知道表单确实来自于 Web 应用程序本身，并且将这个令牌添加到我们的 HTML 页面中非常简单，Django 自带支持。
- en: inside the curly brace and % we can just，say I would like to add into this page。of
    the CSRF token for example to go，ahead and fill in the CSRF token right。there
    if I now go back to the page and，refresh the page now I see ad tasks but。if we're
    curious I can now actually go，and view the page source I can look。
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在花括号和 % 内，我们可以说，我想在这个页面中添加 CSRF 令牌，例如直接填充 CSRF 令牌。如果现在返回页面并刷新，我就可以看到广告任务，但如果我们好奇，可以查看页面源代码。
- en: inside this page and here now is the，form and this is the form same as we saw，before
    but you。notice the Django has inserted this，additional input field this input
    whose。type is hidden meaning we won't be able，to see it normally whose name is
    CSRF。middleware token and here is its value，some long string of characters the。
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个页面内，现在有了表单，这与我们之前看到的表单相同，但你会注意到 Django 插入了这个额外的输入字段，这个输入字段的类型为隐藏，意味着我们通常看不到它，其名称为
    CSRF 中间件令牌，这里是它的值，一串长字符。
- en: Django has generated for me such that，when I submit this form it's going to。check
    to make sure this token is valid，and if it doesn't find this token it is。not going
    to accept my form submission，and if someone else goes to this Web。site they're
    going to see a different，token presented to them as well and that。
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: Django 为我生成了这样的内容，当我提交这个表单时，它会检查以确保这个令牌是有效的，如果没有找到这个令牌，它将不会接受我的表单提交。如果其他人访问这个网站，他们也会看到一个不同的令牌。
- en: helps to make sure that nobody can forge，these sorts of requests so now if I
    type。in a task that I'd like to add something，like check email and press submit。now
    the forum it does submit without，errors of course it doesn't do anything。if I
    go back to my task list it's still，empty but at least I've now been able to。
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 这有助于确保没有人可以伪造这些请求。因此现在，如果我输入一个想要添加的任务，比如检查电子邮件并按下提交，现在论坛当然可以提交，而没有错误，但如果我返回我的任务列表，它仍然是空的，但至少我现在能够提交这个表单。
- en: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_27.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_27.png)'
- en: submit that form it's worth noting that，inside of a dot HTML we created this。form
    sort of from scratch I created an，input field whose type is text in whose。name
    is task but creating forms is，something that happened so often in the。world of
    web programming oftentimes with，many different fields that you might。
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，在一个 HTML 文件中，我们几乎是从零开始创建这个表单。我创建了一个类型为文本的输入字段，其名称为任务，但创建表单在网页编程中是非常常见的，通常涉及许多不同的字段。
- en: want to change over time the drain goes，added a number of ways to make it easier。to
    create forms to validate the data，inside of those forms just to make our。lives
    a little bit easier when it comes，to dealing with and interacting with。forums
    and so now we'll explore an，alternative way of doing the same thing。
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 随着时间的推移，Django 添加了多种方式来简化创建表单和验证数据的过程，以便让我们在处理和交互时生活得更轻松。因此现在我们将探索一种替代的方法来完成相同的事情。
- en: what we did here just works we can，create a form just using raw HTML as。we've
    seen before but Django also has，the ability to create forms for us so in。order
    to do this I'll go into views pie，and at the top ad from Django import。forms and
    now I'm going to create a new，class to represent this form I'll create。
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在这里所做的就是使用原始 HTML 创建一个表单，正如我们之前所见，但 Django 也有为我们创建表单的能力。因此为了做到这一点，我将进入 views.py
    文件，并在顶部添加 `from Django import forms`，然后我要创建一个新的类来表示这个表单。
- en: a Python class that I'll just call new，task form since we'll use it to create
    a。new task it will inherit from forms dot，form and now inside of this class I
    need。to define all of the fields I would like，for this form to have all of the
    inputs。that I would like the user to provide，them and so I want them to provide
    the。
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 我将创建一个 Python 类，称之为 new_task_form，因为我们将用它来创建一个新任务。它将从 `forms.Form` 继承，而现在在这个类中，我需要定义我希望这个表单具有的所有字段，即我希望用户提供的所有输入。
- en: name of a task which will be a character，field or a char field meaning I want
    the。user to type in characters and I can，give this a label call it new tasks for。example
    and now what I can do is when I，render ad/hd ml I can add some context。and say
    give this template access to a，variable called form，which will just be a new task
    for I'm。
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我希望他们提供一个任务名称，这将是一个字符字段，或者说是一个 char 字段，意味着我希望用户输入字符。我可以给这个字段一个标签，比如称之为新任务。现在，当我渲染
    `add.html` 时，我可以添加一些上下文，并说让这个模板访问一个名为 `form` 的变量，这将是一个新任务表单。
- en: gonna create a new task form pass it，into this add HTML template and now。inside
    of add HTML instead of writing，the input whose type is text name is。task haven't
    having to do that on my own，I can just use double curly braces and。say plug in
    the form here and that will，automatically take care of Django will。
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 我要创建一个新任务表单，将其传入这个 `add.html` 模板。现在在 `add.html` 中，不用手动编写类型为文本的输入字段，名称为任务，我可以只使用双大括号，并说在这里插入表单，这将自动处理，Django
    会为我做好。
- en: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_29.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_29.png)'
- en: generate the necessary HTML to make that，form work so if i refresh this page
    now。i see that here is the form the Django。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_31.png)
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 生成必要的HTML，使表单工作，所以如果我现在刷新这个页面，我看到这里是表单，Django。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_31.png)
- en: is created for me it's created an input，field it's given it a label of new tasks。so
    I know that it's where a new task，should go but now rather than needing to。edit
    the HTML anytime I want to change，the form data that's involved inside of。this
    application I can just change this，new task form if maybe I want to。
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 为我创建了一个输入字段，给它一个“新任务”的标签，以便我知道这是新任务的输入位置，但现在不需要每次想更改表单数据时都去编辑HTML，我只需更改这个新任务表单，如果我想的话。
- en: eventually make upgrades to my，application where in addition to。specifying a
    text field where I can type，in the new task maybe I also want to be。able to specify
    a number indicating the，priority that task should have I could。additionally give
    this form access to a，priority variable which is an integer。
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 最终对我的应用程序进行升级，除了指定一个文本框让我输入新任务之外，也许我还想能够指定一个数字，表示这个任务应该具有的优先级。我可以额外给这个表单访问一个优先级变量，它是一个整数。
- en: field whose label is priority and I can。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_33.png)
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 标签为优先级的字段，我可以。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_33.png)
- en: even add constraints on this to be able，to ensure that it's valid data I can。give
    it a mini B 1 and a max value of 10，for example in order to add all of that。and
    now without touching anything in my，HTML I just changed the form itself。inside
    of my Python code now if i，refresh the page I see an additional。
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 甚至在这方面添加约束，以确保这是有效的数据。我可以给它一个最小值1和一个最大值10，例如，以添加所有这些。而现在不触碰我网页中的任何内容，我只改变了表单本身。
- en: field I see an opportunity for me to，type in a new task and I see an。opportunity
    for me to specify some，priority and of course you could add CSS。in order to style
    this up a little bit，nicer but now Django will automatically。do client-side validation
    where if I，type in a new task like check email but。
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 字段，我看到一个机会让我输入一个新任务，我看到一个机会让我指定一些优先级，当然你可以添加CSS来让这个看起来更好一点，但现在Django将自动进行客户端验证，如果我输入一个新任务，比如检查邮件，但。
- en: I don't specify a priority and submit it，it tells me to fill it out if I type
    in。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_35.png)
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 我不指定优先级并提交，它会告诉我填写这个，如果我输入。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_35.png)
- en: a number that's in an invalid range I，only want two numbers from 0 to 10 it。fills
    it out and this is all what we，would call again client-side validation。the server
    isn't getting any of this，data it's just the web page has been。encoded to know
    what the valid values，are and it's going to constrain me to。
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 一个在无效范围内的数字，我只想要从0到10的两个数字。它填写了这个，这被称为客户端验证。服务器并没有收到任何这些数据，只是网页已经被编码以了解有效值，并将限制我。
- en: make sure that I'm typing in something，that matches those values but in general。when
    we're doing form validation when，we're making sure that forms are valid。data we
    want to somehow make sure to，include not only client-side valid。but also server-side
    validation we also，want to check on the server to make sure。
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 确保我输入的内容符合这些值，但一般来说，当我们进行表单验证，确保表单是有效数据时，我们希望确保包含不仅是客户端有效，还有服务器端验证，我们还想在服务器上检查，以确保。
- en: that inputs are value valid as well，because there are many reasons why this。we
    might want to be able to do this one，is that it's very easy to disable the。sort
    of client-side validation or just，submit a request without doing any of。the client-side
    validation and maybe if，the user is looking at an old version of。
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 输入的值也是有效的，因为有很多原因我们可能想要这样做，一个原因是很容易禁用那种客户端验证，或者只是提交请求而不做任何客户端验证，也许如果用户查看的是旧版本的。
- en: the page the validation we're doing on，the server is more up-to-date than this。client-side
    validation as well and，Django's forums will make it very easy。for us to do both
    of these things both，the client-side validation and the。server-side validation
    as well so how，does this work how do we do that。
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 页面上，服务器进行的验证比这个客户端验证更新，Django的表单将使我们很容易同时处理这两种验证，客户端验证和服务器端验证。那么这怎么运作的呢？我们是如何做到的？
- en: well inside of the add function this add，function now gets called in two。different
    ways depending upon the，request method if I try to get the add。page and by just
    clicking on the link，for add a new task or going to the URL。of slash ad then I
    want to just render a，new blank form but if I post data to。
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `add` 函数内部，这个 `add` 函数现在会根据请求方法以两种不同的方式被调用。如果我尝试通过点击添加新任务的链接或访问 `/add` 的 URL
    来获取添加页面，我只想呈现一个新的空白表单，但如果我向其 `post` 数据。
- en: this page by using the post request，method instead of get that means I'm。submitting
    the form and I now want to，submit a new task to be added to my list。of tasks so
    I'd like to add a check for，that I'm going to add a condition here。that says if
    request dot method equals，post well then here what I'd like to do。
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这个页面通过使用 `post` 请求方法而不是 `get`，这意味着我正在提交表单，我现在想要提交一个新的任务以添加到我的任务列表中。因此，我想要添加一个检查条件，我将添加一个条件，说明如果
    `request.method` 等于 `post`，那么这里是我想要做的。
- en: is process the result of that request，and the way you do that in a Django form。is
    by creating a new variable called，form which will be a new task form and。if I
    just use new task form with two，parentheses like I did before that。creates a blank
    form but you can also，populate that form with some data and if。
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 这是请求结果的处理，在 Django 表单中实现这个的方法是创建一个新的变量叫 `form`，这将是一个新的任务表单。如果我像之前那样仅使用 `new
    task form` 及两个括号，那么它会创建一个空白表单，但你也可以用一些数据填充这个表单。
- en: I populate it with request dot post what，that is going to do is request stop
    post。contains all of the data that the user，submitted when they submitted the
    form。and so what I'm doing now is I'm，creating a form variable by taking all。of
    that data and filling it in to this，new task form which will contain now all。
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 我用请求的 `post` 方法填充它，所要做的是请求停止 `post`。包含用户在提交表单时提交的所有数据。因此，我现在所做的是，我通过提取所有数据来创建一个表单变量，并将其填入这个新的任务表单中，这个表单现在将包含所有内容。
- en: of the data the user submitted and you，could imagine checking this manually
    but。I can just call if form dot is valid and，inside this if statement use some
    logic。using the cleaned data as a result of，using this form and so inside of a。variable
    called form dot cleaned data，that will give me access to all of the，data the。
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 用户提交的数据，您可以想象手动检查这一点，但我可以直接调用 `if form.is_valid`，在这个 `if` 语句内使用一些逻辑，利用这个表单的清理数据。因此，在名为
    `form.cleaned_data` 的变量中，这将让我访问到所有数据。
- en: are submitted and so if I want to get，like what tasks they submitted because
    I。had a variable here called tasks inside，of a new task form well I'll just go
    to。form dot clean data and then task and，I'll go ahead and save this inside of
    a。variable called tasks and now what I，might like to do is add this task to my。
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 已提交的，因此如果我想获取他们提交的任务，因为我在一个新的任务表单中有一个名为 `tasks` 的变量，我只需访问 `form.cleaned_data`，然后
    `task`，我会将其保存在一个名为 `tasks` 的变量中，现在我想做的事情是将这个任务添加到我的。
- en: list of tasks go tasks dot append this，new task so that's what we do if the。form
    is valid if the form is valid we，take the data from the form get the task。save
    it inside this variable called，tasks and add it to my growing list but。else if
    the form is not valid what。
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 任务列表通过 `tasks.append` 方法添加这个新任务，所以如果表单有效，我们就这样做。如果表单有效，我们从表单中获取数据，获取任务，将其保存在一个名为
    `tasks` 的变量中，并添加到我不断增长的列表中。但是如果表单无效，那又怎么办呢？
- en: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_37.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_37.png)'
- en: should we do instead well then I should，return the add dot HTML file again but。instead
    of providing the form back to，them view a new form back to them。I'm gonna send
    back the existing form，data back to them so we can display。information about any
    errors that might，have come up as well so what does this。
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 那我们应该怎么做呢？那么我应该再次返回 `add.html` 文件，但不是将表单提供回去，而是将新的表单提供给他们。我将把现有的表单数据返回给他们，以便我们可以显示可能出现的任何错误的信息。那么这是什么意思呢？
- en: now look like let's show an example and，then I'll go back to the codes you can。see
    in better detail how it works，here's task / atom recall that if I type。in a task
    like check email and a，priority that's not valid out of range，like 11 and press
    submit。it says value must be less than or equal，to 10 but let's now imagine a
    situation。
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 现在看看，让我们举个例子，然后我再回到代码中，你可以更详细地看到它是如何工作的。这里是任务/原子，记住如果我输入一个任务，比如检查电子邮件，优先级不在有效范围内，比如
    11，并按下提交，它会说值必须小于或等于 10。但现在我们来想象一个情况。
- en: where the client and server are，validating different things that maybe。I've
    now decided you know what priority，instead of being from 1 to 10 can only。be from
    1 to 5 that's now the valid，range for priorities but this client。which is still
    an older version of the，page doesn't know this so it thinks that。
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 客户端和服务器正在验证不同的内容，我可能已经决定，优先级从 1 到 10，现在只能从 1 到 5，这就是优先级的有效范围，但这个客户端仍然是页面的旧版本，所以它认为。
- en: a priority of 8 is still valid and it's，going to pass client-side validation
    but。now I press submit and the server is，going to process it and because it's。invalid
    it gives me back the form and，gives me an error ensure this valid。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_39.png)
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 优先级为 8 仍然有效，它将通过客户端验证，但现在我按下提交，服务器将处理它，因为它无效，它会返回表单并给我一个错误，确保这是有效的。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_39.png)
- en: value is less than or equal to 5 and so，this now is why we generally want both。client
    and server-side validation to，make sure that the data we ultimately。get is going
    to be accurate and it's，going to be clean matching whatever。specification we set
    out when we were，creating that form for the first time。
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 值小于或等于 5，这就是为什么我们通常希望客户端和服务器端验证，以确保我们最终得到的数据将是准确的，并且将是干净的，符合我们在第一次创建表单时设定的任何规范。
- en: and so for the purposes of now we're not，going to really worry about priority
    too。much because we just really care about，what the task is but just know that
    if。you wanted a form that had multiple，fields you could add additional fields。in
    this form input as well so now we've，added some application logic to our。
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，目前我们并不太担心优先级，因为我们真的只关心任务是什么，但请知道如果你想要一个包含多个字段的表单，你可以在这个表单输入中添加额外的字段。因此，我们为我们的应用程序逻辑添加了一些内容。
- en: route that checks to make sure that the，form is valid or not if we take a look。at
    what the add function is really doing，we're checking if the request method is。post
    meaning if the user submitted some，form data then we figure out all the。data they
    submitted and save it inside，this form variable we check to see if。
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 路由检查表单是否有效，如果我们看看 add 函数实际上在做什么，我们在检查请求方法是否为 post，意味着如果用户提交了一些表单数据，我们就会弄清楚他们提交的所有数据并将其保存在这个表单变量中，我们检查是否。
- en: the form is valid did they actually，provide a task or they may be providing。all
    the necessary data in the right，format if so then we get the task and。add it to
    the list of tasks otherwise if，the forms not valid then we go ahead and。render
    that same add HTML file back to，them but we pass in the form that they。
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 表单是否有效，他们是否实际提供了任务，或者他们可能提供了所有必要的数据，格式是否正确。如果是这样，我们就会获取任务并将其添加到任务列表中，否则如果表单无效，我们将继续并将相同的添加
    HTML 文件呈现给他们，但我们传入他们的表单。
- en: submit it so that they can see all of，the errors they made they can make。modifications
    to their own form，submission if they'd like to and then。otherwise meaning if the
    request method。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_41.png)
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 提交它，以便他们可以看到他们所犯的所有错误，他们可以对自己的表单提交进行修改，如果他们愿意的话。否则，也就是说，如果请求方法是。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_41.png)
- en: wasn't post at all if the user just，tried to get the page rather than submit。data
    to it then we're just gonna render，to them an empty form and this sort of。paradigm
    is actually quite common when，we're dealing with requests and。responses that oftentimes
    pages that，have forms will want you to first be。
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 如果用户只是尝试获取页面而不是提交数据，那么我们只会向他们呈现一个空表单，这种范式在处理请求和响应时其实是相当常见的，通常表单页面希望你首先。
- en: able to get that form via the get method，to just get the page in order to display。the
    contents but those routes will also，often support a post method where you。can
    post data to those routes in order，to say I would like to now submit data。to a
    particular route in order to get，some sort of results some sort of。
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 能够通过 get 方法获取该表单，只是获取页面以显示内容，但这些路由通常也会支持 post 方法，你可以将数据发布到这些路由，以便说我现在想提交数据到特定路由以获得某种结果。
- en: addition to a list of tasks transferring，money in a bank from one account to。another
    for example or something else，entirely，but watch what happens if I now try。inside
    of tasks add to add a new task，that's valid something like check email。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_43.png)
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 除了任务列表之外，转账，例如在银行中从一个账户到另一个账户，或者完全不同的事情，但看看如果我现在尝试在任务内部添加一个有效的新任务，比如检查邮件，会发生什么。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_43.png)
- en: for example I press submit and alright。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_45.png)
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我按下提交，好的。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_45.png)
- en: nothing quite seems to happen because I，just get back this new task form but
    if。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_47.png)
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 并没有发生什么，因为我只是收到了这个新的任务表单，但是如果。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_47.png)
- en: I go back to view tasks now I see that，Trek email has been added to my list
    of。tasks the original list of tasks just，had fubar Baz and now we've added check。email
    to it but this wasn't quite the，behavior that I might have expected。maybe I wanted
    that after I submitted，the task form to add a new task I would。
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 我回去查看任务，现在我看到检查邮件已被添加到我的任务列表中，原来的任务列表只包含fubar Baz，而现在我们添加了检查邮件，但这并不是我预期的行为。也许我希望在我提交任务表单后添加新任务。
- en: like to be redirected back to this page，easy，for us to be able to redirect users
    from。one page to another in order to do that，after we add a new task to my list
    of。tasks I'm going to return an HTTP，response redirect and redirect the user。to
    a particular route I could redirect，them to just like slash tasks for。
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 喜欢被重定向回这个页面，对我们来说很简单，以便能够将用户从一个页面重定向到另一个页面。为此，在我们将新任务添加到我的任务列表后，我将返回一个HTTP响应重定向，并将用户重定向到一个特定的路由。我可以将他们重定向到类似于斜杠任务的地方。
- en: example but again we generally try not，to hard code URLs into our application。so
    better design would be to say let me，give you the name of the route and go。ahead
    and reverse engineer what the，route actually is from that and so in。order to do
    that we can use the function，called reverse built into Jango and say，tasks ：
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 例子，但我们通常尽量不在应用程序中硬编码URLs，因此更好的设计是让我给你路由的名称，并进行逆向工程得到路由的实际内容。因此，为此我们可以使用Jango内置的reverse函数，来获取tasks：
- en: index to say figure out what the，URL of the index URL for the tasks app。is and
    use that URL as the one that we，ultimately redirect to when we return。this HTTP
    response redirect in order to，use these we need to import both of them。so from
    the top I'll say from Jango HTTP，import HTTP response redirect and from。
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 索引以找出任务应用的索引URL是什么，并将该URL作为我们最终重定向的URL，以便返回这个HTTP响应重定向。为此，我们需要导入这两个。因此，从顶部我会说从Jango
    HTTP导入HTTP响应重定向和。
- en: Jango URLs ago at an import reverse so，now I've imported both of these and now。the
    effect of this is that after I，submit a new task and add it to my list。of tasks
    I'm going to be redirected back，to the index page of my tasks。application and
    for good measure I'll go，ahead and start us off with an empty。
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: Jango URLs 过去在一个导入反转，所以现在我已经导入了这两个，效果是，在我提交一个新任务并将其添加到我的任务列表后，我将被重定向回我的任务应用的索引页面，并且为了确保万无一失，我会先让我们从一个空的开始。
- en: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_49.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_49.png)'
- en: list to get rid of the foo bar Baz that，we saw there originally。so tasks start
    out as the empty list now，refresh the page I see no tasks in here。by default but
    if I add a new task I，type in something like check email press。submit I now see
    that added to the tasks，list and I get redirected back to the。
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 列表中去掉我们最初看到的foo bar Baz。因此，任务最开始是一个空列表，现在刷新页面，我看到这里没有任务。默认情况下，但如果我添加一个新任务，我输入类似检查邮件的内容，按下提交，现在我看到它被添加到任务列表中，我被重定向回。
- en: tasks page I can add a new task，something like do laundry press submit。and that
    gets added to my tasks list as，well too so by maintaining this global。variable
    called tasks and updating it，anytime I submit the form I've been able。to dynamically
    grow this list of tasks，inside of my application and display all。
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在任务页面，我可以添加一个新任务，比如说做洗衣，按下提交。这将被添加到我的任务列表中，因此通过维护一个名为tasks的全局变量并在每次提交表单时更新它，我能够动态地增加这个任务列表，并展示所有内容。
- en: of those tasks here inside of my HTML，page however there's still one big。problem
    with the application that I，built and it goes back to the idea that。I've stored
    these tasks inside of a，global variable this variable is，something me and。haier
    application has access to which，means that anyone who visits my website。
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 这些任务在我的HTML页面中，但是应用程序仍然有一个大问题，那就是我将这些任务存储在一个全局变量中。这个变量是我和haier应用程序可以访问的，这意味着任何访问我网站的人。
- en: is going to be able to see the same，exact list of tasks and we can simulate。this
    by imagining someone else visiting。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_51.png)
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 将能够看到完全相同的任务列表，我们可以通过想象其他人访问来模拟。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_51.png)
- en: this URL which I can simulate in Google，Chrome by opening an incognito window
    to。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_53.png)
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 我可以在Google Chrome中通过打开隐身窗口来模拟这个URL。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_53.png)
- en: simulate a different session a different，person interacting with the page and。going
    to the same URL what they see when，in the incognito window they go to the。same
    URL is they see the exact same list。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_55.png)
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 模拟一个不同的会话，一个与页面交互的不同人，访问相同的URL，在隐身窗口中访问相同的URL时，他们看到的就是完全相同的列表。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_55.png)
- en: of tasks both me and another person see，the same list because there's just one。tasks
    variable across the entire，application that is shared among all of。the requests
    that come in to that，particular application and that's。probably not what I want
    when I'm，dealing with something like a list of。
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 任务的显示使我和另一个人看到相同的列表，因为整个应用程序中只有一个任务变量，这个变量在所有进入该特定应用程序的请求中共享，这可能不是我在处理任务列表时想要的。
- en: tasks I probably want it to be per user，such that if a different user visits
    the。page they have their own list of tasks，as well and so in order to do this
    we'll。introduce the concept of sessions in，Django or in the web more generally。where
    sessions are away for one Django，to be able to remember who you are such。
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 我想要的任务可能是按用户划分的，这样如果不同的用户访问页面，他们也会有自己的任务列表。因此，为了实现这一点，我们将在Django中引入会话的概念，或者更普遍地说，在网页上使用会话。
- en: that on subsequent visits it remembers，who you are and knows who you are。but
    more importantly it's able to then，store data about your particular session。it's
    able to store your user ID or，information about you or in this case。it's able
    to store all of your tasks and，so in order to take advantage of。
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 在后续访问中，它记住了你是谁，并知道你是谁。但更重要的是，它能够存储有关你特定会话的数据，能够存储你的用户ID或关于你的信息，或者在这个例子中，它能够存储你所有的任务。因此，为了利用这一点。
- en: sessions instead of having a global，variable called tasks we're going to go。ahead
    and delete this and instead store，tasks inside of the users a session so。inside
    the index route I'll include a，line like this I'll check to see if。tasks is not
    in request dot session，meaning if I look inside the session and。
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 会话中，我们不再使用名为任务的全局变量，而是将任务存储在用户的会话中。因此，在索引路由中，我会包含这样一行，我会检查任务是否不在请求的会话中。
- en: you can think of the session is like a，big dictionary representing all the data。we
    have on file inside the session about，the user and if tasks is not in that。session
    well let me add to request stop，sessions or session tasks and set that。equal to
    the empty list and so what I've，done here is I'm looking inside of the。
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以将会话视为一个大字典，代表我们在会话中关于用户的所有数据。如果任务不在那个会话中，那我就来添加请求停止会话或会话任务，并将其设置为空列表。因此，我在这里做的是查看。
- en: session I'm looking inside the session，to see is there already a list of tasks。in
    that session and if there isn't if，there isn't already a list of tasks in。the
    session well then I'd like to create，it then I'd like to set request。session squ*re
    bracket tasks equal to，the empty list if the user doesn't。
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在会话中，我正在查看会话，看看该会话中是否已经有任务列表。如果没有，如果会话中还没有任务列表，那我想创建它。我想将请求会话的任务等于空列表，如果用户没有。
- en: already have a list of tasks go ahead，and give them an empty list of tasks and。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_57.png)
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 已经有一个任务列表，就给他们一个空的任务列表。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_57.png)
- en: now here in tasks instead of rendering，the variable tasks which no longer。exists
    I'll render a request dot session，tasks to pass in that list of tasks to。this
    particular template and now in，index。html we're still looping over to。that list
    of tasks and now we'll see if，I go back to tasks。
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 现在在任务中，不再渲染不再存在的变量任务，而是渲染请求会话的任务，以将任务列表传递给这个特定模板。现在在index.html中，我们仍然在循环访问任务列表，现在如果我返回任务。
- en: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_59.png)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_59.png)'
- en: I see no such table Jango underscore，session so this is a bit of a stranger。what's
    going on here no such table Jango，underscore session well it turns out as。we'll
    see in the future Jango tends to，store data inside of tables and we。haven't yet
    gotten to what that，ultimately means or how to manipulate or。
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 我没有看到这样的表Jango_会话，所以这有点奇怪。这里发生了什么，没有这样的表Jango_会话？事实证明，正如我们将来看到的，Jango倾向于将数据存储在表中，而我们还没有了解这究竟意味着什么，或者如何进行操作。
- en: interact with data stored inside of，tables but Jango stores data about。sessions
    that would happen inside of a，table by default now you can change this。to have
    Jango stored data about sessions，elsewhere but ultimately Jango is。keeping data
    about who you are and what，your tasks are and that data needs to be。
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '如何与存储在表中的数据进行交互，但 Django 默认在一个表中存储关于会话的数据。现在你可以更改 Django 存储会话数据的位置，但最终 Django
    保留关于你是谁和你的任务是什么的数据，这些数据需要被。 '
- en: stored somewhere and by default Jango，wants to store it inside of a table and。right
    now that table doesn't exist so we，need to create it and the way to give。Jango
    access to that table that it wants，to create that it's been waiting the。Krait
    board hasn't yet is to run this，command inside the terminal。
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 存储在某处，默认情况下 Django 想要将其存储在一个表中，而现在这个表还不存在，因此我们需要创建它，而给 Django 访问该表的方法就是在终端中运行此命令。
- en: Python men in spy migrate will learn，more about what that means in terms of。what
    a migration is and what it means to，migrate data into a database but for now。just
    to know that Python managed to PI，migrate will allow us to create all of。the default
    tables inside of Django's，database next time we'll take a look at。
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: Python 的 `pi migrate` 将学习更多关于迁移的意义以及将数据迁移到数据库中的含义，但目前要知道的是，Python 管理的 `pi migrate`
    允许我们在 Django 的数据库中创建所有默认表格。下次我们将看看。
- en: actually creating databases of our own，adding tables of our own that store our。own
    custom data but Jango has some，initial default tables that it wants to。create
    and running Python managed on pi，migrate allows for those tables to be。created
    now that those exist I first。
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，我们自己创建数据库，添加存储自定义数据的表格，但 Django 有一些初始默认表格需要创建，运行 Python 管理的 `pi migrate`
    允许这些表格被创建。现在它们存在，我首先。
- en: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_61.png)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_61.png)'
- en: need to run the server some Python。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_63.png)
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 需要运行 Python 的服务器。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_63.png)
- en: managed up I run server I load the page，and here now is my list of tasks there's。nothing
    here so when I loop over all the，list items it's sort of empty which。maybe isn't
    the best user experience or，user design so what I might want to do。is add an additional
    condition it turns，out inside of index。html whenever I have，a for loop。
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 启动服务器后，我加载页面，现在这是我的任务列表，这里没有任何内容，因此当我循环遍历所有列表项时，它有点空，这可能不是最佳用户体验或用户设计，所以我可能想要添加一个额外的条件，结果在
    `index.html` 中每当我有一个 for 循环。
- en: inside of a django template I can also，add an empty condition to say if I run。the
    for loop but it doesn't run at all，because the sequence is empty well then。let
    me just say like no tasks for，example and this is just a nice-to-have。feature
    of the django language that just，makes it easy for us to be able to deal。
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Django 模板中，我也可以添加一个空条件，如果我运行 for 循环但根本不运行，因为序列是空的，那么我就说像“没有任务”这样的内容，这只是 Django
    语言的一个附加特性，使我们能够更轻松地处理。
- en: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_65.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_65.png)'
- en: with situations where we're iterating，over a list and there's nothing in that。list
    so now i refresh the page，no tasks exactly what I would expect to。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_67.png)
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 在迭代一个列表时，遇到该列表中没有任何内容的情况。所以现在我刷新页面，正如我预期的那样没有任务。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_67.png)
- en: see and now this index route seems to be，working fine，what now needs to change
    when it comes。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_69.png)
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 看，现在这个索引路由似乎工作正常，接下来需要改变的是什么。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_69.png)
- en: to adding a new task well rather than，append the task to my list of tasks let。me
    go ahead and say request session，tasks because that is my list of tasks。and let
    me add to request out session，tasks this new task and adding to it a。new sort
    adding a list to the end of it，that just contains the one new task that。
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 添加新任务时，而不是将任务附加到我的任务列表中，让我直接说请求会话中的任务，因为那是我的任务列表。让我将这个新任务添加到请求的会话任务中，并将其添加到列表末尾，只包含这个新任务。
- en: I got from the form so when the form is，submitted we check to make sure the
    form。is valid we get the task the user，submitted and we append that to the list。of
    tasks that's already stored inside of，the session before redirecting the user。back
    to the index page so let's give it，a try we'll go back to the few r。l back。
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 我从表单获得的，所以当表单提交时，我们检查表单是否有效，获取用户提交的任务，并将其附加到已存储在会话中的任务列表中，然后再将用户重定向回索引页面。让我们试试，回到之前的几步。
- en: to tasks I see I have no tasks initially，and now I can go ahead and add a new。task
    type in something like check email，press submit and right now that's added。add
    a new task something like do laundry。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_71.png)
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 到任务我看到我最初没有任务，现在我可以继续添加新的任务类型，比如检查电子邮件，点击提交，现在已经添加了添加新任务，比如洗衣服。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_71.png)
- en: submit and now both of those tasks are，there but now importantly if you imagine。someone
    in Inc in an incognito window or，on a different computer visiting my same。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_73.png)
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 提交，现在这两个任务都在那里，但现在重要的是，如果你想象一下，在隐身窗口或者在另一台计算机上访问相同的
- en: web site going back to this page what，they see is an entirely different list。of
    tasks because they have a different，session those sessions are determined by。cookies
    these little hand *** that，help the browser to be able to give some。information
    to Django's web server to，say here is Who I am so Django knows。
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: web 网站回到此页面时，他们看到的是完全不同的任务列表，因为他们有不同的会话，这些会话是由 cookies 决定的，这些小手 *** 帮助浏览器能够向
    Django 的 Web 服务器提供一些信息，告诉它这里是我是谁，这样 Django 就知道了。
- en: what data to show you and in this case，my original case，Django knows who I am
    knows to show me。these tasks and in this case is a，different user in incognito
    window in。this case and so what they see is a list。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_75.png)
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 要显示给你的数据是什么，在这种情况下，我的原始情况，Django 知道我是谁，知道要显示给我这些任务，在这种情况下是不同的用户在隐身窗口中，在这种情况下他们看到的是一个列表。![](img/6acd1d7a2f7273f2e4fdae2de65f83ed_75.png)
- en: that has no tasks inside it at all so，now we've really just scratched the。surface
    of what Django has to offer but，we see now the ability it has。to be able to create
    dynamic web，applications instead of just displaying。HTML and CSS that's the same
    every time，using Django we now have the ability to。
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 它根本没有任务，现在我们真的只是刮了一下表面，看看 Django 有什么可以提供的，但是我们现在看到它具有的能力是，能够创建动态的 Web 应用程序，而不仅仅是每次使用相同的
    HTML 和 CSS 显示。
- en: be able to generate programmatically，custom HTML and CSS either saying hello。to
    a person's name based on what name is，provided inside of the URL or the。ability
    to say to check the current date，and conditionally display something if。the date
    is one thing versus another and，the ability to store data on a session。
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 能够自动生成程序化的自定义 HTML 和 CSS，根据 URL 中提供的名称或者根据当前日期进行条件性显示，如果日期是一种而不是另一种，以及在会话中存储数据的能力。
- en: basis to be able to store information，about a user's to-do list for example。such
    that on subsequent visits they can，see their list of things they need to do。with
    a different list for each of these，possible users and here really is just，offer。where
    Django gets very powerful is when，it comes towards storing data inside of。
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 基础是能够存储关于用户待办事项清单的信息，例如在后续访问中，他们可以看到他们需要做的事情清单，对于这些可能的用户，每个用户都有一个不同的列表，这里真的只是提供。当
    Django 在存储数据方面变得非常强大时，这是它的一部分。
- en: databases and manipulating that data and，interacting with that data in various。different
    ways and that's ultimately，where a lot of the power of a web。framework like this
    ultimately comes in，we'll explore more of that next time but。for now that was
    just a look at Django，and how we can use it to be able to。
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 数据库并操作这些数据以及以各种不同的方式与这些数据进行交互，这最终是像这样的 Web 框架的许多强大之处，我们将在下次探讨更多内容，但现在这只是看一看
    Django 以及我们如何使用它来能够。
- en: build these sorts of web applications，this was web programming with Python and。
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 构建这些类型的 Web 应用程序，这是使用 Python 进行 Web 编程和。
