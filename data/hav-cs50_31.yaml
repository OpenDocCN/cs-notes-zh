- en: Lecture 3
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3讲
- en: 原文：[https://cs50.harvard.edu/python/notes/3/](https://cs50.harvard.edu/python/notes/3/)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://cs50.harvard.edu/python/notes/3/](https://cs50.harvard.edu/python/notes/3/)
- en: '[Exceptions](#exceptions)'
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[异常](#exceptions)'
- en: '[Runtime Errors](#runtime-errors)'
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[运行时错误](#runtime-errors)'
- en: '[`try`](#try)'
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`try`'
- en: '[`else`](#else)'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`else`'
- en: '[Creating a Function to Get an Integer](#creating-a-function-to-get-an-integer)'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[创建一个获取整数的函数](#creating-a-function-to-get-an-integer)'
- en: '[`pass`](#pass)'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pass`'
- en: '[Summing Up](#summing-up)'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[总结](#summing-up)'
- en: Exceptions
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 异常
- en: Exceptions are things that go wrong within our coding.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 异常是我们编码中出现的错误。
- en: Exceptions are problems that arise while your program is running.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 异常是在程序运行时出现的错误。
- en: 'In our text editor, type `code hello.py` to create a new file. Type as follows
    (with the intentional errors included):'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在我们的文本编辑器中，输入 `code hello.py` 以创建一个新文件。按照以下方式输入（包括故意包含的错误）：
- en: '[PRE0]'
  id: totrans-13
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Notice that we intentionally left out a quotation mark.
  id: totrans-14
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，我们故意省略了一个引号。
- en: Running `python hello.py` in the terminal produces an error. The interpreter
    reports a syntax error. Syntax errors generally mean you should double-check that
    you typed your code correctly.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在终端中运行 `python hello.py` 会产生错误。解释器报告了一个语法错误。语法错误通常意味着你应该仔细检查你输入的代码是否正确。
- en: You can learn more in Python’s documentation of [Errors and Exceptions](https://docs.python.org/3/tutorial/errors.html).
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在Python的[错误和异常](https://docs.python.org/3/tutorial/errors.html)文档中了解更多信息。
- en: Runtime Errors
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 运行时错误
- en: Runtime errors refer to those created by unexpected behavior within your code.
    For example, perhaps you intended for a user to input a number, but they input
    a character instead. Your program may throw an error because of this unexpected
    input from the user.
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行时错误是指代码中意外行为产生的错误。例如，你可能希望用户输入一个数字，但他们输入了一个字符。由于用户的不当输入，你的程序可能会抛出错误。
- en: 'In your terminal window, run `code number.py`. Code as follows in your text
    editor:'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在你的终端窗口中，运行 `code number.py`。在你的文本编辑器中按照以下方式编写代码：
- en: '[PRE1]'
  id: totrans-20
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Notice that by including the `f`, we tell Python to interpolate what is in the
    curly braces as the value of `x`. Further, testing out your code, you can imagine
    how one could easily type in a string or a character instead of a number. Even
    still, a user could type nothing at all – simply hitting the enter key.
  id: totrans-21
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，通过包含 `f`，我们告诉Python将花括号中的内容作为 `x` 的值进行插值。此外，测试你的代码时，你可以想象如果有人输入一个字符串或字符而不是数字会发生什么。即使如此，用户也可能什么也不输入——只是简单地按回车键。
- en: As programmers, we should be defensive to ensure that our users are entering
    what we expected.
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 作为程序员，我们应该采取防御性措施，以确保用户输入的是我们期望的内容。
- en: 'If we run this program and type “cat”, we’ll see `ValueError: invalid literal
    for int() with base 10: ''cat''`. In other words, the `int` function cannot convert
    the text “cat” into a number.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '如果我们运行这个程序并输入“cat”，我们会看到 `ValueError: invalid literal for int() with base 10:
    ''cat''`。换句话说，`int` 函数无法将文本“cat”转换为数字。'
- en: An effective strategy to fix this potential error would be to create “error
    handling” to ensure the user behaves as we intend.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复这种潜在错误的有效策略是创建“错误处理”来确保用户的行为符合我们的预期。
- en: You can learn more in Python’s documentation of [Errors and Exceptions](https://docs.python.org/3/tutorial/errors.html).
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在Python的[错误和异常](https://docs.python.org/3/tutorial/errors.html)文档中了解更多信息。
- en: '`try`'
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '`try`'
- en: 'In Python `try` and `except` are ways of testing out user input before something
    goes wrong. Modify your code as follows:'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Python中，`try` 和 `except` 是在出现错误之前测试用户输入的方法。按照以下方式修改你的代码：
- en: '[PRE2]'
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Notice how, running this code, inputting `50` will be accepted. However, typing
    in `cat` will produce an error visible to the user, instructing them why their
    input was not accepted.
  id: totrans-29
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，运行这段代码时，输入 `50` 将被接受。然而，输入 `cat` 将产生一个用户可见的错误，并指导他们为什么他们的输入不被接受。
- en: 'This is still not the best way to implement this code. Notice that we are trying
    to do two lines of code. For best practice, we should only `try` the fewest lines
    of code possible that we are concerned could fail. Adjust your code as follows:'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这仍然不是实现此代码的最佳方式。注意，我们试图执行两行代码。为了最佳实践，我们应该只尝试尽可能少的可能失败的代码行。按照以下方式调整你的代码：
- en: '[PRE3]'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Notice that while this accomplishes our goal of trying as few lines as possible,
    we now face a new error! We face a `NameError` where `x is not defined`. Look
    at this code and consider: Why is x not defined in some cases?'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，虽然这实现了尽可能少尝试的目标，但我们现在面临一个新的错误！我们遇到了一个 `NameError`，其中 `x` 未定义。看看这段代码，考虑一下：为什么在某些情况下
    `x` 未定义？
- en: Indeed, if you examine the order of operations in `x = int(input("What's x?"))`,
    working right to left, it could take an incorrectly inputted character and attempt
    to assign it as an integer. If this fails, the assignment of the value of `x`
    never occurs. Therefore, there is no x to print on our final line of code.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 的确，如果你检查`x = int(input("What's x?"))`中的操作顺序，从右到左，它可能会尝试将输入错误的字符赋值为整数。如果这失败了，`x`的赋值永远不会发生。因此，在代码的最后一行没有`x`可以打印。
- en: '`else`'
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '`else`'
- en: It turns out that there is another way to implement `try` that could catch errors
    of this nature.
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 结果表明，还有另一种实现`try`的方法，可以捕获这种类型的错误。
- en: 'Adjust your code as follows:'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按照以下方式调整你的代码：
- en: '[PRE4]'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Notice that if no exception occurs, it will then run the block of code within
    `else`. Running `python number.py` and supplying `50`, you’ll notice that the
    result will be printed. Trying again, this time supplying `cat`, you’ll notice
    that the program now catches the error.
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，如果没有发生异常，它将运行`else`块中的代码。运行`python number.py`并输入`50`，你会注意到结果将被打印出来。再次尝试，这次输入`cat`，你会注意到程序现在捕获了错误。
- en: Considering improving our code, notice that we are being a bit rude to our user.
    If our user does not cooperate, we currently simply end our program. Consider
    how we can use a loop to prompt the user for `x` and if they don’t prompt again!
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 考虑改进我们的代码，注意我们对待用户有点无礼。如果用户不合作，我们目前只是简单地结束程序。考虑一下我们如何使用循环来提示用户输入`x`，如果他们不再次提示的话！
- en: '[PRE5]'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Notice that `while True` will loop forever. If the user succeeds in supplying
    the correct input, we can break from the loop and then print the output. Now,
    a user that inputs something incorrectly will be asked for input again.
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，`while True`将无限循环。如果用户成功提供了正确的输入，我们可以跳出循环并打印输出。现在，一个输入错误的用户将被要求再次输入。
- en: Creating a Function to Get an Integer
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建一个获取整数的函数
- en: 'Surely, there are many times that we would want to get an integer from our
    user. Modify your code as follows:'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当然，有很多时候我们希望从用户那里获取一个整数。按照以下方式修改你的代码：
- en: '[PRE6]'
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Notice that we are manifesting many great properties. First, we have abstracted
    away the ability to get an integer. Now, this whole program boils down to the
    first three lines of the program.
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，我们正在展示许多优秀的特性。首先，我们抽象出了获取整数的能力。现在，整个程序归结为程序的前三条语句。
- en: 'Even still, we can improve this program. Consider what else you could do to
    improve this program. Modify your code as follows:'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 即使如此，我们仍然可以改进这个程序。考虑一下你还能做什么来改进这个程序。按照以下方式修改你的代码：
- en: '[PRE7]'
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Notice that `return` will not only break you out of a loop, but it will also
    return a value.
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，`return`不仅会跳出循环，还会返回一个值。
- en: 'Some people may argue you could do the following:'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有些人可能会争论你可以这样做：
- en: '[PRE8]'
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Notice this does the same thing as the previous iteration of our code, simply
    with fewer lines.
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，这与我们代码的前一个版本做的是同样的事情，只是行数更少。
- en: '`pass`'
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '`pass`'
- en: 'We can make it such that our code does not warn our user, but simply re-asks
    them our prompting question by modifying our code as follows:'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以修改代码，使得我们的代码不会警告用户，而是简单地通过修改代码来再次询问他们的提示问题：
- en: '[PRE9]'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Notice that our code will still function but will not repeatedly inform the
    user of their error. In some cases, you’ll want to be very clear to the user what
    error is being produced. Other times, you might decide that you simply want to
    ask them for input again.
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，我们的代码仍然可以工作，但不会反复通知用户他们的错误。在某些情况下，你可能希望非常清楚地告诉用户产生了什么错误。在其他时候，你可能会决定你只是想再次要求他们输入。
- en: One final refinement that could improve the implementation of this `get_int`
    function. Right now, notice that we are relying currently upon the honor system
    that the `x` is in both the `main` and `get_int` functions. We probably want to
    pass in a prompt that the user sees when asked for input. Modify your code as
    follows.
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对`get_int`函数的实现进行最后一次改进。目前，注意我们依赖于`x`在`main`和`get_int`函数中都是通过荣誉系统来传递的。我们可能想传递一个当用户被要求输入时看到的提示。按照以下方式修改你的代码。
- en: '[PRE10]'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: You can learn more in Python’s documentation of [`pass`](https://docs.python.org/3/tutorial/controlflow.html#pass-statements).
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在Python的文档中了解更多关于[`pass`](https://docs.python.org/3/tutorial/controlflow.html#pass-statements)的信息。
- en: Summing Up
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总结
- en: Errors are inevitable in your code. However, you have the opportunity to use
    what was learned today to help prevent these errors. In this lecture, you learned
    about…
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 代码中不可避免地会出现错误。然而，你有机会利用今天所学的内容来帮助预防这些错误。在本节课中，你学习了关于……
- en: Exceptions
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 异常
- en: Value Errors
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 值错误
- en: Runtime Errors
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行时错误
- en: '`try`'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`try`'
- en: '`else`'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`else`'
- en: '`pass`'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pass`'
