- en: Lecture 9
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第9讲
- en: 原文：[https://cs50.harvard.edu/x/notes/9/](https://cs50.harvard.edu/x/notes/9/)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://cs50.harvard.edu/x/notes/9/](https://cs50.harvard.edu/x/notes/9/)
- en: '[Welcome!](#welcome)'
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[欢迎！](#welcome)'
- en: '[http-server](#http-server)'
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http-server](#http-server)'
- en: '[Flask](#flask)'
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Flask](#flask)'
- en: '[Forms](#forms)'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[表单](#forms)'
- en: '[Templates](#templates)'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[模板](#templates)'
- en: '[Request Methods](#request-methods)'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[请求方法](#request-methods)'
- en: '[Frosh IMs](#frosh-ims)'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Frosh IMs](#frosh-ims)'
- en: '[Flask and SQL](#flask-and-sql)'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Flask 和 SQL](#flask-and-sql)'
- en: '[Cookies and Session](#cookies-and-session)'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Cookies 和 Session](#cookies-and-session)'
- en: '[Shopping Cart](#shopping-cart)'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[购物车](#shopping-cart)'
- en: '[Shows](#shows)'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[显示](#shows)'
- en: '[APIs](#apis)'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[APIs](#apis)'
- en: '[JSON](#json)'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[JSON](#json)'
- en: '[Summing Up](#summing-up)'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[总结](#summing-up)'
- en: Welcome!
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 欢迎光临！
- en: In previous weeks, you have learned numerous programming languages, techniques,
    and strategies.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在之前的几周中，你已经学习了多种编程语言、技术和策略。
- en: Indeed, this class has been far less of a *C class* or *Python class* and far
    more of a *programming class*, such that you can go on to follow future trends.
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 事实上，这门课程远不止是 *C 语言课程* 或 *Python 课程*，而更多的是一门 *编程课程*，这样你就可以继续追随未来的趋势。
- en: In these past several weeks, you have learned *how to learn* about programming.
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在过去的几周中，你已经学习了 *如何学习* 编程。
- en: Today, we will be moving from HTML and CSS into combining HTML, CSS, SQL, Python,
    and JavaScript so you can create your own web applications.
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 今天，我们将从 HTML 和 CSS 转向结合 HTML、CSS、SQL、Python 和 JavaScript，以便你可以创建自己的 Web 应用程序。
- en: You might consider using the skills you learn this week to create your final
    project.
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以考虑使用这周学到的技能来创建你的最终项目。
- en: http-server
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: http-server
- en: Up until this point, all HTML you saw was pre-written and static.
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 到目前为止，你所看到的 HTML 都是预先编写和静态的。
- en: In the past, when you visited a page, the browser downloaded an HTML page, and
    you were able to view it. These are considered *static* pages, in that what is
    programmed in the HTML is exactly what the user sees and downloads *client-side*
    to their internet browser.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在过去，当你访问一个页面时，浏览器会下载一个 HTML 页面，你能够查看它。这些被认为是 *静态* 页面，因为在 HTML 中编程的内容正是用户看到的和下载到他们互联网浏览器中的内容。
- en: Dynamic pages refer to the ability of Python and similar languages to create
    HTML on-the-fly. Accordingly, you can have web pages that are generated *server-side*
    by code based upon the input or behavior of users.
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 动态页面指的是 Python 和类似语言创建 HTML 的即时能力。因此，你可以拥有由代码根据用户输入或行为在服务器端生成的 Web 页面。
- en: You have used `http-server` in the past to serve your web pages. Today, we are
    going to utilize a new server that can parse out a web address and perform actions
    based on the URL provided.
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你过去使用 `http-server` 来提供你的网页服务。今天，我们将利用一个新的服务器，它可以解析出网址并根据提供的 URL 执行操作。
- en: 'Further, last week, you saw URLs as follows:'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此外，上周，你看到了以下这样的 URL：
- en: '[PRE0]'
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Notice that `file.html` is an HTML file inside a folder called `folder` at `example.com`.
  id: totrans-29
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到 `file.html` 是位于 `example.com` 的 `folder` 文件夹中的一个 HTML 文件。
- en: Flask
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Flask
- en: This week, we introduce the ability to engage with *routes* such as `https://www.example.com/route?key=value`,
    where specific functionality can be generated on the server via the keys and values
    provided in the URL.
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这周，我们介绍了与 *路由*（如 `https://www.example.com/route?key=value`）交互的能力，其中特定的功能可以通过
    URL 中提供的键和值在服务器上生成。
- en: '*Flask* is a third-party library that allows you to host web applications using
    the Flask framework, or a micro-framework, within Python.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Flask* 是一个第三方库，它允许你使用 Flask 框架或微框架在 Python 中托管 Web 应用程序。'
- en: You can run Flask by executing `flask run` in your terminal window in [cs50.dev](https://cs50.dev).
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在终端窗口中执行 `flask run` 来运行 Flask，在 [cs50.dev](https://cs50.dev)。
- en: To do so, you will need a file called `app.py` and another called `requirements.txt`.
    `app.py` contains code the tells Flask how to run your web application. `requirements.txt`
    includes a list of the libraries that are required for your Flask application
    to run.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要这样做，你需要一个名为 `app.py` 的文件和另一个名为 `requirements.txt` 的文件。`app.py` 包含代码，告诉 Flask
    如何运行你的 Web 应用程序。`requirements.txt` 包含了运行 Flask 应用程序所需的库列表。
- en: 'Here is a sample of `requirements.txt`:'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这里是 `requirements.txt` 的一个示例：
- en: '[PRE1]'
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Notice only `Flask` appears in this file. This is because Flask is required
    to run the Flask application.
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到在这个文件中只有 `Flask` 出现。这是因为 Flask 是运行 Flask 应用程序所必需的。
- en: 'Here is a very simple Flask application in `app.py`:'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这里是一个非常简单的 `app.py` Flask 应用程序：
- en: '[PRE2]'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Notice that the `/` route simply returns the text `hello, world`.
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到 `/` 路由简单地返回文本 `hello, world`。
- en: 'We can also create code that implements HTML:'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们还可以创建实现 HTML 的代码：
- en: '[PRE3]'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Notice that rather than returning simple text, this provides HTML.
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到它不是返回简单的文本，而是提供了 HTML。
- en: 'Improving our application, we can also serve HTML based upon templates by creating
    a folder called `templates` and creating a file called `index.html` with the following
    code within that folder:'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进我们的应用程序，我们还可以通过创建一个名为 `templates` 的文件夹并创建一个包含以下代码的 `index.html` 文件来根据模板提供
    HTML：
- en: '[PRE4]'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Notice the double `{{ name }}` that is a placeholder for something that will
    be later provided by our Flask server.
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意双大括号 `{{ name }}`，它是为我们 Flask 服务器稍后提供的某个内容的占位符。
- en: 'Then, in the same folder that the `templates` folder appears, create a file
    called `app.py` and add the following code:'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 然后，在 `templates` 文件夹所在的同一文件夹中，创建一个名为 `app.py` 的文件，并添加以下代码：
- en: '[PRE5]'
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Notice that this code defines `app` as the Flask application. Then, it defines
    the `/` route of `app` as returning the contents of `index.html` with the argument
    of `name`. By default, the `request.args.get` function will look for the `name`
    being provided by the user. If no name is provided, it will default to `world`.
    `@app.route` is otherwise known as a decorator.
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，这段代码将 `app` 定义为 Flask 应用程序。然后，它定义了 `app` 的 `/` 路由，返回包含 `name` 参数的 `index.html`
    内容。默认情况下，`request.args.get` 函数将查找用户提供的 `name`。如果没有提供名称，它将默认为 `world`。"@app.route"
    通常被称为装饰器。
- en: 'You can run this web application by typing `flask run` in the terminal window.
    If Flask does not run, ensure that your syntax is correct in each of the files
    above. Further, if Flask will not run, make sure your files are organized as follows:'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可以通过在终端窗口中输入 `flask run` 来运行这个网络应用程序。如果 Flask 没有运行，请确保上述每个文件中的语法都正确。此外，如果 Flask
    无法运行，请确保您的文件组织如下：
- en: '[PRE6]'
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Once you get it running, you will be prompted to click a link. Once you navigate
    to that webpage, try adding `?name=[Your Name]` to the base URL in your browser’s
    URL bar.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一旦运行起来，您将被提示点击一个链接。一旦您导航到该网页，请尝试在浏览器 URL 栏的基本 URL 中添加 `?name=[Your Name]`。
- en: Forms
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 表单
- en: 'Improving upon our program, we know that most users will not type arguments
    into the address bar. Instead, programmers rely upon users to fill out forms on
    web pages. Accordingly, we can modify `index.html` as follows:'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在改进我们的程序时，我们知道大多数用户不会在地址栏中输入参数。相反，程序员依赖于用户在网页上填写表单。因此，我们可以按如下方式修改 `index.html`：
- en: '[PRE7]'
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Notice that a form is now created that takes the user’s name and then passes
    it off to a route called `/greet`. `autocomplete` is turned off. Further, a `placeholder`
    with the text `name` is included. Further, notice how the `meta` tag is used to
    make the web page mobile-responsive.
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意现在创建了一个表单，它接受用户的姓名，并将其传递给名为 `/greet` 的路由。"autocomplete" 已关闭。此外，包含文本 `name`
    的 `placeholder` 也被包含在内。此外，注意 `meta` 标签是如何被用来使网页响应式的。
- en: 'Further, we can change `app.py` as follows:'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此外，我们还可以按如下方式修改 `app.py`：
- en: '[PRE8]'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Notice that the default path will display a form for the user to input their
    name. The `/greet` route will pass the `name` to that web page.
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意默认路径将显示一个表单，让用户输入他们的姓名。`/greet` 路由将 `name` 传递到该网页。
- en: 'To finalize this implementation, you will need another template for `greet.html`
    in the `templates` folder as follows:'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为了完成这个实现，您需要在 `templates` 文件夹中创建一个名为 `greet.html` 的模板，如下所示：
- en: '[PRE9]'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Notice that this route will now render the greeting to the user, followed by
    their name.
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，现在这个路由将向用户显示问候语，然后是他们的名字。
- en: Templates
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模板
- en: Both of our web pages, `index.html` and `greet.html`, have much of the same
    data. Wouldn’t it be nice to allow the body to be unique but copy the same layout
    from page to page?
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们的网页 `index.html` 和 `greet.html` 有很多相同的数据。如果允许主体内容独特，但复制相同的布局从页面到页面，岂不是很好？
- en: 'First, create a new template called `layout.html` and write code as follows:'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先，创建一个新的模板 `layout.html` 并编写如下代码：
- en: '[PRE10]'
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Notice that the `{% block body %}{% endblock %}` allows for the insertion of
    other code from other HTML files.
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到 `{% block body %}{% endblock %}` 允许从其他 HTML 文件中插入其他代码。
- en: 'Then, modify your `index.html` as follows:'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 然后，按如下方式修改您的 `index.html`：
- en: '[PRE11]'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Notice that the line `{% extends "layout.html" %}` tells the server where to
    get the layout of this page. Then, the `{% block body %}{% endblock %}` tells
    what code to be inserted into `layout.html`.
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到 `{% extends "layout.html" %}` 这行代码告诉服务器从哪里获取此页面的布局。然后，`{% block body %}{%
    endblock %}` 告诉要插入 `layout.html` 的代码。
- en: 'Finally, change `greet.html` as follows:'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，按如下方式修改 `greet.html`：
- en: '[PRE12]'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Notice how this code is shorter and more compact.
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意这段代码更短、更紧凑。
- en: Request Methods
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 请求方法
- en: You can imagine scenarios where it is not safe to utilize `get`, as usernames
    and passwords would show up in the URL.
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可以想象一些场景，在这些场景中不能安全地使用 `get`，因为用户名和密码会出现在 URL 中。
- en: 'We can utilize the method `post` to help with this problem by modifying `app.py`
    as follows:'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以通过修改`app.py`来利用`post`方法帮助解决这个问题：
- en: '[PRE13]'
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Notice that `POST` is added to the `/greet` route, and that we use `request.form.get`
    rather than `request.args.get`.
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到在`/greet`路由中添加了`POST`，并且我们使用`request.form.get`而不是`request.args.get`。
- en: This tells the server to look *deeper* into the virtual envelope and not reveal
    the items in `post` in the URL.
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这告诉服务器深入查看虚拟信封，不要在URL中暴露`post`中的项目。
- en: 'Still, this code can be advanced further by utilizing a single route for both
    `get` and `post`. To do this, modify `app.py` as follows:'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尽管如此，我们可以通过使用单个路由来同时处理`get`和`post`来进一步改进此代码。为此，修改`app.py`如下：
- en: '[PRE14]'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Notice that both `get` and `post` are done in a single routing. However, `request.method`
    is utilized to properly route based on the type of routing requested by the user.
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到`get`和`post`都是在单个路由中完成的。然而，`request.method`被用来根据用户请求的路由类型正确路由。
- en: 'Accordingly, you can modify your `index.html` as follows:'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 因此，你可以按照以下方式修改你的`index.html`：
- en: '[PRE15]'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Notice that the form `action` is changed.
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到表单的`action`已被更改。
- en: 'Still, there is a bug still in this code. With our new implementation, when
    someone types in no name into the form, `Hello,` is displayed without a name.
    We can improve our code by editing `app.py` as follows:'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尽管如此，此代码中仍然存在一个错误。根据我们的新实现，当有人在没有输入名称的情况下填写表单时，会显示没有名称的`Hello,`。我们可以通过以下方式编辑`app.py`来改进我们的代码：
- en: '[PRE16]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Notice that `name=request.form.get("name"))` is changed.
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到`name=request.form.get("name"))`已被更改。
- en: 'Finally, change `greet.html` as follows:'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，按照以下方式修改`greet.html`：
- en: '[PRE17]'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Notice how `hello, {{ name }}` is changed to allow for a default output when
    no name is identified.
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到`hello, {{ name }}`是如何改变以允许在没有识别到名称时输出默认值。
- en: As we’ve been changing many files, you may wish to compare your final code with
    [our final code](https://cdn.cs50.net/2024/fall/lectures/9/src9/hello10/).
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于我们已经更改了许多文件，你可能希望将你的最终代码与[我们的最终代码](https://cdn.cs50.net/2024/fall/lectures/9/src9/hello10/)进行比较。
- en: Frosh IMs
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Frosh IMs
- en: Frosh IMs or *froshims* is a web application that allows students to register
    for intramural sports.
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Frosh IMs或*froshims*是一个允许学生注册校内体育活动的网络应用程序。
- en: Close all your `hello` related windows and create a folder by typing `mkdir
    froshims` in the terminal window. Then, type `cd froshims` to browse to this folder.
    Within, create a directory called templates by typing `mkdir templates`.
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关闭所有与`hello`相关的窗口，并在终端窗口中输入`mkdir froshims`创建一个文件夹。然后，输入`cd froshims`浏览到这个文件夹。在此文件夹内，通过输入`mkdir
    templates`创建一个名为`templates`的目录。
- en: 'Next, in the `froshims` folder, type `code requirements.txt` and code as follows:'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 接下来，在`froshims`文件夹中，输入`code requirements.txt`并编写如下代码：
- en: '[PRE18]'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: As before, Flask is required to run a Flask application.
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如前所述，运行Flask应用程序需要Flask。
- en: 'Finally, type `code app.py` and write code as follows:'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，输入`code app.py`并编写如下代码：
- en: '[PRE19]'
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Notice that a `failure` option is provided, such that a failure message will
    be displayed to the user if the `name` or `sport` field is not properly filled
    out.
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到提供了一个`failure`选项，如果`name`或`sport`字段填写不正确，将向用户显示错误信息。
- en: 'Next, create a file in the `templates` folder called `index.html` by typing
    `code templates/index.html` and write code as follows:'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 接下来，通过输入`code templates/index.html`在`templates`文件夹中创建一个名为`index.html`的文件，并编写如下代码：
- en: '[PRE20]'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Next, create a file called `layout.html` by typing `code templates/layout.html`
    and write code as follows:'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 接下来，通过输入`code templates/layout.html`创建一个名为`layout.html`的文件，并编写如下代码：
- en: '[PRE21]'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Fourth, create a file in templates called `success.html` as follows:'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第四，在`templates`目录下创建一个名为`success.html`的文件，如下所示：
- en: '[PRE22]'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Finally, create a file in templates called `failure.html` as follows:'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，在`templates`目录下创建一个名为`failure.html`的文件，如下所示：
- en: '[PRE23]'
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Execute `flask run` and check out the application at this stage.
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行`flask run`并检查此阶段的程序。
- en: 'You can imagine how we might want to see the various registration options using
    radio buttons. We can improve `index.html` as follows:'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以想象我们如何使用单选按钮查看各种注册选项。我们可以通过以下方式改进`index.html`：
- en: '[PRE24]'
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Notice how `type` has been changed to `radio`.
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到`type`已被更改为`radio`。
- en: Again, executing `flask run` you can see how the interface has now changed.
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 再次执行`flask run`，你可以看到界面现在已更改。
- en: 'You can imagine how we might want to accept the registration of many different
    registrants. We can improve `app.py` as follows:'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以想象我们如何接受许多不同注册者的注册。我们可以通过以下方式改进`app.py`：
- en: '[PRE25]'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: Notice that a dictionary called `REGISTRANTS` is used to log the `sport` selected
    by `REGISTRANTS[name]`. Also, notice that `registrants=REGISTRANTS` passes the
    dictionary on to this template.
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到使用了一个名为 `REGISTRANTS` 的字典来记录 `REGISTRANTS[name]` 选定的 `sport`。同时，注意 `registrants=REGISTRANTS`
    将字典传递给此模板。
- en: 'Additionally, we can implement `error.html`:'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此外，我们可以实现 `error.html`：
- en: '[PRE26]'
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Further, create a new template called `registrants.html` as follows:'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此外，创建一个新的模板，名为 `registrants.html`，如下所示：
- en: '[PRE27]'
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Notice that `{% for name in registrants %}...{% endfor %}` will iterate through
    each of the registrants. Very powerful to be able to iterate on a dynamic web
    page!
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到 `{% for name in registrants %}...{% endfor %}` 会遍历每个注册者。能够在动态网页上迭代是非常强大的功能！
- en: Finally, create a folder called `static` in the same folder as `app.py`. There,
    upload the following file of a [cat](https://cdn.cs50.net/2024/fall/lectures/9/src9/froshims4/static/cat.jpg).
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，在 `app.py` 所在的同一文件夹中创建一个名为 `static` 的文件夹。在那里，上传以下文件：一个 [猫](https://cdn.cs50.net/2024/fall/lectures/9/src9/froshims4/static/cat.jpg)
    的文件。
- en: Execute `flask run` and play with the application.
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行 `flask run` 并与该应用程序互动。
- en: You now have a web application! However, there are some security flaws! Because
    everything is client-side, an adversary could change the HTML and *hack* a website.
    Further, this data will not persist if the server is shut down. Could there be
    some way we could have our data persist even when the server restarts?
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在你已经拥有了一个网络应用程序！然而，存在一些安全漏洞！因为所有内容都在客户端，攻击者可以更改 HTML 并**黑客**网站。此外，如果服务器关闭，这些数据将不会持久化。我们是否有办法让数据在服务器重启时也能持久化？
- en: Flask and SQL
  id: totrans-126
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Flask 和 SQL
- en: Just as we have seen how Python can interface with a SQL database, we can combine
    the power of Flask, Python, and SQL to create a web application where data will
    persist!
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正如我们所见，Python 可以与 SQL 数据库交互，我们可以结合 Flask、Python 和 SQL 的力量来创建一个数据将持久化的网络应用程序！
- en: To implement this, you will need to take a number of steps.
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要实现这一点，你需要采取多个步骤。
- en: First, download the following [SQL database](https://cdn.cs50.net/2024/fall/lectures/9/src9/froshims4/froshims.db)
    into your `froshims` folder.
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先，将以下 [SQL 数据库](https://cdn.cs50.net/2024/fall/lectures/9/src9/froshims4/froshims.db)下载到你的
    `froshims` 文件夹中。
- en: Execute in the terminal `sqlite3 froshims.db` and type `.schema` to see the
    contents of the database file. Further type `SELECT * FROM registrants;` to learn
    about the contents. You’ll notice that there are currently no registrations in
    the file.
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在终端中执行 `sqlite3 froshims.db` 并输入 `.schema` 以查看数据库文件的内容。进一步输入 `SELECT * FROM
    registrants;` 以了解内容。你会注意到文件中目前没有任何注册信息。
- en: 'Next, modify `requirements.txt` as follows:'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 接下来，按如下方式修改 `requirements.txt`：
- en: '[PRE28]'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Modify `index.html` as follows:'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按如下方式修改 `index.html`：
- en: '[PRE29]'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Modify `layout.html` as follows:'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按如下方式修改 `layout.html`：
- en: '[PRE30]'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Ensure `error.html` appears as follows:'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保 `error.html` 显示如下：
- en: '[PRE31]'
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Modify `registrants.html` to appear as follows:'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修改 `registrants.html` 以如下所示：
- en: '[PRE32]'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: Notice that a hidden value `registrant.id` is included such that it’s possible
    to use this `id` later in `app.py`
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到包含了一个隐藏值 `registrant.id`，这样就可以在 `app.py` 中稍后使用这个 `id`。
- en: 'Finally, modify `app.py` as follows:'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，按如下方式修改 `app.py`：
- en: '[PRE33]'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: Notice that the `cs50` library is utilized. A route is included for `register`
    for the `post` method. This route will take the name and sport taken from the
    registration form and execute a SQL query to add the `name` and the `sport` to
    the `registrants` table. The `deregister` routes to a SQL query that will grab
    the user’s `id` and utilize that information to deregister this individual.
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到使用了 `cs50` 库。包含了一个用于 `register` 的 `post` 方法的路由。这个路由将获取注册表单中的姓名和运动项目，并执行一个
    SQL 查询将 `name` 和 `sport` 添加到 `registrants` 表中。`deregister` 路由将执行一个 SQL 查询，获取用户的
    `id` 并利用这些信息注销该个人。
- en: You can execute `flask run` and examine the result.
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以执行 `flask run` 并检查结果。
- en: If you want to download our implementation of `froshims` you can do so [here](https://cdn.cs50.net/2024/fall/lectures/9/src9/froshims5/).
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你想下载我们的 `froshims` 实现，你可以[在这里](https://cdn.cs50.net/2024/fall/lectures/9/src9/froshims5/)下载。
- en: You can read more about Flask in the [Flask documentation](https://flask.palletsprojects.com).
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在[Flask 文档](https://flask.palletsprojects.com)中了解更多关于 Flask 的信息。
- en: Cookies and Session
  id: totrans-148
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Cookies 和 Session
- en: '`app.py` is considered a *controller*. A *view* is considered what the users
    see. A *model* is how data is stored and manipulated. Together, this is referred
    to as *MVC* (model, view, controller).'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`app.py` 被视为**控制器**。**视图**被认为是用户所看到的内容。**模型**是数据存储和操作的方式。三者合称为 *MVC*（模型，视图，控制器）。'
- en: While the prior implementation of `froshims` is useful from an administrative
    standpoint, where a back-office administrator could add and remove individuals
    from the database, one can imagine how this code is not safe to implement on a
    public server.
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虽然之前的 `froshims` 实现从管理角度来看很有用，其中后台管理员可以向数据库添加和删除个人，但可以想象这段代码在公共服务器上实现并不安全。
- en: For one, bad actors could make decisions on behalf of other users by hitting
    the deregister button – effectively deleting their recorded answer from the server.
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先，不良分子可能会通过点击注销按钮代表其他用户做出决定——实际上是从服务器删除他们记录的答案。
- en: Web services like Google use login credentials to ensure users only have access
    to the right data.
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 像谷歌这样的网络服务使用登录凭证来确保用户只能访问正确的数据。
- en: We can actually implement this itself using *cookies*. Cookies are small files
    that are stored on your computer such that your computer can communicate with
    the server and effectively say, “I’m an authorized user that has already logged
    in.” This authorization through this cookie is called a *session*.
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实际上，我们可以使用 *cookies* 来实现这一点。Cookies 是存储在您计算机上的小文件，这样您的计算机就可以与服务器通信，并有效地表示，“我是一个已经登录的授权用户。”
    这种通过 cookie 的授权称为 *会话*。
- en: 'Cookies may be stored as follows:'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Cookies 可以按照以下方式存储：
- en: '[PRE34]'
  id: totrans-155
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: Here, a `session` id is stored with a particular `value` representing that session.
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在这里，一个 `session` id 被存储，并带有特定的 `value`，表示该会话。
- en: In the simplest form, we can implement this by creating a folder called `login`
    and then adding the following files.
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以最简单的方式，我们可以通过创建一个名为 `login` 的文件夹，然后添加以下文件来实现这一点。
- en: 'First, create a file called `requirements.txt` that reads as follows:'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先，创建一个名为 `requirements.txt` 的文件，其内容如下：
- en: '[PRE35]'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: Notice that in addition to `Flask`, we also include `Flask-Session`, which is
    required to support login sessions.
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，除了`Flask`，我们还包含了`Flask-Session`，这是支持登录会话所必需的。
- en: 'Second, in a `templates` folder, create a file called `layout.html` that appears
    as follows:'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二，在 `templates` 文件夹中创建一个名为 `layout.html` 的文件，其内容如下：
- en: '[PRE36]'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: Notice this provides a very simple layout with a title and a body.
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意这提供了一个非常简单的布局，包括标题和正文。
- en: 'Third, create a file in the `templates` folder called `index.html` that appears
    as follows:'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第三，在`templates`文件夹中创建一个名为`index.html`的文件，其内容如下：
- en: '[PRE37]'
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: Notice that this file looks to see if `session["name"]` exists (elaborated further
    in `app.py` below). If it does, it will display a welcome message. If not, it
    will recommend you browse to a page to log in.
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意这个文件会检查 `session["name"]` 是否存在（在下面的 `app.py` 中进一步阐述）。如果存在，它将显示欢迎信息。如果不存在，它将建议您浏览到登录页面。
- en: 'Fourth, create a file called `login.html` and add the following code:'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第四，创建一个名为 `login.html` 的文件，并添加以下代码：
- en: '[PRE38]'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: Notice this is the layout of a basic login page.
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意这是基本登录页面的布局。
- en: 'Finally, create a file called `app.py` and write code as follows:'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，创建一个名为 `app.py` 的文件，并编写以下代码：
- en: '[PRE39]'
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: Notice the modified *imports* at the top of the file, including `session`, which
    will allow you to support sessions. Most importantly, notice how `session["name"]`
    is used in the `login` and `logout` routes. The `login` route will assign the
    login name provided and assign it to `session["name"]`. However, in the `logout`
    route, the logging out is implemented by clearing the value of `session`.
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意文件顶部的修改后的 *导入*，包括 `session`，这将允许您支持会话。最重要的是，注意 `session["name"]` 在 `login`
    和 `logout` 路由中的使用。`login` 路由会将提供的登录名分配给 `session["name"]`。然而，在 `logout` 路由中，注销是通过清除
    `session` 的值来实现的。
- en: The `session` abstraction allows you to ensure only a specific user has access
    to specific data and features in our application. It allows you to ensure that
    no one acts on behalf of another user, for good or bad!
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`session` 抽象允许您确保只有特定用户可以访问我们应用程序中的特定数据和功能。它允许您确保没有人代表另一个用户行事，无论是好是坏！'
- en: If you wish, you can download [our implementation](https://cdn.cs50.net/2024/fall/lectures/9/src9/login/)
    of `login`.
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您愿意，您可以下载[我们的实现](https://cdn.cs50.net/2024/fall/lectures/9/src9/login/)。
- en: You can read more about sessions in the [Flask documentation](https://flask.palletsprojects.com/en/stable/api/#flask.session).
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在[Flask 文档](https://flask.palletsprojects.com/en/stable/api/#flask.session)中了解更多关于会话的信息。
- en: Shopping Cart
  id: totrans-176
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 购物车
- en: Moving on to a final example of utilizing Flask’s ability to enable a session.
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 接下来，我们将通过一个最终示例来展示如何利用 Flask 的会话启用功能。
- en: 'We examined the following code for `store` in `app.py`. The following code
    was shown:'
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们检查了 `app.py` 中的 `store` 代码。以下代码被展示：
- en: '[PRE40]'
  id: totrans-179
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE40]'
- en: Notice that `cart` is implemented using a list. Items can be added to this list
    using the `Add to Cart` buttons in `books.html`. When clicking such a button,
    the `post` method is invoked, where the `id` of the item is appended to the `cart`.
    When viewing the cart, invoking the `get` method, SQL is executed to display a
    list of the books in the cart.
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到`cart`是通过列表实现的。可以使用`books.html`中的`Add to Cart`按钮向此列表添加项目。点击此类按钮时，将调用`post`方法，其中将项目`id`附加到`cart`上。在查看购物车时，调用`get`方法，执行SQL以显示购物车中的书籍列表。
- en: 'We also saw the contents of `books.html`:'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们还看到了`books.html`的内容：
- en: '[PRE41]'
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE41]'
- en: Notice how this creates the ability to `Add to Cart` for each book using `for
    book in books`.
  id: totrans-183
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到这是如何通过`for book in books`为每本书创建`Add to Cart`功能的。
- en: You can see the rest of the files that power this `flask` implementation in
    the [source code](https://cdn.cs50.net/2024/fall/lectures/9/src9/store/).
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在[源代码](https://cdn.cs50.net/2024/fall/lectures/9/src9/store/)中查看驱动此`flask`实现的其余文件。
- en: Shows
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 显示
- en: 'We looked at a pre-designed program called `shows`, in `app.py`:'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们在`app.py`中查看了一个名为`shows`的预设计程序：
- en: '[PRE42]'
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE42]'
- en: Notice how the `search` route allows for a way by which to search for a `show`.
    This search looks for titles `LIKE` the one provided by the user.
  id: totrans-188
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到`search`路由允许通过一种方式来搜索`show`。此搜索查找与用户提供的标题`LIKE`匹配的标题。
- en: 'We also examined `index.html`:'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们还检查了`index.html`：
- en: '[PRE43]'
  id: totrans-190
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE43]'
- en: Notice that the JavaScript `script` creates an implementation of autocomplete,
    where titles that match the `input` are displayed.
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到JavaScript `script`创建了一个自动完成的实现，其中匹配`input`的标题会被显示出来。
- en: You can see the rest of the files of this implementation in the [source code](https://cdn.cs50.net/2024/fall/lectures/9/src9/shows3/).
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在[源代码](https://cdn.cs50.net/2024/fall/lectures/9/src9/shows3/)中查看此实现的其他文件。
- en: APIs
  id: totrans-193
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: API
- en: An *application program interface* or *API* is a series of specifications that
    allow you to interface with another service. For example, we could utilize IMDB’s
    API to interface with their database. We might even integrate APIs for handling
    specific types of data downloadable from a server.
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*应用程序程序接口*或*API*是一系列规范，允许你与另一个服务进行交互。例如，我们可以利用IMDB的API来与其数据库进行交互。我们甚至可以集成用于处理从服务器下载的特定类型数据的API。'
- en: 'Improving upon `shows`, looking at an improvement of `app.py`, we saw the following:'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在对`shows`进行改进的同时，查看`app.py`的改进，我们看到了以下内容：
- en: '[PRE44]'
  id: totrans-196
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE44]'
- en: Notice that the `search` route executes a SQL query.
  id: totrans-197
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到`search`路由执行了一个SQL查询。
- en: 'Looking at `search.html`, you’ll notice that it is very simple:'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查看`search.html`，你会注意到它非常简单：
- en: '[PRE45]'
  id: totrans-199
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE45]'
- en: Notice that it provides a bulleted list.
  id: totrans-200
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到它提供了一个项目符号列表。
- en: 'Finally, looking at `index.html`, notice that *AJAX* code is utilized to power
    the search:'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，查看`index.html`，注意到*AJAX*代码被用来驱动搜索：
- en: '[PRE46]'
  id: totrans-202
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE46]'
- en: Notice an event listener is utilized to dynamically query the server to provide
    a list that matches the title provided. This will locate the `ul` tag in the HTML
    and modify the web page accordingly to include the list of the matches.
  id: totrans-203
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到使用事件监听器动态查询服务器以提供与提供的标题匹配的列表。这将定位HTML中的`ul`标签并相应地修改网页以包含匹配的列表。
- en: You can read more in the [AJAX documentation](https://api.jquery.com/category/ajax/).
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在[AJAX文档](https://api.jquery.com/category/ajax/)中了解更多信息。
- en: JSON
  id: totrans-205
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: JSON
- en: '*JavaScript Object Notation* or *JSON* is a text file of dictionaries with
    keys and values. This is a raw, computer-friendly way to get lots of data.'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*JavaScript对象表示法*或*JSON*是一个包含键和值的字典文本文件。这是一种原始且对计算机友好的方式来获取大量数据。'
- en: JSON is a very useful way of getting back data from the server.
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: JSON是从服务器获取数据的一种非常有用的方式。
- en: 'You can see this in action in the `index.html` we examined together:'
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在我们共同检查的`index.html`中看到这一操作：
- en: '[PRE47]'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE47]'
- en: While the above may be somewhat cryptic, it provides a starting point for you
    to research JSON on your own to see how it can be implemented in your own web
    applications.
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 虽然上述内容可能有些晦涩，但它为你提供了一个起点，让你可以自己研究JSON，看看它如何在你的网络应用程序中实现。
- en: 'Further, we examined `app.py` to see how the JSON response is obtained:'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此外，我们还检查了`app.py`以了解如何获取JSON响应：
- en: '[PRE48]'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE48]'
- en: Notice how `jsonify` is used to convert the result into a readable format acceptable
    by contemporary web applications.
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意到`jsonify`是如何被用来将结果转换为当代网络应用可接受的易读格式的。
- en: You can read more in the [JSON documentation](https://www.json.org/json-en.html).
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以在[JSON文档](https://www.json.org/json-en.html)中了解更多信息。
- en: In summary, you now have the ability to complete your own web applications using
    Python, Flask, HTML, and SQL.
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 总结来说，你现在可以使用Python、Flask、HTML和SQL来完成自己的网络应用程序。
- en: Summing Up
  id: totrans-216
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总结
- en: In this lesson, you learned how to utilize Python, SQL, and Flask to create
    web applications. Specifically, we discussed…
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节课中，你学习了如何利用Python、SQL和Flask来创建Web应用程序。具体来说，我们讨论了……
- en: Flask
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Flask
- en: Forms
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 表单
- en: Templates
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模板
- en: Request Methods
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 请求方法
- en: Flask and SQL
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Flask和SQL
- en: Cookies and Session
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Cookie和会话
- en: APIs
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: API
- en: JSON
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: JSON
- en: See you next time for our final lecture for this term at [Sanders Theatre](https://websites.harvard.edu/memhall/home-2/buildings/sanders-theatre/)!
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 下次再见，我们将在这里举行本学期的最后一堂课，地点是[Sanders Theatre](https://websites.harvard.edu/memhall/home-2/buildings/sanders-theatre/)！
