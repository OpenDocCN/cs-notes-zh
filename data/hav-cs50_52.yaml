- en: Loops
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 循环
- en: 原文：[https://cs50.harvard.edu/scratch/notes/6/](https://cs50.harvard.edu/scratch/notes/6/)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://cs50.harvard.edu/scratch/notes/6/](https://cs50.harvard.edu/scratch/notes/6/)
- en: Last time
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 上次
- en: Last time, we combined blocks that were functions, values, and conditions to
    make our Scratch programs ask questions and then make decisions based on the answers
    to those questions.
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 上次，我们结合了函数、值和条件的块，使我们的Scratch程序能够提出问题，并根据这些问题的答案做出决定。
- en: But every time we ran our code, whether we pressed the green flag or pressed
    a key or clicked, each script could only run one time, from top to bottom.
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 但每次我们运行代码时，无论是按绿色标志、按键还是点击，每个脚本都只能从上到下运行一次。
- en: Walking Cat
  id: totrans-5
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 行走猫
- en: Now, we’ll tell our programs to **loop**, or repeat some blocks multiple times.
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，我们将告诉我们的程序**循环**，或重复多次执行一些块。
- en: 'We’ll start with a [Walking Cat](https://scratch.mit.edu/projects/507456678/)
    example with our cat moving 10 steps when the green flag is clicked:'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们将以一个[行走猫](https://scratch.mit.edu/projects/507456678/)的例子开始，当点击绿色标志时，我们的猫将移动10步：
- en: '[PRE0]'
  id: totrans-8
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'We’ll use the “forever” block in the Control section of blocks, to make our
    cat move over and over:'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们将在块的“控制”部分使用“永远”块，使我们的猫反复移动：
- en: '[PRE1]'
  id: totrans-10
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Now, our cat will move until it reaches the edge, where it can’t move any further.
    It will still be trying to move.
  id: totrans-11
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，我们的猫将移动，直到它到达边缘，在那里它不能再移动。它仍然会尝试移动。
- en: We can click the stop sign at the top of the stage, next to the green flag,
    and drag the cat back to the left side of the stage.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以点击舞台顶部的停止标志，旁边是绿色标志，并将猫拖回舞台的左侧。
- en: 'We’ll add another block that will tell our cat to bounce, or turn around, if
    it reaches the edge:'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们将添加另一个块，告诉我们的猫在到达边缘时跳跃或转身：
- en: '[PRE2]'
  id: totrans-14
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Now, our cat is upside-down when it turns around at the edge, but we can change
    the rotation style by clicking on the Direction dial in the Sprite panel, and
    selecting the second option:'
  id: totrans-15
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，我们的猫在边缘转身时是倒置的，但我们可以通过在精灵面板中的方向旋钮上点击并选择第二个选项来更改旋转样式：
- en: '![Direction dial for sprite with left and right rotation style selected](../Images/e58d67a8df2b65a68bf53a4205ff0124.png)'
  id: totrans-16
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![选择左右旋转风格的精灵方向旋钮](../Images/e58d67a8df2b65a68bf53a4205ff0124.png)'
- en: The legs of our cat aren’t moving, though, and it turns out we can make an animation,
    with images moving quickly enough that it gives the illusion of movement.
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 然而，我们的猫的腿并没有移动，实际上我们可以制作一个动画，图像移动得足够快，从而产生运动的错觉。
- en: 'It turns out that our cat has two costumes, with its legs in slightly different
    positions. So we can use a “next costume” block to alternate between the two:'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 结果表明，我们的猫有两种服装，它的腿处于略微不同的位置。因此，我们可以使用“下一个服装”块在两者之间交替：
- en: '[PRE3]'
  id: totrans-19
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Our cat seems to be moving a bit too fast, so we’ll slow down its movement:'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们的猫看起来移动得有点快，所以我们将减慢它的移动速度：
- en: '[PRE4]'
  id: totrans-21
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Now, our cat will move, bouncing if it’s at the edge, changing to the next costume,
    and then wait just a fraction of a second. And it will repeat all of these blocks
    over and over again, until we press the stop sign.
  id: totrans-22
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，我们的猫将移动，如果它在边缘，则弹跳，切换到下一个服装，然后等待一秒钟的短暂时间。然后它会反复执行所有这些块，直到我们按下停止标志。
- en: Swimming Fish
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 游泳鱼
- en: 'We’ll use the “Underwater 1” backdrop with our fish in [Swimming Fish](https://scratch.mit.edu/projects/507457166/),
    and have it point towards the mouse cursor:'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们将在[游泳鱼](https://scratch.mit.edu/projects/507457166/)中使用“水下1”背景，并让鱼指向鼠标光标：
- en: '[PRE5]'
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: By using the “forever” block, after we click the green flag, the fish will always
    point itself towards the mouse, over and over again.
  id: totrans-26
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用“永远”块，在点击绿色标志后，鱼将始终指向鼠标，反复进行。
- en: 'We can make the fish move 5 steps each time as well:'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们也可以让鱼每次移动5步：
- en: '[PRE6]'
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'We can use this for our backdrop, too. We can click on the backdrop in the
    Stage panel, and drag in these blocks:'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们也可以用这个作为背景。我们可以在舞台面板中点击背景，并拖入这些块：
- en: '[PRE7]'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: At first, the “play sound” block only has a “pop” sound, so we’ll use the Sounds
    tab to add the “Ocean Wave” sound to our backdrop. Then, we can use the dropdown
    in the “play sound” block to select “Ocean Wave”.
  id: totrans-31
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最初，“播放声音”块只有“砰”的声音，所以我们将使用“声音”选项卡将“海洋波浪”声音添加到我们的背景中。然后，我们可以使用“播放声音”块中的下拉菜单选择“海洋波浪”。
- en: Now, our backdrop will play the wave sound over and over again.
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，我们的背景将反复播放波浪声。
- en: Now, when we click the green flag to run our program, we’ll have multiple “forever”
    loops running. Our fish will follow the mouse pointer, and the backdrop will continuously
    play the wave sound.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，当我们点击绿色标志来运行我们的程序时，我们将有多个“永远”循环运行。我们的鱼将跟随鼠标指针，背景将连续播放波浪声。
- en: With these blocks, we can add music to our programs that play over and over,
    giving us a sense that something is always happening.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用这些积木，我们可以在我们的程序中添加重复播放的音乐，让我们有一种总有什么事情在发生的感觉。
- en: Pet the Cat
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 抚摸猫
- en: We’ll remove our backdrop and fish, and add back the cat for [Pet the Cat](https://scratch.mit.edu/projects/507457677/).
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们将移除我们的背景和鱼，并添加回猫，以[抚摸猫](https://scratch.mit.edu/projects/507457677/)。
- en: 'Now, let’s tell our cat to play a “meow” sound when our mouse gets too close:'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，让我们告诉我们的猫，当鼠标太靠近时，它要发出“喵喵”声：
- en: '[PRE8]'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: We can add a condition that checks for the distance to the mouse pointer. If
    it’s less than a value of 100, our cat will play a sound.
  id: totrans-39
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以添加一个条件来检查鼠标指针的距离。如果它小于100的值，我们的猫就会发出声音。
- en: Note that we can find the “distance to” block in the Sensing category of blocks.
  id: totrans-40
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 注意，我们可以在积木的分类中找到“距离到”积木。
- en: But when we run our program, nothing happens, even as we move our mouse pointer
    towards the cat. It turns out that our stack of blocks is running just once, and
    as soon as we click the green flag, it asks the question and does nothing since
    our mouse pointer is far away from the cat.
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 但当我们运行我们的程序时，没有任何事情发生，即使我们移动鼠标指针靠近猫。结果是我们的积木堆只运行了一次，一旦我们点击绿色标志，它就会提出问题，但由于我们的鼠标指针离猫很远，所以什么也不做。
- en: 'By adding a “forever” block and placing our condition inside it, we can ask
    that question over and over again, and play a sound whenever our mouse pointer
    is too close:'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过添加“永远”积木并将我们的条件放在其中，我们可以不断地提出这个问题，并且每次我们的鼠标指针太靠近时都会播放声音：
- en: '[PRE9]'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: A “forever” loop, one that runs over and over again until the end of the program,
    is also called an infinite loop.
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个“永远”循环，它会在程序结束时重复运行，也被称为无限循环。
- en: Meow
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 喵喵
- en: 'We can also use the “repeat” block to run some blocks of code a specific number
    of times:'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们还可以使用“重复”积木来运行一些代码块特定次数：
- en: '[PRE10]'
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Notice that there’s a little arrow at the bottom right of this block, indicating
    that the code inside will be repeated.
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 注意，在这个积木的右下角有一个小箭头，表示里面的代码将会被重复执行。
- en: 'If we wanted our cat to meow three times, for example, we could use:'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 例如，如果我们想让我们的猫叫三次，我们可以使用：
- en: '[PRE11]'
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'But we could improve the design of our program, [Meow](https://scratch.mit.edu/projects/507457982/),
    by using a “repeat” block, instead of using the same “play sound” block over and
    over again:'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 但我们可以通过使用“重复”积木来改进我们程序的布局，[喵喵](https://scratch.mit.edu/projects/507457982/)，而不是反复使用相同的“播放声音”积木：
- en: '[PRE12]'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: This is better since we are using only two blocks, instead of three as before.
    And if we wanted to repeat, say, 30 times, we would only need to change the number
    in the oval, instead of dragging out 27 additional “play sound” blocks.
  id: totrans-53
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这更好，因为我们现在只使用两个积木，而不是像以前那样使用三个。如果我们想重复30次，我们只需要改变椭圆形中的数字，而不是拖出27个额外的“播放声音”积木。
- en: 'We can use other values inside the oval for the “repeat” block as well. For
    example, we can ask a question, and use the answer as the input:'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们还可以在“重复”积木的椭圆形中使用其他值。例如，我们可以提出一个问题，并使用答案作为输入：
- en: '[PRE13]'
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Now, the user of our program can control how many times our cat meows.
  id: totrans-56
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，我们的程序用户可以控制我们的猫叫多少次。
- en: 'We can try to get our cat to move in a circle in another example, [Circle](https://scratch.mit.edu/projects/507458172/):'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以在另一个例子中尝试让我们的猫在圆形中移动，[圆形](https://scratch.mit.edu/projects/507458172/)：
- en: '[PRE14]'
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Our cat will move 30 steps, turn slightly, and repeat that 24 times, moving
    itself in a circle.
  id: totrans-59
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们的猫将移动30步，轻微转向，然后重复24次，在圆形中移动自己。
- en: Before, we needed to click our blocks over and over again ourselves. Now, our
    cat is able to repeat all of that very quickly.
  id: totrans-60
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以前，我们需要自己一次又一次地点击我们的积木。现在，我们的猫能够非常快速地重复所有这些操作。
- en: Balloon
  id: totrans-61
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 气球
- en: 'We’ll use a loop to make a balloon inflate itself in [Balloon 1](https://scratch.mit.edu/projects/507458351/):'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们将在[Balloon 1](https://scratch.mit.edu/projects/507458351/)中使用循环让气球自己膨胀：
- en: '[PRE15]'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Now, when we click the green flag, our balloon will increase its size by 10,
    pause a fraction of a second. It will do that 10 times, until it gets bigger and
    bigger, and then disappear and play a pop sound.
  id: totrans-64
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，当我们点击绿色标志时，我们的气球将增加10个单位的大小，暂停一秒钟。它会这样做10次，直到它变得越来越大，然后消失并播放噼啪声。
- en: 'But when we click the green flag again, nothing happens. The balloon is still
    hidden, so we need to add some blocks to show it again:'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 但当我们再次点击绿色标志时，什么也没有发生。气球仍然隐藏着，所以我们需要添加一些积木来再次显示它：
- en: '[PRE16]'
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: We’ll also use a “set size” block to set the balloon back to its original size.
    Now, everytime we click the green flag, it will reappear.
  id: totrans-67
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们还将使用“设置大小”积木将气球恢复到原始大小。现在，每次我们点击绿色标志，它都会重新出现。
- en: Since we start our size at 100, and increase it by 10 for 10 times, the balloon
    will pop at size 200\. We can change the number of times our loop repeats to 15,
    and now our ballon will grow until size 250 before it pops.
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于我们从100开始，并且增加10次共10次，气球将在200大小时爆裂。我们可以将循环重复的次数改为15，现在气球将增长到250大小时才爆裂。
- en: 'It turns out we can use another block in the Control section, “repeat until”,
    so we can avoid that calculation ourselves, in [Balloon 2](https://scratch.mit.edu/projects/507458714/):'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 结果我们发现可以在“控制”部分的另一个块中使用“重复直到”，这样我们就可以避免自己进行那个计算，在[Balloon 2](https://scratch.mit.edu/projects/507458714/)中：
- en: '[PRE17]'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: The “repeat until” block is a combination of a loop and a condition. It will
    run over and over until some question is answered as “yes”, or becomes true.
  id: totrans-71
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: “重复直到”块是循环和条件的组合。它将反复运行，直到某个问题被回答为“是”，或者变为真。
- en: We’ll use the hexagon-shaped “=” operator in the Operators section to compare
    the size of our balloon, and once it’s equal to 250, our “repeat until” block
    will stop repeating.
  id: totrans-72
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们将在“运算符”部分使用六边形形状的“=”运算符来比较气球的大小，一旦它等于250，我们的“重复直到”块将停止重复。
- en: After the condition is true, the rest of our blocks will run, hiding our balloon
    and playing the pop sound.
  id: totrans-73
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 条件成立后，我们其余的块将运行，隐藏我们的气球并播放爆裂声。
- en: With the “forever” block, “repeat” block, and “repeat until” block, we have
    the ability to create loops in our program that run our code multiple times, without
    requiring us to click over and over again.
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用“永远”块、“重复”块和“重复直到”块，我们能够在程序中创建循环，多次运行我们的代码，而无需我们一次次地点击。
