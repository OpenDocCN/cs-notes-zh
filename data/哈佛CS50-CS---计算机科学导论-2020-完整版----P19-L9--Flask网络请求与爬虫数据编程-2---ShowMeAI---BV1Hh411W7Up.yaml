- en: 哈佛CS50-CS ｜ 计算机科学导论(2020·完整版) - P19：L9- Flask网络请求与爬虫数据编程 2 - ShowMeAI - BV1Hh411W7Up
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 哈佛CS50-CS ｜ 计算机科学导论(2020·完整版) - P19：L9- Flask网络请求与爬虫数据编程 2 - ShowMeAI - BV1Hh411W7Up
- en: instead all right so what's the key，thing we're still not doing we've got a。pretty
    dynamic user interface，but i'm just throwing away the，information once the user
    clicks。remembering，just as i did back in the day who has，actually registered so
    that we actually。have a proper，working registration system so how can，we go about
    doing this，the past。
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，那么我们还没有做的关键是什么？我们有一个相当动态的用户界面，但用户一点击就扔掉信息。记住，正如我以前所做的，谁实际注册了，这样我们才能有一个真正有效的注册系统。我们该如何进行呢，过去。
- en: that we can store data inside of a，python program，using a list using a dictionary
    using a。set there's a lot of data structures，that python gives us，so let's start
    simple and let's actually。do that let's go ah**d and store our，registrants maybe，in
    a dictionary so in application。pi。which is thus far now unchanged let me，give
    myself one other global variable。
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在 Python 程序中使用列表、字典、集合存储数据，Python 提供了很多数据结构，所以让我们从简单开始，实际上做到这一点。让我们继续将注册者存储在一个字典中，因此在
    application。pi 中，至今为止未更改，给我再加一个全局变量。
- en: registrants and let me initialize it to，an empty dictionary，and recall that
    we did this to implement。a phone book where i added my，name and phone number and
    brian's name。and phone number a couple of weeks ago，we used a python dictionary
    to store，those key value pairs。name and phone number here let's do，name，and the
    sport for which they're。
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 注册者，让我将其初始化为一个空字典，并回忆我们这样做是为了实现一个电话簿，我在几周前添加了我的名字和电话号码，以及布莱恩的名字和电话号码，我们用 Python
    字典来存储这些键值对。名字和电话号码，现在让我们做，名字和他们所从事的运动。
- en: registered so that we then have in the，computer's memory a list。of all of the
    valid registrations so how，are we going to do this and what needs，to change well。let
    me go ah**d and change this back to，the select menu just because it fits on。the
    screen a little better，instead of the radio buttons and，from here we will have
    again the user。
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 注册后，我们在计算机的内存中会有一个有效注册的列表。我们怎么做这个，什么需要改变呢。让我继续将其改回选择菜单，因为它在屏幕上看起来更好，而不是单选按钮，从这里我们将再次有用户。
- en: interface that we saw。![](img/42fc978d86c319937be2311efcbd6801_1.png)
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看到的接口。![](img/42fc978d86c319937be2311efcbd6801_1.png)
- en: earlier so let me go ah**d and do flask，run。![](img/42fc978d86c319937be2311efcbd6801_3.png)
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 所以让我继续执行 flask，run。![](img/42fc978d86c319937be2311efcbd6801_3.png)
- en: let me go ah**d and open this up and，before，the goal of which now is when i
    click，see。you are registered or you are not，the user，so i think we're going to
    need to do a。bit of work in application。pi，the file that's actually processing
    the，user's registration。so instead of just validating the form，by checking if
    they had a name。
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 让我继续打开这个，之前的目标是当我点击时，看看。你已注册或未注册，用户，所以我想我们需要在 application。pi 文件中做一些工作，实际处理用户注册的文件。因此，不只是通过检查他们是否有名字来验证表单。
- en: or a sport that was in sports let's do，go ah**d and，sort of start a new here
    and let me do。something like this name，equals request。form。getname just so i，easier
    to use。and then let's just say if not name then，let's go ah**d and return，render
    template failure，sport。sport equals request。form。getsport，storing it in a variable
    just so i can。
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 或者是一个在运动中的运动，让我们继续，差不多从这里开始，给我做点这样的事情，name = request.form.getname，这样我更容易使用。然后我们就说，如果没有名字，那么就继续执行并返回，渲染模板失败，sport。sport
    = request.form.getsport，把它存储在一个变量中，这样我就可以。
- en: do this a little more cleanly and then，if not sport，go ah**d and return render
    template。template failure dot html，and then let's do one more check but i'm，time，if
    sport not in sports。then let's go ah**d and return render，template，failure。html
    but you know what this。seems a little silly if all i'm doing，if i know as the
    programmer what the。
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们做得更干净一点，然后，如果不是运动，就继续执行并返回渲染模板。模板失败 dot html，然后我们再检查一次，但我在想，如果运动不在运动中。那我们就继续执行并返回，模板，失败。html，但你知道吗，这看起来有点傻，如果我知道作为程序员我在做什么。
- en: error is but i'm just telling the user，you are not registered that's not，the
    user。![](img/42fc978d86c319937be2311efcbd6801_5.png)
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 错误是，但我只是告诉用户，你未注册，那不是，用户。![](img/42fc978d86c319937be2311efcbd6801_5.png)
- en: wrong，so let's do this instead instead of。![](img/42fc978d86c319937be2311efcbd6801_7.png)
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 错了，所以我们改成这个，而不是。![](img/42fc978d86c319937be2311efcbd6801_7.png)
- en: failure。html，let me go ah**d and create a different，file called error。html。and
    this will be called error。html in my，frosh ims directory in my templates。![](img/42fc978d86c319937be2311efcbd6801_9.png)
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: failure。html，让我**继续**创建一个不同的文件叫做error。html。这将在我的frosh ims目录中的templates中叫做error。html。![](img/42fc978d86c319937be2311efcbd6801_9.png)
- en: directory，and in here let's go ah**d and actually，put an error message for instance，something
    like。this message so there's nothing，for message，but let's see what this will
    do for us。let's now go back to application。pi，and instead of error。html let's
    be a，error message。like missing name and down here let's，change this to error。html
    and say a，message of。
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 目录，在这里让我们**继续**实际放置一个错误信息，例如像这样。这个消息没有任何内容，但让我们看看这会对我们有什么帮助。现在让我们回到application.pi，而不是error。html，让我们提供一个**错误信息**，比如缺少姓名，然后在这里更改为error。html，并给出一条消息。
- en: missing sport and down here let's change，this to error。html whoops。error error
    in the error message of，invalid sport so there's a sport there。but it's just not
    in the list of valid，accordingly，so now let's just try this real quick。let's try
    this real quick and input this。
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 缺少运动，在这里让我们将其更改为error。html，哎呀。错误，错误的错误信息，**无效运动**，所以那里有一个运动，但它不在有效的列表中，因此现在让我们快速尝试一下，输入这个。
- en: '![](img/42fc978d86c319937be2311efcbd6801_11.png)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_11.png)'
- en: data incorrectly so we can see these let，me rerun the server，reload the form
    let's type in nothing。and just try to register，okay missing name it's more useful
    than。just you are not registered all right，fine let me give you my name david。register
    missing sport okay now let me，go ah**d and give you a sport。
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 数据不正确，所以我们可以看到这些，让我重新运行服务器，重新加载表单，输入空白。试着注册，好的，缺少姓名，比起你没有注册要有用得多，好吧，让我给你我的名字，大卫。注册缺少运动，好吧，现在让我**继续**给你一个运动。
- en: and now if i registered i'd probably get，handled。![](img/42fc978d86c319937be2311efcbd6801_13.png)
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我注册，我可能会得到处理。![](img/42fc978d86c319937be2311efcbd6801_13.png)
- en: the successful outcome yet so let's，finish this up let's go back to my。application
    dot pi in my register route，and then ask ourselves well what does it，remember。that
    the user is registered for a given，sport in the computer's memory。and the computer's
    memory recall i'm，using by way of this，global variable called registrants and。
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 还没有成功的结果，所以让我们完成这项工作，回到我的application.pi中的注册路由，然后问自己，用户在计算机的内存中**注册**了某个运动。计算机的内存，我通过这个名为registrants的**全局变量**来使用。
- en: it's all caps just to make clear that，required，and then down here why don't
    i do this。registrants name，what we did，values，where i'm using name to index into
    the，python dictionary。and i'm setting the value equal to the，sport and then let's
    go ah**d for now，and say return。![](img/42fc978d86c319937be2311efcbd6801_15.png)
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 这都是大写字母只是为了清楚地表明这是**必需的**，然后在这里我为什么不这样做。注册者姓名，我们做了什么，值，我在这里使用姓名索引到`python`字典中。然后我将值设置为**运动**，然后我们暂时说返回。![](img/42fc978d86c319937be2311efcbd6801_15.png)
- en: render template whoops render template，success dot html so let's test this out。![](img/42fc978d86c319937be2311efcbd6801_17.png)
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 渲染模板，哎呀，渲染模板，success.dot.html，所以让我们测试一下。![](img/42fc978d86c319937be2311efcbd6801_17.png)
- en: let's go over to frosh i am so whoops，let's learn from my mistakes。![](img/42fc978d86c319937be2311efcbd6801_19.png)
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们去frosh i am，所以让我们从我的错误中学习。![](img/42fc978d86c319937be2311efcbd6801_19.png)
- en: stop the server and reload let me go，back to the browser，let me go ah**d and
    type in david who。will register for dodgeball，register claims it's registered
    let me。![](img/42fc978d86c319937be2311efcbd6801_21.png)
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 停止服务器并重新加载，让我回到浏览器，接下来让我**继续**输入大卫，他将注册为**躲避球**，注册声称已注册，让我。![](img/42fc978d86c319937be2311efcbd6801_21.png)
- en: do brian will register for flag football，know，who's registered or not i don't
    know but。you know what let's do a little，sanity check here let me just print out，print。f
    is your friend so let's just do a。![](img/42fc978d86c319937be2311efcbd6801_23.png)
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 布赖恩将注册为**标志橄榄球**，我不知道谁注册了，但你知道吗，让我们做一点**理智检查**，让我打印出来，print。f是你的朋友，所以我们就这样做。![](img/42fc978d86c319937be2311efcbd6801_23.png)
- en: run again，this time let's go back to the form and。![](img/42fc978d86c319937be2311efcbd6801_25.png)
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 再次运行，这次让我们回到表单中。![](img/42fc978d86c319937be2311efcbd6801_25.png)
- en: register david，sport dodgeball register same behavior，but down here notice。we
    have this oh and i see a couple of，you are registering as well，uh so i see。lucas
    has registered for dodgeball as，volleyball so，they're okay now harsh has registered。for
    volleyball so this is the problem，live demos，but apparently it does in fact work
    so。
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 注册大卫，运动躲避球，注册相同的行为，但在这里注意。我们有这个哦，我看到你们也在注册，呃，所以我看到。卢卡斯注册了躲避球和排球，所以，他们现在很好，哈希注册了。排球，所以这是个问题，实时演示，但显然它确实有效。
- en: let's go ah**d and make this a little，cleaner here，and instead of just printing
    registrants。let's go ah**d and do something like，this why don't i go ah**d。and
    you know what let's do this let's go，ahead and render a template called，[Music]，registrants。html
    and i think to make，this happen i'm going to need another，interesting，generated。
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们去啊**d，把这个弄得更整洁一点，而不是仅仅打印 registrants。让我们去啊**d，做点什么，比如，这为什么不我去啊**d。你知道吗，让我们这样做，去渲染一个名为，[Music]，registrants.html
    的模板，我认为要实现这一点，我需要另一个，有趣的，生成。
- en: quite this kind of success message so，let me go ah**d and whip something up。![](img/42fc978d86c319937be2311efcbd6801_27.png)
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 非常成功的消息，所以，让我去啊**d，做点什么。![](img/42fc978d86c319937be2311efcbd6801_27.png)
- en: registrants。html frosh iams templates。![](img/42fc978d86c319937be2311efcbd6801_29.png)
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: registrants.html frosh iams 模板。![](img/42fc978d86c319937be2311efcbd6801_29.png)
- en: and then in that folder templates and in，here we're going to do extends，layout。html
    down here。block body uh end block，and then down here in here i'm gonna do。this
    is gonna take me a moment here h1，registrants then below that i'm gonna。give myself
    an html table inside of the，table i'm gonna define what's called a。
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 然后在那个文件夹的模板中，在这里我们将做 extends，layout.html。在这里。block body 结束 block，然后在这里我要做。这会花我一点时间，这里
    h1，registrants 然后在下面我会给自己一个 html 表格，在表格中，我将定义所谓的。
- en: table head which is not strictly，head，from the body from the optional footer，table
    row。inside of here i'm going to create three，columns using th table heading which
    you。might not have seen before typically，makes things bold，by default to make
    clear it's the。heading and i'm going to put the，person's name and then another
    heading。
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 表头不是严格意义上的，头部，来自可选的页脚，表行。在这里，我将创建三个，使用 th 表头的列，你可能之前没有见过，默认使其加粗，以清楚地表明这是标题，我将放入，个人的姓名，然后是另一个标题。
- en: of their sport down here and then below，the table head i'm going to do t body。which
    is the table body，another tag you might not have seen，body。and i'm going to generate
    dynamically a，whole bunch of trs so for name in。registrants let's go ah**d in
    this，ginger for loop，table row，specifically。
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 他们的运动在这里，然后在表头下，我将做 t body。这是表体，你可能没有见过的另一个标签。body。我将动态生成一堆 trs，所以对于 registrants
    中的姓名，让我们去啊**d 在这个，姜的 for 循环中，表行，具体来说。
- en: the person's name and then specifically，in the other column，we'll see。by way
    of a variable called registrants，by indexing into it，via the name so registrants
    in a moment。is going to be a dictionary that i pass，into my template i think that's
    it it's。a little tedious to type it out but，and templating，if i go back here now
    and pass in。
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 个人的姓名，然后在另一列，我们将看到。通过一个叫做 registrants 的变量，索引进去，所以 registrants 过一会儿，将是一个我传递，给我的模板的字典，我想就是这样，虽然手动输入有点繁琐，但，模板化，如果我现在回去传入。
- en: registrants equals，variable，i'm providing my registrant's template，with a variable
    called。registrants but again i could call it x，more appropriate，setting it equal
    to the value of that。global variable thereby giving my。![](img/42fc978d86c319937be2311efcbd6801_31.png)
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: registrants 等于，我给我的 registrant 模板提供的变量，叫做 registrants，但我也可以叫它 x，更合适，将其设置为该全局变量的值，从而给我的。![](img/42fc978d86c319937be2311efcbd6801_31.png)
- en: template access to，that dictionary if i now save the file。![](img/42fc978d86c319937be2311efcbd6801_33.png)
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 模板访问到，那个字典，如果我现在保存文件。![](img/42fc978d86c319937be2311efcbd6801_33.png)
- en: rerun flask go ah**d back here，oops let me go ah**d and do this once。![](img/42fc978d86c319937be2311efcbd6801_35.png)
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 重新运行 flask，回到这里，哎呀，让我去啊**d，再做一次。![](img/42fc978d86c319937be2311efcbd6801_35.png)
- en: more let me go ah**d and rerun flask，let me go ah**d and select my url let me。go
    ah**d and register david for，dodgeball and click register voila or，she beat me
    to it。so harsh is registered for flag football，david has registered for dodgeball，but。if
    i view the page source you'll see，that we indeed have the table head。
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 再来一次，让我去啊**d 重新运行 flask，让我去啊**d 选择我的 url 让我。去啊**d 把大卫注册为，躲避球，点击注册，瞧瞧，或者，她比我快。哈希已注册为橄榄球，大卫已注册为躲避球，但。如果我查看页面源代码，你会看到，我们确实有表头。
- en: followed by the table body followed by。![](img/42fc978d86c319937be2311efcbd6801_37.png)
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 后面是表体，后面是！[](img/42fc978d86c319937be2311efcbd6801_37.png)
- en: harsh for flag football，followed by david for dodgeball and then。after that
    any subsequent registrants，who are registering at the same time so。this is pretty
    cool i dare say，in that now we have the ability to save。all of these registrants
    to a global，variable，but what's a downside here we've made，progress。
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 对于橄榄球来说很苛刻，接着是大卫的躲避球，然后是任何后续的注册者，他们在同一时间注册，所以我敢说这很酷，因为现在我们有能力将所有这些注册者保存到一个全局变量，但这里的缺点是什么，我们已经取得了进展。
- en: i'm now showing you users who have，proctor，who's running the sport knows who's。registered
    but there's a catch，what could go wrong here what's bad，about using，a dictionary
    sophia。i think that every time you reload the，server you're just going to reset
    and。you're going to save the data，exactly if i'm just using a global。
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 我现在在展示注册者，谁在进行这项运动知道谁注册了，但有一个陷阱，这里可能出错，使用字典有什么坏处，索非亚。我认为每次你重新加载服务器时，你会重置，你会保存数据，确切地，如果我只是在使用一个全局变量。
- en: variable it'll work forever so long as，the server runs forever and the ide。stays
    online and we don't lose power or，any other number of reasons but as soon，as the
    web server。excuse me stops or is turned off or，something goes wrong we're going
    to lose。all of that data so this is why a couple，of weeks ago with python。
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 变量只要服务器永远运行，它就会永远有效，只要IDE保持在线，我们不失去电源或其他任何原因，但一旦网络服务器，抱歉，停止或被关闭，或者出现其他问题，我们会失去所有这些数据，这就是为什么几周前使用Python。
- en: we actually used csv files or ultimately，a sequel light database but let me
    make。one change too because，what i don't like right now is that at，the moment
    the only way to view my。yourself，and maybe that's a feature if you want，to require
    people register before they。see who else is registered，but it feels nice to have
    a different，route maybe slash registrants。
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 我们实际上使用了csv文件，或者最终使用了一个SQLite数据库，但让我做一个改变，因为，我现在不喜欢的是，目前查看我的唯一方式。也许这是一个功能，如果你想让人们在查看其他注册者之前注册，但有不同的路线也不错，可能是/registrants。
- en: that anyone can visit to see the actual，list of registrants，so let me go ah**d
    and make one tweak。here let me go ah**d down here and，define another route，app。route
    slash regis whoops。registrants and then define registrants，anything i want，and
    let me actually move this rendering。of template here，and you know what let me
    be a little，clever let me actually redirect the user。
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 任何人都可以访问以查看实际的注册者列表，所以让我去啊**d并进行一个调整。让我去啊**d到这里，定义另一个路由，app.route/registrants，然后定义registrants，任何我想要的，让我实际上将这个模板的渲染移动到这里，你知道吗，让我聪明一点，实际上重定向用户。
- en: to slash registrants so let me go ah**d，and import one more function up here。redirect
    from the flask library and this，is a function that will literally do one，of those
    http。301s or some other status code that will，send a location to the browser that
    says。go here instead and the reason for this，is that it's just nice，now that inside
    of my register route。
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 到/registrants，所以让我去啊**d，导入一个函数，来自Flask库的redirect，这是一个函数，实际上会执行一个http 301或其他状态码，将位置发送到浏览器，告诉它去这里而不是那里，原因是，这样很好，现在在我的注册路由内部。
- en: once you're registered，i don't need to like literally copy and，and actually。have
    redundant code i can just say，redirect the user to slash registrants。![](img/42fc978d86c319937be2311efcbd6801_39.png)
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你注册，我不需要真的复制，实际上。拥有冗余代码，我可以直接说，重定向用户到/registrants。！[](img/42fc978d86c319937be2311efcbd6801_39.png)
- en: which already exists now，so that they can see themselves and who，else has registered
    so if i do this。again let me restart the server，for dodgeball，the cut this year，uh
    this time but we see uh break and。moesh and david now，registered in that split
    second，amazingly for these sports but notice。the url which is the key point，now
    we're at slash registrants and if i。
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 这个路由现在已经存在，所以他们可以看到自己和其他已经注册的人，所以如果我再次这样做，让我为躲避球重启服务器，这次我们看到，呃，破和莫伊什，还有大卫现在在那一瞬间注册，这些运动真是惊人，但请注意URL，这才是关键点，现在我们在/registrants，如果我。
- en: '![](img/42fc978d86c319937be2311efcbd6801_41.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_41.png)'
- en: keep reloading i'll keep seeing all of，the changes，since then all right but
    sophia makes a。really good point and that the date is，all going to be lost so
    i think we，should clean this up。where we actually，save the data in for instance
    a，sql lite database or maybe even email it。out so that we have a backup copy，this，let
    me go ah**d and propose that we make，a few changes here。
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 不断重新加载，我会看到所有的更改，自那时起，一切都好，但索非亚指出一个非常好的问题，那就是日期将会丢失，所以我想我们应该清理一下。我们实际上可以将数据保存在
    SQL Lite 数据库中，或者甚至通过电子邮件发送出去，以便我们有一个备份副本。让我**继续**提议在这里做一些更改。
- en: a few changes borrowing some inspiration，from our look at both sql。and python
    so i'm going to leave most of，this alone for now，i'm going to go ah**d and get
    rid of。this variable we'll have to store the，data elsewhere，database a。sql lite
    database so let me go ah**d and，declare our database，uh as sql sqlite colon，frosh
    ims。
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 做了一些更改，从我们对 SQL 和 Python 的观察中借鉴了一些灵感，因此我现在将大部分内容保持不变，我要**继续**去掉这个变量，我们必须将数据存储在其他地方，数据库是一个
    SQL Lite 数据库，所以让我**继续**声明我们的数据库，呃，作为 sql sqlite colon，frosh ims。
- en: db let me go ah**d and import，this this recall is from cs50s library。the sql
    library and let me go ah**d in。![](img/42fc978d86c319937be2311efcbd6801_43.png)
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 让我**继续**导入这个，这是来自 CS50 的库。SQL 库，接下来让我**继续**在。！[](img/42fc978d86c319937be2311efcbd6801_43.png)
- en: my window for just a moment here and，copy the database，from an example i brought
    with me just。![](img/42fc978d86c319937be2311efcbd6801_45.png)
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 请稍等，我将复制我带来的示例数据库。！[](img/42fc978d86c319937be2311efcbd6801_45.png)
- en: so that we don't have to create the，database as well and sort of rehash，things
    from。our week on sql let me go ah**d and grab，the database here，oven，and we now
    have a local file in my。![](img/42fc978d86c319937be2311efcbd6801_47.png)
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 这样我们就不必创建数据库，也不必重复上周的 SQL 课，让我**继续**抓取这里的数据库，烤箱，现在我们在我的本地文件中有一个。！[](img/42fc978d86c319937be2311efcbd6801_47.png)
- en: directory called froshims。db，so let's go ah**d and first look at this，database
    sqlite，of frosh iams。db dot schema enter，here's the database table that i created，in
    advance just so we wouldn't have to。reinvent the wheel，i'm creating a table called
    registrants，with an id column。with a name column and a sport column，the primary
    key is going to be that id。
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 目录叫做 froshims.db，所以让我们**继续**先查看这个数据库 sqlite，frosh iams.db dot schema enter，这里是我提前创建的数据库表，以免我们重新发明轮子，我创建了一个叫做注册人的表，带有一个
    ID 列，一个名字列和一个运动列，主键将是那个 ID。
- en: the text field should not be null and。![](img/42fc978d86c319937be2311efcbd6801_49.png)
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 文本字段不能为空。！[](img/42fc978d86c319937be2311efcbd6801_49.png)
- en: seen，all of the syntax actually in past week，so it's just a simple table。to
    give me an id for every registrant a，name and a sport，but i'm going to do this
    in python now。so let me go ah**d and go back into my，let me go back into my application。pie。and
    let's go ah**d and do this when i，want to actually register the user。
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 上周我看到了所有的语法，因此这只是一个简单的表，给我每个注册人一个 ID，一个名字和一个运动，但我现在要用 Python 来做这个。让我**继续**回到我的应用程序中。pie。让我们**继续**做这个，当我想实际注册用户时。
- en: let's validate them as before making，sure that they've given us their name。and
    their sport and now let's just use a，little sql instead of saving it into。what
    was a global variable let's do，db。execute，insert into registrants a name and a。sport
    i don't need the id it will auto，increment for me as the primary key，question
    mark。
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们像以前一样验证他们，确保他们给了我们他们的名字和运动，现在让我们用一点 SQL，而不是将其保存到一个全球变量中，让我们做 db.execute，插入到注册人中，一个名字和一个运动，我不需要
    ID，它将作为主键自动递增，问号。
- en: again beware sql injection attacks and，let me pass in name，and sport and i think
    that's all i need。i'm now going to use a little bit of sql，in my python in order
    to insert that。name and sport into the database，and after that i think i'm fine
    but i do，need to change registrants。because this variable down here no，longer
    exists but that's okay。
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 再次警惕 SQL 注入攻击，让我传入名字和运动，我想这就是我需要的全部。我现在要在我的 Python 中使用一点 SQL，将名字和运动插入数据库，之后我想我就没问题了，但我确实需要更改注册人。因为这里的变量不再存在，但没关系。
- en: because recall from our look at sql in，python i can do something like this，registrants
    equals db。execute select，star from registrants indeed that simple，query would
    seem to give me access to。all of the registrants thus far，and now i can just pass
    that in like。that again it looks a little weird that，the name of your variable
    in your。
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 因为回想一下我们对 SQL 在 Python 中的观察，我可以做类似这样的事情，注册人等于 db.execute 选择，从注册人中选择星号，确实，这个简单的查询似乎能让我访问到所有的注册人，到目前为止，现在我可以就这样传入。看起来你的变量名称在你的
    db 中有点奇怪。
- en: template is the same as the name of this，variable but again that's because on
    the。right is the variable，on the left is the name you want to use，in your template
    but you could call it。anything you want，all right here as always let me cross
    my。![](img/42fc978d86c319937be2311efcbd6801_51.png)
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 模板与这个变量的名称是相同的，但再次说明，右侧是变量，左侧是你希望在模板中使用的名称，但你可以随意命名，这里总是让我交叉我的。![](img/42fc978d86c319937be2311efcbd6801_51.png)
- en: fingers flask run，all right let me go ah**d and open up my，url let me go ah**d
    and type in david。dodgeball register okay，interesting so harsh and naveen got
    in，there real fast again。you're just kind of waiting with the，submit button but
    this is a mess。![](img/42fc978d86c319937be2311efcbd6801_53.png)
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 手指输入 flask run，好的，让我去**前进并打开我的，网址，让我去**前进并输入 david。躲避球注册，好吧，有趣的是，Harsh 和 Naveen
    很快就进入了那里。你只是在等待提交按钮，但这真是一团糟。![](img/42fc978d86c319937be2311efcbd6801_53.png)
- en: something is clearly wrong now i'm，seeing like weird dictionary syntax。but that's
    because i haven't adjusted my，template so let me go into，registrants。html。and
    recall that when i select，is like getting back，rows i just renamed it to registrants。but
    i'm really getting back，rows and rows are just，dictionary each row is a，they're
    in。
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 明显有些东西出错了，现在我看到像奇怪的字典语法。但这是因为我还没有调整我的模板，所以让我去 registrants.html。记住，当我选择时，像获取行一样，我刚把它改名为
    registrants。但我实际上是在获取行，行只是字典，每一行都是，它们在。
- en: so i think my syntax just needs to，change a little bit in my，registrants。html。i
    should really think of this as for，registering in registrants，and let me go ah**d
    and output the。registrant's name，and down here let me output the，registrants，sport
    so again this is more similar to。the time we spent on sql in python than，it is
    to html and css。
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 所以我觉得我的语法只需要稍微调整一下在我的，registrants.html 中。我应该真的把这看作是注册的注册人，让我去**前进并输出注册人的名字，然后在这里让我输出注册人的运动，因此这更像是我们在
    Python 中花费的 SQL 时间，而不是 HTML 和 CSS。
- en: right now now i'm iterating over all of，the rows and if you prefer，back over
    here。let's do it just like we did a couple of，rows，pass in those rows to my template
    and。now iterate over those rows，and each row has a name field and each，be。equivalent
    but once you understand the，really are，instead of this more generic row so let。
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我正在遍历所有行，如果你喜欢，可以回到这里。就像我们之前处理的几行那样，将这些行传递给我的模板，然后遍历这些行，每行都有一个名称字段，而每行都是等效的，但一旦你理解了这些，实际上是，而不是这个更通用的行，所以让我们。
- en: '![](img/42fc978d86c319937be2311efcbd6801_55.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_55.png)'
- en: me revert that now let me go ah**d and，rerun the code let me try to beat。everyone
    else to the punch type in david，for dodgeball and。![](img/42fc978d86c319937be2311efcbd6801_57.png)
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 让我现在恢复，然后让我去**前进并重新运行代码，试着在大多数人之前输入 david，躲避球。![](img/42fc978d86c319937be2311efcbd6801_57.png)
- en: oh my god okay lot of people okay new，and better harsh all right so you're。working
    really quickly it should seem so，now we see all of the same results the。database
    is really hopping now，i'm a little nervous about scrolling any。further so i'm
    going to leave it there，but we now have a full-fledged web。
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 哦，我的天，好的，很多人，好的，新鲜事，更加严厉，所以你工作得非常快，看起来应该是这样，现在我们看到所有相同的结果，数据库真的很活跃，我有点紧张，不想再滚动了，所以我就停在这里，但我们现在有一个成熟的网页。
- en: application honestly that is now much，websites，we have our own database using
    sql we。have our own templates dynamically，generating this table even though it's。ugly
    at the moment but i could certainly，beautify it with some css or some，bootstrap
    in particular。but we now have a full functioning，website，what would be the icing
    on the cake you。
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 说实话，现在的应用程序，网站，我们有自己的数据库使用 SQL，我们有自己的模板动态生成这个表格，尽管目前它很丑，但我可以用一些 CSS 或特别是 Bootstrap
    美化它。但是我们现在有一个完全功能的网站，究竟什么才是点缀呢？
- en: know what it's pretty cool，even though we take it for granted when。a website
    emails you a confirmation what，actually did，years ago whereby you email the，registrant
    or。yourself to report that someone has，actually registered so how can we go，into
    my。code here and let me add one final，top here，from flask，mail import mail and
    message and again。
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 你知道这很酷，即使我们认为这是理所当然的，当一个网站给你发送确认邮件时，实际上是在做什么，多年前你给注册者或自己发送邮件，以报告某人已注册。那么我们怎么能进入我的代码，在这里让我再加一个最终的顶端，从
    flask，mail 导入邮件和消息，再一次。
- en: you would only know to do these things，from a class from the documentation from。a
    tutorial or the like i looked it up in，advance to see how to do this。and then
    i have to according to the，documentation there's a bunch of。initialization steps
    required when you，want to write python code to generate。
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 你只能通过课程、文档、教程等，了解这些事情。我提前查找了如何做到这一点。然后根据，文档的要求，当你想要编写 Python 代码生成时，有一系列的，初始化步骤。
- en: emails programmatically you've got to，know your username your password and a。bunch
    of other settings so let me go，ahead and configure those now，app。config quote
    unquote。mail default sender is one，and i'm going to go ah**d and set that，equal
    to os dot。end of mail default sender，so default sender refers to a default，email
    address so for instance if i。
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 要以编程方式发送电子邮件，你必须，知道你的用户名、密码以及一些，其他设置。所以让我，现在就配置这些，app.config 字面意思上说。邮件默认发件人是一个，我将继续将其，设置为
    os.dot。邮件默认发件人，因此默认发件人指的是一个默认，电子邮件地址，所以例如如果我。
- en: wanted all these emails to come from me，i could do something like that but。instead
    i'm going to store them in，variables elsewhere，because i pre-configured my id
    in。advance so that no one could see my，username and password，so i'm just going
    to grab some of those。values from the so-called environment，you'll won't use this
    feature too often，problem set。
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我希望所有这些电子邮件来自我，我可以这样做。但我将把它们存储在，其他地方的变量中，因为我提前配置了我的 ID，以便没有人可以看到我的，用户名和密码，所以我将从所谓的环境中获取一些。值，你不会太常使用这个功能，问题集。
- en: it's a way of getting access to a，variable that's been defined elsewhere。in
    your ide or in your linux system or，mac or pc more generally。all right i need
    to define a few more of，these let me go ah**d and just do some，boilerplate。even
    though this looks like a little，copy paste which it is it is in fact。
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一种访问已在其他地方定义的，变量的方法。在你的 IDE、Linux 系统、Mac 或 PC 中更普遍。好吧，我需要再定义几个，让我继续做一些，样板代码。尽管这看起来有点，复制粘贴，但实际上是的。
- en: necessary because there's a lot of，settings for mail server so let me do，them
    one at a time。mail password i don't want you to see，that either so i'm going to
    go ah**d and。grab that from my environment，mail password uh let's see i need。a
    mail port mail port so that's going to，gmail，port，587 so i look that in up in
    the。
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 这是必要的，因为邮件服务器有很多，设置，所以让我一个一个来。邮件密码我不想让你看到，这一点，所以我会继续从我的环境中，获取这个邮件密码，呃，让我看看，我需要，邮件端口，邮件端口将是，gmail，端口，587，所以我在查找这个。
- en: documentation too，mail server in fact will be，smtp。gmail。com i found that on
    google's，documentation。mail use tls which is a type of，encryption，let me go ah**d
    and enable that as true。and then lastly mail，username i don't want you to know
    what，username i'm using but i'm going to go。ahead and grab this from my environment，tongue-in-cheek，usernames，or
    secure。
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 文档太多了，邮件服务器实际上是，smtp.gmail.com，我在谷歌的文档中发现了这一点。邮件使用 tls，这是一种加密方式，让我继续将其设置为**真**。最后，邮件用户名我不想让你知道我使用的，用户名，但我会去，获取这个信息。开玩笑地说，用户，名字，或者安全的。
- en: into your code because imagine if you，did type your own gmail username or。password
    into this program just to try，it out literally right now at home。and then you
    ran submit 50 or check 50，and password to，us the staff not to mention github and。the
    whole internet by including it in，your source code so，while i'm sort of making
    fun of what i'm。
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 进入你的代码，因为想象一下，如果你，确实把自己的 Gmail 用户名或。密码输入到这个程序中，仅仅是为了尝试，真的在家里。然后你提交 50 次或者检查
    50 次，密码被，工作人员获取，更不用说 GitHub 和。整个互联网，通过将其包含在，你的源代码中，所以，尽管我有点在嘲笑我。
- en: information，in these environment variables is，actually best practice because
    it means，accidentally。copy and paste it elsewhere all right i，need to import one
    other thing，i need to also。import os so it's kind of a bold claim，to import a
    whole operating system。but there's indeed a library that comes，with python called，os
    which gives you access to things like。
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些环境变量中，信息实际上是最佳实践，因为这意味着，意外地。将其复制粘贴到其他地方。好吧，我需要导入另一件事情，我还需要。导入 os，所以导入整个操作系统是个大胆的，声明，但实际上确实有一个库，随
    Python 提供，名为 os，它让你访问类似于。
- en: these environment variables，and others okay that was a lot and i，need one last
    line of code a mail。variable equal to，function，called mail all right i think all
    of。those errors will soon go away i think，it's just being a little slow on me。let's
    go ah**d now and actually send，me scroll，down and before i redirect the user。
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 这些环境变量，还有其他的。好的，那真是很多，我需要最后一行代码，一个邮件变量等于，叫做邮件的函数。好的，我认为所有这些错误很快就会消失，我想，它只是对我有点慢。让我们现在继续实际发送，滚动一下，在我重定向用户之前。
- en: to slash registrants but after，registering them let me go ah**d and do。this
    let me define a message variable，equal to capital message which is the。feature
    i imported from that library，and let me create a subject line of you，are registered。and
    let me go ah**d and huh oh i don't，actually know who to send this to so，something
    here。
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 到斜杠注册者，但在注册他们之后，让我继续定义一个消息变量，等于大写消息，这是我从那个库导入的功能，让我创建一个主题行，内容是你已注册。让我继续，但哦，我实际上不知道要发送给谁，所以这里有什么。
- en: let's go ah**d and have the user ask not，for their name，let's ask the user for
    their email now。so i'm going to change my actual form，to ask for their email instead
    and now。let me go back over here，and let me go back in here and set a，second argument
    of red。recipients equals，email and let me change this here let me，go ah**d and
    get the user's email。
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们继续，让用户不要求他们的名字，而是现在询问用户他们的电子邮件。所以我将更改我的实际表单，询问他们的电子邮件，而不是现在。让我回到这里，设定一个第二个参数为红色。接收者等于电子邮件，让我在这里更改，继续获取用户的电子邮件。
- en: from the form if there is no email let's，yell at them and say missing email，insert。into
    registrants you know let's not，bother inserting into the database。actually let's
    keep this super simple，let's get rid of the sql stuff let's。just have it send
    a confirmation email，so it's even simpler we'll keep the，focus entirely。
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 如果表单没有电子邮件，让我们大声喊他们，说缺少电子邮件，插入到注册者，你知道的，我们就不去插入到数据库了。实际上让我们保持这个超级简单，去掉 SQL 的东西。让我们只是发送确认电子邮件，这样会更简单，我们将完全保持关注。
- en: on email here so i've created the，message with the subject line，recipients。now
    i'm going to go ah**d and send mail，dot send，message save here's where i'm going
    to。cross my fingers as always。![](img/42fc978d86c319937be2311efcbd6801_59.png)
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在电子邮件上，所以我创建了带有主题行的消息，接收者。现在我要继续发送邮件，点发送，消息保存。这里我将像往常一样交叉我的手指。![](img/42fc978d86c319937be2311efcbd6801_59.png)
- en: i'm going to go ah**d now and run this，program i'm going to restart，me for email。let
    me go ah**d and type in uh let's say，john harvard's address。here john harvard
    like me will register，for dodgeball，and let me go and click register now the。website
    is about to say。
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 我现在要继续进行，运行这个程序，我要重启我的电子邮件。让我继续输入，呃，假设是约翰·哈佛的地址。这里，像我一样的约翰·哈佛将注册躲避球，让我去点击注册，现在网站即将显示。
- en: '![](img/42fc978d86c319937be2311efcbd6801_61.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_61.png)'
- en: surprise to me，but let me see why oh i accidentally am，still using the database，so
    let me fix this。let me go ah**d and since we're not，using the database anymore，let
    me go ah**d and revert to our。simpler return render template。![](img/42fc978d86c319937be2311efcbd6801_63.png)
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 让我感到惊讶的是，哦，我不小心仍然在使用数据库，所以让我修复这个。让我继续，由于我们不再使用数据库，让我继续恢复到我们的。更简单的返回渲染模板。![](img/42fc978d86c319937be2311efcbd6801_63.png)
- en: success。html all right user error，let me go ah**d and restart the server。okay
    bad gateway whole other problem，here we go j harvard at cs50。let me go ah**d now
    and register for，dodgeball register，indeed。let's go over to my other browser here，where
    i have gmail，open i am currently masquerading as john。
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: success.html 好的用户错误，让我继续重启服务器。好的，错误网关，完全是另一个问题，来吧，j harvard 在 cs50。让我现在继续注册躲避球，确实注册。让我们转到我另一个浏览器，这里我打开了
    Gmail，我目前假装是约翰。
- en: harvard in gmail here，let me go ah**d and refresh my inbox and。![](img/42fc978d86c319937be2311efcbd6801_65.png)
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Gmail 中的哈佛，让我继续刷新我的收件箱。![](img/42fc978d86c319937be2311efcbd6801_65.png)
- en: oh my god a message from the cs50 bot，that i am indeed registered so now we，have
    a programmatic way。of sending emails i hit it twice so i，got two emails this time，but
    indeed i've now dynamically。generated emails，as well a lot，but the ideas really
    are just based on。templates and the idea of sort of，putting our controller logic
    and，aesthetics。
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 哦，我的天，来自 CS50 机器人消息，我确实已注册，所以现在我们有了一种程序化发送电子邮件的方式。我点击了两次，所以这次我收到了两封电子邮件，但确实我现在动态生成了电子邮件，想法确实是基于模板，和将我们的控制逻辑与美观结合的理念。
- en: and our so-called views and now that，email，back end now we also have the notion
    of，stored。or in this case sent any questions。![](img/42fc978d86c319937be2311efcbd6801_67.png)
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的所谓视图，现在的**后端**中也有存储的概念，或在这种情况下发送，是否有任何问题？
- en: or confusion or clarifications here，on the use of sql lights or email。seeing
    anything on your end brian，nothing here，all right so why is there a shopping。cart
    with cookies on the stage well for，break we'll come back talk about。something
    called sessions and build，all right we're back and there's one。
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 关于**SQL Lite**或电子邮件的使用，是否有任何混淆或需要澄清的地方？布莱恩，你那边看到什么了吗？没问题。那么，为什么购物车上有Cookies呢？休息后我们会回来讨论一种叫做会话的东西。
- en: feature that we haven't really，fundamentally touched on，at all when it comes
    to web programming。and it's one that you and i take for，into，some website buy
    something online or。![](img/42fc978d86c319937be2311efcbd6801_69.png)
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个我们在网络编程中还未真正触及的功能，而这是你我在访问一些网站、在线购买时所理所当然的。
- en: generally interact with dynamic websites，and that's a feature that's generally，known
    as sessions。there is a mechanism built into web，applications whether they're implemented，in
    flask or。in other frameworks or languages that，allow the web servers to remember
    a。little something about you and this is，works，because without it you wouldn't
    be able。
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 一般与动态网站互动，这通常被称为**会话**。无论是在Flask中还是其他框架或语言中，网络应用程序内置了一种机制，允许网络服务器记住关于你的一些信息，这之所以有效，是因为没有它，你将无法使用。
- en: to log into gmail or to any other site，and have the website remember that you。are
    logged in consider after all when，you log into gmail，you type your username your
    password，code。and then you see your inbox and from，again，the next time you open
    an email and then。the next time you open an email，you stay logged in for some
    number of。
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 登录Gmail或任何其他网站时，网站会记住你已登录。毕竟，当你登录Gmail时，你输入用户名和密码，接着看到收件箱。之后再次打开电子邮件时，你会在一定时间内保持登录状态。
- en: minutes or hours or even days on your，tab，even if you shut down your computer
    when。you come back to gmail quite often，you're still logged in and it remembers。in
    some sense that you have been logged，in well how does this actually work。well
    underneath the hood anytime you，visit gmail。com your browser。
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 即使你关闭计算机，当你再次打开Gmail时，通常仍会保持登录状态，并记住你曾经登录过。究竟这是如何工作的呢？每当你访问gmail.com时，你的浏览器底层会执行特定操作。
- en: is sending a request like this for slash，the default route of gmail。com。and
    hopefully you're going to either see，your inbox or if you're not yet logged。in
    you're going to see that login screen，indeed the response is probably going to。come
    back along the lines of 200 okay，content type of text html and that's。
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 像这样发送请求到gmail.com的默认路由，期望你要么看到收件箱，要么如果尚未登录，则看到登录屏幕，响应可能会返回200 OK，内容类型为text/html。
- en: when you see the login form，or your inbox but recall from last week，tucked inside。of
    that virtual envelope that provide，how they should，interoperate that's indeed
    what http is。conventions，that govern how browsers and servers，that sometimes，cookies。and
    odds are you've heard of cookies，cookies are，bad or dangerous but also necessary
    and。
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 当你看到登录表单或收件箱时，回想一下上周，藏在那个虚拟信封中的信息，提供了它们如何应该互操作的方式，这正是**HTTP**的约定，规定了浏览器和服务器如何工作，有时涉及**Cookies**。你可能听说过Cookies，虽然它们被认为是坏的或危险的，但也是必要的。
- en: indeed all of that，of data，or even files that are planted on your，computer or
    your phone。by a server that help them remember that，you've been there before。in
    some sense they help remember who you，are but even websites that you're not。logging
    into very often put，cookies onto your phone your laptop or。
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 确实，所有这些数据或文件都是由服务器放置在你的计算机或手机上，帮助它们记住你之前曾经访问过。在某种意义上，它们帮助记住你是谁，即使是那些你不常登录的网站也会在你的手机或笔记本电脑上放置Cookies。
- en: desktop which essentially might be a big，random number that only you are given。so
    that even if they don't know that，it's maggie who's visited the site or。ryan or
    nicole or someone else，has been seen，before and they can therefore track your。![](img/42fc978d86c319937be2311efcbd6801_71.png)
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 桌面上的Cookies本质上可能是一个只有你知道的大随机数，即使它们不知道访问该网站的是**玛吉**，还是**瑞安**或**妮可**，也能追踪到你。
- en: behavior so if you've heard the term，tracking cookies，that's all it is it's
    some piece of data。a big random number that's been，browser then，remembers and
    the mechanism is as simple。as this one of the http headers that，comes from server
    to browser。literally is set dash cookie colon then，the name of a cookie，for instance
    session and then value and。
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '所以如果你听说过“追踪 cookie”这个词，那就是它，它是一段数据，一个随机数，浏览器会记住，并且机制就简单得像这样：来自服务器到浏览器的 HTTP
    头之一。字面上是 set-cookie: 然后是一个 cookie 的名称，比如 session，然后是值。'
- en: number，and because of http again it's a，together，cookie back，to every subsequent
    page you visit on。gmail。com or whatever server you're on，in other words when you
    visit gmail。com。then an hour from now even after closing，to sleep，your browser
    is not only sending these。headers if you have been given a cookie，from gmail。com
    before。
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 因为 HTTP 的原因，cookie 会一起传递到你访问的每一个后续页面，比如 gmail.com 或其他你所在的服务器。换句话说，当你访问 gmail.com
    时，那么一个小时后，即使你关闭了电脑去睡觉，如果你之前从 gmail.com 收到过 cookie，你的浏览器不仅会发送这些头。
- en: your browser sends a similar header but，without the word set，value。so unbeknownst
    to you your browser is，constantly reminding the server。that you've been there
    before and this，is similar to the real world when you're。perhaps in um when you
    go into a club or，through the gates，you typically are allowed back in by。
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 你的浏览器发送一个类似的头，但没有“set”这个词，只有值。因此， unbeknownst to you 你的浏览器不断提醒服务器，你以前来过，这在现实世界中类似于，当你进入一个俱乐部或通过大门时，通常会被允许重新进入。
- en: having your hand st*mped and this way，they don't have to check your tickets。again
    or your id or the like they just，st*mp your hand which is a little。reminder that
    you have been there before，and so in fact here i've got a little，st*mp here。if
    i visit a website it's like my hand，is being st*mped here，and my browser by design
    of http。
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 你的手被印上，这样他们就不必再次检查你的票据或身份证明之类的东西，他们只是给你印手，这是一个小提醒，表明你以前来过。因此，实际上我这里有一个小印记。如果我访问一个网站，就像我的手在这里被印上，而我的浏览器设计上是通过
    HTTP。
- en: is supposed to every time i visit，another page click another link。represent
    my hand just like you're going，back into the bar or the club or the，amusement
    park。to remind the person at the door the，bouncer that you've been there before，and
    to let you through。rather than prompting you to log in，again so that's what a
    cookie is it is。
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 每次我访问另一个页面或点击另一个链接时，都是在展示我的手，就像你回到酒吧、俱乐部或游乐园，提醒门口的人，保安，你以前来过，以便让你通过。而不是再次提示你登录，这就是
    cookie 的作用。
- en: like this virtual hand st*mp，that's put on your computer but your，computer is
    designed to present it。again and again so if you've ever，wondered how sometimes
    you go shopping。on one website and then all of a sudden，creepily you're on facebook
    or something。else and you're seeing ads for the very，website，that all derives
    from cookies long story。
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 就像这个虚拟的手印，贴在你的电脑上，但你的电脑设计上是不断地展示它。因此，如果你曾经想知道为什么有时候你在一个网站上购物，突然之间，令人毛骨悚然地你在
    Facebook 或其他地方，看到那个网站的广告，那一切都源于 cookies，长话短说。
- en: short there's advertising companies，that facebook and google and others，partner
    with that put little。images on the website or javascript，files or other such files，and
    because those ads are on different。websites the cookies are shared across，multiple
    websites in some sense。so it's like you are constantly，presenting your handstand
    to all these。
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 简而言之，有广告公司与 Facebook 和 Google 等其他公司合作，在网站上放置小图像或 JavaScript 文件等，因为这些广告分布在不同的网站上，因此
    cookies 在某种意义上是跨多个网站共享的。所以就像你不断地，向所有这些展示你的手印。
- en: different third-party companies，and this is how they're advertising uh，to you
    or even。tracking you at worst as an aside when，you use incognito mode，or private
    mode on your browser all of。your cookies are temporarily thrown away，you get an
    empty cookie jar so to speak。so that you do appear to be logged out，and in fact
    even in class i've used。
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 不同的第三方公司，这就是他们如何向你宣传，呃，甚至在最坏的情况下追踪你。当你使用隐身模式或浏览器的私密模式时，你的所有 cookies 都会被暂时丢弃，可以说你得到了一个空的
    cookie 罐。因此你看起来像是已注销，实际上即使在课堂上我也使用过。
- en: incognito mode a few times because i，want to start fresh，and not have any of
    my prior clicks or。our prior demos messing up future demos。![](img/42fc978d86c319937be2311efcbd6801_73.png)
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 我使用了几次隐身模式，因为我想重新开始，不让之前的点击或我们的演示影响未来的演示。![](img/42fc978d86c319937be2311efcbd6801_73.png)
- en: but the reason i was doing that was just，all。![](img/42fc978d86c319937be2311efcbd6801_75.png)
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 但我这样做的原因仅仅是，所有的。![](img/42fc978d86c319937be2311efcbd6801_75.png)
- en: states so on the one hand cookies are an，incredibly important and powerful。mechanism
    but suffice it to say，and more on this down the road they can。be misused um certainly
    when it comes to，one's privacy，uh or security so with that said let's。consider，how
    a typical website remembers that，simple idea，and make it clear that it's all within。
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 因此一方面，cookies是一个极其重要和强大的机制，但足以说，更多关于这一点的信息在后面，他们可能会被滥用，当然在隐私或安全方面。所以说完这些，让我们考虑一个典型的网站是如何记住这个简单的想法，并明确这都是在。
- en: your power now with code to do this，so let's start as follows i've created a，demonstrate。a
    program that logs people in i've got，my same layout as before and i've added。one
    more tag it tends to be best，practice to tell the browser，that you're using essentially
    unicode。this way i can have emojis and other，characters in my html so i've added
    this，line five。
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 现在用代码提升你的能力，所以我们开始吧。我创建了一个演示程序，记录用户登录。我保持了之前的布局，并添加了一个标签。最好告诉浏览器，你使用的是基本的unicode。这样我可以在我的HTML中使用表情符号和其他字符，所以我在第五行添加了这一行。
- en: which you'll see on bootstrap's，documentation and other sites so now i。have
    sort of a good starting point for，this page but there's really no content。there's
    just a block being defined here，as before，and indeed if i type ls you'll see an。application
    up hi and a templates folder，in that templates folder right now，and start。
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 你将在bootstrap的文档和其他网站上看到这些。因此现在我有一个良好的起点，但页面实际上没有任何内容。这里只定义了一个块，正如之前所说的，确实如果我输入`ls`，你会看到一个名为`app.py`的应用程序和一个模板文件夹，那个模板文件夹现在开始。
- en: writing a quick application whose，purpose in life is just to present the，user
    with a form。via which they can log in and then，remember that they are logged in，also。import
    the redirect function the render，template function，the request variable and now
    a session。variable this is something new and then，from flask，session，flask。
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 写一个快速应用程序，其目的仅仅是向用户呈现一个表单，通过这个表单他们可以登录，然后记住他们已经登录。还要导入重定向函数，渲染模板函数，请求变量，还有一个session变量，这个是新的，然后来自flask的session。
- en: underscore underscore name and now i，need a few more lines of code from，documentation，app
    app。config。open bracket session permanent，only to，the library called flask session
    that。i'm using and that's library，is going to enable hand st*mps，going to configure
    it，session。type equals file system and file system，is just fancy speak for the
    hard drive，or my own ide account。
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: __name__，现在我需要几行代码来自文档，`app`，`app.config`。打开括号，`SESSION_PERMANENT`，仅用于我正在使用的名为flask-session的库，而这个库将使得手动配置成为可能，`SESSION_TYPE`等于`file_system`，而`file_system`只是硬盘或我自己IDE帐户的华丽说法。
- en: and this is an alternative to using a，database or or something else like that。and
    then session app so this is just，three lines，from the documentation for this library。but
    to use this library and this was，ago，there's another file i should uh point，out
    so。![](img/42fc978d86c319937be2311efcbd6801_77.png)
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 这是使用数据库或其他类似东西的替代方案。然后是`session`，应用程序的这三行来自于这个库的文档。但是为了使用这个库，之前还有另一个文件我应该指出。![](img/42fc978d86c319937be2311efcbd6801_77.png)
- en: when i am here，i should create one other file that i，mentioned earlier but we
    haven't created。![](img/42fc978d86c319937be2311efcbd6801_79.png)
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 当我在这里时，我应该创建一个我之前提到但还没有创建的文件。![](img/42fc978d86c319937be2311efcbd6801_79.png)
- en: ourselves this time called，requirements。txt and i'm going to put，this into my
    login directory。and i'm going to require flask for this，application and i'm also
    going to。require a library called flask session，so again i claimed before on the
    slide，list。of the requirements the libraries you，want to use and there are commands
    you。
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 这次我们称之为`requirements.txt`，我将把它放入我的登录目录。我将需要flask来实现这个应用程序，同时还将需要一个名为flask-session的库。所以我之前在幻灯片中声明过，所需库的列表以及你想使用的库，还有一些命令。
- en: will use at the command line，to install those requirements you won't。typically
    need to do this for the，problem set but just so you've seen it。if you want to
    install the requirements，for a python，application you typically do a command。like
    this pip，install dash r requirements dot text and，in advance。
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在命令行中使用，安装那些你不会通常需要的要求。通常情况下，你需要为问题集执行此操作，但只是让你见识一下。如果你想为一个python应用程序安装要求，你通常会执行类似这样的命令：`pip
    install -r requirements.txt`，并提前进行。
- en: but just know that in order to install，libraries it's much easier。in python
    than it was for instance in c，they tend to be more easily。packageable via this
    technology called，pip and things like it，all right let's go ah**d and create a。couple
    routes app route slash，def index so just boilerplate as before，return。
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 但是请知道，为了安装库，在python中比在c中要容易得多，它们通常更容易通过这种称为pip的技术进行打包，好的，让我们去**继续**创建几个路由，app
    route斜杠，def index，就像之前的样板，返回。
- en: render template of index。html by default，and then let's go ah**d，and create
    one other route app。route，login and in my login route which will，be governed by
    a login function。let me go ah**d and return render，template，login so let's keep
    it simple for the。![](img/42fc978d86c319937be2311efcbd6801_81.png)
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 默认渲染index.html的模板，然后让我们去**继续**，创建另一个路由app.route，login，在我的登录路由中，这将由一个登录函数来管理。让我去**继续**返回渲染，模板，login，所以让我们保持简单。![](img/42fc978d86c319937be2311efcbd6801_81.png)
- en: this form，so let me go ah**d and create a file。![](img/42fc978d86c319937be2311efcbd6801_83.png)
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 这个表单，所以让我去**继续**创建一个文件。![](img/42fc978d86c319937be2311efcbd6801_83.png)
- en: called login。html，whose purpose in life is just going to，have my login form。and
    what i want in that login form is，just a space for the user's name。in the real
    world i would most certainly，do something like，a username and a password but we're。going
    to keep it simple focus only on，the essence of the idea，and do something like
    just the user's。
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 被称为login.html，其生命目的就是，拥有我的登录表单。我想要的登录表单中，只有一个用户名称的空间。在现实中，我肯定会做一些，比如用户名和密码，但我们将保持简单，只关注，想法的本质，做一些像用户的。
- en: name so in login。html i'm going to，extend layout。html as before。i'm going to
    have my block body and i'm，going to have my end block tag。and then inside of here
    i'm going to，have a form the action for which will be，slash login。the method for
    which will be post i'll，do best practices here i don't want my，username and password。
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 名称，所以在login.html中，我将像之前一样扩展layout.html。我将有我的区块主体，并且我将有我的结束区块标签。然后在这里我将有一个表单，其操作将是，斜杠login。方法将是post，我会遵循最佳实践，我不想要我的，用户名和密码。
- en: in the real world being stored in，people's uh，auto complete histories let me
    do input，measure。auto focus for convenience name equals，the user's name，then type。equals
    text and then down here input，type equals submit so this is almost the。same to
    our previous forms for，registering and so forth，but now i'm going to use it for
    login。
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在现实世界中存储在，人们的呃，自动补全历史记录，让我进行输入，测量。为了方便，名称等于，用户的名称，然后类型。等于文本，然后在这里输入，类型等于提交，所以这几乎与我们之前的表单相同，用于注册等等，但现在我将用它进行登录。
- en: '![](img/42fc978d86c319937be2311efcbd6801_85.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_85.png)'
- en: purposes so let's do a quick check，let me go back to my application do，flask
    run。![](img/42fc978d86c319937be2311efcbd6801_87.png)
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 目的，所以让我们快速检查一下，让我回到我的应用程序，执行，flask run。![](img/42fc978d86c319937be2311efcbd6801_87.png)
- en: i'm going to go ah**d and open up my url，and first error。![](img/42fc978d86c319937be2311efcbd6801_89.png)
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 我将去**继续**打开我的网址，然后第一个错误。![](img/42fc978d86c319937be2311efcbd6801_89.png)
- en: let's see template not found okay so，that's actually expected i，kind of knew
    i didn't create index。html，so i'm okay with that error for now，let me go ah**d
    and zoom out though。because i deliberately wanted to go to，my slash。![](img/42fc978d86c319937be2311efcbd6801_91.png)
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看模板未找到，好的，所以这其实是预期的，我有点知道我没有创建index.html，所以我现在对这个错误没问题，让我去**继续**放大一下。因为我故意想要去我的斜杠。![](img/42fc978d86c319937be2311efcbd6801_91.png)
- en: login route because i wanted to test，that first that seems to be working。now
    let's go ah**d and create the file。![](img/42fc978d86c319937be2311efcbd6801_93.png)
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 登录路由，因为我想先测试一下，这似乎工作正常。现在让我们去**继续**创建文件。![](img/42fc978d86c319937be2311efcbd6801_93.png)
- en: that doesn't exist，index。html so index。html put this in my。![](img/42fc978d86c319937be2311efcbd6801_95.png)
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 那个不存在，index.html，所以index.html放在我的。![](img/42fc978d86c319937be2311efcbd6801_95.png)
- en: login folder in templates，and i'm going to do this one pretty。similarly i'm
    going to go ah**d and copy，paste just to save a bit of keystrokes，logged in。![](img/42fc978d86c319937be2311efcbd6801_97.png)
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 登录文件夹在模板中，我将会非常类似地做这个，我会去**继续**复制，粘贴只是为了节省一些击键，已登录。![](img/42fc978d86c319937be2311efcbd6801_97.png)
- en: because i literally haven't implemented，reasonable，let me go ah**d and restart
    flask let me。go to my index and i should see，to。![](img/42fc978d86c319937be2311efcbd6801_99.png)
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 因为我确实还没有实现，合理的，让我去**继续**重启flask，让我。去我的索引，我应该看到，去。![](img/42fc978d86c319937be2311efcbd6801_99.png)
- en: login i see my login form so let's make，this a little more interactive let me
    go，into index。html here，and say you are not logged in ahref，login log in period。let's
    create a better user interface so。![](img/42fc978d86c319937be2311efcbd6801_101.png)
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 登录时我看到了我的登录表单，所以让我们让这个互动性更强，让我进入 index.html，在这里说你没有登录 ahref，登录。让我们创建一个更好的用户界面。![](img/42fc978d86c319937be2311efcbd6801_101.png)
- en: let me rerun flask，let me go back to my web page hit reload，and now i have the
    beginnings of a user。interface super simple but very similar，to a website where
    if you're presented。with the web page you're not logged in，you're given a link
    or a button or，something to log in。and if i click this it's just a simple，links。
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 让我重新运行 Flask，回到我的网页，点击刷新，现在我有了用户界面的初步形态，超级简单，但与一个网站非常相似，如果你访问网页而没有登录，你会看到一个链接或按钮，或者什么东西来登录。如果我点击这个，它只是一个简单的链接。
- en: '![](img/42fc978d86c319937be2311efcbd6801_103.png)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_103.png)'
- en: to slash login so we're almost there，we almost have the ability to log in。let's
    do something with the information，so let me go back to application。pi，want。to
    have happen exactly well if they log，multiple，i want to support post here so let
    me do。that for privacy's sake，and then let me go ah**d and do，this if request。method
    equals post。
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 进入登录，所以我们快到了，几乎具备登录的能力。让我们处理一下信息，我想让应用程序发生什么，如果他们登录多次，我想支持 POST，因此为了隐私起见，让我这样做，然后让我来处理，如果请求方法等于
    POST。
- en: as before let's go ah**d and，remember that user logged in，and then redirect
    user。to slash uh to slash，else let's go ah**d and render the login，form so i'm
    not done yet。but this is the key idea i need to，somehow remember that the user
    logged in，so how can i do this。well one i can get the user's name from，request，dot
    form dot get name，and i should assume that i um。
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 像以前一样，让我们继续记住那个用户已登录，然后将用户重定向到登录页面，否则让我们继续渲染登录表单，所以我还没完成，但这是关键思想，我需要以某种方式记住用户已登录。那么我该怎么做呢？我可以从请求中获取用户的名称，request.form.get('name')，我应该假设我。
- en: '[Music]，yeah that''s okay we won''t validate that，the user''s name，i want to
    store it in the session so。turns out。![](img/42fc978d86c319937be2311efcbd6801_105.png)'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '[音乐]，是的，这没问题，我们不会验证用户的名称，我想把它存储在会话中，所以结果是这样。![](img/42fc978d86c319937be2311efcbd6801_105.png)'
- en: it's like，um it's kind of like a coat check too i，don't mean to add too many
    metaphors。here but in like a fancy restaurant if，you like hand your coat to someone。they'll
    often put it in the closet and，then hand you back a number which in。some sense
    is like a little clue like，can line you up，it probably shouldn't just be a smiley。
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 这有点像外套寄存，但我不想增加太多的比喻。在一个高档餐厅，如果你把外套递给某人，他们通常会把它放在衣柜里，然后把号码递给你，这在某种意义上就像一个小线索，可以让你排队，可能不应该仅仅是一个笑脸。
- en: face because otherwise everyone would，get the same coat back but they give you。some
    kind of identifier，and they put your coat into some a，hanger a bucket or。some
    space in that closet so why is this，relevant here，well the same is kind of happening
    in。unique cookie，through，metaphor through before but you're given，can go。
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 面对面的问题是，否则每个人都会拿回同样的外套，但他们给你某种标识符，并把你的外套放入某个衣架、桶或某个空间。那么这与此处有什么相关性呢？实际上，独特的
    Cookie 机制也在以某种方式发生。
- en: including your cope but in this case，remember，so with that said what i have
    access to。thanks to flask，special。![](img/42fc978d86c319937be2311efcbd6801_107.png)
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 包括你的外套，但在这种情况下，记住，所以在这点上，我能够访问的内容。多亏了 Flask，特别的。![](img/42fc978d86c319937be2311efcbd6801_107.png)
- en: variable called session that is a，special variable，in that it's at the one hand
    on the one。hand global，which means i can use it everywhere but，fancy enough。it's
    tied to the current user so even if，all of us on zoom right now visit my url。is
    kind of happening anyway，variable called。
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个名为 session 的变量，这是一个特殊变量，它一方面是全局的，这意味着我可以在任何地方使用它，但它足够高级，它与当前用户相关，因此即使我们现在在
    Zoom 上的所有人都访问我的 URL，这种情况也在发生。
- en: '![](img/42fc978d86c319937be2311efcbd6801_109.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_109.png)'
- en: session and it's implemented underneath，the hood by way of this cookie mechanism。![](img/42fc978d86c319937be2311efcbd6801_111.png)
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 会话的实现是通过这个 Cookie 机制。![](img/42fc978d86c319937be2311efcbd6801_111.png)
- en: each of us when you visit my application，or getting a different cookie value。that
    cookie value is like mapping to a，different hanger in the closet。so that my data
    will go on this hanger，your data will go on that hanger and so。![](img/42fc978d86c319937be2311efcbd6801_113.png)
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 当你访问我的应用程序时，我们每个人都获得不同的 cookie 值。那个 cookie 值就像映射到壁橱中不同的挂钩。因此我的数据将放在这个挂钩上，你的数据将放在那个挂钩上，等等。![](img/42fc978d86c319937be2311efcbd6801_113.png)
- en: forth and now i'm actually kind of proud，of this metaphor that's working out
    okay。the hanger is going to be where all of，want to store，user's name。thereby
    remembering that i've logged in，or brian's logged in or sophia is logged。in or
    ryan's logged in or，anyone else but the session global，variable here。
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我实际上有点自豪于这个隐喻，它运作得不错。这个挂钩将是我存储用户名称的地方。因此记住我已经登录，或者布莱恩已经登录，或者索非亚已经登录，或者瑞安已经登录，或者任何其他人，但全局会话变量在这里。
- en: that i've highlighted in this very first，line is going to be，way that，thereof。so
    i'm going to quite simply use this as，a dictionary in python，i'm going to go ah**d
    and add to the。session here，the user's name as name and i don't even，need this
    variable now let me tighten。this up just a little bit，let me go ah**d and just
    store in the，session which is like this hanger。
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 我在这一行中突出显示的，将是，方法。如此，我将简单地将其用作字典在 Python 中，我将去啊**d并将用户的名称添加到会话中，而我甚至不需要这个变量，现在让我稍微收紧一下，让我去啊**d并存储在会话中，这就像这个挂钩。
- en: the key of name and the value of，whatever the user logged in as and，redirects
    i know how to do。redirect，slash let me get rid of my pseudo code，and i think that's
    it that is sufficient。excuse me to remember。![](img/42fc978d86c319937be2311efcbd6801_115.png)
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 名称的关键和价值，无论用户以什么身份登录，以及重定向，我知道如何处理。重定向，斜杠让我摆脱我的伪代码，我想这就足够了。请原谅我记住。![](img/42fc978d86c319937be2311efcbd6801_115.png)
- en: that a user has logged in you sort of，put their name in the session。but then
    it stands to reason that we，let's improve，index。html which at the moment just。![](img/42fc978d86c319937be2311efcbd6801_117.png)
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 用户已登录时，你将他们的名字放在会话中。但理所当然，我们来改进，索引。html，此时只是。![](img/42fc978d86c319937be2311efcbd6801_117.png)
- en: blindly says always，you are not logged in well let's，actually make that decision
    not just。hard code that so let's do this，if um not session。getname，this is the
    syntax for saying if there's。no name in the session，then go ah**d and return redirect，slash
    login so if there's no name in the。session that means you haven't given me，your
    name yet let me force you to by。
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 盲目地总是说，你没有登录，好吧，让我们做出那个决定，而不仅仅是硬编码。因此，让我们这样做，如果呃没有会话。获取名称，这是说如果会话中没有名称的语法，那么去啊**d并返回重定向，斜杠登录，所以如果会话中没有名称，那意味着你还没有给我，你的名字，让我强迫你。
- en: sending you to slash login，otherwise go ah**d and render the，template。all right
    well what more might i do now，let me go into my index file here。and instead of
    just naively hard coding，this watch what i can now do。i can in here say in jinja
    syntax，not the curly braces not the block，syntax not the for loop。
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 发送你去斜杠登录，否则去啊**d并渲染模板。好吧，我现在还能做什么，让我去我的索引文件这里。与其天真地硬编码，不如看看我现在能做什么。我可以在这里用 jinja
    语法说，不是大括号，不是块，语法，不是 for 循环。
- en: you can also use if conditions if，session。name exists，then i can say something
    like you are。logged in as，something like a，href equals slash logout doesn't exist。yet
    but we can come back to that，log out else if there is no session name。then let's
    assume that the user is，indeed not logged in，in，so if i did this right let me
    go ah**d。
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 如果会话。名称存在，我也可以使用 if 条件，那么我可以说你以某种方式登录，像是一个，`href` 等于斜杠注销还不存在，但我们可以回到这个，注销否则如果没有会话名称。那么我们假设用户确实没有登录，所以如果我这样做是对的，让我去啊**d。
- en: '![](img/42fc978d86c319937be2311efcbd6801_119.png)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_119.png)'
- en: and stop the server here，let me go ah**d and rerun flask run，reload my form
    i still see。okay oh wrong wrong url let me go to，index。![](img/42fc978d86c319937be2311efcbd6801_121.png)
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里停止服务器，让我去啊**d并重新运行`flask run`，重新加载我的表单我仍然看到。好吧，哦，错误错误的 URL，让我去，索引。![](img/42fc978d86c319937be2311efcbd6801_121.png)
- en: oh no i this is right i'm on slash login，method's not allowed i think。santiago
    already pointed out what，mistake i made earlier which i just，repeated let me go
    to。application。pi um，i need to support multiple methods here，i also want to support。![](img/42fc978d86c319937be2311efcbd6801_123.png)
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 哦不，我这是对的，我在斜杠登录，方法不允许，我想。圣地亚哥已经指出我之前犯的错误，我只是重复，让我去。应用程序。呃，我需要在这里支持多种方法，我也想支持。![](img/42fc978d86c319937be2311efcbd6801_123.png)
- en: get so that i can actually render my，template as needed，so let me go ah**d and
    rerun this server。here we go it slash login and notice，what happens let me zoom
    in on this。let me get rid of the login and just go，to slash notice that i'm immediately。redirected
    let's do what we did last，week let's open up the inspector。
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 这样我就可以根据需要渲染我的模板，所以让我去**重新运行**这个服务器。好了，斜杠登录，注意发生了什么，让我放大一下。让我去掉登录，直接访问斜杠，注意我立即被重定向。让我们做上周做的事情，打开检查器。
- en: let's go to the network tab let's again，visit slash and hit，enter voila notice
    what happens if i。visit that request，zoom in on chrome's network tab scroll，down
    to response headers。notice that we get a 302 found which is，a redirect code like
    301，over here。slash login so all the mechanics of http，are coming back into play。
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们去网络标签，再次访问斜杠并按下回车，瞧，注意到如果我访问那个请求，放大一下Chrome的网络标签，向下滚动到响应头。注意到我们得到了302找到，这是一个重定向代码，就像301一样，斜杠登录。因此，HTTP的所有机制又重新起作用了。
- en: all right let me go ah**d and log in as，david click submit。![](img/42fc978d86c319937be2311efcbd6801_125.png)
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，让我去**登录**为大卫，点击提交。
- en: amazing you are logged in as david，notice what's going on i'm now，at the in
    slash route my。this is true so this does not apply so，i'm actually seeing index。html。and
    notice i accidentally clicked log，out let's fix that，let's give us our logout
    route so here。we go app，app。route slash log out，def log out and then in here i
    need to。
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 惊人的是，你已登录为大卫，注意发生了什么，我现在在斜杠路由上。这个是真的，所以这并不适用，所以我实际上在看到index.html。注意我不小心点击了**注销**，让我们修复这个，给我们提供注销路由。好了，我们来，应用，应用。路由斜杠注销，定义注销，然后在这里我需要。
- en: just forget that the user has logged in，and there's a few different ways to
    do。this let me do it the simplest for now，session name equals none let's just。change
    whatever your name is or my name，is to none，then let's return redirect back to
    slash，let me。![](img/42fc978d86c319937be2311efcbd6801_127.png)
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 别忘了用户已经登录，有几种不同的方法可以做到。现在让我们简单处理，会议名称设为无，让我们把你的名字或我的名字改为无，然后重定向回斜杠，让我。
- en: restart the server let me go back to my，index page，because i'm still logged
    in here i'm。going to go ah**d and log out，okay let me go ah**d and log in as brian。for
    instance submit you are logged in as，brian and notice i can reload。i can close
    the tab i can reopen the tab，it's all being remembered thanks to。
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 重启服务器，让我回到我的主页，因为我仍然在这里登录。我将去**注销**，好的，让我去**登录**为布莱恩。例如，提交你已登录为布莱恩，注意我可以重新加载。我可以关闭标签页，我可以重新打开标签页，这一切都被记住了，多亏了。
- en: my browser representing the cookie and，in fact you can see that，network tab。and
    let me reload the same page reload，notice this response here in 200。notice that
    if i scroll down here to the，request headers，notice that my browser is requesting。whoops
    sorry，notice that my browser is requesting，slash but notice if i scroll down down。
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 我的浏览器正在代表cookie，实际上你可以在网络标签中看到这一点。让我重新加载同一页面，注意这里的响应是200。如果我向下滚动到请求头，注意到我的浏览器正在请求。哎呀，抱歉，注意到我的浏览器正在请求斜杠，但如果我向下滚动。
- en: down nope uh，there we go down down down notice，unbeknownst to me and unbeknownst
    to you。perhaps all this time my browser is also，presenting the hand st*mp and
    saying my。cookie value is session equals three。![](img/42fc978d86c319937be2311efcbd6801_129.png)
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 不不，那里我们去，向下向下注意，可能我和你都不知道，这段时间我的浏览器也在显示手印，表明我的cookie值是会话等于三。
- en: five four five six dot dot dot，um generally speaking it's bad to tell。other
    people your sessions because now，you could all hijack my session by，pretending
    to be me。but of course this application doesn't，accounts，that you care about no
    one should be。seeing your cookie values，so we actually see the cookie there and，it
    came from the server。
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 五四五六……嗯，通常来说，告诉别人你的会话是不好，因为现在你们可以通过假装是我来劫持我的会话。但是当然，这个应用程序并不关心你们的账户，没有人应该看到你的cookie值，因此我们实际上在这里看到cookie，它来自服务器。
- en: the very first time i visited，all right any questions，on that there does the
    cookie just exist。disappears，good question does the cookie live，forever or is
    there a time limit。it depends on how you configure it so，this cookie will have
    a default time。limit of some number of minutes or，hours or days after which it
    will expire。
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 我第一次访问的时候，好的，有什么问题吗？cookie是否存在就消失了，好的问题，cookie是永远存在的还是有时间限制的？这取决于你如何配置它，因此这个cookie将有一个默认的时间限制，几分钟、几小时或几天，之后它将过期。
- en: unless the server refreshes it for me。![](img/42fc978d86c319937be2311efcbd6801_131.png)
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 除非服务器为我刷新。![](img/42fc978d86c319937be2311efcbd6801_131.png)
- en: you can though set cookies that do last，forever which you probably don't want
    to。do for the notion of logging in because，odds are all of us have accidentally。walked
    away from like a lab computer or，a friend's computer forgotten to log out。it's
    at least nice to know that，eventually i'll be logged out，automatically from the
    site。
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '不过，你可以设置那些永久有效的cookie，尽管你可能不想这样做，因为在登录时，大家都可能不小心离开了实验室电脑或朋友的电脑，忘记注销。至少知道我最终会自动从网站注销，这感觉不错。 '
- en: and that's what's called a session，cookie one that eventually expires。but it's
    also useful when you visit，websites you notice that some websites。have those buttons
    that say remember me。![](img/42fc978d86c319937be2311efcbd6801_133.png)
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是所谓的会话cookie，它最终会过期。但是，当你访问一些网站时，你会注意到有些网站会有“记住我”的按钮。![](img/42fc978d86c319937be2311efcbd6801_133.png)
- en: or something like that well you can，actually set permanent cookies that。don't
    just store some random value，on your computer they actually store，some piece of
    information。that gets pre-filled into form，subsequently and this is useful to，website。if
    you've customized something if you're，like that，it can remember those kinds of
    settings。
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '或者类似的东西，实际上你可以设置永久的cookie，它们不仅仅在你的计算机上存储某个随机值，而是存储一些信息，这些信息会在表单中预填充，随后的使用中对网站非常有用。如果你自定义了一些东西，它可以记住这些设置。 '
- en: and even cs50s website，remembers uh what your selection was。![](img/42fc978d86c319937be2311efcbd6801_135.png)
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 甚至连cs50的网站也会记住你选择的内容。![](img/42fc978d86c319937be2311efcbd6801_135.png)
- en: when you log into some of cs50s websites，you'll sometimes see，a login prompt
    for harvard or yale and。![](img/42fc978d86c319937be2311efcbd6801_137.png)
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 当你登录一些cs50的网站时，有时会看到哈佛或耶鲁的登录提示。![](img/42fc978d86c319937be2311efcbd6801_137.png)
- en: if you've never noticed，uh i regret this because we put a lot of。effort into
    this it remembers if you。![](img/42fc978d86c319937be2311efcbd6801_139.png)
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你从未注意到，呃，我对此感到遗憾，因为我们在这方面投入了很多努力，它会记住你。![](img/42fc978d86c319937be2311efcbd6801_139.png)
- en: time，so you don't have to constantly interact，with the drop down it just remembers。![](img/42fc978d86c319937be2311efcbd6801_141.png)
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 这节省了时间，因此你不必不断互动，下拉框会自动记住。![](img/42fc978d86c319937be2311efcbd6801_141.png)
- en: your implied preference，we do that using cookies and so as an，at-home exercise
    of of interest。truly do start opening the browser's，network tab，start looking
    at those headers and you。websites work，and in fact it's becoming increasingly
    a，challenge to implement things with。cookies because long story short，a lot of
    the browser manufacturers are。
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '我们通过cookies来记录你的隐含偏好，因此作为一项家庭练习，真正开始打开浏览器的网络标签，查看那些请求头，你会发现网站的运作，实际上，使用cookies实现功能变得越来越具有挑战性，因为长话短说，很多浏览器制造商正在... '
- en: finally starting to disable what are，called third-party cookies。those sort of
    advertising style cookies，that come from other servers not，servers。that are all
    too often used to track，people but if recently especially in the。eu and now more
    recently in the us if，you've ever had to click boxes saying i。
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '最终开始禁用所谓的第三方cookie。这些来自其他服务器的广告类型cookie，往往用于追踪用户，尤其是在欧盟，最近在美国，如果你曾经点击过“我同意”的框。 '
- en: accept cookies i accept necessary，cookies and so forth，honestly this is sort
    of a nice idea but。it's also a little，silly and that now the world is just，conditioning
    you and i you and。me to just constantly click these boxes，without really thinking
    of it。but what you're really doing is granting。
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: '接受cookie，我接受必要的cookie等等，老实说，这个想法挺不错，但也有点傻，现在世界正让你我不断点击这些框，而不去认真思考。但你真正做的就是在授予。 '
- en: '![](img/42fc978d86c319937be2311efcbd6801_143.png)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_143.png)'
- en: permission when you click those boxes to，allow your hand to be st*mped。all right
    any questions then on cookies，or on how we've gone about implementing。anything
    at all seeing anything on your，end brian，nothing else here all right well let
    me。go ah**d and do this，let me go ah**d and get ready an example，that we made
    in advance。
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '当你点击这些框允许你的手被*印记*时，你就给予了权限。好的，有关于cookies或我们如何实施的任何问题吗？布莱恩，你那边没有其他问题吧？好的，那我先继续，准备一个我们提前制作的示例。 '
- en: that will allow us to explore a，some sort，and we'll call this literally store
    and。this time rather than write things from，scratch let me go ah**d and，open things
    in my browser from a。directory called store，so this is available as always on
    the。courses website and let me go ah**d here，and into store，let me go ah**d and
    open up，application。pie。
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 这将允许我们探索某种东西，我们将其称为存储。这次与其从头开始编写代码，不如让我在名为store的目录中打开东西，这样它总是在课程网站上可用，让我继续进入store，打开`application.py`。
- en: requirements。txt and my templates，including layout，exercise in，honestly reading
    a someone else's。sizeable amount of code it's a few files，how do you even begin
    when you've。downloaded a program like this when，you've downloaded distribution
    code for。cs50 or any other course how do you，begin to wrap your mind around it。
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '`requirements.txt`和我的模板，包括布局，实话实说，阅读别人的大量代码，涉及几个文件。当你下载了这样的程序，或者下载了cs50或任何其他课程的发行代码，你该如何开始理清思路呢？'
- en: well again if you understand what the，roles are played by these different，files
    application。pi is your controller，anything ending in dot html and，templates is
    a view you can begin to。figure out，what does what in these files so let's，start
    with application。pi。notice i'm importing cs50s library a，session support，below
    that i'm initializing the。
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你理解这些不同文件所扮演的角色，`application.py`是你的控制器，任何以`.html`结尾的都是视图，你可以开始弄清楚这些文件的功能。让我们从`application.py`开始。请注意，我正在导入cs50的库和会话支持，下面我在初始化购物目录，类似于一个amazon.com或某种在线书店。
- en: application as i've done before，and below that i'm connecting to a。database
    which contains a whole bunch of，products in a store books in this case i。then
    configure sessions and we just did，that so that code is the same as before。and
    i think we can begin to infer what，this website's going to do，function。
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 应用程序如我之前所做的，下面我连接到一个包含大量产品的数据库，这里是书籍。我随后配置会话，我们刚刚做过，这段代码和之前是一样的，我认为我们可以开始推测这个网站的功能。
- en: and it looks like there's a table in，that database called books so i'm，the books。and
    then it looks like i'm rendering a，template called books。html and i'm，passing
    in those books。so let's let's follow the breadcrumbs，here and go into books。html，it
    looks like books。html extends。layout。html，all right let's look at layout。html，nothing
    really interesting going on。
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来这个数据库中有一个名为books的表格，所以我在访问书籍。然后我看起来在渲染一个名为`books.html`的模板，我在传递这些书籍。让我们跟随线索，进入`books.html`，看起来`books.html`扩展自`layout.html`，好吧，让我们看看`layout.html`，没有什么特别有趣的内容。
- en: there just the boilerplate placeholder，code that we've seen before so i'm going。to
    close that and assume that ah，it's not interesting been there done，that but books。html
    if we continue，further is a little juicy，we've got my block body between lines
    3，saying。books at the top of the page and then，i've got a for loop，in my template
    again using jinja syntax。
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 这里只是一个模板占位符，我们之前见过的代码，所以我将关闭它，假设这没什么趣味，毕竟经历过了，但`books.html`如果继续深入，内容会有点精彩，我在第3行之间有一个块体，显示页面顶部的书籍。
- en: that has below that in h2 with，apparently the title of a book。and then below
    that a form and i haven't，seen all of these features before like。i'm not sure
    yet what hidden means，but notice that i do recognize a submit。button that has
    a value of add to cart，so it sounds like we're implementing a。
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 在下方有一个h2标签，显然是一本书的标题。然后下面是一个表单，我之前没见过所有这些功能，比如我还不确定hidden是什么意思，但请注意我确实识别出一个提交按钮，值为“添加到购物车”，所以听起来我们在实施一个。
- en: shopping catalog for like an amazon。com，or some kind of bookstore。online all
    right so now let's go back to，application。pi，and let's look in cart it looks like。cart
    supports both get，and post all right so maybe i'm using，the same route to handle
    two different。things and we've seen that before，the function's called cart which
    makes。
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，现在让我们回到`application.py`，看看购物车，看起来购物车支持get和post，所以也许我在使用相同的路由处理两种不同的事情，我们之前见过，函数称为购物车，这使得。
- en: sense this thing let's come back to this，just to initialize our session we'll。come
    back to that and it looks like，there's not much more to this program。if get is
    the verb let's focus on the，condition，what am i doing selecting star from，books
    where。the id of the book is in this，list of books well where is this list of，books
    coming from。
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在某种意义上，让我们回到这里，初始化我们的会话，我们将再回来看看，似乎这个程序没什么更多的。如果get是动词，让我们关注条件，我在选择从书籍中获取所有信息，书籍的ID在这份书籍列表中，那么这份书籍列表是从哪里来的呢？
- en: session quote unquote cart so in the，last example i use the session。to store
    your name and my name and，everyone's name on a per user basis。now i'm using it
    to store what we'll，call a shopping cart and indeed this is。the reason why there's
    a shopping cart，thanks to our friends at the theater。
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 会话所谓的购物车。在上一个例子中，我使用会话。来按用户存储你的名字、我的名字和每个人的名字。现在我用它来存储我们称之为购物车的东西，确实这是购物车的原因，多亏了我们在剧院的朋友。
- en: on stage this is how shopping carts are，implemented on websites。via cookies
    underneath the hood to give，you the illusion，of user specific variables dictionaries。there，so
    it looks like my session cart，key is going to have a value equal to。like the ids
    of a whole bunch of books i，don't know how they're there yet but，interpreting。
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一阶段，这就是如何在网站上实现购物车的。通过后台的 cookies 来给你提供用户特定变量字典的幻觉。因此，看起来我的会话购物车键的值将等于。一大堆书籍的
    ID，我还不知道它们是怎么来的，但，我正在解读。
- en: and then down here i'm just rendering a，template called cart。html。passing in
    the books from the database，so how do they get into the session well。if the user
    submits the form to the cart，i think this code is now relevant if the，user posts
    to。slash cart it looks like i'm going to，get the id，that they've typed in maybe
    maybe and if。
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 然后在这里我只是渲染一个名为 cart.html 的模板。传入数据库中的书籍，那么它们是如何进入会话的呢？如果用户提交表单到购物车，我想这段代码现在是相关的，如果用户发布到。/cart，看来我会获取他们输入的
    ID，也许，也许是。
- en: there is in fact an id and it's not，none it's not the default value of none。i'm
    going to go ah**d and append to the，cart，the id of that book and then i'm going。to
    redirect the user to cart，so i think that's enough complexity that。i think it's
    time to look at what's，do，exactly that let me scroll up and run，flask run。
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上有一个 ID，它不是，none，也不是默认值。我要去**添加到**购物车中，那本书的 ID，然后我将。重定向用户到购物车，所以我觉得这已经足够复杂了。我想是时候看看具体的操作了，让我向上滚动并运行，flask
    run。
- en: '![](img/42fc978d86c319937be2311efcbd6801_145.png)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_145.png)'
- en: let me go ah**d and open my url okay，it's not the prettiest of website but it。looks
    like my database has like all，seven harry potter books in it。and notice that each
    of them has a，button adds a cart add a car adds a cart。let's look at the html
    source to see，what mybooks。html template generated。
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 让我去**打开**我的 URL，好的，这个网站不是最美观的，但看起来我的数据库里有七本哈利·波特的书。注意每本书都有一个“添加到购物车”的按钮。让我们看看
    HTML 源代码，看看 mybooks.html 模板生成了什么。
- en: kind of interesting so there's that h1，books at the top，here's the first of
    my h2s with the。title of the book，notice that there is this funky symbol，here
    because it's like a curly quote so。this is one of those html entities that，lets
    you output symbols that you。couldn't type easily on your keyboard，here's my first
    form that i dynamically。
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 有点有趣，所以有这个 h1，书籍在顶部，这是我的第一个 h2，书名。注意这里有一个奇怪的符号，因为这是一个卷曲引号。这是一个 HTML 实体，让你可以输出你无法在键盘上轻易输入的符号，这是我的第一个表单，我动态创建的。
- en: outputted and i claimed earlier that i，what it says，it allows you to submit
    a piece of data。in a form that is visually hidden from，the user it's not a text
    box that they。can type into but it is there，and what's cool about this is that，notice
    i gave it a value of one。but in this form i gave that hidden，field a value of
    two。
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 输出，我之前声称它，我说它允许你以一种用户视觉上隐藏的形式提交一段数据，这不是一个用户可以输入的文本框，但它确实存在，令人兴奋的是，注意我给它一个值为一。但是在这个表单中我给那个隐藏字段一个值为二。
- en: '![](img/42fc978d86c319937be2311efcbd6801_147.png)'
  id: totrans-193
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_147.png)'
- en: down here a value of three well why is，moment。![](img/42fc978d86c319937be2311efcbd6801_149.png)
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里值为三，为什么呢，片刻。![](img/42fc978d86c319937be2311efcbd6801_149.png)
- en: let me run sqlite on my store。db，inside of this，has an id，a title and that's
    it let me do select。star from books，using sql lite3 and voila you see not，unique
    id。numbered aptly according to the order in，which they came out，as a coincidence
    but intentional and so。now down here。
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 让我在我的 store.db 上运行 sqlite，里面有一个 ID，一个标题，仅此而已，让我做 select。star from books，使用 sql
    lite3，瞧，看到不，唯一的 ID。根据它们出现的顺序适当地编号，巧合而非意图，现在在这里。
- en: '![](img/42fc978d86c319937be2311efcbd6801_151.png)'
  id: totrans-196
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_151.png)'
- en: let me go ah**d and move my terminal，down a little bit here。![](img/42fc978d86c319937be2311efcbd6801_153.png)
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 让我去**移动**我的终端，稍微往下。![](img/42fc978d86c319937be2311efcbd6801_153.png)
- en: let me go ah**d and rerun flask run，and if i now submit one of these forms。let's
    see what happens add to cart the，first book，interesting i've been redirected to。slash
    cart and notice i have an，ordered list in ol tag it would seem。with that first
    book let me go back to，the catalog uh prisoner of azkaban was。
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 让我去 ah**d 并重新运行 Flask，假如我现在提交其中一个表单，让我们看看会发生什么，将第一本书添加到购物车，奇怪的是我被重定向到了 /cart，并且注意我有一个有序列表（ol
    标签），看起来似乎是包含那本第一书。让我回到目录，呃《阿兹卡班的囚徒》是。
- en: pretty good let's add that to cart，now i see this here and notice this if i。i
    don't know why i'm holding up my hand，because i'm clearly using my other hand。![](img/42fc978d86c319937be2311efcbd6801_155.png)
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 很好，我们现在把它添加到购物车中，我在这里看到了这个，注意这一点，如果我……我不知道为什么我举起手，因为我显然在用另一只手。![](img/42fc978d86c319937be2311efcbd6801_155.png)
- en: but i'm reloading the page again and，again and it's showing me exactly。what
    is in my cart so where is this，code，this logic here under the post condition。is
    adding the id book number one book，number three，to my sessions cart key。now where
    did that card key come from，we come back to，i just need some way at the top of
    my。
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 但我一次又一次地重新加载页面，它显示的正是我购物车里的内容。那么这个代码，这个逻辑在哪里呢？在 POST 条件下，它正在将书籍 ID 1 和书籍 ID
    3 添加到我的会话购物车键中。那么这个购物车键是从哪里来的呢？我们回过头来，我只需要在我的页面顶部有某种方式。
- en: story short，there's not gonna be a key called cart，in the session unless you
    put it there。like flask doesn't come with name or，cart you have to put it there。so
    notice if cart quote unquote is not，yet in my session，i'm just initializing it
    to an empty。python list，and i could use a set i could use a，dictionary i could
    use anything i want i。
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 简而言之，除非你将其放在那里，否则会话中不会有名为 cart 的键。Flask 默认并没有这个名称或购物车，你必须将其放入。所以请注意，如果购物车（cart）还不在我的会话中，我只是将其初始化为空的
    Python 列表，我可以使用集合、字典，或者任何我想要的东西。
- en: chose to keep it simple with a list，but that's how i'm remembering what's in。![](img/42fc978d86c319937be2311efcbd6801_157.png)
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 选择简单地用列表来处理，但这就是我记住其中内容的方式。![](img/42fc978d86c319937be2311efcbd6801_157.png)
- en: my cart and unlike all of our previous，are now，trying to add things to your
    own cart。each of us is seeing different shopping，carts we all have different things
    in。our shopping cart if i keep reloading，doesn't matter how many of you are。trying
    to add books to your cart，you're only adding them literally to。
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 我的购物车，而不像我们之前的购物车，现在正试图将东西添加到你自己的购物车中。我们每个人看到的购物车都是不同的，我们的购物车里有不同的东西。如果我一直重新加载，无论有多少人试图将书籍添加到他们的购物车中，他们实际上只是在添加到。
- en: your cart and not mine because we all，have different，uh st*mps on our hand。questions
    about how now cookies，implement this more general purpose。anything on your end
    brian nothing here，all right so here too i would encourage。you when you next time
    you go on amazon，and like add something to your cart。
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 你的购物车，而不是我的，因为我们都有不同的，呃印记在手上。关于现在 Cookies 如何实现这一更通用的功能，有什么问题吗？布莱恩，你那边没有问题吗？好吧，所以这里我也鼓励你，下次去亚马逊时，添加一些东西到你的购物车。
- en: like literally that is all that's，happening underneath the hood and amazon。surely
    has other features you can change，quantities which is kind of nice you can。add
    things to wishlists which is nice，but all of that if you start looking at。the
    html and you look at the network，requests going back and forth。
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 说真的，这就是底层发生的所有事情，而亚马逊肯定还有其他功能，比如你可以改变数量，这挺不错的，你可以将东西添加到愿望清单，这也不错，但如果你开始查看 HTML，看看网络请求来回传输的数据。
- en: all of those features that we just take，for granted these days are just built
    on。very simple h well relatively simple，html forms and these inputs and these，buttons
    and on the server。these sessions and amazon might be using，a different language
    a different。framework but all of these ideas are the，same and so indeed this week
    is not。
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在理所当然的所有这些功能，其实都是基于非常简单的 HTML 表单和这些输入、按钮，以及服务器上的这些会话构建的。亚马逊可能使用不同的语言和框架，但所有这些理念都是相同的，所以实际上这周并不算复杂。
- en: about teaching you flask which，in a few years time will probably be。irrelevant
    it's about teaching these，ideas and principles，of these http requests and responses。these
    cookies these sessions，and the features that we can therefore，build on top of
    them。all right i think we have time for one，final example，that will now bring
    back our old friend。
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 关于教你 Flask 的内容，在几年后可能就不再相关了，关键是教这些 HTTP 请求和响应的理念和原则。这些 Cookies、会话，以及我们因此可以在其上构建的功能。好吧，我想我们还有时间做一个最后的示例，这将再次引入我们的老朋友。
- en: javascript from last week，on the server，to generate dynamically html and even。though
    my designs today have been，hideous you could certainly imagine，bootstrap。just
    to pretty things up like the forms，especially but that's not。uh anything new versus
    last week but，last week we did have，javascript as a programming language but。
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 上周的 JavaScript 在服务器上动态生成 HTML，尽管我今天的设计非常糟糕，你肯定可以想象使用 Bootstrap 使界面更美观，特别是表单，但这与上周相比并没有什么新鲜之处。上周我们确实有
    JavaScript 作为编程语言。
- en: it was a client-side programming，language at least in our usage thereof。it was
    a way of getting the users，browsers to run code conditions and。functions and loops
    and so forth，on the browser not on the server today。we've introduced python again
    so we have，server，and where the web gets really。
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一种客户端编程语言，至少在我们使用时是如此。这是让用户浏览器运行代码条件、函数和循环等的方式，在浏览器上而不是服务器上。今天我们又介绍了 Python，因此我们有了服务器，而网络真的变得复杂。
- en: interesting these days is when we marry，the so-called front end that the user，sees
    and the back end。which is the server the front end is the，user interface you and
    i interact with。the back end is the python code the sql，code that the humans never
    see but you，the programmer。c so what can we do to sort of combine，these two，back
    end，bring back。
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 如今有趣的是，当我们将用户看到的所谓前端与后端结合时。后端就是服务器，前端是你和我交互的用户界面。后端是程序员从未见过的 Python 代码和 SQL
    代码。因此，我们能做些什么来将这两者结合起来，让后端带回。
- en: our old database of shows and let me go，ahead and show you quickly what's in。this
    folder here in shows we have，uh sqlite3shows。db a smaller version of。what we played
    with a few weeks back，i've whittled this down just for sizes。sake to have only
    the names uh，only the ids of tv shows and the titles。
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的旧节目数据库，让我来快速展示这个文件夹中的内容。在节目中，我们有，呃 sqlite3shows。db，这是几周前我们玩过的一个较小版本，我为了节省空间，精简到只有电视节目的名称和
    ID。
- en: of tv shows and that's it i threw away，the ratings and the writers and the，directors
    and all of that。just to keep the focus only on the，titles because now we're going
    to start。sending a lot of data back and forth，over the internet，using python and
    javascript well let me。go ah**d now and open up this example。
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 电视节目的就是这些，我删除了评级、编剧和导演等等，只保留标题，因为现在我们要开始通过互联网使用 Python 和 JavaScript 发送大量数据。好吧，让我去**前进**并打开这个示例。
- en: '![](img/42fc978d86c319937be2311efcbd6801_159.png)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_159.png)'
- en: as made in advance and this is in shows，and we'll see a few files here，application。pi
    requirements。txt，and my templates which are index and，layout and search。![](img/42fc978d86c319937be2311efcbd6801_161.png)
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 这是提前制作的，展示中会看到一些文件，应用程序。pi requirements。txt，还有我的模板，分别是索引、布局和搜索。![](img/42fc978d86c319937be2311efcbd6801_161.png)
- en: all right so a bunch but not more than，we've really seen before。and let's go
    ah**d and i kind of cheated，earlier i didn't look at requirements，for good measure。here's
    just an example of what else，might be in requirements。txt cs50。library and flask
    and again those are，pre-installed in the ide，but we do this so that if you get。
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，虽然有一堆，但没有超过我们以前真正看到的。让我们去**前进**，我之前有点作弊，没查看要求，以便确认。这里是requirements.txt中可能还有的东西的一个例子，cs50库和
    Flask，这些在IDE中是预装的，但我们这样做是为了让你能得到。
- en: adventurous and try running these things，on your own mac or pc。you have all
    the configuration that you，need well let's start as before，and do this first。let
    me run this thing first so we can，actually see the app。![](img/42fc978d86c319937be2311efcbd6801_163.png)
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 冒险尝试在你的 Mac 或 PC 上运行这些东西。你拥有所需的所有配置，好的，让我们像以前一样开始，先做这个。让我先运行这个，以便我们可以实际看到应用程序。![](img/42fc978d86c319937be2311efcbd6801_163.png)
- en: works，so if i visit this let me go ah**d and，type in office，all right nothing
    happens yet let me。click search okay i then see a big，bulleted list of all，shows
    that mention office so not the。office per se but，an office and let me go ah**d
    and zoom，back here。let me point out that we're at the slash，route again the slash
    is there it's just，days。
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 工作正常，所以如果我访问这个，让我去**办公室**，好的，目前什么也没有发生，让我点击搜索，好的，然后我看到一个大项目列表，列出了所有提到办公室的内容，所以不是办公室本身，而是一个办公室，让我去**前进**并放大回来。让我指出我们又在根目录，斜杠在那里，它只是天数。
- en: and when i search for something like，office and hit enter，mark，q equals office
    so i borrowed some。inspiration from google，right i kind of cheated last week where。i
    really only implemented the front end，to google the html form。and then i let google
    find me some cats，and some dogs and so forth。
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 当我搜索像“office”这样的东西并按下回车时，标记q等于office，所以我借鉴了一些来自谷歌的**灵感**。对，我上周有点**作弊**，其实我只实现了前端的HTML表单，然后让我谷歌帮我找了一些猫和狗等等。
- en: but now as uh with python you now have，the ability to implement。both sides of
    that application so if i，look at the source code here。notice that i seem to be
    returning a，really big unordered list of list items。that represent again all the
    titles of，office related shows，all right this is fine and good but this。
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 但现在，随着Python的出现，你可以实现该应用程序的两个方面，所以如果我查看这里的源代码，注意到我似乎返回了一个非常大的无序列表，列表项代表所有与office相关的节目标题，这很好，但这个。
- en: is sort of like old school，web programming where you fill out a，form you hit
    enter and boom。but these days recall most anytime you，visit a website lots is
    happening at。once you've got some auto complete going，on here you've got chat
    messages。popping up here you've got a map over，here that's automatically moving
    and the，little car for uber。
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 这有点像老派的网页编程，你填写表单，按下回车，**轰**。但如今，你访问一个网站时，很多事情同时发生，你在这里有自动完成功能，聊天信息在这里弹出，地图在这里自动移动，还有优步的小车。
- en: is moving around at the same time like，the web of today web 2。0 if you will。which
    is not a technical term as much as，it is a buzzword，refers to just increasingly
    dynamic web。interactions between users and computers，and with javascript and with
    your own。backend be it python or something else，you can now begin to build these
    more。
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 在同时移动，就像今天的网络，**Web 2.0**，这并不是一个技术术语，更多的是一个流行词，指的是用户与计算机之间越来越动态的网络互动，借助JavaScript和你自己的后端，无论是Python还是其他东西，你现在可以开始构建这些更动态的接口。
- en: dynamic interfaces as well，wouldn't it be cool if when i start，typing o f。![](img/42fc978d86c319937be2311efcbd6801_165.png)
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我开始输入o f的时候，真不错！[](img/42fc978d86c319937be2311efcbd6801_165.png)
- en: f i c e we actually immediately saw the，results and we've seen this。already
    last week remember that i，start with a，and i used our really large dictionary，from
    pset five。words，this database of titles is several，megabytes large，and i don't
    necessarily want to send the。entire database of movies to the browser，one because
    of performance and size and。
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: f i c e我们实际上立即看到了结果，我们上周已经看到过这个。记得我从a开始，使用了我们来自pset五的大字典，这个标题数据库有好几兆大，我不想把整个电影数据库发送到浏览器，原因是性能和大小。
- en: maybe two intellectual property i don't，database，you can imagine wanting to
    keep a little。more control over the data，you're providing requiring users to log。in
    or pay for your service or the like，so there's reasons where you might want。the
    browser to talk to the server and，for，not the whole thing so let's do that，such
    a way。
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 也许涉及到两个知识产权，我没有数据库，你可以想象希望对所提供的数据保持更多控制，要求用户登录或支付服务费等，所以有理由让浏览器与服务器进行交互，而不是**整个过程**，所以我们就这样做。
- en: that it actually does things more，dynamically but let's first understand，how
    it works。so i have a couple of libraries here，cs50 is in flask，i'm configuring
    flask here i'm then。configuring my database here，down here i just have a very
    simple，route that renders，index。html which apparently let's take a，look has，that
    form very simple very similar to。
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 它实际上做得更动态一些，但让我们先理解它是如何工作的。我这里有几个库，cs50在Flask中，我在这里配置Flask，然后在这里配置我的数据库，在这里我只有一个非常简单的路由，渲染index.html，显然我们来看一下，有那个表单，非常简单，和。
- en: last week very similar to today all of，the forms we've done thus far。here's
    that name equals q and everything，else is pretty boilerplate so let's get。rid
    of that file now，the layout also pretty boilerplate it，looks like things in the
    past so let's。index，to be the search，route and this was the piece we were，missing
    last week when we used google。
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 上周和今天非常相似，到目前为止我们做的所有表单。这里是name等于q，其他都是**模板**，所以现在让我们把那个文件去掉，布局也相当模板化，看起来和以前的东西很像，所以让我们把索引设为搜索路由，这正是我们上周使用谷歌时所缺少的部分。
- en: dogs，here i have a route called search a，function called search that will be，called
    for that route。and here is kind of a nice amalgam of，sql and python，i'm going
    to give myself a variable。called shows which is going to be the，result of all
    of the rows that come back，when i execute this。select star from shows where title，is
    like this placeholder question mark。
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 这里我有一个叫做`search`的路由，一个叫做`search`的函数，将被调用。这里是SQL和Python的一个很好的结合，我将给自己一个变量，叫做`shows`，它将是当我执行这个时，所有返回行的结果。`select
    * from shows where title is like`这个占位符问号。
- en: now what am i going to plug in，notice it's a little cryptic at first。glance
    but i seem to be taking the，user's input，q from request。args。get so that's using。get
    apparently because of the word args，it's not form now it's request。args so。i'm
    getting the user's q，value which was office in my case and，just as a quick check。
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我要插入什么，注意这开始时有点神秘。看起来我似乎在获取用户的输入，`q`来自`request.args.get`，所以这是在使用`get`，显然因为有`args`这个词，它不是`form`而是`request.args`。我在获取用户的`q`值，在我的例子中是办公室，并且，快速检查一下。
- en: what's with the percent signs on the，left and the right，because we've seen a
    lot of percent。signs today but these are different，perhaps in the chat what do
    these。brian you want to echo the consensus，yeah people are saying they're sequel，placeholders。yeah
    so pl sql wild card placeholders，that means zero or more characters to，is why。
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 左右的百分号是什么，因为我们今天看到很多百分号，但这些是不同的，也许在聊天中，这些是什么？布莱恩，你想回声一下共识吗？是的，人们说这是SQL占位符。是的，所以PL
    SQL通配符占位符，意味着零个或多个字符，正是原因。
- en: i was getting mass matches with office，at the beginning of the word。office at
    the end and office in the，middle if i really wanted to be anal i，require。only
    a perfect match but that's not my，goal with this particular implementation。once
    i get back all of whoops once i get，back all of these rows。
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 在单词开头，我得到与办公室的大量匹配。在结尾和中间，如果我真的想较真，我只需要完美匹配，但这不是我这个实现的目标。一旦我拿回所有，哎呀，一旦我拿回所有这些行。
- en: i have here align return render template，search。html passing in all of those。shows
    so the last thing to look at is，search。html，it's pretty simple and surely like
    an。hour ago this would have looked super，look cryptic，but once you start using
    the syntax。yourself you'll see that oh，this is just a template that is allowing，me
    to dynamically output。
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 我在这里对齐返回渲染模板`search.html`，传入所有的`shows`，所以最后要看的就是`search.html`，这很简单，确实像一个小时前这看起来会非常，加密，但一旦你开始使用这个语法，你会发现，哦，这只是一个模板，允许我动态输出。
- en: an unordered list of li tags，show，that's been passed into this template。all
    right so now then the final flourish，let's go about enhancing this，application，the
    same way。but instead all of the logic actually，happens，between javascript and
    the back end i'm。going to go ah**d and do this first i'm，going to go back to application。pi
    here。
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 一个无序列表的`li`标签，展示，这已被传递到这个模板中。好吧，所以现在最后的点缀，让我们以同样的方式增强这个应用，但所有逻辑实际上发生在JavaScript和后端之间。我将去**做**这个，首先我要回到应用`pi`这里。
- en: and instead of this here i'm going to go，ahead and do the following i'm going
    to，go ah**d and。instead of rendering a template i'm，going to use a new function
    called，jsonify。it's kind of a funny name and i have to，import it up here so let
    me import，jsonify。it turns out that jsonify or json，means javascript object notation
    and。
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 而不是这里的内容，我将继续进行以下操作，我将去**做**这个，而不是渲染一个模板，我将使用一个新函数，叫做`jsonify`。这是一个有趣的名字，我需要在这里导入它，所以让我导入`jsonify`。结果表明，`jsonify`或`json`意味着JavaScript对象表示法。
- en: we'll see what it looks like in a moment，but the world years ago standardized
    on。a format for transmitting data between，lightweight，text format json or json
    javascript。object notation，jsonify is a flask function that takes，a python list
    or a python dictionary and。converts it into json format so we'll，see this in just
    a moment，so notice that i'm now returning the。
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 我们一会儿就会看到它的样子，但多年前世界标准化了一种在轻量级文本格式之间传输数据的格式，JSON或JavaScript对象表示法。`jsonify`是一个Flask函数，它接受一个Python列表或字典，并将其转换为JSON格式，所以我们一会儿就会看到这个，所以请注意，我现在返回的是。
- en: jsonification，of the shows variable which recall is，just the rows that came
    back from，db。execute。so let's see this in action i'm actually，going to go to my。![](img/42fc978d86c319937be2311efcbd6801_167.png)
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: '`shows`变量的JSON化，回想一下，这只是来自`db.execute`的行。让我们看看这个实际操作，我实际上要去我的。![](img/42fc978d86c319937be2311efcbd6801_167.png)'
- en: let me go ah**d and restart the server，because i've made some changes。let me
    go ah**d and now go to the server，slash search，question mark q equals office so
    i'm，enter。notice what comes back it's kind of，crazy cryptic，at first glance here
    but notice this is。indeed what's called，javascript object notation there's a，squ*re
    bracket over here at top left。
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 让我前进并重启服务器，因为我做了一些更改。让我前进，现在访问服务器，斜杠search，问号q等于office，所以我，输入。注意返回的内容，乍一看有点疯狂，隐晦，但请注意，这确实被称为，javascript对象表示法，这里有一个左上角的方括号。
- en: this means hey browser here comes a list，there's a curly brace which means hey。browser
    here comes a dictionary，otherwise known as an，object in javascript quote unquote
    id。is the key in this dictionary 108878，is the value of that key here comes the。second
    key quote unquote title，the value of which is nice day at the，office quote unquote。
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着，嘿浏览器，这里有一个列表，有一个大括号，这意味着，嘿。浏览器，这里有一个字典，也被称为一个，javascript中的对象，引用id。是这个字典中的键，108878，是该键的值，这里有第二个键，引用title，该值是“办公室的美好一天”。
- en: then there's a closed curly brace which，is end of the dictionary。or end of the
    object a comma and then，there's a whole bunch of these other。![](img/42fc978d86c319937be2311efcbd6801_169.png)
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 然后有一个闭合的大括号，表示字典的结束。或对象的结束，一个逗号，然后，有很多其他的。![](img/42fc978d86c319937be2311efcbd6801_169.png)
- en: dictionaries so in short all we're，looking at here，is a very raw text-based
    format of a。python dictionary converted to again，something called json javascript
    object。notation which literally this is about，it json uses double quotes colons。curly
    braces and squ*re brackets and，that's about it，to represent information so this
    is。
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 字典，因此简而言之，我们在这里看到的，都是一种非常原始的基于文本的格式，python字典再转换为一种叫做json的东西，javascript对象。表示法，字面意思就是，json使用双引号、冒号、大括号和方括号，仅此而已，来表示信息。
- en: great but this is a horrible horrible，this mess，but that's not the point the
    point now。is to have our back end return，a json array of search results and let，the
    browser。convert it into html recall from last，can mutate，or change your dom the
    document object。model the tree in memory，and what you can do in particular with，javascript
    is add more。
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 很好，但这太糟糕，太糟糕了，这一团糟，但这不是重点，重点是现在。是让我们的后端返回一个搜索结果的json数组，让浏览器。将其转换为html，回想一下，最后，能够改变或更改你的dom，文档对象。模型在内存中的树，特别是你可以用，javascript添加更多。
- en: nodes to that tree you can add more，structure，so yes hello we just got hi david
    hi。david hi david via，thank you very much okay so let me，minimize that，and let
    me open up now um not。search。html which we're not going to，bother using anymore，but
    instead index。html and，index。html you know what i'm going to go，ahead and borrow
    some code here，i'm going to go ah**d and open up。
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 向那棵树添加节点，你可以增加更多的结构，所以是的，您好，我们刚刚收到了，嗨，大卫，嗨。大卫，嗨，大卫，谢谢你，非常好，所以让我，最小化它，接下来我打开，嗯，not。search。html，我们不再，使用它，而是index。html，知道吗，我将借用一些代码，前进并打开。
- en: index。html and i'm going to simplify，this let me stop the server。i'm going to
    go ah**d and get rid of my，layout template，and i'm going to get rid of my search。anymore。![](img/42fc978d86c319937be2311efcbd6801_171.png)
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: index。html，我将简化，这让我停止服务器。我将前进并去掉我的，布局模板，我将去掉我的搜索。不再使用了。![](img/42fc978d86c319937be2311efcbd6801_171.png)
- en: so i'm going to simplify this program，and focus entirely now。![](img/42fc978d86c319937be2311efcbd6801_173.png)
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 所以我将简化这个程序，现在完全专注于此。![](img/42fc978d86c319937be2311efcbd6801_173.png)
- en: here，i need to involve some javascript now so，how am i going to go about。doing
    this well first i need to go ah**d。![](img/42fc978d86c319937be2311efcbd6801_175.png)
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，我需要引入一些javascript，所以，我该如何进行。首先我需要前进。![](img/42fc978d86c319937be2311efcbd6801_175.png)
- en: and bar use a library，uh called jquery and jquery is something，that's a little。decreasing
    in popularity but it's still，used by bootstrap and so we'll continue。using it
    because you're already，including it in fact，for some of your other examples but
    we。need a different version of it so i'm，going to quickly google。
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 并且使用一个库，叫做jquery，jquery是一种，逐渐失去人气的东西，但仍然，bootstrap使用它，因此我们将继续。使用它，因为你已经在某些其他示例中包含它，但我们。需要它的不同版本，所以我将快速搜索。
- en: '![](img/42fc978d86c319937be2311efcbd6801_177.png)'
  id: totrans-246
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42fc978d86c319937be2311efcbd6801_177.png)'
- en: jquery cdn i'm going to go to this，website and long story short there's a，use。by
    just grabbing their script tag and，using it inside of your own so i'm going。to
    go ah**d here and let me just clean，up the tag so it's all in one long if，ugly
    line。but by copying and pasting that line，which we'll typically do for you in
    the。
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: jquery cdn我将去这个网站，长话短说，使用。通过抓取他们的脚本标签，并在自己的代码中使用，所以我将去**清理这个标签**，使其成为一行长的丑陋行。但通过复制并粘贴那行，通常我们会为你在问题集和分发代码中做。
- en: problem sets and distribution code，i'm going to go ah**d and copy that，library
    into my file so that。it's among the libraries i can use and，last week，and i'm
    going to add a script tag inside。of my own page's head，and then down here let's
    see where do i，want to do this actually you know what。let me go ah**d and do this
    a little，differently just for consistency with，what you'll see online。
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 我将**把这个库复制到我的文件中**，使其成为我可以使用的库之一，上周，我将添加一个脚本标签到我页面的头部，然后在这里，让我们看看我想在哪里做这个，实际上你知道吗。让我去**做这个稍微不同**，以便与在线上看到的一致。
- en: i'm going to go ah**d and do this all in，my body so we don't have to worry about。things
    being out of order we'll indeed，keep it all inside of the page's body，this。in
    input autocomplete equals quote，unquote off，a，placeholder of query and then a
    type。of text so i'm going to have a very，simple search box there and i'm going
    to，have an unordered list。
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 我将去**在我的主体中全部处理这个**，这样我们就不必担心事情的顺序问题，确实会保持在页面的主体内，这。输入自动完成等于引号，未引用关闭，提示为查询，然后是文本类型。所以我将有一个非常简单的搜索框，并且我将有一个无序列表。
- en: with nothing in it and that's deliberate，for now then i'm going to import this。the
    jquery library and then down here，inside of my own script tags this is，where i'm
    going to make。write the actual code i'm going to do，let input equals document。get。let's
    do query selector just like last，week and let me go ah**d and select my，input
    tag。
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 目前里面什么都没有，这是故意的，然后我将导入这个。jquery库，然后在这里，我的脚本标签内，这是我要做的。编写实际代码，让输入等于document。获取。让我们像上周一样做查询选择器，让我去**选择我的输入标签**。
- en: this works i don't need an id or any，class because at the moment i only have，unquote
    input。will give me that tag specifically let，event，event，recall from last week
    our discussion of。events and key up like the user touching，and letting go of the
    key。is one of the events you can listen for，and anytime the user does that i want
    to，call the following。
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 这项工作我不需要id或任何类，因为目前我只有，未引用的输入。将特定地给我那个标签，让事件，事件，回忆一下上周我们讨论的。事件和键盘抬起，用户触碰并松开键盘。是你可以监听的事件之一，每当用户这样做时，我想调用以下内容。
- en: function and it's an anonymous function，which we saw last week too。and what
    i'm going to do inside of this，anonymous function is the following。i'm going to
    call a new function the，only new javascript function today。called dollar sign
    underscore gets this，is shorthand notation for。
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个匿名函数，我们上周也看到过。我要在这个匿名函数内部做的就是。调用一个新的函数，今天唯一的新javascript函数。称为美元符号下划线获取，这是的简写符号。
- en: jquery dot get but i'm sorry dollar sign，dot get is shorthand for jquery。get。and
    i'm going to go ah**d and get the，following i'm going to get a，by，and put。![](img/42fc978d86c319937be2311efcbd6801_179.png)
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: jquery点获取，但抱歉，美元符号点获取是jquery的简写。我将去**获取以下内容**，我要获取一个，由，放入。![](img/42fc978d86c319937be2311efcbd6801_179.png)
- en: input dot value so notice with this line，of code this javascript string。i'm
    kind of dynamically constructing in，javascript code。![](img/42fc978d86c319937be2311efcbd6801_181.png)
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 输入点值，所以注意这行代码，这个javascript字符串。正在动态构造javascript代码。![](img/42fc978d86c319937be2311efcbd6801_181.png)
- en: the url that i want to request，shows from search question mark q。equals whatever
    the value of the input，box was that the user，typed something into and the way
    this。dollar sign dot get function works is it，supports what's called a callback。a
    callback is a function that will，eventually be called，when it has an answer for
    you and this。
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 我想请求的URL，从搜索问号q显示。等于用户输入框的值，即用户键入的内容，而这个。美元符号点获取函数的工作方式是，它支持所谓的回调。回调是一个将在有答案时，最终被调用的函数。
- en: is important on the web the internet can，sometimes be slow，and you might want
    to write code that。contacts another server like i'm about，to do now and that server
    might be slow。or the internet connection might be slow，and it would be annoying
    if your entire，browser froze。while you waited and waited and waited，for the server's
    response to come back，have the data。
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 这在网络上是重要的，互联网有时会很慢，你可能想编写代码来联系另一个服务器，就像我现在要做的那样，而那个服务器可能会很慢，或者互联网连接可能很慢，如果你整个平台都冻结，那是非常烦人的，你在等待服务器的响应和数据。
- en: call me back so to speak sort of，metaphorically on the phone。call me back by
    calling this function so，what function do i want it to call。i wanted to call this
    anonymous function，that's going to take as inputs。an argument called shows but
    i could，call that anything i want，and i'm going to do this i'm going to。
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 可以说，给我回电，用一种比喻的方式。通过调用这个函数来回电，那么我想要它调用什么函数呢？我想要调用这个匿名函数，它将接收一个名为shows的参数，但我可以将其称为我想要的任何名称，我将这样做。
- en: create an html string，that's initially nothing quote unquote，javascript。letting
    a variable called id equal to，whatever id is in the shows that just，came back
    to me。and now inside of this for loop let me，go ah**d and inside of this for loop。to
    create a title that's equal to shows，which is again the data that came back，on
    the uh。
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个html字符串，起初是空的，引号javascript。让一个名为id的变量等于刚刚返回给我的shows中的任何id。现在在这个for循环内部，让我去啊**d，并且在这个for循环内部创建一个等于shows的标题，这再次是刚刚返回的数据。
- en: came back via that callback so to speak，shows。id，dot title and，semicolon then
    i'm going to do html。plus equals quote unquote，list item plus title plus，here，lastly
    i'm going to do，document。queryselect。selector quote-unquote ul，dot inner html
    gets html all right this。is definitely the craziest thing we've，done thus far
    today and it's tying。
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 通过那个回调返回，所谓的，shows.id，点标题和分号，然后我将做html。加等于引号，无序列表项加标题加这里，最后我将做document。queryselect。选择器引号
    ul，点内html获取html。好吧，这绝对是我们今天所做的最疯狂的事情，它将连接起来。
- en: together so many different ideas not to，mention new syntax so。of all the examples
    don't worry too much，if this is just，a lot at once the goal really now is not。to
    introduce you to this syntax so that，you can repeat it tomorrow but rather。the
    idea of what we're doing so what are，we doing we have a simple web page with，a
    text input。
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 将如此多不同的想法结合在一起，更不用说新的语法了。所以在所有的示例中，不用太担心，如果这一切一次性太多，真正的目标现在不是向你介绍这种语法，以便你明天可以重复，而是我们正在做的事情的想法。那么我们在做什么呢？我们有一个简单的网页，里面有一个文本输入框。
- en: we've got a simple web page with an，unordered list that's currently empty。below
    that we're including this，third-party javascript library called，jquery which bootstrap。also
    happens to use for some of its，graphical components，then i have my own javascript
    code that。first declares a variable that gives me，access to the input tag on my
    own web，page a few lines above。
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有一个简单的网页，其中有一个当前为空的无序列表。在下面，我们包含了这个第三方JavaScript库，名为jquery，它也被bootstrap用于一些图形组件，然后我有自己的JavaScript代码，首先声明一个变量，让我可以访问我自己网页上方的输入标签。
- en: i'm then using this fancy function，dollar sign get to do what's called an，ajax
    call，page。to make additional http requests，programmatically to a server it is，allowing
    this is how。all websites today get your chat，on some platform，it's how when you're
    typing in uh your。address it can auto complete your，address based on the entire
    globe's。
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 我接下来使用这个花哨的函数，美元符号来进行所谓的ajax调用页面。为了程序化地向服务器发出额外的http请求，这就是允许的方式。今天所有网站如何获取你的聊天信息，在哪个平台上，你输入地址时它如何基于整个地球的内容进行自动补全。
- en: worth of addresses it's how google，search autocomplete works as well，dollarsign。get
    is a function built into，jquery that's using some standard，javascript functionality。that's
    going to allow me to visit the，url that ends with，search question mark q equals
    whatever。the human typed in，and when the response is ready this，called back。
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 地址的价值，这就是谷歌搜索自动补全的工作原理，美元符号。get是一个内置于jquery中的函数，它使用一些标准的JavaScript功能。它将允许我访问以search
    question mark q equals人类输入的内容结尾的url，当响应准备好时，这被回调。
- en: and it's going to be handed an input an，argument called shows，that is going
    to equal this stuff this。to receive，list，or an array inside of which is a list
    of，dictionaries or objects。with two keys id and title this let me，stipulate happens
    to be the syntax in，data structure。and this happens to be the syntax in，javascript
    for allowing me to create。
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 它将会接收一个名为shows的输入参数，将等于这个东西，这。来接收列表，或者说是一个数组，里面是一个字典或对象的列表。包含两个键id和title，这让我说明一下，这是数据结构中的语法。这是javascript中的语法，让我能够创建。
- en: one line after another another li，another li appending it，using concatenation
    to this variable。called html and this very last line of，code says to the browser。go
    select me that ul and plug into its，inner html the contents of it the value，of
    my variable。and now crossing my fingers i did not，screw up syntactically。
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 一行接着另一行，另一个li，另一个li使用连接将其追加到这个变量中。叫做html，而这最后一行代码对浏览器说。去选择我那个ul，并将其内容插入到其inner
    html中，赋值为我的变量。现在我希望我没有在语法上搞错。
- en: let me go ah**d and do flask run i still，need to run flask because i do have
    a。![](img/42fc978d86c319937be2311efcbd6801_183.png)
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 让我继续做flask run，我仍然需要运行flask，因为我确实有一个。![](img/42fc978d86c319937be2311efcbd6801_183.png)
- en: back end here，let me go back to my browser and reload，the slash route。let me
    go ah**d now and type in o f，browser，let me look at my console that's okay，me
    type in。![](img/42fc978d86c319937be2311efcbd6801_185.png)
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 后端在这里，让我回到浏览器并重新加载，斜杠路由。让我现在继续输入o f，浏览器，让我看看我的控制台，没问题，我输入。![](img/42fc978d86c319937be2311efcbd6801_185.png)
- en: f let me look at this nothing's coming，back。![](img/42fc978d86c319937be2311efcbd6801_187.png)
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: f，让我看看这个，什么都没有回来。![](img/42fc978d86c319937be2311efcbd6801_187.png)
- en: office shows why is it nothing coming，oh wait it was just slow oh all right，notice。everything
    i've typed thus far or，everything i'm seeing thus far matches。the word off and
    if i continue this off，this and let it search and let the。internet do its thing
    now indeed，it's been whittled down to a list of。
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 办公室显示为什么没有任何返回，哦等一下，只是慢哦，好的，注意。我到目前为止输入的所有内容，或者说我目前看到的所有内容都匹配。单词off，如果我继续这个off，搜索，让互联网做它的事情，现在确实，它缩小到一个列表。
- en: office matches and notice again if i go，to the inspect tab，and then lastly i
    go to network and let。it again，notice that that disappeared let me do，the e again
    here，under inspect。let me go ah**d and type in office，notice here that every keystroke
    i typed。triggered o-f-f-i-c-e to be executed，triggered an ajax call that is an
    http。
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 办公室匹配，再次注意，如果我去检查选项卡，然后最后我去网络，注意它又消失了，让我在检查下再做一次。让我继续输入办公室，注意这里我输入的每一个按键。都触发了o-f-f-i-c-e的执行，触发了一个ajax调用，也就是http。
- en: call to the server and notice that if i，click on the last one there。scroll down
    i will see not only my，on the response，i'll indeed see this big json array of。![](img/42fc978d86c319937be2311efcbd6801_189.png)
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 服务器的调用，注意如果我点击最后一个。向下滚动，我不仅会看到我的响应，我确实会看到这个大json数组。![](img/42fc978d86c319937be2311efcbd6801_189.png)
- en: all of the data and it's actually rather，fortuitous that it was slow because
    we。were going to end with one demo，for instance if i wanted was curious to。know
    being indoors all day what the，weather is like i might maybe。call brian up on
    this here telephone，hello hi brian uh do you know what the。
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 所有数据，其实慢下来是相当幸运的，因为我们。将要结束于一个演示，比如如果我想知道整天待在室内，天气如何，我可能会。给布莱恩打电话，您好，布莱恩，您知道什么？
- en: uh the weather is like outside today，uh i haven't been outside in a little，back。okay
    and notice it would be annoying if，i had to wait on the phone for him to go。outside
    so i'm gonna hang up，and i'm just gonna wait for him to call。me back and that's
    exactly what's，happening in my code when i pass this，anonymous function。
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 嗯，今天外面的天气如何，我已经有点没去外面了。好的，如果我必须在电话上等他去外面，那会很烦人，所以我会挂断电话，等他给我回电话。我的代码也是如此，当我传递这个匿名函数时。
- en: to this get function and the get here。![](img/42fc978d86c319937be2311efcbd6801_191.png)
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 这个获取函数和这里的获取。![](img/42fc978d86c319937be2311efcbd6801_191.png)
- en: browser，call this function once you have the，answer much like hopefully。brian's
    about to have the ant and indeed，hello hi uh i looked up the weather uh，fall day
    today。wonderful well thank you so much and，that is it for cs50 we will see you
    all。![](img/42fc978d86c319937be2311efcbd6801_193.png)
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 浏览器，一旦你有了答案就调用这个函数，希望如此。布莱恩即将有蚂蚁，确实，您好，我查看了天气，今天是秋天。太好了，非常感谢，这就是cs50的全部内容，我们下次再见。![](img/42fc978d86c319937be2311efcbd6801_193.png)
